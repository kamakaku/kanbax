var LS=Object.defineProperty;var PS=(e,t,n)=>t in e?LS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var he=(e,t,n)=>PS(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function MS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Px={exports:{}},Uu={},Mx={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),$S=Symbol.for("react.portal"),US=Symbol.for("react.fragment"),BS=Symbol.for("react.strict_mode"),HS=Symbol.for("react.profiler"),FS=Symbol.for("react.provider"),zS=Symbol.for("react.context"),VS=Symbol.for("react.forward_ref"),WS=Symbol.for("react.suspense"),KS=Symbol.for("react.memo"),GS=Symbol.for("react.lazy"),$y=Symbol.iterator;function qS(e){return e===null||typeof e!="object"?null:(e=$y&&e[$y]||e["@@iterator"],typeof e=="function"?e:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ux=Object.assign,Bx={};function ba(e,t,n){this.props=e,this.context=t,this.refs=Bx,this.updater=n||$x}ba.prototype.isReactComponent={};ba.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ba.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hx(){}Hx.prototype=ba.prototype;function Pp(e,t,n){this.props=e,this.context=t,this.refs=Bx,this.updater=n||$x}var Mp=Pp.prototype=new Hx;Mp.constructor=Pp;Ux(Mp,ba.prototype);Mp.isPureReactComponent=!0;var Uy=Array.isArray,Fx=Object.prototype.hasOwnProperty,$p={current:null},zx={key:!0,ref:!0,__self:!0,__source:!0};function Vx(e,t,n){var s,a={},o=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)Fx.call(t,s)&&!zx.hasOwnProperty(s)&&(a[s]=t[s]);var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];a.children=h}if(e&&e.defaultProps)for(s in u=e.defaultProps,u)a[s]===void 0&&(a[s]=u[s]);return{$$typeof:fl,type:e,key:o,ref:l,props:a,_owner:$p.current}}function JS(e,t){return{$$typeof:fl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Up(e){return typeof e=="object"&&e!==null&&e.$$typeof===fl}function QS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var By=/\/+/g;function Hh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QS(""+e.key):t.toString(36)}function Qc(e,t,n,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case fl:case $S:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+Hh(l,0):s,Uy(a)?(n="",e!=null&&(n=e.replace(By,"$&/")+"/"),Qc(a,t,n,"",function(f){return f})):a!=null&&(Up(a)&&(a=JS(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(By,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",Uy(e))for(var u=0;u<e.length;u++){o=e[u];var h=s+Hh(o,u);l+=Qc(o,t,n,h,a)}else if(h=qS(e),typeof h=="function")for(e=h.call(e),u=0;!(o=e.next()).done;)o=o.value,h=s+Hh(o,u++),l+=Qc(o,t,n,h,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ec(e,t,n){if(e==null)return e;var s=[],a=0;return Qc(e,s,"","",function(o){return t.call(n,o,a++)}),s}function XS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},Xc={transition:null},YS={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Xc,ReactCurrentOwner:$p};function Wx(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ec,forEach:function(e,t,n){Ec(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ec(e,function(){t++}),t},toArray:function(e){return Ec(e,function(t){return t})||[]},only:function(e){if(!Up(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=ba;ce.Fragment=US;ce.Profiler=HS;ce.PureComponent=Pp;ce.StrictMode=BS;ce.Suspense=WS;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YS;ce.act=Wx;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=Ux({},e.props),a=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=$p.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in t)Fx.call(t,h)&&!zx.hasOwnProperty(h)&&(s[h]=t[h]===void 0&&u!==void 0?u[h]:t[h])}var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];s.children=u}return{$$typeof:fl,type:e.type,key:a,ref:o,props:s,_owner:l}};ce.createContext=function(e){return e={$$typeof:zS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:FS,_context:e},e.Consumer=e};ce.createElement=Vx;ce.createFactory=function(e){var t=Vx.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:VS,render:e}};ce.isValidElement=Up;ce.lazy=function(e){return{$$typeof:GS,_payload:{_status:-1,_result:e},_init:XS}};ce.memo=function(e,t){return{$$typeof:KS,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Xc.transition;Xc.transition={};try{e()}finally{Xc.transition=t}};ce.unstable_act=Wx;ce.useCallback=function(e,t){return St.current.useCallback(e,t)};ce.useContext=function(e){return St.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return St.current.useDeferredValue(e)};ce.useEffect=function(e,t){return St.current.useEffect(e,t)};ce.useId=function(){return St.current.useId()};ce.useImperativeHandle=function(e,t,n){return St.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return St.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return St.current.useReducer(e,t,n)};ce.useRef=function(e){return St.current.useRef(e)};ce.useState=function(e){return St.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return St.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return St.current.useTransition()};ce.version="18.3.1";Mx.exports=ce;var m=Mx.exports;const Yc=MS(m);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZS=m,eN=Symbol.for("react.element"),tN=Symbol.for("react.fragment"),nN=Object.prototype.hasOwnProperty,sN=ZS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rN={key:!0,ref:!0,__self:!0,__source:!0};function Kx(e,t,n){var s,a={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)nN.call(t,s)&&!rN.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:eN,type:e,key:o,ref:l,props:a,_owner:sN.current}}Uu.Fragment=tN;Uu.jsx=Kx;Uu.jsxs=Kx;Px.exports=Uu;var r=Px.exports,_f={},Gx={exports:{}},Xt={},qx={exports:{}},Jx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,se){var ne=F.length;F.push(se);e:for(;0<ne;){var De=ne-1>>>1,ze=F[De];if(0<a(ze,se))F[De]=se,F[ne]=ze,ne=De;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var se=F[0],ne=F.pop();if(ne!==se){F[0]=ne;e:for(var De=0,ze=F.length,ai=ze>>>1;De<ai;){var _t=2*(De+1)-1,_a=F[_t],Te=_t+1,vn=F[Te];if(0>a(_a,ne))Te<ze&&0>a(vn,_a)?(F[De]=vn,F[Te]=ne,De=Te):(F[De]=_a,F[_t]=ne,De=_t);else if(Te<ze&&0>a(vn,ne))F[De]=vn,F[Te]=ne,De=Te;else break e}}return se}function a(F,se){var ne=F.sortIndex-se.sortIndex;return ne!==0?ne:F.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var h=[],f=[],g=1,y=null,v=3,S=!1,N=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(F){for(var se=n(f);se!==null;){if(se.callback===null)s(f);else if(se.startTime<=F)s(f),se.sortIndex=se.expirationTime,t(h,se);else break;se=n(f)}}function T(F){if(_=!1,j(F),!N)if(n(h)!==null)N=!0,dr(M);else{var se=n(f);se!==null&&hr(T,se.startTime-F)}}function M(F,se){N=!1,_&&(_=!1,b(H),H=-1),S=!0;var ne=v;try{for(j(se),y=n(h);y!==null&&(!(y.expirationTime>se)||F&&!ut());){var De=y.callback;if(typeof De=="function"){y.callback=null,v=y.priorityLevel;var ze=De(y.expirationTime<=se);se=e.unstable_now(),typeof ze=="function"?y.callback=ze:y===n(h)&&s(h),j(se)}else s(h);y=n(h)}if(y!==null)var ai=!0;else{var _t=n(f);_t!==null&&hr(T,_t.startTime-se),ai=!1}return ai}finally{y=null,v=ne,S=!1}}var L=!1,P=null,H=-1,ue=5,re=-1;function ut(){return!(e.unstable_now()-re<ue)}function mn(){if(P!==null){var F=e.unstable_now();re=F;var se=!0;try{se=P(!0,F)}finally{se?gn():(L=!1,P=null)}}else L=!1}var gn;if(typeof w=="function")gn=function(){w(mn)};else if(typeof MessageChannel<"u"){var os=new MessageChannel,Na=os.port2;os.port1.onmessage=mn,gn=function(){Na.postMessage(null)}}else gn=function(){R(mn,0)};function dr(F){P=F,L||(L=!0,gn())}function hr(F,se){H=R(function(){F(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){N||S||(N=!0,dr(M))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(F){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var ne=v;v=se;try{return F()}finally{v=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ne=v;v=F;try{return se()}finally{v=ne}},e.unstable_scheduleCallback=function(F,se,ne){var De=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?De+ne:De):ne=De,F){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=ne+ze,F={id:g++,callback:se,priorityLevel:F,startTime:ne,expirationTime:ze,sortIndex:-1},ne>De?(F.sortIndex=ne,t(f,F),n(h)===null&&F===n(f)&&(_?(b(H),H=-1):_=!0,hr(T,ne-De))):(F.sortIndex=ze,t(h,F),N||S||(N=!0,dr(M))),F},e.unstable_shouldYield=ut,e.unstable_wrapCallback=function(F){var se=v;return function(){var ne=v;v=se;try{return F.apply(this,arguments)}finally{v=ne}}}})(Jx);qx.exports=Jx;var iN=qx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN=m,Qt=iN;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qx=new Set,Vo={};function si(e,t){pa(e,t),pa(e+"Capture",t)}function pa(e,t){for(Vo[e]=t,e=0;e<t.length;e++)Qx.add(t[e])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=Object.prototype.hasOwnProperty,oN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hy={},Fy={};function lN(e){return Ef.call(Fy,e)?!0:Ef.call(Hy,e)?!1:oN.test(e)?Fy[e]=!0:(Hy[e]=!0,!1)}function cN(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function uN(e,t,n,s){if(t===null||typeof t>"u"||cN(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nt(e,t,n,s,a,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ct[e]=new Nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ct[t]=new Nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ct[e]=new Nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ct[e]=new Nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ct[e]=new Nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ct[e]=new Nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ct[e]=new Nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ct[e]=new Nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ct[e]=new Nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bp=/[\-:]([a-z])/g;function Hp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bp,Hp);ct[t]=new Nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bp,Hp);ct[t]=new Nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bp,Hp);ct[t]=new Nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ct[e]=new Nt(e,1,!1,e.toLowerCase(),null,!1,!1)});ct.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ct[e]=new Nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fp(e,t,n,s){var a=ct.hasOwnProperty(t)?ct[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(uN(t,n,a,s)&&(n=null),s||a===null?lN(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Ns=aN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Tf=Symbol.for("react.profiler"),Xx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),If=Symbol.for("react.suspense_list"),Wp=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),Zx=Symbol.for("react.offscreen"),zy=Symbol.iterator;function xo(e){return e===null||typeof e!="object"?null:(e=zy&&e[zy]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Fh;function To(e){if(Fh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fh=t&&t[1]||""}return`
`+Fh+e}var zh=!1;function Vh(e,t){if(!e||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),o=s.stack.split(`
`),l=a.length-1,u=o.length-1;1<=l&&0<=u&&a[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||a[l]!==o[u]){var h=`
`+a[l].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=l&&0<=u);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?To(e):""}function dN(e){switch(e.tag){case 5:return To(e.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return e=Vh(e.type,!1),e;case 11:return e=Vh(e.type.render,!1),e;case 1:return e=Vh(e.type,!0),e;default:return""}}function Of(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ji:return"Fragment";case qi:return"Portal";case Tf:return"Profiler";case zp:return"StrictMode";case Cf:return"Suspense";case If:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Yx:return(e.displayName||"Context")+".Consumer";case Xx:return(e._context.displayName||"Context")+".Provider";case Vp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wp:return t=e.displayName||null,t!==null?t:Of(e.type)||"Memo";case Fs:t=e._payload,e=e._init;try{return Of(e(t))}catch{}}return null}function hN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Of(t);case 8:return t===zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fN(e){var t=eb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cc(e){e._valueTracker||(e._valueTracker=fN(e))}function tb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=eb(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function uu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Af(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vy(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=rr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nb(e,t){t=t.checked,t!=null&&Fp(e,"checked",t,!1)}function Rf(e,t){nb(e,t);var n=rr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Df(e,t.type,n):t.hasOwnProperty("defaultValue")&&Df(e,t.type,rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Df(e,t,n){(t!=="number"||uu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Co=Array.isArray;function oa(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+rr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ky(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Co(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:rr(n)}}function sb(e,t){var n=rr(t.value),s=rr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Gy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ic,ib=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pN=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(e){pN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ro[t]=Ro[e]})});function ab(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ro.hasOwnProperty(e)&&Ro[e]?(""+t).trim():t+"px"}function ob(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=ab(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var mN=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mf(e,t){if(t){if(mN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function $f(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uf=null;function Kp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bf=null,la=null,ca=null;function qy(e){if(e=gl(e)){if(typeof Bf!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Vu(t),Bf(e.stateNode,e.type,t))}}function lb(e){la?ca?ca.push(e):ca=[e]:la=e}function cb(){if(la){var e=la,t=ca;if(ca=la=null,qy(e),t)for(e=0;e<t.length;e++)qy(t[e])}}function ub(e,t){return e(t)}function db(){}var Wh=!1;function hb(e,t,n){if(Wh)return e(t,n);Wh=!0;try{return ub(e,t,n)}finally{Wh=!1,(la!==null||ca!==null)&&(db(),cb())}}function Ko(e,t){var n=e.stateNode;if(n===null)return null;var s=Vu(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Hf=!1;if(bs)try{var bo={};Object.defineProperty(bo,"passive",{get:function(){Hf=!0}}),window.addEventListener("test",bo,bo),window.removeEventListener("test",bo,bo)}catch{Hf=!1}function gN(e,t,n,s,a,o,l,u,h){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(g){this.onError(g)}}var Do=!1,du=null,hu=!1,Ff=null,vN={onError:function(e){Do=!0,du=e}};function yN(e,t,n,s,a,o,l,u,h){Do=!1,du=null,gN.apply(vN,arguments)}function wN(e,t,n,s,a,o,l,u,h){if(yN.apply(this,arguments),Do){if(Do){var f=du;Do=!1,du=null}else throw Error(D(198));hu||(hu=!0,Ff=f)}}function ri(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function fb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jy(e){if(ri(e)!==e)throw Error(D(188))}function xN(e){var t=e.alternate;if(!t){if(t=ri(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Jy(a),e;if(o===s)return Jy(a),t;o=o.sibling}throw Error(D(188))}if(n.return!==s.return)n=a,s=o;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,s=o;break}if(u===s){l=!0,s=a,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,s=a;break}if(u===s){l=!0,s=o,n=a;break}u=u.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==s)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function pb(e){return e=xN(e),e!==null?mb(e):null}function mb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mb(e);if(t!==null)return t;e=e.sibling}return null}var gb=Qt.unstable_scheduleCallback,Qy=Qt.unstable_cancelCallback,bN=Qt.unstable_shouldYield,jN=Qt.unstable_requestPaint,We=Qt.unstable_now,kN=Qt.unstable_getCurrentPriorityLevel,Gp=Qt.unstable_ImmediatePriority,vb=Qt.unstable_UserBlockingPriority,fu=Qt.unstable_NormalPriority,SN=Qt.unstable_LowPriority,yb=Qt.unstable_IdlePriority,Bu=null,is=null;function NN(e){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Bu,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:TN,_N=Math.log,EN=Math.LN2;function TN(e){return e>>>=0,e===0?32:31-(_N(e)/EN|0)|0}var Oc=64,Ac=4194304;function Io(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pu(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~a;u!==0?s=Io(u):(o&=l,o!==0&&(s=Io(o)))}else l=n&~a,l!==0?s=Io(l):o!==0&&(s=Io(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ln(t),a=1<<n,s|=e[n],t&=~a;return s}function CN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IN(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Ln(o),u=1<<l,h=a[l];h===-1?(!(u&n)||u&s)&&(a[l]=CN(u,t)):h<=t&&(e.expiredLanes|=u),o&=~u}}function zf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wb(){var e=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),e}function Kh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=n}function ON(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ln(n),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~o}}function qp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ln(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var be=0;function xb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bb,Jp,jb,kb,Sb,Vf=!1,Rc=[],Qs=null,Xs=null,Ys=null,Go=new Map,qo=new Map,Ws=[],AN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xy(e,t){switch(e){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Go.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(t.pointerId)}}function jo(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=gl(t),t!==null&&Jp(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function RN(e,t,n,s,a){switch(t){case"focusin":return Qs=jo(Qs,e,t,n,s,a),!0;case"dragenter":return Xs=jo(Xs,e,t,n,s,a),!0;case"mouseover":return Ys=jo(Ys,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return Go.set(o,jo(Go.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,qo.set(o,jo(qo.get(o)||null,e,t,n,s,a)),!0}return!1}function Nb(e){var t=Kr(e.target);if(t!==null){var n=ri(t);if(n!==null){if(t=n.tag,t===13){if(t=fb(n),t!==null){e.blockedOn=t,Sb(e.priority,function(){jb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Uf=s,n.target.dispatchEvent(s),Uf=null}else return t=gl(n),t!==null&&Jp(t),e.blockedOn=n,!1;t.shift()}return!0}function Yy(e,t,n){Zc(e)&&n.delete(t)}function DN(){Vf=!1,Qs!==null&&Zc(Qs)&&(Qs=null),Xs!==null&&Zc(Xs)&&(Xs=null),Ys!==null&&Zc(Ys)&&(Ys=null),Go.forEach(Yy),qo.forEach(Yy)}function ko(e,t){e.blockedOn===t&&(e.blockedOn=null,Vf||(Vf=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,DN)))}function Jo(e){function t(a){return ko(a,e)}if(0<Rc.length){ko(Rc[0],e);for(var n=1;n<Rc.length;n++){var s=Rc[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Qs!==null&&ko(Qs,e),Xs!==null&&ko(Xs,e),Ys!==null&&ko(Ys,e),Go.forEach(t),qo.forEach(t),n=0;n<Ws.length;n++)s=Ws[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)Nb(n),n.blockedOn===null&&Ws.shift()}var ua=Ns.ReactCurrentBatchConfig,mu=!0;function LN(e,t,n,s){var a=be,o=ua.transition;ua.transition=null;try{be=1,Qp(e,t,n,s)}finally{be=a,ua.transition=o}}function PN(e,t,n,s){var a=be,o=ua.transition;ua.transition=null;try{be=4,Qp(e,t,n,s)}finally{be=a,ua.transition=o}}function Qp(e,t,n,s){if(mu){var a=Wf(e,t,n,s);if(a===null)nf(e,t,s,gu,n),Xy(e,s);else if(RN(a,e,t,n,s))s.stopPropagation();else if(Xy(e,s),t&4&&-1<AN.indexOf(e)){for(;a!==null;){var o=gl(a);if(o!==null&&bb(o),o=Wf(e,t,n,s),o===null&&nf(e,t,s,gu,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else nf(e,t,s,null,n)}}var gu=null;function Wf(e,t,n,s){if(gu=null,e=Kp(s),e=Kr(e),e!==null)if(t=ri(e),t===null)e=null;else if(n=t.tag,n===13){if(e=fb(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return gu=e,null}function _b(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kN()){case Gp:return 1;case vb:return 4;case fu:case SN:return 16;case yb:return 536870912;default:return 16}default:return 16}}var qs=null,Xp=null,eu=null;function Eb(){if(eu)return eu;var e,t=Xp,n=t.length,s,a="value"in qs?qs.value:qs.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===a[o-s];s++);return eu=a.slice(e,1<s?1-s:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dc(){return!0}function Zy(){return!1}function Yt(e){function t(n,s,a,o,l){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Dc:Zy,this.isPropagationStopped=Zy,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dc)},persist:function(){},isPersistent:Dc}),t}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yp=Yt(ja),ml=Be({},ja,{view:0,detail:0}),MN=Yt(ml),Gh,qh,So,Hu=Be({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==So&&(So&&e.type==="mousemove"?(Gh=e.screenX-So.screenX,qh=e.screenY-So.screenY):qh=Gh=0,So=e),Gh)},movementY:function(e){return"movementY"in e?e.movementY:qh}}),ew=Yt(Hu),$N=Be({},Hu,{dataTransfer:0}),UN=Yt($N),BN=Be({},ml,{relatedTarget:0}),Jh=Yt(BN),HN=Be({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),FN=Yt(HN),zN=Be({},ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),VN=Yt(zN),WN=Be({},ja,{data:0}),tw=Yt(WN),KN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qN[e])?!!t[e]:!1}function Zp(){return JN}var QN=Be({},ml,{key:function(e){if(e.key){var t=KN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?GN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),XN=Yt(QN),YN=Be({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nw=Yt(YN),ZN=Be({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),e_=Yt(ZN),t_=Be({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),n_=Yt(t_),s_=Be({},Hu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r_=Yt(s_),i_=[9,13,27,32],em=bs&&"CompositionEvent"in window,Lo=null;bs&&"documentMode"in document&&(Lo=document.documentMode);var a_=bs&&"TextEvent"in window&&!Lo,Tb=bs&&(!em||Lo&&8<Lo&&11>=Lo),sw=" ",rw=!1;function Cb(e,t){switch(e){case"keyup":return i_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ib(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qi=!1;function o_(e,t){switch(e){case"compositionend":return Ib(t);case"keypress":return t.which!==32?null:(rw=!0,sw);case"textInput":return e=t.data,e===sw&&rw?null:e;default:return null}}function l_(e,t){if(Qi)return e==="compositionend"||!em&&Cb(e,t)?(e=Eb(),eu=Xp=qs=null,Qi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tb&&t.locale!=="ko"?null:t.data;default:return null}}var c_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!c_[e.type]:t==="textarea"}function Ob(e,t,n,s){lb(s),t=vu(t,"onChange"),0<t.length&&(n=new Yp("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Po=null,Qo=null;function u_(e){Fb(e,0)}function Fu(e){var t=Zi(e);if(tb(t))return e}function d_(e,t){if(e==="change")return t}var Ab=!1;if(bs){var Qh;if(bs){var Xh="oninput"in document;if(!Xh){var aw=document.createElement("div");aw.setAttribute("oninput","return;"),Xh=typeof aw.oninput=="function"}Qh=Xh}else Qh=!1;Ab=Qh&&(!document.documentMode||9<document.documentMode)}function ow(){Po&&(Po.detachEvent("onpropertychange",Rb),Qo=Po=null)}function Rb(e){if(e.propertyName==="value"&&Fu(Qo)){var t=[];Ob(t,Qo,e,Kp(e)),hb(u_,t)}}function h_(e,t,n){e==="focusin"?(ow(),Po=t,Qo=n,Po.attachEvent("onpropertychange",Rb)):e==="focusout"&&ow()}function f_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fu(Qo)}function p_(e,t){if(e==="click")return Fu(t)}function m_(e,t){if(e==="input"||e==="change")return Fu(t)}function g_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:g_;function Xo(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Ef.call(t,a)||!Mn(e[a],t[a]))return!1}return!0}function lw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cw(e,t){var n=lw(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lw(n)}}function Db(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Db(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lb(){for(var e=window,t=uu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uu(e.document)}return t}function tm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function v_(e){var t=Lb(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Db(n.ownerDocument.documentElement,n)){if(s!==null&&tm(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=cw(n,o);var l=cw(n,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var y_=bs&&"documentMode"in document&&11>=document.documentMode,Xi=null,Kf=null,Mo=null,Gf=!1;function uw(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gf||Xi==null||Xi!==uu(s)||(s=Xi,"selectionStart"in s&&tm(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Mo&&Xo(Mo,s)||(Mo=s,s=vu(Kf,"onSelect"),0<s.length&&(t=new Yp("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Xi)))}function Lc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Yi={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},Yh={},Pb={};bs&&(Pb=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function zu(e){if(Yh[e])return Yh[e];if(!Yi[e])return e;var t=Yi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pb)return Yh[e]=t[n];return e}var Mb=zu("animationend"),$b=zu("animationiteration"),Ub=zu("animationstart"),Bb=zu("transitionend"),Hb=new Map,dw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){Hb.set(e,t),si(t,[e])}for(var Zh=0;Zh<dw.length;Zh++){var ef=dw[Zh],w_=ef.toLowerCase(),x_=ef[0].toUpperCase()+ef.slice(1);ar(w_,"on"+x_)}ar(Mb,"onAnimationEnd");ar($b,"onAnimationIteration");ar(Ub,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(Bb,"onTransitionEnd");pa("onMouseEnter",["mouseout","mouseover"]);pa("onMouseLeave",["mouseout","mouseover"]);pa("onPointerEnter",["pointerout","pointerover"]);pa("onPointerLeave",["pointerout","pointerover"]);si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));si("onBeforeInput",["compositionend","keypress","textInput","paste"]);si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function hw(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,wN(s,t,void 0,e),e.currentTarget=null}function Fb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var l=s.length-1;0<=l;l--){var u=s[l],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&a.isPropagationStopped())break e;hw(a,u,f),o=h}else for(l=0;l<s.length;l++){if(u=s[l],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&a.isPropagationStopped())break e;hw(a,u,f),o=h}}}if(hu)throw e=Ff,hu=!1,Ff=null,e}function Ce(e,t){var n=t[Yf];n===void 0&&(n=t[Yf]=new Set);var s=e+"__bubble";n.has(s)||(zb(t,e,2,!1),n.add(s))}function tf(e,t,n){var s=0;t&&(s|=4),zb(n,e,s,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Yo(e){if(!e[Pc]){e[Pc]=!0,Qx.forEach(function(n){n!=="selectionchange"&&(b_.has(n)||tf(n,!1,e),tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pc]||(t[Pc]=!0,tf("selectionchange",!1,t))}}function zb(e,t,n,s){switch(_b(t)){case 1:var a=LN;break;case 4:a=PN;break;default:a=Qp}n=a.bind(null,t,n,e),a=void 0,!Hf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function nf(e,t,n,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var u=s.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;l=l.return}for(;u!==null;){if(l=Kr(u),l===null)return;if(h=l.tag,h===5||h===6){s=o=l;continue e}u=u.parentNode}}s=s.return}hb(function(){var f=o,g=Kp(n),y=[];e:{var v=Hb.get(e);if(v!==void 0){var S=Yp,N=e;switch(e){case"keypress":if(tu(n)===0)break e;case"keydown":case"keyup":S=XN;break;case"focusin":N="focus",S=Jh;break;case"focusout":N="blur",S=Jh;break;case"beforeblur":case"afterblur":S=Jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=UN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=e_;break;case Mb:case $b:case Ub:S=FN;break;case Bb:S=n_;break;case"scroll":S=MN;break;case"wheel":S=r_;break;case"copy":case"cut":case"paste":S=VN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=nw}var _=(t&4)!==0,R=!_&&e==="scroll",b=_?v!==null?v+"Capture":null:v;_=[];for(var w=f,j;w!==null;){j=w;var T=j.stateNode;if(j.tag===5&&T!==null&&(j=T,b!==null&&(T=Ko(w,b),T!=null&&_.push(Zo(w,T,j)))),R)break;w=w.return}0<_.length&&(v=new S(v,N,null,n,g),y.push({event:v,listeners:_}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==Uf&&(N=n.relatedTarget||n.fromElement)&&(Kr(N)||N[js]))break e;if((S||v)&&(v=g.window===g?g:(v=g.ownerDocument)?v.defaultView||v.parentWindow:window,S?(N=n.relatedTarget||n.toElement,S=f,N=N?Kr(N):null,N!==null&&(R=ri(N),N!==R||N.tag!==5&&N.tag!==6)&&(N=null)):(S=null,N=f),S!==N)){if(_=ew,T="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(_=nw,T="onPointerLeave",b="onPointerEnter",w="pointer"),R=S==null?v:Zi(S),j=N==null?v:Zi(N),v=new _(T,w+"leave",S,n,g),v.target=R,v.relatedTarget=j,T=null,Kr(g)===f&&(_=new _(b,w+"enter",N,n,g),_.target=j,_.relatedTarget=R,T=_),R=T,S&&N)t:{for(_=S,b=N,w=0,j=_;j;j=$i(j))w++;for(j=0,T=b;T;T=$i(T))j++;for(;0<w-j;)_=$i(_),w--;for(;0<j-w;)b=$i(b),j--;for(;w--;){if(_===b||b!==null&&_===b.alternate)break t;_=$i(_),b=$i(b)}_=null}else _=null;S!==null&&fw(y,v,S,_,!1),N!==null&&R!==null&&fw(y,R,N,_,!0)}}e:{if(v=f?Zi(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var M=d_;else if(iw(v))if(Ab)M=m_;else{M=f_;var L=h_}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=p_);if(M&&(M=M(e,f))){Ob(y,M,n,g);break e}L&&L(e,v,f),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&Df(v,"number",v.value)}switch(L=f?Zi(f):window,e){case"focusin":(iw(L)||L.contentEditable==="true")&&(Xi=L,Kf=f,Mo=null);break;case"focusout":Mo=Kf=Xi=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,uw(y,n,g);break;case"selectionchange":if(y_)break;case"keydown":case"keyup":uw(y,n,g)}var P;if(em)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else Qi?Cb(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(Tb&&n.locale!=="ko"&&(Qi||H!=="onCompositionStart"?H==="onCompositionEnd"&&Qi&&(P=Eb()):(qs=g,Xp="value"in qs?qs.value:qs.textContent,Qi=!0)),L=vu(f,H),0<L.length&&(H=new tw(H,e,null,n,g),y.push({event:H,listeners:L}),P?H.data=P:(P=Ib(n),P!==null&&(H.data=P)))),(P=a_?o_(e,n):l_(e,n))&&(f=vu(f,"onBeforeInput"),0<f.length&&(g=new tw("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:f}),g.data=P))}Fb(y,t)})}function Zo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function vu(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Ko(e,n),o!=null&&s.unshift(Zo(e,o,a)),o=Ko(e,t),o!=null&&s.push(Zo(e,o,a))),e=e.return}return s}function $i(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fw(e,t,n,s,a){for(var o=t._reactName,l=[];n!==null&&n!==s;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===s)break;u.tag===5&&f!==null&&(u=f,a?(h=Ko(n,o),h!=null&&l.unshift(Zo(n,h,u))):a||(h=Ko(n,o),h!=null&&l.push(Zo(n,h,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var j_=/\r\n?/g,k_=/\u0000|\uFFFD/g;function pw(e){return(typeof e=="string"?e:""+e).replace(j_,`
`).replace(k_,"")}function Mc(e,t,n){if(t=pw(t),pw(e)!==t&&n)throw Error(D(425))}function yu(){}var qf=null,Jf=null;function Qf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xf=typeof setTimeout=="function"?setTimeout:void 0,S_=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,N_=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(e){return mw.resolve(null).then(e).catch(__)}:Xf;function __(e){setTimeout(function(){throw e})}function sf(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Jo(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Jo(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function gw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ka=Math.random().toString(36).slice(2),rs="__reactFiber$"+ka,el="__reactProps$"+ka,js="__reactContainer$"+ka,Yf="__reactEvents$"+ka,E_="__reactListeners$"+ka,T_="__reactHandles$"+ka;function Kr(e){var t=e[rs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[js]||n[rs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=gw(e);e!==null;){if(n=e[rs])return n;e=gw(e)}return t}e=n,n=e.parentNode}return null}function gl(e){return e=e[rs]||e[js],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Vu(e){return e[el]||null}var Zf=[],ea=-1;function or(e){return{current:e}}function Ie(e){0>ea||(e.current=Zf[ea],Zf[ea]=null,ea--)}function Ee(e,t){ea++,Zf[ea]=e.current,e.current=t}var ir={},yt=or(ir),Lt=or(!1),Yr=ir;function ma(e,t){var n=e.type.contextTypes;if(!n)return ir;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pt(e){return e=e.childContextTypes,e!=null}function wu(){Ie(Lt),Ie(yt)}function vw(e,t,n){if(yt.current!==ir)throw Error(D(168));Ee(yt,t),Ee(Lt,n)}function Vb(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(D(108,hN(e)||"Unknown",a));return Be({},n,s)}function xu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ir,Yr=yt.current,Ee(yt,e),Ee(Lt,Lt.current),!0}function yw(e,t,n){var s=e.stateNode;if(!s)throw Error(D(169));n?(e=Vb(e,t,Yr),s.__reactInternalMemoizedMergedChildContext=e,Ie(Lt),Ie(yt),Ee(yt,e)):Ie(Lt),Ee(Lt,n)}var vs=null,Wu=!1,rf=!1;function Wb(e){vs===null?vs=[e]:vs.push(e)}function C_(e){Wu=!0,Wb(e)}function lr(){if(!rf&&vs!==null){rf=!0;var e=0,t=be;try{var n=vs;for(be=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}vs=null,Wu=!1}catch(a){throw vs!==null&&(vs=vs.slice(e+1)),gb(Gp,lr),a}finally{be=t,rf=!1}}return null}var ta=[],na=0,bu=null,ju=0,ln=[],cn=0,Zr=null,ys=1,ws="";function Hr(e,t){ta[na++]=ju,ta[na++]=bu,bu=e,ju=t}function Kb(e,t,n){ln[cn++]=ys,ln[cn++]=ws,ln[cn++]=Zr,Zr=e;var s=ys;e=ws;var a=32-Ln(s)-1;s&=~(1<<a),n+=1;var o=32-Ln(t)+a;if(30<o){var l=a-a%5;o=(s&(1<<l)-1).toString(32),s>>=l,a-=l,ys=1<<32-Ln(t)+a|n<<a|s,ws=o+e}else ys=1<<o|n<<a|s,ws=e}function nm(e){e.return!==null&&(Hr(e,1),Kb(e,1,0))}function sm(e){for(;e===bu;)bu=ta[--na],ta[na]=null,ju=ta[--na],ta[na]=null;for(;e===Zr;)Zr=ln[--cn],ln[cn]=null,ws=ln[--cn],ln[cn]=null,ys=ln[--cn],ln[cn]=null}var Jt=null,qt=null,Re=!1,Dn=null;function Gb(e,t){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ww(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jt=e,qt=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jt=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Zr!==null?{id:ys,overflow:ws}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Jt=e,qt=null,!0):!1;default:return!1}}function ep(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tp(e){if(Re){var t=qt;if(t){var n=t;if(!ww(e,t)){if(ep(e))throw Error(D(418));t=Zs(n.nextSibling);var s=Jt;t&&ww(e,t)?Gb(s,n):(e.flags=e.flags&-4097|2,Re=!1,Jt=e)}}else{if(ep(e))throw Error(D(418));e.flags=e.flags&-4097|2,Re=!1,Jt=e}}}function xw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jt=e}function $c(e){if(e!==Jt)return!1;if(!Re)return xw(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qf(e.type,e.memoizedProps)),t&&(t=qt)){if(ep(e))throw qb(),Error(D(418));for(;t;)Gb(e,t),t=Zs(t.nextSibling)}if(xw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qt=Zs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Jt?Zs(e.stateNode.nextSibling):null;return!0}function qb(){for(var e=qt;e;)e=Zs(e.nextSibling)}function ga(){qt=Jt=null,Re=!1}function rm(e){Dn===null?Dn=[e]:Dn.push(e)}var I_=Ns.ReactCurrentBatchConfig;function No(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var s=n.stateNode}if(!s)throw Error(D(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var u=a.refs;l===null?delete u[o]:u[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function Uc(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bw(e){var t=e._init;return t(e._payload)}function Jb(e){function t(b,w){if(e){var j=b.deletions;j===null?(b.deletions=[w],b.flags|=16):j.push(w)}}function n(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function s(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function a(b,w){return b=sr(b,w),b.index=0,b.sibling=null,b}function o(b,w,j){return b.index=j,e?(j=b.alternate,j!==null?(j=j.index,j<w?(b.flags|=2,w):j):(b.flags|=2,w)):(b.flags|=1048576,w)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,w,j,T){return w===null||w.tag!==6?(w=hf(j,b.mode,T),w.return=b,w):(w=a(w,j),w.return=b,w)}function h(b,w,j,T){var M=j.type;return M===Ji?g(b,w,j.props.children,T,j.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fs&&bw(M)===w.type)?(T=a(w,j.props),T.ref=No(b,w,j),T.return=b,T):(T=lu(j.type,j.key,j.props,null,b.mode,T),T.ref=No(b,w,j),T.return=b,T)}function f(b,w,j,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=ff(j,b.mode,T),w.return=b,w):(w=a(w,j.children||[]),w.return=b,w)}function g(b,w,j,T,M){return w===null||w.tag!==7?(w=Xr(j,b.mode,T,M),w.return=b,w):(w=a(w,j),w.return=b,w)}function y(b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=hf(""+w,b.mode,j),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return j=lu(w.type,w.key,w.props,null,b.mode,j),j.ref=No(b,null,w),j.return=b,j;case qi:return w=ff(w,b.mode,j),w.return=b,w;case Fs:var T=w._init;return y(b,T(w._payload),j)}if(Co(w)||xo(w))return w=Xr(w,b.mode,j,null),w.return=b,w;Uc(b,w)}return null}function v(b,w,j,T){var M=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return M!==null?null:u(b,w,""+j,T);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Tc:return j.key===M?h(b,w,j,T):null;case qi:return j.key===M?f(b,w,j,T):null;case Fs:return M=j._init,v(b,w,M(j._payload),T)}if(Co(j)||xo(j))return M!==null?null:g(b,w,j,T,null);Uc(b,j)}return null}function S(b,w,j,T,M){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(j)||null,u(w,b,""+T,M);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Tc:return b=b.get(T.key===null?j:T.key)||null,h(w,b,T,M);case qi:return b=b.get(T.key===null?j:T.key)||null,f(w,b,T,M);case Fs:var L=T._init;return S(b,w,j,L(T._payload),M)}if(Co(T)||xo(T))return b=b.get(j)||null,g(w,b,T,M,null);Uc(w,T)}return null}function N(b,w,j,T){for(var M=null,L=null,P=w,H=w=0,ue=null;P!==null&&H<j.length;H++){P.index>H?(ue=P,P=null):ue=P.sibling;var re=v(b,P,j[H],T);if(re===null){P===null&&(P=ue);break}e&&P&&re.alternate===null&&t(b,P),w=o(re,w,H),L===null?M=re:L.sibling=re,L=re,P=ue}if(H===j.length)return n(b,P),Re&&Hr(b,H),M;if(P===null){for(;H<j.length;H++)P=y(b,j[H],T),P!==null&&(w=o(P,w,H),L===null?M=P:L.sibling=P,L=P);return Re&&Hr(b,H),M}for(P=s(b,P);H<j.length;H++)ue=S(P,b,H,j[H],T),ue!==null&&(e&&ue.alternate!==null&&P.delete(ue.key===null?H:ue.key),w=o(ue,w,H),L===null?M=ue:L.sibling=ue,L=ue);return e&&P.forEach(function(ut){return t(b,ut)}),Re&&Hr(b,H),M}function _(b,w,j,T){var M=xo(j);if(typeof M!="function")throw Error(D(150));if(j=M.call(j),j==null)throw Error(D(151));for(var L=M=null,P=w,H=w=0,ue=null,re=j.next();P!==null&&!re.done;H++,re=j.next()){P.index>H?(ue=P,P=null):ue=P.sibling;var ut=v(b,P,re.value,T);if(ut===null){P===null&&(P=ue);break}e&&P&&ut.alternate===null&&t(b,P),w=o(ut,w,H),L===null?M=ut:L.sibling=ut,L=ut,P=ue}if(re.done)return n(b,P),Re&&Hr(b,H),M;if(P===null){for(;!re.done;H++,re=j.next())re=y(b,re.value,T),re!==null&&(w=o(re,w,H),L===null?M=re:L.sibling=re,L=re);return Re&&Hr(b,H),M}for(P=s(b,P);!re.done;H++,re=j.next())re=S(P,b,H,re.value,T),re!==null&&(e&&re.alternate!==null&&P.delete(re.key===null?H:re.key),w=o(re,w,H),L===null?M=re:L.sibling=re,L=re);return e&&P.forEach(function(mn){return t(b,mn)}),Re&&Hr(b,H),M}function R(b,w,j,T){if(typeof j=="object"&&j!==null&&j.type===Ji&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Tc:e:{for(var M=j.key,L=w;L!==null;){if(L.key===M){if(M=j.type,M===Ji){if(L.tag===7){n(b,L.sibling),w=a(L,j.props.children),w.return=b,b=w;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Fs&&bw(M)===L.type){n(b,L.sibling),w=a(L,j.props),w.ref=No(b,L,j),w.return=b,b=w;break e}n(b,L);break}else t(b,L);L=L.sibling}j.type===Ji?(w=Xr(j.props.children,b.mode,T,j.key),w.return=b,b=w):(T=lu(j.type,j.key,j.props,null,b.mode,T),T.ref=No(b,w,j),T.return=b,b=T)}return l(b);case qi:e:{for(L=j.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(b,w.sibling),w=a(w,j.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else t(b,w);w=w.sibling}w=ff(j,b.mode,T),w.return=b,b=w}return l(b);case Fs:return L=j._init,R(b,w,L(j._payload),T)}if(Co(j))return N(b,w,j,T);if(xo(j))return _(b,w,j,T);Uc(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(b,w.sibling),w=a(w,j),w.return=b,b=w):(n(b,w),w=hf(j,b.mode,T),w.return=b,b=w),l(b)):n(b,w)}return R}var va=Jb(!0),Qb=Jb(!1),ku=or(null),Su=null,sa=null,im=null;function am(){im=sa=Su=null}function om(e){var t=ku.current;Ie(ku),e._currentValue=t}function np(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function da(e,t){Su=e,im=sa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dt=!0),e.firstContext=null)}function hn(e){var t=e._currentValue;if(im!==e)if(e={context:e,memoizedValue:t,next:null},sa===null){if(Su===null)throw Error(D(308));sa=e,Su.dependencies={lanes:0,firstContext:e}}else sa=sa.next=e;return t}var Gr=null;function lm(e){Gr===null?Gr=[e]:Gr.push(e)}function Xb(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,lm(t)):(n.next=a.next,a.next=n),t.interleaved=n,ks(e,s)}function ks(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zs=!1;function cm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function er(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ve&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,ks(e,n)}return a=s.interleaved,a===null?(t.next=t,lm(s)):(t.next=a.next,a.next=t),s.interleaved=t,ks(e,n)}function nu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,qp(e,n)}}function jw(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Nu(e,t,n,s){var a=e.updateQueue;zs=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var h=u,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var g=e.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==l&&(u===null?g.firstBaseUpdate=f:u.next=f,g.lastBaseUpdate=h))}if(o!==null){var y=a.baseState;l=0,g=f=h=null,u=o;do{var v=u.lane,S=u.eventTime;if((s&v)===v){g!==null&&(g=g.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,_=u;switch(v=t,S=n,_.tag){case 1:if(N=_.payload,typeof N=="function"){y=N.call(S,y,v);break e}y=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=_.payload,v=typeof N=="function"?N.call(S,y,v):N,v==null)break e;y=Be({},y,v);break e;case 2:zs=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(f=g=S,h=y):g=g.next=S,l|=v;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;v=u,u=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(g===null&&(h=y),a.baseState=h,a.firstBaseUpdate=f,a.lastBaseUpdate=g,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);ti|=l,e.lanes=l,e.memoizedState=y}}function kw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(D(191,a));a.call(s)}}}var vl={},as=or(vl),tl=or(vl),nl=or(vl);function qr(e){if(e===vl)throw Error(D(174));return e}function um(e,t){switch(Ee(nl,t),Ee(tl,e),Ee(as,vl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Pf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Pf(t,e)}Ie(as),Ee(as,t)}function ya(){Ie(as),Ie(tl),Ie(nl)}function Zb(e){qr(nl.current);var t=qr(as.current),n=Pf(t,e.type);t!==n&&(Ee(tl,e),Ee(as,n))}function dm(e){tl.current===e&&(Ie(as),Ie(tl))}var $e=or(0);function _u(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var af=[];function hm(){for(var e=0;e<af.length;e++)af[e]._workInProgressVersionPrimary=null;af.length=0}var su=Ns.ReactCurrentDispatcher,of=Ns.ReactCurrentBatchConfig,ei=0,Ue=null,Ye=null,et=null,Eu=!1,$o=!1,sl=0,O_=0;function mt(){throw Error(D(321))}function fm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function pm(e,t,n,s,a,o){if(ei=o,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,su.current=e===null||e.memoizedState===null?L_:P_,e=n(s,a),$o){o=0;do{if($o=!1,sl=0,25<=o)throw Error(D(301));o+=1,et=Ye=null,t.updateQueue=null,su.current=M_,e=n(s,a)}while($o)}if(su.current=Tu,t=Ye!==null&&Ye.next!==null,ei=0,et=Ye=Ue=null,Eu=!1,t)throw Error(D(300));return e}function mm(){var e=sl!==0;return sl=0,e}function ts(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ue.memoizedState=et=e:et=et.next=e,et}function fn(){if(Ye===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?Ue.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(D(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?Ue.memoizedState=et=e:et=et.next=e}return et}function rl(e,t){return typeof t=="function"?t(e):t}function lf(e){var t=fn(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=Ye,a=s.baseQueue,o=n.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}s.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,s=s.baseState;var u=l=null,h=null,f=o;do{var g=f.lane;if((ei&g)===g)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var y={lane:g,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=y,l=s):h=h.next=y,Ue.lanes|=g,ti|=g}f=f.next}while(f!==null&&f!==o);h===null?l=s:h.next=u,Mn(s,t.memoizedState)||(Dt=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=h,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Ue.lanes|=o,ti|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function cf(e){var t=fn(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);Mn(o,t.memoizedState)||(Dt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function e0(){}function t0(e,t){var n=Ue,s=fn(),a=t(),o=!Mn(s.memoizedState,a);if(o&&(s.memoizedState=a,Dt=!0),s=s.queue,gm(r0.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,il(9,s0.bind(null,n,s,a,t),void 0,null),tt===null)throw Error(D(349));ei&30||n0(n,t,a)}return a}function n0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function s0(e,t,n,s){t.value=n,t.getSnapshot=s,i0(t)&&a0(e)}function r0(e,t,n){return n(function(){i0(t)&&a0(e)})}function i0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function a0(e){var t=ks(e,1);t!==null&&Pn(t,e,1,-1)}function Sw(e){var t=ts();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:e},t.queue=e,e=e.dispatch=D_.bind(null,Ue,e),[t.memoizedState,e]}function il(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function o0(){return fn().memoizedState}function ru(e,t,n,s){var a=ts();Ue.flags|=e,a.memoizedState=il(1|t,n,void 0,s===void 0?null:s)}function Ku(e,t,n,s){var a=fn();s=s===void 0?null:s;var o=void 0;if(Ye!==null){var l=Ye.memoizedState;if(o=l.destroy,s!==null&&fm(s,l.deps)){a.memoizedState=il(t,n,o,s);return}}Ue.flags|=e,a.memoizedState=il(1|t,n,o,s)}function Nw(e,t){return ru(8390656,8,e,t)}function gm(e,t){return Ku(2048,8,e,t)}function l0(e,t){return Ku(4,2,e,t)}function c0(e,t){return Ku(4,4,e,t)}function u0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function d0(e,t,n){return n=n!=null?n.concat([e]):null,Ku(4,4,u0.bind(null,t,e),n)}function vm(){}function h0(e,t){var n=fn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&fm(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function f0(e,t){var n=fn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&fm(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function p0(e,t,n){return ei&21?(Mn(n,t)||(n=wb(),Ue.lanes|=n,ti|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=n)}function A_(e,t){var n=be;be=n!==0&&4>n?n:4,e(!0);var s=of.transition;of.transition={};try{e(!1),t()}finally{be=n,of.transition=s}}function m0(){return fn().memoizedState}function R_(e,t,n){var s=nr(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},g0(e))v0(t,n);else if(n=Xb(e,t,n,s),n!==null){var a=kt();Pn(n,e,s,a),y0(n,t,s)}}function D_(e,t,n){var s=nr(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(g0(e))v0(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,u=o(l,n);if(a.hasEagerState=!0,a.eagerState=u,Mn(u,l)){var h=t.interleaved;h===null?(a.next=a,lm(t)):(a.next=h.next,h.next=a),t.interleaved=a;return}}catch{}finally{}n=Xb(e,t,a,s),n!==null&&(a=kt(),Pn(n,e,s,a),y0(n,t,s))}}function g0(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function v0(e,t){$o=Eu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function y0(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,qp(e,n)}}var Tu={readContext:hn,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},L_={readContext:hn,useCallback:function(e,t){return ts().memoizedState=[e,t===void 0?null:t],e},useContext:hn,useEffect:Nw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ru(4194308,4,u0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ru(4194308,4,e,t)},useInsertionEffect:function(e,t){return ru(4,2,e,t)},useMemo:function(e,t){var n=ts();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ts();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=R_.bind(null,Ue,e),[s.memoizedState,e]},useRef:function(e){var t=ts();return e={current:e},t.memoizedState=e},useState:Sw,useDebugValue:vm,useDeferredValue:function(e){return ts().memoizedState=e},useTransition:function(){var e=Sw(!1),t=e[0];return e=A_.bind(null,e[1]),ts().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Ue,a=ts();if(Re){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),tt===null)throw Error(D(349));ei&30||n0(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Nw(r0.bind(null,s,o,e),[e]),s.flags|=2048,il(9,s0.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=ts(),t=tt.identifierPrefix;if(Re){var n=ws,s=ys;n=(s&~(1<<32-Ln(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=O_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},P_={readContext:hn,useCallback:h0,useContext:hn,useEffect:gm,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:lf,useRef:o0,useState:function(){return lf(rl)},useDebugValue:vm,useDeferredValue:function(e){var t=fn();return p0(t,Ye.memoizedState,e)},useTransition:function(){var e=lf(rl)[0],t=fn().memoizedState;return[e,t]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1},M_={readContext:hn,useCallback:h0,useContext:hn,useEffect:gm,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:cf,useRef:o0,useState:function(){return cf(rl)},useDebugValue:vm,useDeferredValue:function(e){var t=fn();return Ye===null?t.memoizedState=e:p0(t,Ye.memoizedState,e)},useTransition:function(){var e=cf(rl)[0],t=fn().memoizedState;return[e,t]},useMutableSource:e0,useSyncExternalStore:t0,useId:m0,unstable_isNewReconciler:!1};function In(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sp(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Gu={isMounted:function(e){return(e=e._reactInternals)?ri(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=kt(),a=nr(e),o=xs(s,a);o.payload=t,n!=null&&(o.callback=n),t=er(e,o,a),t!==null&&(Pn(t,e,a,s),nu(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=kt(),a=nr(e),o=xs(s,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=er(e,o,a),t!==null&&(Pn(t,e,a,s),nu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kt(),s=nr(e),a=xs(n,s);a.tag=2,t!=null&&(a.callback=t),t=er(e,a,s),t!==null&&(Pn(t,e,s,n),nu(t,e,s))}};function _w(e,t,n,s,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,l):t.prototype&&t.prototype.isPureReactComponent?!Xo(n,s)||!Xo(a,o):!0}function w0(e,t,n){var s=!1,a=ir,o=t.contextType;return typeof o=="object"&&o!==null?o=hn(o):(a=Pt(t)?Yr:yt.current,s=t.contextTypes,o=(s=s!=null)?ma(e,a):ir),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gu,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ew(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Gu.enqueueReplaceState(t,t.state,null)}function rp(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},cm(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=hn(o):(o=Pt(t)?Yr:yt.current,a.context=ma(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(sp(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Gu.enqueueReplaceState(a,a.state,null),Nu(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function wa(e,t){try{var n="",s=t;do n+=dN(s),s=s.return;while(s);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function uf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ip(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var $_=typeof WeakMap=="function"?WeakMap:Map;function x0(e,t,n){n=xs(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Iu||(Iu=!0,mp=s),ip(e,t)},n}function b0(e,t,n){n=xs(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){ip(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ip(e,t),typeof s!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Tw(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new $_;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Y_.bind(null,e,t,n),t.then(e,e))}function Cw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iw(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=xs(-1,1),t.tag=2,er(n,t,1))),n.lanes|=1),e)}var U_=Ns.ReactCurrentOwner,Dt=!1;function jt(e,t,n,s){t.child=e===null?Qb(t,null,n,s):va(t,e.child,n,s)}function Ow(e,t,n,s,a){n=n.render;var o=t.ref;return da(t,a),s=pm(e,t,n,s,o,a),n=mm(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ss(e,t,a)):(Re&&n&&nm(t),t.flags|=1,jt(e,t,s,a),t.child)}function Aw(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!Nm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,j0(e,t,o,s,a)):(e=lu(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Xo,n(l,s)&&e.ref===t.ref)return Ss(e,t,a)}return t.flags|=1,e=sr(o,s),e.ref=t.ref,e.return=t,t.child=e}function j0(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(Xo(o,s)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Dt=!0);else return t.lanes=e.lanes,Ss(e,t,a)}return ap(e,t,n,s,a)}function k0(e,t,n){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(ia,Wt),Wt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(ia,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,Ee(ia,Wt),Wt|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,Ee(ia,Wt),Wt|=s;return jt(e,t,a,n),t.child}function S0(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ap(e,t,n,s,a){var o=Pt(n)?Yr:yt.current;return o=ma(t,o),da(t,a),n=pm(e,t,n,s,o,a),s=mm(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ss(e,t,a)):(Re&&s&&nm(t),t.flags|=1,jt(e,t,n,a),t.child)}function Rw(e,t,n,s,a){if(Pt(n)){var o=!0;xu(t)}else o=!1;if(da(t,a),t.stateNode===null)iu(e,t),w0(t,n,s),rp(t,n,s,a),s=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=hn(f):(f=Pt(n)?Yr:yt.current,f=ma(t,f));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==s||h!==f)&&Ew(t,l,s,f),zs=!1;var v=t.memoizedState;l.state=v,Nu(t,s,l,a),h=t.memoizedState,u!==s||v!==h||Lt.current||zs?(typeof g=="function"&&(sp(t,n,g,s),h=t.memoizedState),(u=zs||_w(t,n,u,s,v,h,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=h),l.props=s,l.state=h,l.context=f,s=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Yb(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:In(t.type,u),l.props=f,y=t.pendingProps,v=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=hn(h):(h=Pt(n)?Yr:yt.current,h=ma(t,h));var S=n.getDerivedStateFromProps;(g=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||v!==h)&&Ew(t,l,s,h),zs=!1,v=t.memoizedState,l.state=v,Nu(t,s,l,a);var N=t.memoizedState;u!==y||v!==N||Lt.current||zs?(typeof S=="function"&&(sp(t,n,S,s),N=t.memoizedState),(f=zs||_w(t,n,f,s,v,N,h)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,N,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,N,h)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=N),l.props=s,l.state=N,l.context=h,s=f):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),s=!1)}return op(e,t,n,s,o,a)}function op(e,t,n,s,a,o){S0(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&yw(t,n,!1),Ss(e,t,o);s=t.stateNode,U_.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=va(t,e.child,null,o),t.child=va(t,null,u,o)):jt(e,t,u,o),t.memoizedState=s.state,a&&yw(t,n,!0),t.child}function N0(e){var t=e.stateNode;t.pendingContext?vw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&vw(e,t.context,!1),um(e,t.containerInfo)}function Dw(e,t,n,s,a){return ga(),rm(a),t.flags|=256,jt(e,t,n,s),t.child}var lp={dehydrated:null,treeContext:null,retryLane:0};function cp(e){return{baseLanes:e,cachePool:null,transitions:null}}function _0(e,t,n){var s=t.pendingProps,a=$e.current,o=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ee($e,a&1),e===null)return tp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Qu(l,s,0,null),e=Xr(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=cp(n),t.memoizedState=lp,e):ym(t,l));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return B_(e,t,l,s,u,a,n);if(o){o=s.fallback,l=t.mode,a=e.child,u=a.sibling;var h={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=h,t.deletions=null):(s=sr(a,h),s.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=sr(u,o):(o=Xr(o,l,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=e.child.memoizedState,l=l===null?cp(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=lp,s}return o=e.child,e=o.sibling,s=sr(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function ym(e,t){return t=Qu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bc(e,t,n,s){return s!==null&&rm(s),va(t,e.child,null,n),e=ym(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function B_(e,t,n,s,a,o,l){if(n)return t.flags&256?(t.flags&=-257,s=uf(Error(D(422))),Bc(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=Qu({mode:"visible",children:s.children},a,0,null),o=Xr(o,a,l,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&va(t,e.child,null,l),t.child.memoizedState=cp(l),t.memoizedState=lp,o);if(!(t.mode&1))return Bc(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var u=s.dgst;return s=u,o=Error(D(419)),s=uf(o,s,void 0),Bc(e,t,l,s)}if(u=(l&e.childLanes)!==0,Dt||u){if(s=tt,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,ks(e,a),Pn(s,e,a,-1))}return Sm(),s=uf(Error(D(421))),Bc(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Z_.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,qt=Zs(a.nextSibling),Jt=t,Re=!0,Dn=null,e!==null&&(ln[cn++]=ys,ln[cn++]=ws,ln[cn++]=Zr,ys=e.id,ws=e.overflow,Zr=t),t=ym(t,s.children),t.flags|=4096,t)}function Lw(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),np(e.return,t,n)}function df(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function E0(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(jt(e,t,s.children,n),s=$e.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lw(e,n,t);else if(e.tag===19)Lw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ee($e,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&_u(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),df(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&_u(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}df(t,!0,n,null,o);break;case"together":df(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ss(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ti|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function H_(e,t,n){switch(t.tag){case 3:N0(t),ga();break;case 5:Zb(t);break;case 1:Pt(t.type)&&xu(t);break;case 4:um(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Ee(ku,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ee($e,$e.current&1),t.flags|=128,null):n&t.child.childLanes?_0(e,t,n):(Ee($e,$e.current&1),e=Ss(e,t,n),e!==null?e.sibling:null);Ee($e,$e.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return E0(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ee($e,$e.current),s)break;return null;case 22:case 23:return t.lanes=0,k0(e,t,n)}return Ss(e,t,n)}var T0,up,C0,I0;T0=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};up=function(){};C0=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,qr(as.current);var o=null;switch(n){case"input":a=Af(e,a),s=Af(e,s),o=[];break;case"select":a=Be({},a,{value:void 0}),s=Be({},s,{value:void 0}),o=[];break;case"textarea":a=Lf(e,a),s=Lf(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=yu)}Mf(n,s);var l;n=null;for(f in a)if(!s.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var u=a[f];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Vo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in s){var h=s[f];if(u=a!=null?a[f]:void 0,s.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&u[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Vo.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Ce("scroll",e),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};I0=function(e,t,n,s){n!==s&&(t.flags|=4)};function _o(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function F_(e,t,n){var s=t.pendingProps;switch(sm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return Pt(t.type)&&wu(),gt(t),null;case 3:return s=t.stateNode,ya(),Ie(Lt),Ie(yt),hm(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&($c(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dn!==null&&(yp(Dn),Dn=null))),up(e,t),gt(t),null;case 5:dm(t);var a=qr(nl.current);if(n=t.type,e!==null&&t.stateNode!=null)C0(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(D(166));return gt(t),null}if(e=qr(as.current),$c(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[rs]=t,s[el]=o,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",s),Ce("close",s);break;case"iframe":case"object":case"embed":Ce("load",s);break;case"video":case"audio":for(a=0;a<Oo.length;a++)Ce(Oo[a],s);break;case"source":Ce("error",s);break;case"img":case"image":case"link":Ce("error",s),Ce("load",s);break;case"details":Ce("toggle",s);break;case"input":Vy(s,o),Ce("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Ce("invalid",s);break;case"textarea":Ky(s,o),Ce("invalid",s)}Mf(n,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?s.textContent!==u&&(o.suppressHydrationWarning!==!0&&Mc(s.textContent,u,e),a=["children",u]):typeof u=="number"&&s.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Mc(s.textContent,u,e),a=["children",""+u]):Vo.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&Ce("scroll",s)}switch(n){case"input":Cc(s),Wy(s,o,!0);break;case"textarea":Cc(s),Gy(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=yu)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[rs]=t,e[el]=s,T0(e,t,!1,!1),t.stateNode=e;e:{switch(l=$f(n,s),n){case"dialog":Ce("cancel",e),Ce("close",e),a=s;break;case"iframe":case"object":case"embed":Ce("load",e),a=s;break;case"video":case"audio":for(a=0;a<Oo.length;a++)Ce(Oo[a],e);a=s;break;case"source":Ce("error",e),a=s;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),a=s;break;case"details":Ce("toggle",e),a=s;break;case"input":Vy(e,s),a=Af(e,s),Ce("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Be({},s,{value:void 0}),Ce("invalid",e);break;case"textarea":Ky(e,s),a=Lf(e,s),Ce("invalid",e);break;default:a=s}Mf(n,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?ob(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&ib(e,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Wo(e,h):typeof h=="number"&&Wo(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vo.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Ce("scroll",e):h!=null&&Fp(e,o,h,l))}switch(n){case"input":Cc(e),Wy(e,s,!1);break;case"textarea":Cc(e),Gy(e);break;case"option":s.value!=null&&e.setAttribute("value",""+rr(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?oa(e,!!s.multiple,o,!1):s.defaultValue!=null&&oa(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=yu)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return gt(t),null;case 6:if(e&&t.stateNode!=null)I0(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(D(166));if(n=qr(nl.current),qr(as.current),$c(t)){if(s=t.stateNode,n=t.memoizedProps,s[rs]=t,(o=s.nodeValue!==n)&&(e=Jt,e!==null))switch(e.tag){case 3:Mc(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Mc(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[rs]=t,t.stateNode=s}return gt(t),null;case 13:if(Ie($e),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&qt!==null&&t.mode&1&&!(t.flags&128))qb(),ga(),t.flags|=98560,o=!1;else if(o=$c(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(D(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[rs]=t}else ga(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;gt(t),o=!1}else Dn!==null&&(yp(Dn),Dn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Ze===0&&(Ze=3):Sm())),t.updateQueue!==null&&(t.flags|=4),gt(t),null);case 4:return ya(),up(e,t),e===null&&Yo(t.stateNode.containerInfo),gt(t),null;case 10:return om(t.type._context),gt(t),null;case 17:return Pt(t.type)&&wu(),gt(t),null;case 19:if(Ie($e),o=t.memoizedState,o===null)return gt(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)_o(o,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=_u(e),l!==null){for(t.flags|=128,_o(o,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee($e,$e.current&1|2),t.child}e=e.sibling}o.tail!==null&&We()>xa&&(t.flags|=128,s=!0,_o(o,!1),t.lanes=4194304)}else{if(!s)if(e=_u(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_o(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Re)return gt(t),null}else 2*We()-o.renderingStartTime>xa&&n!==1073741824&&(t.flags|=128,s=!0,_o(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=We(),t.sibling=null,n=$e.current,Ee($e,s?n&1|2:n&1),t):(gt(t),null);case 22:case 23:return km(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Wt&1073741824&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function z_(e,t){switch(sm(t),t.tag){case 1:return Pt(t.type)&&wu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ya(),Ie(Lt),Ie(yt),hm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return dm(t),null;case 13:if(Ie($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));ga()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie($e),null;case 4:return ya(),null;case 10:return om(t.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var Hc=!1,vt=!1,V_=typeof WeakSet=="function"?WeakSet:Set,z=null;function ra(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Fe(e,t,s)}else n.current=null}function dp(e,t,n){try{n()}catch(s){Fe(e,t,s)}}var Pw=!1;function W_(e,t){if(qf=mu,e=Lb(),tm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,u=-1,h=-1,f=0,g=0,y=e,v=null;t:for(;;){for(var S;y!==n||a!==0&&y.nodeType!==3||(u=l+a),y!==o||s!==0&&y.nodeType!==3||(h=l+s),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===e)break t;if(v===n&&++f===a&&(u=l),v===o&&++g===s&&(h=l),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jf={focusedElem:e,selectionRange:n},mu=!1,z=t;z!==null;)if(t=z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,z=e;else for(;z!==null;){t=z;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var _=N.memoizedProps,R=N.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?_:In(t.type,_),R);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(T){Fe(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,z=e;break}z=t.return}return N=Pw,Pw=!1,N}function Uo(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&dp(t,n,o)}a=a.next}while(a!==s)}}function qu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function hp(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function O0(e){var t=e.alternate;t!==null&&(e.alternate=null,O0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[el],delete t[Yf],delete t[E_],delete t[T_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function A0(e){return e.tag===5||e.tag===3||e.tag===4}function Mw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||A0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fp(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yu));else if(s!==4&&(e=e.child,e!==null))for(fp(e,t,n),e=e.sibling;e!==null;)fp(e,t,n),e=e.sibling}function pp(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(pp(e,t,n),e=e.sibling;e!==null;)pp(e,t,n),e=e.sibling}var ot=null,An=!1;function Bs(e,t,n){for(n=n.child;n!==null;)R0(e,t,n),n=n.sibling}function R0(e,t,n){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Bu,n)}catch{}switch(n.tag){case 5:vt||ra(n,t);case 6:var s=ot,a=An;ot=null,Bs(e,t,n),ot=s,An=a,ot!==null&&(An?(e=ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(An?(e=ot,n=n.stateNode,e.nodeType===8?sf(e.parentNode,n):e.nodeType===1&&sf(e,n),Jo(e)):sf(ot,n.stateNode));break;case 4:s=ot,a=An,ot=n.stateNode.containerInfo,An=!0,Bs(e,t,n),ot=s,An=a;break;case 0:case 11:case 14:case 15:if(!vt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&dp(n,t,l),a=a.next}while(a!==s)}Bs(e,t,n);break;case 1:if(!vt&&(ra(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(u){Fe(n,t,u)}Bs(e,t,n);break;case 21:Bs(e,t,n);break;case 22:n.mode&1?(vt=(s=vt)||n.memoizedState!==null,Bs(e,t,n),vt=s):Bs(e,t,n);break;default:Bs(e,t,n)}}function $w(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new V_),t.forEach(function(s){var a=eE.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Tn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var o=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:ot=u.stateNode,An=!1;break e;case 3:ot=u.stateNode.containerInfo,An=!0;break e;case 4:ot=u.stateNode.containerInfo,An=!0;break e}u=u.return}if(ot===null)throw Error(D(160));R0(o,l,a),ot=null,An=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(f){Fe(a,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)D0(t,e),t=t.sibling}function D0(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tn(t,e),Zn(e),s&4){try{Uo(3,e,e.return),qu(3,e)}catch(_){Fe(e,e.return,_)}try{Uo(5,e,e.return)}catch(_){Fe(e,e.return,_)}}break;case 1:Tn(t,e),Zn(e),s&512&&n!==null&&ra(n,n.return);break;case 5:if(Tn(t,e),Zn(e),s&512&&n!==null&&ra(n,n.return),e.flags&32){var a=e.stateNode;try{Wo(a,"")}catch(_){Fe(e,e.return,_)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,u=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&nb(a,o),$f(u,l);var f=$f(u,o);for(l=0;l<h.length;l+=2){var g=h[l],y=h[l+1];g==="style"?ob(a,y):g==="dangerouslySetInnerHTML"?ib(a,y):g==="children"?Wo(a,y):Fp(a,g,y,f)}switch(u){case"input":Rf(a,o);break;case"textarea":sb(a,o);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?oa(a,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?oa(a,!!o.multiple,o.defaultValue,!0):oa(a,!!o.multiple,o.multiple?[]:"",!1))}a[el]=o}catch(_){Fe(e,e.return,_)}}break;case 6:if(Tn(t,e),Zn(e),s&4){if(e.stateNode===null)throw Error(D(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(_){Fe(e,e.return,_)}}break;case 3:if(Tn(t,e),Zn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(_){Fe(e,e.return,_)}break;case 4:Tn(t,e),Zn(e);break;case 13:Tn(t,e),Zn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(bm=We())),s&4&&$w(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(vt=(f=vt)||g,Tn(t,e),vt=f):Tn(t,e),Zn(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!g&&e.mode&1)for(z=e,g=e.child;g!==null;){for(y=z=g;z!==null;){switch(v=z,S=v.child,v.tag){case 0:case 11:case 14:case 15:Uo(4,v,v.return);break;case 1:ra(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){s=v,n=v.return;try{t=s,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(_){Fe(s,n,_)}}break;case 5:ra(v,v.return);break;case 22:if(v.memoizedState!==null){Bw(y);continue}}S!==null?(S.return=v,z=S):Bw(y)}g=g.sibling}e:for(g=null,y=e;;){if(y.tag===5){if(g===null){g=y;try{a=y.stateNode,f?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,h=y.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=ab("display",l))}catch(_){Fe(e,e.return,_)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(_){Fe(e,e.return,_)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Tn(t,e),Zn(e),s&4&&$w(e);break;case 21:break;default:Tn(t,e),Zn(e)}}function Zn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(A0(n)){var s=n;break e}n=n.return}throw Error(D(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Wo(a,""),s.flags&=-33);var o=Mw(e);pp(e,o,a);break;case 3:case 4:var l=s.stateNode.containerInfo,u=Mw(e);fp(e,u,l);break;default:throw Error(D(161))}}catch(h){Fe(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K_(e,t,n){z=e,L0(e)}function L0(e,t,n){for(var s=(e.mode&1)!==0;z!==null;){var a=z,o=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||Hc;if(!l){var u=a.alternate,h=u!==null&&u.memoizedState!==null||vt;u=Hc;var f=vt;if(Hc=l,(vt=h)&&!f)for(z=a;z!==null;)l=z,h=l.child,l.tag===22&&l.memoizedState!==null?Hw(a):h!==null?(h.return=l,z=h):Hw(a);for(;o!==null;)z=o,L0(o),o=o.sibling;z=a,Hc=u,vt=f}Uw(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,z=o):Uw(e)}}function Uw(e){for(;z!==null;){var t=z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vt||qu(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!vt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:In(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&kw(t,o,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kw(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var g=f.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Jo(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}vt||t.flags&512&&hp(t)}catch(v){Fe(t,t.return,v)}}if(t===e){z=null;break}if(n=t.sibling,n!==null){n.return=t.return,z=n;break}z=t.return}}function Bw(e){for(;z!==null;){var t=z;if(t===e){z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,z=n;break}z=t.return}}function Hw(e){for(;z!==null;){var t=z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qu(4,t)}catch(h){Fe(t,n,h)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(h){Fe(t,a,h)}}var o=t.return;try{hp(t)}catch(h){Fe(t,o,h)}break;case 5:var l=t.return;try{hp(t)}catch(h){Fe(t,l,h)}}}catch(h){Fe(t,t.return,h)}if(t===e){z=null;break}var u=t.sibling;if(u!==null){u.return=t.return,z=u;break}z=t.return}}var G_=Math.ceil,Cu=Ns.ReactCurrentDispatcher,wm=Ns.ReactCurrentOwner,dn=Ns.ReactCurrentBatchConfig,ve=0,tt=null,Je=null,lt=0,Wt=0,ia=or(0),Ze=0,al=null,ti=0,Ju=0,xm=0,Bo=null,Rt=null,bm=0,xa=1/0,ms=null,Iu=!1,mp=null,tr=null,Fc=!1,Js=null,Ou=0,Ho=0,gp=null,au=-1,ou=0;function kt(){return ve&6?We():au!==-1?au:au=We()}function nr(e){return e.mode&1?ve&2&&lt!==0?lt&-lt:I_.transition!==null?(ou===0&&(ou=wb()),ou):(e=be,e!==0||(e=window.event,e=e===void 0?16:_b(e.type)),e):1}function Pn(e,t,n,s){if(50<Ho)throw Ho=0,gp=null,Error(D(185));pl(e,n,s),(!(ve&2)||e!==tt)&&(e===tt&&(!(ve&2)&&(Ju|=n),Ze===4&&Ks(e,lt)),Mt(e,s),n===1&&ve===0&&!(t.mode&1)&&(xa=We()+500,Wu&&lr()))}function Mt(e,t){var n=e.callbackNode;IN(e,t);var s=pu(e,e===tt?lt:0);if(s===0)n!==null&&Qy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Qy(n),t===1)e.tag===0?C_(Fw.bind(null,e)):Wb(Fw.bind(null,e)),N_(function(){!(ve&6)&&lr()}),n=null;else{switch(xb(s)){case 1:n=Gp;break;case 4:n=vb;break;case 16:n=fu;break;case 536870912:n=yb;break;default:n=fu}n=z0(n,P0.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function P0(e,t){if(au=-1,ou=0,ve&6)throw Error(D(327));var n=e.callbackNode;if(ha()&&e.callbackNode!==n)return null;var s=pu(e,e===tt?lt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Au(e,s);else{t=s;var a=ve;ve|=2;var o=$0();(tt!==e||lt!==t)&&(ms=null,xa=We()+500,Qr(e,t));do try{Q_();break}catch(u){M0(e,u)}while(!0);am(),Cu.current=o,ve=a,Je!==null?t=0:(tt=null,lt=0,t=Ze)}if(t!==0){if(t===2&&(a=zf(e),a!==0&&(s=a,t=vp(e,a))),t===1)throw n=al,Qr(e,0),Ks(e,s),Mt(e,We()),n;if(t===6)Ks(e,s);else{if(a=e.current.alternate,!(s&30)&&!q_(a)&&(t=Au(e,s),t===2&&(o=zf(e),o!==0&&(s=o,t=vp(e,o))),t===1))throw n=al,Qr(e,0),Ks(e,s),Mt(e,We()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(D(345));case 2:Fr(e,Rt,ms);break;case 3:if(Ks(e,s),(s&130023424)===s&&(t=bm+500-We(),10<t)){if(pu(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){kt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Xf(Fr.bind(null,e,Rt,ms),t);break}Fr(e,Rt,ms);break;case 4:if(Ks(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-Ln(s);o=1<<l,l=t[l],l>a&&(a=l),s&=~o}if(s=a,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*G_(s/1960))-s,10<s){e.timeoutHandle=Xf(Fr.bind(null,e,Rt,ms),s);break}Fr(e,Rt,ms);break;case 5:Fr(e,Rt,ms);break;default:throw Error(D(329))}}}return Mt(e,We()),e.callbackNode===n?P0.bind(null,e):null}function vp(e,t){var n=Bo;return e.current.memoizedState.isDehydrated&&(Qr(e,t).flags|=256),e=Au(e,t),e!==2&&(t=Rt,Rt=n,t!==null&&yp(t)),e}function yp(e){Rt===null?Rt=e:Rt.push.apply(Rt,e)}function q_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!Mn(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ks(e,t){for(t&=~xm,t&=~Ju,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ln(t),s=1<<n;e[n]=-1,t&=~s}}function Fw(e){if(ve&6)throw Error(D(327));ha();var t=pu(e,0);if(!(t&1))return Mt(e,We()),null;var n=Au(e,t);if(e.tag!==0&&n===2){var s=zf(e);s!==0&&(t=s,n=vp(e,s))}if(n===1)throw n=al,Qr(e,0),Ks(e,t),Mt(e,We()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fr(e,Rt,ms),Mt(e,We()),null}function jm(e,t){var n=ve;ve|=1;try{return e(t)}finally{ve=n,ve===0&&(xa=We()+500,Wu&&lr())}}function ni(e){Js!==null&&Js.tag===0&&!(ve&6)&&ha();var t=ve;ve|=1;var n=dn.transition,s=be;try{if(dn.transition=null,be=1,e)return e()}finally{be=s,dn.transition=n,ve=t,!(ve&6)&&lr()}}function km(){Wt=ia.current,Ie(ia)}function Qr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,S_(n)),Je!==null)for(n=Je.return;n!==null;){var s=n;switch(sm(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&wu();break;case 3:ya(),Ie(Lt),Ie(yt),hm();break;case 5:dm(s);break;case 4:ya();break;case 13:Ie($e);break;case 19:Ie($e);break;case 10:om(s.type._context);break;case 22:case 23:km()}n=n.return}if(tt=e,Je=e=sr(e.current,null),lt=Wt=t,Ze=0,al=null,xm=Ju=ti=0,Rt=Bo=null,Gr!==null){for(t=0;t<Gr.length;t++)if(n=Gr[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,o=n.pending;if(o!==null){var l=o.next;o.next=a,s.next=l}n.pending=s}Gr=null}return e}function M0(e,t){do{var n=Je;try{if(am(),su.current=Tu,Eu){for(var s=Ue.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Eu=!1}if(ei=0,et=Ye=Ue=null,$o=!1,sl=0,wm.current=null,n===null||n.return===null){Ze=1,al=t,Je=null;break}e:{var o=e,l=n.return,u=n,h=t;if(t=lt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var v=g.alternate;v?(g.updateQueue=v.updateQueue,g.memoizedState=v.memoizedState,g.lanes=v.lanes):(g.updateQueue=null,g.memoizedState=null)}var S=Cw(l);if(S!==null){S.flags&=-257,Iw(S,l,u,o,t),S.mode&1&&Tw(o,f,t),t=S,h=f;var N=t.updateQueue;if(N===null){var _=new Set;_.add(h),t.updateQueue=_}else N.add(h);break e}else{if(!(t&1)){Tw(o,f,t),Sm();break e}h=Error(D(426))}}else if(Re&&u.mode&1){var R=Cw(l);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Iw(R,l,u,o,t),rm(wa(h,u));break e}}o=h=wa(h,u),Ze!==4&&(Ze=2),Bo===null?Bo=[o]:Bo.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=x0(o,h,t);jw(o,b);break e;case 1:u=h;var w=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(tr===null||!tr.has(j)))){o.flags|=65536,t&=-t,o.lanes|=t;var T=b0(o,u,t);jw(o,T);break e}}o=o.return}while(o!==null)}B0(n)}catch(M){t=M,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function $0(){var e=Cu.current;return Cu.current=Tu,e===null?Tu:e}function Sm(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),tt===null||!(ti&268435455)&&!(Ju&268435455)||Ks(tt,lt)}function Au(e,t){var n=ve;ve|=2;var s=$0();(tt!==e||lt!==t)&&(ms=null,Qr(e,t));do try{J_();break}catch(a){M0(e,a)}while(!0);if(am(),ve=n,Cu.current=s,Je!==null)throw Error(D(261));return tt=null,lt=0,Ze}function J_(){for(;Je!==null;)U0(Je)}function Q_(){for(;Je!==null&&!bN();)U0(Je)}function U0(e){var t=F0(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?B0(e):Je=t,wm.current=null}function B0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=z_(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,Je=null;return}}else if(n=F_(n,t,Wt),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);Ze===0&&(Ze=5)}function Fr(e,t,n){var s=be,a=dn.transition;try{dn.transition=null,be=1,X_(e,t,n,s)}finally{dn.transition=a,be=s}return null}function X_(e,t,n,s){do ha();while(Js!==null);if(ve&6)throw Error(D(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(ON(e,o),e===tt&&(Je=tt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fc||(Fc=!0,z0(fu,function(){return ha(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=dn.transition,dn.transition=null;var l=be;be=1;var u=ve;ve|=4,wm.current=null,W_(e,n),D0(n,e),v_(Jf),mu=!!qf,Jf=qf=null,e.current=n,K_(n),jN(),ve=u,be=l,dn.transition=o}else e.current=n;if(Fc&&(Fc=!1,Js=e,Ou=a),o=e.pendingLanes,o===0&&(tr=null),NN(n.stateNode),Mt(e,We()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Iu)throw Iu=!1,e=mp,mp=null,e;return Ou&1&&e.tag!==0&&ha(),o=e.pendingLanes,o&1?e===gp?Ho++:(Ho=0,gp=e):Ho=0,lr(),null}function ha(){if(Js!==null){var e=xb(Ou),t=dn.transition,n=be;try{if(dn.transition=null,be=16>e?16:e,Js===null)var s=!1;else{if(e=Js,Js=null,Ou=0,ve&6)throw Error(D(331));var a=ve;for(ve|=4,z=e.current;z!==null;){var o=z,l=o.child;if(z.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(z=f;z!==null;){var g=z;switch(g.tag){case 0:case 11:case 15:Uo(8,g,o)}var y=g.child;if(y!==null)y.return=g,z=y;else for(;z!==null;){g=z;var v=g.sibling,S=g.return;if(O0(g),g===f){z=null;break}if(v!==null){v.return=S,z=v;break}z=S}}}var N=o.alternate;if(N!==null){var _=N.child;if(_!==null){N.child=null;do{var R=_.sibling;_.sibling=null,_=R}while(_!==null)}}z=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,z=l;else e:for(;z!==null;){if(o=z,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Uo(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,z=b;break e}z=o.return}}var w=e.current;for(z=w;z!==null;){l=z;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,z=j;else e:for(l=w;z!==null;){if(u=z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:qu(9,u)}}catch(M){Fe(u,u.return,M)}if(u===l){z=null;break e}var T=u.sibling;if(T!==null){T.return=u.return,z=T;break e}z=u.return}}if(ve=a,lr(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Bu,e)}catch{}s=!0}return s}finally{be=n,dn.transition=t}}return!1}function zw(e,t,n){t=wa(n,t),t=x0(e,t,1),e=er(e,t,1),t=kt(),e!==null&&(pl(e,1,t),Mt(e,t))}function Fe(e,t,n){if(e.tag===3)zw(e,e,n);else for(;t!==null;){if(t.tag===3){zw(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(tr===null||!tr.has(s))){e=wa(n,e),e=b0(t,e,1),t=er(t,e,1),e=kt(),t!==null&&(pl(t,1,e),Mt(t,e));break}}t=t.return}}function Y_(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=kt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(lt&n)===n&&(Ze===4||Ze===3&&(lt&130023424)===lt&&500>We()-bm?Qr(e,0):xm|=n),Mt(e,t)}function H0(e,t){t===0&&(e.mode&1?(t=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):t=1);var n=kt();e=ks(e,t),e!==null&&(pl(e,t,n),Mt(e,n))}function Z_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),H0(e,n)}function eE(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(D(314))}s!==null&&s.delete(t),H0(e,n)}var F0;F0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lt.current)Dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Dt=!1,H_(e,t,n);Dt=!!(e.flags&131072)}else Dt=!1,Re&&t.flags&1048576&&Kb(t,ju,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;iu(e,t),e=t.pendingProps;var a=ma(t,yt.current);da(t,n),a=pm(null,t,s,e,a,n);var o=mm();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pt(s)?(o=!0,xu(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,cm(t),a.updater=Gu,t.stateNode=a,a._reactInternals=t,rp(t,s,e,n),t=op(null,t,s,!0,o,n)):(t.tag=0,Re&&o&&nm(t),jt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(iu(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=nE(s),e=In(s,e),a){case 0:t=ap(null,t,s,e,n);break e;case 1:t=Rw(null,t,s,e,n);break e;case 11:t=Ow(null,t,s,e,n);break e;case 14:t=Aw(null,t,s,In(s.type,e),n);break e}throw Error(D(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:In(s,a),ap(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:In(s,a),Rw(e,t,s,a,n);case 3:e:{if(N0(t),e===null)throw Error(D(387));s=t.pendingProps,o=t.memoizedState,a=o.element,Yb(e,t),Nu(t,s,null,n);var l=t.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=wa(Error(D(423)),t),t=Dw(e,t,s,n,a);break e}else if(s!==a){a=wa(Error(D(424)),t),t=Dw(e,t,s,n,a);break e}else for(qt=Zs(t.stateNode.containerInfo.firstChild),Jt=t,Re=!0,Dn=null,n=Qb(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ga(),s===a){t=Ss(e,t,n);break e}jt(e,t,s,n)}t=t.child}return t;case 5:return Zb(t),e===null&&tp(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,l=a.children,Qf(s,a)?l=null:o!==null&&Qf(s,o)&&(t.flags|=32),S0(e,t),jt(e,t,l,n),t.child;case 6:return e===null&&tp(t),null;case 13:return _0(e,t,n);case 4:return um(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=va(t,null,s,n):jt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:In(s,a),Ow(e,t,s,a,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,l=a.value,Ee(ku,s._currentValue),s._currentValue=l,o!==null)if(Mn(o.value,l)){if(o.children===a.children&&!Lt.current){t=Ss(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var h=u.firstContext;h!==null;){if(h.context===s){if(o.tag===1){h=xs(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var g=f.pending;g===null?h.next=h:(h.next=g.next,g.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),np(o.return,n,t),u.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(D(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),np(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}jt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,da(t,n),a=hn(a),s=s(a),t.flags|=1,jt(e,t,s,n),t.child;case 14:return s=t.type,a=In(s,t.pendingProps),a=In(s.type,a),Aw(e,t,s,a,n);case 15:return j0(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:In(s,a),iu(e,t),t.tag=1,Pt(s)?(e=!0,xu(t)):e=!1,da(t,n),w0(t,s,a),rp(t,s,a,n),op(null,t,s,!0,e,n);case 19:return E0(e,t,n);case 22:return k0(e,t,n)}throw Error(D(156,t.tag))};function z0(e,t){return gb(e,t)}function tE(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,n,s){return new tE(e,t,n,s)}function Nm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nE(e){if(typeof e=="function")return Nm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vp)return 11;if(e===Wp)return 14}return 2}function sr(e,t){var n=e.alternate;return n===null?(n=un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function lu(e,t,n,s,a,o){var l=2;if(s=e,typeof e=="function")Nm(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ji:return Xr(n.children,a,o,t);case zp:l=8,a|=8;break;case Tf:return e=un(12,n,t,a|2),e.elementType=Tf,e.lanes=o,e;case Cf:return e=un(13,n,t,a),e.elementType=Cf,e.lanes=o,e;case If:return e=un(19,n,t,a),e.elementType=If,e.lanes=o,e;case Zx:return Qu(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xx:l=10;break e;case Yx:l=9;break e;case Vp:l=11;break e;case Wp:l=14;break e;case Fs:l=16,s=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=un(l,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function Xr(e,t,n,s){return e=un(7,e,s,t),e.lanes=n,e}function Qu(e,t,n,s){return e=un(22,e,s,t),e.elementType=Zx,e.lanes=n,e.stateNode={isHidden:!1},e}function hf(e,t,n){return e=un(6,e,null,t),e.lanes=n,e}function ff(e,t,n){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sE(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kh(0),this.expirationTimes=Kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function _m(e,t,n,s,a,o,l,u,h){return e=new sE(e,t,n,u,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=un(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cm(o),e}function rE(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function V0(e){if(!e)return ir;e=e._reactInternals;e:{if(ri(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Pt(n))return Vb(e,n,t)}return t}function W0(e,t,n,s,a,o,l,u,h){return e=_m(n,s,!0,e,a,o,l,u,h),e.context=V0(null),n=e.current,s=kt(),a=nr(n),o=xs(s,a),o.callback=t??null,er(n,o,a),e.current.lanes=a,pl(e,a,s),Mt(e,s),e}function Xu(e,t,n,s){var a=t.current,o=kt(),l=nr(a);return n=V0(n),t.context===null?t.context=n:t.pendingContext=n,t=xs(o,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=er(a,t,l),e!==null&&(Pn(e,a,l,o),nu(e,a,l)),l}function Ru(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Em(e,t){Vw(e,t),(e=e.alternate)&&Vw(e,t)}function iE(){return null}var K0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tm(e){this._internalRoot=e}Yu.prototype.render=Tm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Xu(e,t,null,null)};Yu.prototype.unmount=Tm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ni(function(){Xu(null,e,null,null)}),t[js]=null}};function Yu(e){this._internalRoot=e}Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ws.length&&t!==0&&t<Ws[n].priority;n++);Ws.splice(n,0,e),n===0&&Nb(e)}};function Cm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ww(){}function aE(e,t,n,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var f=Ru(l);o.call(f)}}var l=W0(t,s,e,0,null,!1,!1,"",Ww);return e._reactRootContainer=l,e[js]=l.current,Yo(e.nodeType===8?e.parentNode:e),ni(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var u=s;s=function(){var f=Ru(h);u.call(f)}}var h=_m(e,0,!1,null,null,!1,!1,"",Ww);return e._reactRootContainer=h,e[js]=h.current,Yo(e.nodeType===8?e.parentNode:e),ni(function(){Xu(t,h,n,s)}),h}function ed(e,t,n,s,a){var o=n._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var u=a;a=function(){var h=Ru(l);u.call(h)}}Xu(t,l,e,a)}else l=aE(n,t,e,a,s);return Ru(l)}bb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Io(t.pendingLanes);n!==0&&(qp(t,n|1),Mt(t,We()),!(ve&6)&&(xa=We()+500,lr()))}break;case 13:ni(function(){var s=ks(e,1);if(s!==null){var a=kt();Pn(s,e,1,a)}}),Em(e,1)}};Jp=function(e){if(e.tag===13){var t=ks(e,134217728);if(t!==null){var n=kt();Pn(t,e,134217728,n)}Em(e,134217728)}};jb=function(e){if(e.tag===13){var t=nr(e),n=ks(e,t);if(n!==null){var s=kt();Pn(n,e,t,s)}Em(e,t)}};kb=function(){return be};Sb=function(e,t){var n=be;try{return be=e,t()}finally{be=n}};Bf=function(e,t,n){switch(t){case"input":if(Rf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Vu(s);if(!a)throw Error(D(90));tb(s),Rf(s,a)}}}break;case"textarea":sb(e,n);break;case"select":t=n.value,t!=null&&oa(e,!!n.multiple,t,!1)}};ub=jm;db=ni;var oE={usingClientEntryPoint:!1,Events:[gl,Zi,Vu,lb,cb,jm]},Eo={findFiberByHostInstance:Kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lE={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pb(e),e===null?null:e.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||iE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zc.isDisabled&&zc.supportsFiber)try{Bu=zc.inject(lE),is=zc}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oE;Xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cm(t))throw Error(D(200));return rE(e,t,null,n)};Xt.createRoot=function(e,t){if(!Cm(e))throw Error(D(299));var n=!1,s="",a=K0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=_m(e,1,!1,null,null,n,!1,s,a),e[js]=t.current,Yo(e.nodeType===8?e.parentNode:e),new Tm(t)};Xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=pb(t),e=e===null?null:e.stateNode,e};Xt.flushSync=function(e){return ni(e)};Xt.hydrate=function(e,t,n){if(!Zu(t))throw Error(D(200));return ed(null,e,t,!0,n)};Xt.hydrateRoot=function(e,t,n){if(!Cm(e))throw Error(D(405));var s=n!=null&&n.hydratedSources||null,a=!1,o="",l=K0;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=W0(t,null,e,1,n??null,a,!1,o,l),e[js]=t.current,Yo(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Yu(t)};Xt.render=function(e,t,n){if(!Zu(t))throw Error(D(200));return ed(null,e,t,!1,n)};Xt.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(D(40));return e._reactRootContainer?(ni(function(){ed(null,null,e,!1,function(){e._reactRootContainer=null,e[js]=null})}),!0):!1};Xt.unstable_batchedUpdates=jm;Xt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Zu(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return ed(e,t,n,!1,s)};Xt.version="18.3.1-next-f1338f8080-20240426";function G0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G0)}catch(e){console.error(e)}}G0(),Gx.exports=Xt;var cE=Gx.exports,Kw=cE;_f.createRoot=Kw.createRoot,_f.hydrateRoot=Kw.hydrateRoot;function ns(e,t){const n=t&&t.cache?t.cache:gE,s=t&&t.serializer?t.serializer:pE;return(t&&t.strategy?t.strategy:hE)(e,{cache:n,serializer:s})}function uE(e){return e==null||typeof e=="number"||typeof e=="boolean"}function dE(e,t,n,s){const a=uE(s)?s:n(s);let o=t.get(a);return typeof o>"u"&&(o=e.call(this,s),t.set(a,o)),o}function q0(e,t,n){const s=Array.prototype.slice.call(arguments,3),a=n(s);let o=t.get(a);return typeof o>"u"&&(o=e.apply(this,s),t.set(a,o)),o}function J0(e,t,n,s,a){return n.bind(t,e,s,a)}function hE(e,t){const n=e.length===1?dE:q0;return J0(e,this,n,t.cache.create(),t.serializer)}function fE(e,t){return J0(e,this,q0,t.cache.create(),t.serializer)}const pE=function(){return JSON.stringify(arguments)};class mE{constructor(){he(this,"cache");this.cache=Object.create(null)}get(t){return this.cache[t]}set(t,n){this.cache[t]=n}}const gE={create:function(){return new mE}},ss={variadic:fE},vE=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function yE(e){const t={};return e.replace(vE,n=>{const s=n.length;switch(n[0]){case"G":t.era=s===4?"long":s===5?"narrow":"short";break;case"y":t.year=s===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][s-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][s-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=s===4?"long":s===5?"narrow":"short";break;case"e":if(s<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][s-4];break;case"c":if(s<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][s-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][s-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][s-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][s-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][s-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][s-1];break;case"s":t.second=["numeric","2-digit"][s-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=s<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}const wE=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function xE(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");const t=e.split(wE).filter(s=>s.length>0),n=[];for(const s of t){let a=s.split("/");if(a.length===0)throw new Error("Invalid number skeleton");const[o,...l]=a;for(const u of l)if(u.length===0)throw new Error("Invalid number skeleton");n.push({stem:o,options:l})}return n}function bE(e){return e.replace(/^(.*?)-/,"")}const Gw=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Q0=/^(@+)?(\+|#+)?[rs]?$/g,jE=/(\*)(0+)|(#+)(0+)|(0+)/g,X0=/^(0+)$/;function qw(e){const t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(Q0,function(n,s,a){return typeof a!="string"?(t.minimumSignificantDigits=s.length,t.maximumSignificantDigits=s.length):a==="+"?t.minimumSignificantDigits=s.length:s[0]==="#"?t.maximumSignificantDigits=s.length:(t.minimumSignificantDigits=s.length,t.maximumSignificantDigits=s.length+(typeof a=="string"?a.length:0)),""}),t}function Y0(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function kE(e){let t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){const n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!X0.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function Jw(e){const t={},n=Y0(e);return n||t}function SE(e){let t={};for(const n of e){switch(n.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=n.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=bE(n.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t={...t,notation:"scientific",...n.options.reduce((o,l)=>({...o,...Jw(l)}),{})};continue;case"engineering":t={...t,notation:"engineering",...n.options.reduce((o,l)=>({...o,...Jw(l)}),{})};continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(n.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(jE,function(o,l,u,h,f,g){if(l)t.minimumIntegerDigits=u.length;else{if(h&&f)throw new Error("We currently do not support maximum integer digits");if(g)throw new Error("We currently do not support exact integer digits")}return""});continue}if(X0.test(n.stem)){t.minimumIntegerDigits=n.stem.length;continue}if(Gw.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(Gw,function(l,u,h,f,g,y){return h==="*"?t.minimumFractionDigits=u.length:f&&f[0]==="#"?t.maximumFractionDigits=f.length:g&&y?(t.minimumFractionDigits=g.length,t.maximumFractionDigits=g.length+y.length):(t.minimumFractionDigits=u.length,t.maximumFractionDigits=u.length),""});const o=n.options[0];o==="w"?t={...t,trailingZeroDisplay:"stripIfInteger"}:o&&(t={...t,...qw(o)});continue}if(Q0.test(n.stem)){t={...t,...qw(n.stem)};continue}const s=Y0(n.stem);s&&(t={...t,...s});const a=kE(n.stem);a&&(t={...t,...a})}return t}let Pe=function(e){return e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag",e}({}),Du=function(e){return e[e.number=0]="number",e[e.dateTime=1]="dateTime",e}({});function Qw(e){return e.type===Pe.literal}function NE(e){return e.type===Pe.argument}function Z0(e){return e.type===Pe.number}function ej(e){return e.type===Pe.date}function tj(e){return e.type===Pe.time}function nj(e){return e.type===Pe.select}function sj(e){return e.type===Pe.plural}function _E(e){return e.type===Pe.pound}function rj(e){return e.type===Pe.tag}function ij(e){return!!(e&&typeof e=="object"&&e.type===Du.number)}function wp(e){return!!(e&&typeof e=="object"&&e.type===Du.dateTime)}let ge=function(e){return e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG",e}({});const aj=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Vc={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GS:["H","h","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ku-SY":["H","hB"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function EE(e,t){let n="";for(let s=0;s<e.length;s++){const a=e.charAt(s);if(a==="j"){let o=0;for(;s+1<e.length&&e.charAt(s+1)===a;)o++,s++;let l=1+(o&1),u=o<2?1:3+(o>>1),h="a",f=TE(t);for((f=="H"||f=="k")&&(u=0);u-- >0;)n+=h;for(;l-- >0;)n=f+n}else a==="J"?n+="H":n+=a}return n}function TE(e){let t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}const n=e.language;let s;return n!=="root"&&(s=e.maximize().region),(Vc[s||""]||Vc[n||""]||Vc[`${n}-001`]||Vc["001"])[0]}const CE=new RegExp(`^${aj.source}*`),IE=new RegExp(`${aj.source}*$`);function fe(e,t){return{start:e,end:t}}const OE=!!Object.fromEntries,AE=!!String.prototype.trimStart,RE=!!String.prototype.trimEnd,Xw=OE?Object.fromEntries:function(t){const n={};for(const[s,a]of t)n[s]=a;return n},DE=AE?function(t){return t.trimStart()}:function(t){return t.replace(CE,"")},LE=RE?function(t){return t.trimEnd()}:function(t){return t.replace(IE,"")},Yw=new RegExp("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");function PE(e,t){return Yw.lastIndex=t,Yw.exec(e)[1]??""}class ME{constructor(t,n={}){he(this,"message");he(this,"position");he(this,"locale");he(this,"ignoreTag");he(this,"requiresOtherClause");he(this,"shouldParseSkeletons");this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}parse(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)}parseMessage(t,n,s){let a=[];for(;!this.isEOF();){const o=this.char();if(o===123){const l=this.parseArgument(t,s);if(l.err)return l;a.push(l.val)}else{if(o===125&&t>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){const l=this.clonePosition();this.bump(),a.push({type:Pe.pound,location:fe(l,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(s)break;return this.error(ge.UNMATCHED_CLOSING_TAG,fe(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&xp(this.peek()||0)){const l=this.parseTag(t,n);if(l.err)return l;a.push(l.val)}else{const l=this.parseLiteral(t,n);if(l.err)return l;a.push(l.val)}}}return{val:a,err:null}}parseTag(t,n){const s=this.clonePosition();this.bump();const a=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Pe.literal,value:`<${a}/>`,location:fe(s,this.clonePosition())},err:null};if(this.bumpIf(">")){const o=this.parseMessage(t+1,n,!0);if(o.err)return o;const l=o.val,u=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!xp(this.char()))return this.error(ge.INVALID_TAG,fe(u,this.clonePosition()));const h=this.clonePosition(),f=this.parseTagName();return a!==f?this.error(ge.UNMATCHED_CLOSING_TAG,fe(h,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Pe.tag,value:a,children:l,location:fe(s,this.clonePosition())},err:null}:this.error(ge.INVALID_TAG,fe(u,this.clonePosition())))}else return this.error(ge.UNCLOSED_TAG,fe(s,this.clonePosition()))}else return this.error(ge.INVALID_TAG,fe(s,this.clonePosition()))}parseTagName(){const t=this.offset();for(this.bump();!this.isEOF()&&UE(this.char());)this.bump();return this.message.slice(t,this.offset())}parseLiteral(t,n){const s=this.clonePosition();let a="";for(;;){const l=this.tryParseQuote(n);if(l){a+=l;continue}const u=this.tryParseUnquoted(t,n);if(u){a+=u;continue}const h=this.tryParseLeftAngleBracket();if(h){a+=h;continue}break}const o=fe(s,this.clonePosition());return{val:{type:Pe.literal,value:a,location:o},err:null}}tryParseLeftAngleBracket(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!$E(this.peek()||0))?(this.bump(),"<"):null}tryParseQuote(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();const n=[this.char()];for(this.bump();!this.isEOF();){const s=this.char();if(s===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(s);this.bump()}return String.fromCodePoint(...n)}tryParseUnquoted(t,n){if(this.isEOF())return null;const s=this.char();return s===60||s===123||s===35&&(n==="plural"||n==="selectordinal")||s===125&&t>0?null:(this.bump(),String.fromCodePoint(s))}parseArgument(t,n){const s=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,fe(s,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(ge.EMPTY_ARGUMENT,fe(s,this.clonePosition()));let a=this.parseIdentifierIfPossible().value;if(!a)return this.error(ge.MALFORMED_ARGUMENT,fe(s,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,fe(s,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Pe.argument,value:a,location:fe(s,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,fe(s,this.clonePosition())):this.parseArgumentOptions(t,n,a,s);default:return this.error(ge.MALFORMED_ARGUMENT,fe(s,this.clonePosition()))}}parseIdentifierIfPossible(){const t=this.clonePosition(),n=this.offset(),s=PE(this.message,n),a=n+s.length;this.bumpTo(a);const o=this.clonePosition(),l=fe(t,o);return{value:s,location:l}}parseArgumentOptions(t,n,s,a){let o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,u=this.clonePosition();switch(l){case"":return this.error(ge.EXPECT_ARGUMENT_TYPE,fe(o,u));case"number":case"date":case"time":{this.bumpSpace();let h=null;if(this.bumpIf(",")){this.bumpSpace();const y=this.clonePosition(),v=this.parseSimpleArgStyleIfPossible();if(v.err)return v;const S=LE(v.val);if(S.length===0)return this.error(ge.EXPECT_ARGUMENT_STYLE,fe(this.clonePosition(),this.clonePosition()));const N=fe(y,this.clonePosition());h={style:S,styleLocation:N}}const f=this.tryParseArgumentClose(a);if(f.err)return f;const g=fe(a,this.clonePosition());if(h&&h.style.startsWith("::")){let y=DE(h.style.slice(2));if(l==="number"){const v=this.parseNumberSkeletonFromString(y,h.styleLocation);return v.err?v:{val:{type:Pe.number,value:s,location:g,style:v.val},err:null}}else{if(y.length===0)return this.error(ge.EXPECT_DATE_TIME_SKELETON,g);let v=y;this.locale&&(v=EE(y,this.locale));const S={type:Du.dateTime,pattern:v,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?yE(v):{}};return{val:{type:l==="date"?Pe.date:Pe.time,value:s,location:g,style:S},err:null}}}return{val:{type:l==="number"?Pe.number:l==="date"?Pe.date:Pe.time,value:s,location:g,style:(h==null?void 0:h.style)??null},err:null}}case"plural":case"selectordinal":case"select":{const h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(ge.EXPECT_SELECT_ARGUMENT_OPTIONS,fe(h,{...h}));this.bumpSpace();let f=this.parseIdentifierIfPossible(),g=0;if(l!=="select"&&f.value==="offset"){if(!this.bumpIf(":"))return this.error(ge.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,fe(this.clonePosition(),this.clonePosition()));this.bumpSpace();const N=this.tryParseDecimalInteger(ge.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ge.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(N.err)return N;this.bumpSpace(),f=this.parseIdentifierIfPossible(),g=N.val}const y=this.tryParsePluralOrSelectOptions(t,l,n,f);if(y.err)return y;const v=this.tryParseArgumentClose(a);if(v.err)return v;const S=fe(a,this.clonePosition());return l==="select"?{val:{type:Pe.select,value:s,options:Xw(y.val),location:S},err:null}:{val:{type:Pe.plural,value:s,options:Xw(y.val),offset:g,pluralType:l==="plural"?"cardinal":"ordinal",location:S},err:null}}default:return this.error(ge.INVALID_ARGUMENT_TYPE,fe(o,u))}}tryParseArgumentClose(t){return this.isEOF()||this.char()!==125?this.error(ge.EXPECT_ARGUMENT_CLOSING_BRACE,fe(t,this.clonePosition())):(this.bump(),{val:!0,err:null})}parseSimpleArgStyleIfPossible(){let t=0;const n=this.clonePosition();for(;!this.isEOF();)switch(this.char()){case 39:{this.bump();let a=this.clonePosition();if(!this.bumpUntil("'"))return this.error(ge.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,fe(a,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}return{val:this.message.slice(n.offset,this.offset()),err:null}}parseNumberSkeletonFromString(t,n){let s=[];try{s=xE(t)}catch{return this.error(ge.INVALID_NUMBER_SKELETON,n)}return{val:{type:Du.number,tokens:s,location:n,parsedOptions:this.shouldParseSkeletons?SE(s):{}},err:null}}tryParsePluralOrSelectOptions(t,n,s,a){let o=!1;const l=[],u=new Set;let{value:h,location:f}=a;for(;;){if(h.length===0){const S=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){const N=this.tryParseDecimalInteger(ge.EXPECT_PLURAL_ARGUMENT_SELECTOR,ge.INVALID_PLURAL_ARGUMENT_SELECTOR);if(N.err)return N;f=fe(S,this.clonePosition()),h=this.message.slice(S.offset,this.offset())}else break}if(u.has(h))return this.error(n==="select"?ge.DUPLICATE_SELECT_ARGUMENT_SELECTOR:ge.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,f);h==="other"&&(o=!0),this.bumpSpace();const g=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?ge.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:ge.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,fe(this.clonePosition(),this.clonePosition()));const y=this.parseMessage(t+1,n,s);if(y.err)return y;const v=this.tryParseArgumentClose(g);if(v.err)return v;l.push([h,{value:y.val,location:fe(g,this.clonePosition())}]),u.add(h),this.bumpSpace(),{value:h,location:f}=this.parseIdentifierIfPossible()}return l.length===0?this.error(n==="select"?ge.EXPECT_SELECT_ARGUMENT_SELECTOR:ge.EXPECT_PLURAL_ARGUMENT_SELECTOR,fe(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(ge.MISSING_OTHER_CLAUSE,fe(this.clonePosition(),this.clonePosition())):{val:l,err:null}}tryParseDecimalInteger(t,n){let s=1;const a=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(s=-1);let o=!1,l=0;for(;!this.isEOF();){const h=this.char();if(h>=48&&h<=57)o=!0,l=l*10+(h-48),this.bump();else break}const u=fe(a,this.clonePosition());return o?(l*=s,Number.isSafeInteger(l)?{val:l,err:null}:this.error(n,u)):this.error(t,u)}offset(){return this.position.offset}isEOF(){return this.offset()===this.message.length}clonePosition(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}}char(){const t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");const n=this.message.codePointAt(t);if(n===void 0)throw Error(`Offset ${t} is at invalid UTF-16 code unit boundary`);return n}error(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}}bump(){if(this.isEOF())return;const t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}bumpIf(t){if(this.message.startsWith(t,this.offset())){for(let n=0;n<t.length;n++)this.bump();return!0}return!1}bumpUntil(t){const n=this.offset(),s=this.message.indexOf(t,n);return s>=0?(this.bumpTo(s),!0):(this.bumpTo(this.message.length),!1)}bumpTo(t){if(this.offset()>t)throw Error(`targetOffset ${t} must be greater than or equal to the current offset ${this.offset()}`);for(t=Math.min(t,this.message.length);;){const n=this.offset();if(n===t)break;if(n>t)throw Error(`targetOffset ${t} is at invalid UTF-16 code unit boundary`);if(this.bump(),this.isEOF())break}}bumpSpace(){for(;!this.isEOF()&&BE(this.char());)this.bump()}peek(){if(this.isEOF())return null;const t=this.char(),n=this.offset();return this.message.charCodeAt(n+(t>=65536?2:1))??null}}function xp(e){return e>=97&&e<=122||e>=65&&e<=90}function $E(e){return xp(e)||e===47}function UE(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function BE(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function bp(e){e.forEach(t=>{if(delete t.location,nj(t)||sj(t))for(const n in t.options)delete t.options[n].location,bp(t.options[n].value);else Z0(t)&&ij(t.style)||(ej(t)||tj(t))&&wp(t.style)?delete t.style.location:rj(t)&&bp(t.children)})}function HE(e,t={}){t={shouldParseSkeletons:!0,requiresOtherClause:!0,...t};const n=new ME(e,t).parse();if(n.err){const s=SyntaxError(ge[n.err.kind]);throw s.location=n.err.location,s.originalMessage=n.err.message,s}return t!=null&&t.captureLocation||bp(n.val),n.val}let cr=function(e){return e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API",e}({});class ur extends Error{constructor(n,s,a){super(n);he(this,"code");he(this,"originalMessage");this.code=s,this.originalMessage=a}toString(){return`[formatjs Error: ${this.code}] ${this.message}`}}class Zw extends ur{constructor(t,n,s,a){super(`Invalid values for "${t}": "${n}". Options are "${Object.keys(s).join('", "')}"`,cr.INVALID_VALUE,a)}}class FE extends ur{constructor(t,n,s){super(`Value for "${t}" must be of type ${n}`,cr.INVALID_VALUE,s)}}class zE extends ur{constructor(t,n){super(`The intl string context variable "${t}" was not provided to the string "${n}"`,cr.MISSING_VALUE,n)}}let Vt=function(e){return e[e.literal=0]="literal",e[e.object=1]="object",e}({});function VE(e){return e.length<2?e:e.reduce((t,n)=>{const s=t[t.length-1];return!s||s.type!==Vt.literal||n.type!==Vt.literal?t.push(n):s.value+=n.value,t},[])}function oj(e){return typeof e=="function"}function cu(e,t,n,s,a,o,l){if(e.length===1&&Qw(e[0]))return[{type:Vt.literal,value:e[0].value}];const u=[];for(const h of e){if(Qw(h)){u.push({type:Vt.literal,value:h.value});continue}if(_E(h)){typeof o=="number"&&u.push({type:Vt.literal,value:n.getNumberFormat(t).format(o)});continue}const{value:f}=h;if(!(a&&f in a))throw new zE(f,l);let g=a[f];if(NE(h)){(!g||typeof g=="string"||typeof g=="number"||typeof g=="bigint")&&(g=typeof g=="string"||typeof g=="number"||typeof g=="bigint"?String(g):""),u.push({type:typeof g=="string"?Vt.literal:Vt.object,value:g});continue}if(ej(h)){const y=typeof h.style=="string"?s.date[h.style]:wp(h.style)?h.style.parsedOptions:void 0;u.push({type:Vt.literal,value:n.getDateTimeFormat(t,y).format(g)});continue}if(tj(h)){const y=typeof h.style=="string"?s.time[h.style]:wp(h.style)?h.style.parsedOptions:s.time.medium;u.push({type:Vt.literal,value:n.getDateTimeFormat(t,y).format(g)});continue}if(Z0(h)){const y=typeof h.style=="string"?s.number[h.style]:ij(h.style)?h.style.parsedOptions:void 0;if(y&&y.scale){const v=y.scale||1;if(typeof g=="bigint"){if(!Number.isInteger(v))throw new TypeError(`Cannot apply fractional scale ${v} to bigint value. Scale must be an integer when formatting bigint.`);g=g*BigInt(v)}else g=g*v}u.push({type:Vt.literal,value:n.getNumberFormat(t,y).format(g)});continue}if(rj(h)){const{children:y,value:v}=h,S=a[v];if(!oj(S))throw new FE(v,"function",l);const N=cu(y,t,n,s,a,o);let _=S(N.map(R=>R.value));Array.isArray(_)||(_=[_]),u.push(..._.map(R=>({type:typeof R=="string"?Vt.literal:Vt.object,value:R})))}if(nj(h)){const y=g,v=(Object.prototype.hasOwnProperty.call(h.options,y)?h.options[y]:void 0)||h.options.other;if(!v)throw new Zw(h.value,g,Object.keys(h.options),l);u.push(...cu(v.value,t,n,s,a));continue}if(sj(h)){const y=`=${g}`;let v=Object.prototype.hasOwnProperty.call(h.options,y)?h.options[y]:void 0;if(!v){if(!Intl.PluralRules)throw new ur(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,cr.MISSING_INTL_API,l);const N=typeof g=="bigint"?Number(g):g,_=n.getPluralRules(t,{type:h.pluralType}).select(N-(h.offset||0));v=(Object.prototype.hasOwnProperty.call(h.options,_)?h.options[_]:void 0)||h.options.other}if(!v)throw new Zw(h.value,g,Object.keys(h.options),l);const S=typeof g=="bigint"?Number(g):g;u.push(...cu(v.value,t,n,s,a,S-(h.offset||0)));continue}}return VE(u)}function WE(e,t){return t?{...e,...t,...Object.keys(e).reduce((n,s)=>(n[s]={...e[s],...t[s]},n),{})}:e}function KE(e,t){return t?Object.keys(e).reduce((n,s)=>(n[s]=WE(e[s],t[s]),n),{...e}):e}function pf(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function GE(e={number:{},dateTime:{},pluralRules:{}}){return{getNumberFormat:ns((...t)=>new Intl.NumberFormat(...t),{cache:pf(e.number),strategy:ss.variadic}),getDateTimeFormat:ns((...t)=>new Intl.DateTimeFormat(...t),{cache:pf(e.dateTime),strategy:ss.variadic}),getPluralRules:ns((...t)=>new Intl.PluralRules(...t),{cache:pf(e.pluralRules),strategy:ss.variadic})}}const At=class At{constructor(t,n=At.defaultLocale,s,a){he(this,"ast");he(this,"locales");he(this,"resolvedLocale");he(this,"formatters");he(this,"formats");he(this,"message");he(this,"formatterCache",{number:{},dateTime:{},pluralRules:{}});he(this,"format",t=>{const n=this.formatToParts(t);if(n.length===1)return n[0].value;const s=n.reduce((a,o)=>(!a.length||o.type!==Vt.literal||typeof a[a.length-1]!="string"?a.push(o.value):a[a.length-1]+=o.value,a),[]);return s.length<=1?s[0]||"":s});he(this,"formatToParts",t=>cu(this.ast,this.locales,this.formatters,this.formats,t,void 0,this.message));he(this,"resolvedOptions",()=>{var t;return{locale:((t=this.resolvedLocale)==null?void 0:t.toString())||Intl.NumberFormat.supportedLocalesOf(this.locales)[0]}});he(this,"getAst",()=>this.ast);if(this.locales=n,this.resolvedLocale=At.resolveLocale(n),typeof t=="string"){if(this.message=t,!At.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");const{...o}=a||{};this.ast=At.__parse(t,{...o,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=KE(At.formats,s),this.formatters=a&&a.formatters||GE(this.formatterCache)}static get defaultLocale(){return At.memoizedDefaultLocale||(At.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),At.memoizedDefaultLocale}};he(At,"memoizedDefaultLocale",null),he(At,"resolveLocale",t=>{if(typeof Intl.Locale>"u")return;const n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}),he(At,"__parse",HE),he(At,"formats",{number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}});let Lu=At,yl=function(e){return e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION",e}({});class ii extends Error{constructor(n,s,a){const o=a?a instanceof Error?a:new Error(String(a)):void 0;super(`[@formatjs/intl Error ${n}] ${s}
${o?`
${o.message}
${o.stack}`:""}`);he(this,"code");this.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ii)}}class qE extends ii{constructor(t,n){super(yl.UNSUPPORTED_FORMATTER,t,n)}}class JE extends ii{constructor(t,n){super(yl.INVALID_CONFIG,t,n)}}class ex extends ii{constructor(t,n){super(yl.MISSING_DATA,t,n)}}class pn extends ii{constructor(n,s,a){super(yl.FORMAT_ERROR,`${n}
Locale: ${s}
`,a);he(this,"descriptor");he(this,"locale");this.locale=s}}class mf extends pn{constructor(n,s,a,o){super(`${n}
MessageID: ${a==null?void 0:a.id}
Default Message: ${a==null?void 0:a.defaultMessage}
Description: ${a==null?void 0:a.description}
`,s,o);he(this,"descriptor");he(this,"locale");this.descriptor=a,this.locale=s}}class QE extends ii{constructor(n,s){super(yl.MISSING_TRANSLATION,`Missing message: "${n.id}" for locale "${s}", using ${n.defaultMessage?`default message (${typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(a=>a.value??JSON.stringify(a)).join()})`:"id"} as fallback.`);he(this,"descriptor");this.descriptor=n}}function XE(e,t,n=Error){if(!e)throw new n(t)}function Sa(e,t,n={}){return t.reduce((s,a)=>(a in e?s[a]=e[a]:a in n&&(s[a]=n[a]),s),{})}const YE=e=>{},ZE=e=>{},lj={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:YE,onWarn:ZE};function cj(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function $r(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function eT(e=cj()){const t=Intl.RelativeTimeFormat,n=Intl.ListFormat,s=Intl.DisplayNames,a=ns((...u)=>new Intl.DateTimeFormat(...u),{cache:$r(e.dateTime),strategy:ss.variadic}),o=ns((...u)=>new Intl.NumberFormat(...u),{cache:$r(e.number),strategy:ss.variadic}),l=ns((...u)=>new Intl.PluralRules(...u),{cache:$r(e.pluralRules),strategy:ss.variadic});return{getDateTimeFormat:a,getNumberFormat:o,getMessageFormat:ns((u,h,f,g)=>new Lu(u,h,f,{formatters:{getNumberFormat:o,getDateTimeFormat:a,getPluralRules:l},...g}),{cache:$r(e.message),strategy:ss.variadic}),getRelativeTimeFormat:ns((...u)=>new t(...u),{cache:$r(e.relativeTime),strategy:ss.variadic}),getPluralRules:l,getListFormat:ns((...u)=>new n(...u),{cache:$r(e.list),strategy:ss.variadic}),getDisplayNames:ns((...u)=>new s(...u),{cache:$r(e.displayNames),strategy:ss.variadic})}}function Im(e,t,n,s){const a=e&&e[t];let o;if(a&&(o=a[n]),o)return o;s(new qE(`No ${t} format named: ${n}`))}function Wc(e,t){return Object.keys(e).reduce((n,s)=>(n[s]={timeZone:t,...e[s]},n),{})}function tx(e,t){return Object.keys({...e,...t}).reduce((s,a)=>(s[a]={...e[a],...t[a]},s),{})}function nx(e,t){if(!t)return e;const n=Lu.formats;return{...n,...e,date:tx(Wc(n.date,t),Wc(e.date||{},t)),time:tx(Wc(n.time,t),Wc(e.time||{},t))}}const jp=({locale:e,formats:t,messages:n,defaultLocale:s,defaultFormats:a,fallbackOnEmptyString:o,onError:l,timeZone:u,defaultRichTextElements:h},f,g={id:""},y,v)=>{const{id:S,defaultMessage:N}=g;XE(!!S,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");const _=String(S),R=n&&Object.prototype.hasOwnProperty.call(n,_)&&n[_];if(Array.isArray(R)&&R.length===1&&R[0].type===Pe.literal)return R[0].value;if(y={...h,...y},t=nx(t,u),a=nx(a,u),!R){if(o===!1&&R==="")return R;if((!N||e&&e.toLowerCase()!==s.toLowerCase())&&l(new QE(g,e)),N)try{return f.getMessageFormat(N,s,a,v).format(y)}catch(b){return l(new mf(`Error formatting default message for: "${_}", rendering default message verbatim`,e,g,b)),typeof N=="string"?N:_}return _}try{return f.getMessageFormat(R,e,t,{formatters:f,...v}).format(y)}catch(b){l(new mf(`Error formatting message: "${_}", using ${N?"default message":"id"} as fallback.`,e,g,b))}if(N)try{return f.getMessageFormat(N,s,a,v).format(y)}catch(b){l(new mf(`Error formatting the default message for: "${_}", rendering message verbatim`,e,g,b))}return typeof R=="string"?R:typeof N=="string"?N:_},tT=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function wl({locale:e,formats:t,onError:n,timeZone:s},a,o,l={}){const{format:u}=l,h={...s&&{timeZone:s},...u&&Im(t,a,u,n)};let f=Sa(l,tT,h);return a==="time"&&!f.hour&&!f.minute&&!f.second&&!f.timeStyle&&!f.dateStyle&&(f={...f,hour:"numeric",minute:"numeric"}),o(e,f)}function nT(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return wl(e,"date",t,s).format(a)}catch(o){e.onError(new pn("Error formatting date.",e.locale,o))}return String(a)}function sT(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return wl(e,"time",t,s).format(a)}catch(o){e.onError(new pn("Error formatting time.",e.locale,o))}return String(a)}function rT(e,t,n,s,a={}){const o=typeof n=="string"?new Date(n||0):n,l=typeof s=="string"?new Date(s||0):s;try{return wl(e,"dateTimeRange",t,a).formatRange(o,l)}catch(u){e.onError(new pn("Error formatting date time range.",e.locale,u))}return String(o)}function iT(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return wl(e,"date",t,s).formatToParts(a)}catch(o){e.onError(new pn("Error formatting date.",e.locale,o))}return[]}function aT(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return wl(e,"time",t,s).formatToParts(a)}catch(o){e.onError(new pn("Error formatting time.",e.locale,o))}return[]}const oT=["style","type","fallback","languageDisplay"];function lT({locale:e,onError:t},n,s,a){Intl.DisplayNames||t(new ur(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,cr.MISSING_INTL_API));const l=Sa(a,oT);try{return n(e,l).of(s)}catch(u){t(new pn("Error formatting display name.",e,u))}}const cT=["type","style"],sx=Date.now();function uT(e){return`${sx}_${e}_${sx}`}function dT(e,t,n,s={}){const a=uj(e,t,n,s).reduce((o,l)=>{const u=l.value;return typeof u!="string"?o.push(u):typeof o[o.length-1]=="string"?o[o.length-1]+=u:o.push(u),o},[]);return a.length===1?a[0]:a.length===0?"":a}function uj({locale:e,onError:t},n,s,a={}){Intl.ListFormat||t(new ur(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,cr.MISSING_INTL_API));const l=Sa(a,cT);try{const u={},h=Array.from(s).map((f,g)=>{if(typeof f=="object"&&f!==null){const y=uT(g);return u[y]=f,y}return String(f)});return n(e,l).formatToParts(h).map(f=>f.type==="literal"?f:{...f,value:u[f.value]||f.value})}catch(u){t(new pn("Error formatting list.",e,u))}return s}const hT=["type"];function fT({locale:e,onError:t},n,s,a={}){Intl.PluralRules||t(new ur(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,cr.MISSING_INTL_API));const o=Sa(a,hT);try{return n(e,o).select(s)}catch(l){t(new pn("Error formatting plural.",e,l))}return"other"}const pT=["numeric","style"];function mT({locale:e,formats:t,onError:n},s,a={}){const{format:o}=a,l=!!o&&Im(t,"relative",o,n)||{},u=Sa(a,pT,l);return s(e,u)}function gT(e,t,n,s,a={}){s||(s="second"),Intl.RelativeTimeFormat||e.onError(new ur(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,cr.MISSING_INTL_API));try{return mT(e,t,a).format(n,s)}catch(l){e.onError(new pn("Error formatting relative time.",e.locale,l))}return String(n)}const vT=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function dj({locale:e,formats:t,onError:n},s,a={}){const{format:o}=a,l=o&&Im(t,"number",o,n)||{},u=Sa(a,vT,l);return s(e,u)}function yT(e,t,n,s={}){try{return dj(e,t,s).format(n)}catch(a){e.onError(new pn("Error formatting number.",e.locale,a))}return String(n)}function wT(e,t,n,s={}){try{return dj(e,t,s).formatToParts(n)}catch(a){e.onError(new pn("Error formatting number.",e.locale,a))}return[]}function xT(e){return typeof(e?e[Object.keys(e)[0]]:void 0)=="string"}function bT(e){e.onWarn&&e.defaultRichTextElements&&xT(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function jT(e,t){const n=eT(t),s={...lj,...e},{locale:a,defaultLocale:o,onError:l}=s;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&l?l(new ex(`Missing locale data for locale: "${a}" in Intl.NumberFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&l&&l(new ex(`Missing locale data for locale: "${a}" in Intl.DateTimeFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):(l&&l(new JE(`"locale" was not configured, using "${o}" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details`)),s.locale=s.defaultLocale||"en"),bT(s),{...s,formatters:n,formatNumber:yT.bind(null,s,n.getNumberFormat),formatNumberToParts:wT.bind(null,s,n.getNumberFormat),formatRelativeTime:gT.bind(null,s,n.getRelativeTimeFormat),formatDate:nT.bind(null,s,n.getDateTimeFormat),formatDateToParts:iT.bind(null,s,n.getDateTimeFormat),formatTime:sT.bind(null,s,n.getDateTimeFormat),formatDateTimeRange:rT.bind(null,s,n.getDateTimeFormat),formatTimeToParts:aT.bind(null,s,n.getDateTimeFormat),formatPlural:fT.bind(null,s,n.getPluralRules),formatMessage:jp.bind(null,s,n),$t:jp.bind(null,s,n),formatList:dT.bind(null,s,n.getListFormat),formatListToParts:uj.bind(null,s,n.getListFormat),formatDisplayName:lT.bind(null,s,n.getDisplayNames)}}function kT(e,t,n=Error){if(!e)throw new n(t)}function hj(e){kT(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}const fj={...lj,textComponent:m.Fragment},pj=e=>m.Children.toArray(e).map((n,s)=>m.isValidElement(n)?r.jsx(m.Fragment,{children:n},s):n);function ST(e){return function(t){return e(pj(t))}}function NT(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),s=Object.keys(t),a=n.length;if(s.length!==a)return!1;for(var o=0;o<a;o++){var l=n[o];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}var mj={exports:{}},je={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nt=typeof Symbol=="function"&&Symbol.for,Om=nt?Symbol.for("react.element"):60103,Am=nt?Symbol.for("react.portal"):60106,td=nt?Symbol.for("react.fragment"):60107,nd=nt?Symbol.for("react.strict_mode"):60108,sd=nt?Symbol.for("react.profiler"):60114,rd=nt?Symbol.for("react.provider"):60109,id=nt?Symbol.for("react.context"):60110,Rm=nt?Symbol.for("react.async_mode"):60111,ad=nt?Symbol.for("react.concurrent_mode"):60111,od=nt?Symbol.for("react.forward_ref"):60112,ld=nt?Symbol.for("react.suspense"):60113,_T=nt?Symbol.for("react.suspense_list"):60120,cd=nt?Symbol.for("react.memo"):60115,ud=nt?Symbol.for("react.lazy"):60116,ET=nt?Symbol.for("react.block"):60121,TT=nt?Symbol.for("react.fundamental"):60117,CT=nt?Symbol.for("react.responder"):60118,IT=nt?Symbol.for("react.scope"):60119;function Zt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Om:switch(e=e.type,e){case Rm:case ad:case td:case sd:case nd:case ld:return e;default:switch(e=e&&e.$$typeof,e){case id:case od:case ud:case cd:case rd:return e;default:return t}}case Am:return t}}}function gj(e){return Zt(e)===ad}je.AsyncMode=Rm;je.ConcurrentMode=ad;je.ContextConsumer=id;je.ContextProvider=rd;je.Element=Om;je.ForwardRef=od;je.Fragment=td;je.Lazy=ud;je.Memo=cd;je.Portal=Am;je.Profiler=sd;je.StrictMode=nd;je.Suspense=ld;je.isAsyncMode=function(e){return gj(e)||Zt(e)===Rm};je.isConcurrentMode=gj;je.isContextConsumer=function(e){return Zt(e)===id};je.isContextProvider=function(e){return Zt(e)===rd};je.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Om};je.isForwardRef=function(e){return Zt(e)===od};je.isFragment=function(e){return Zt(e)===td};je.isLazy=function(e){return Zt(e)===ud};je.isMemo=function(e){return Zt(e)===cd};je.isPortal=function(e){return Zt(e)===Am};je.isProfiler=function(e){return Zt(e)===sd};je.isStrictMode=function(e){return Zt(e)===nd};je.isSuspense=function(e){return Zt(e)===ld};je.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===td||e===ad||e===sd||e===nd||e===ld||e===_T||typeof e=="object"&&e!==null&&(e.$$typeof===ud||e.$$typeof===cd||e.$$typeof===rd||e.$$typeof===id||e.$$typeof===od||e.$$typeof===TT||e.$$typeof===CT||e.$$typeof===IT||e.$$typeof===ET)};je.typeOf=Zt;mj.exports=je;var OT=mj.exports,vj=OT,AT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},RT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},yj={};yj[vj.ForwardRef]=AT;yj[vj.Memo]=RT;const wj=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=m.createContext(null)):m.createContext(null),{Consumer:LI,Provider:DT}=wj,LT=DT,PT=wj;function Dm(){const e=m.useContext(PT);return hj(e),e}var xj=function(e){return e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName",e}(xj||{}),bj=function(e){return e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts",e}(bj||{});function jj(e){const t=n=>{const s=Dm(),{value:a,children:o,...l}=n,u=typeof a=="string"?new Date(a||0):a,h=e==="formatDate"?s.formatDateToParts(u,l):s.formatTimeToParts(u,l);return o(h)};return t.displayName=bj[e],t}function xl(e){const t=n=>{const s=Dm(),{value:a,children:o,...l}=n,u=s[e](a,l);if(typeof o=="function")return o(u);const h=s.textComponent||m.Fragment;return r.jsx(h,{children:u})};return t.displayName=xj[e],t}function kj(e){return e&&Object.keys(e).reduce((t,n)=>{const s=e[n];return t[n]=oj(s)?ST(s):s,t},{})}const rx=(e,t,n,s,...a)=>{const o=kj(s),l=jp(e,t,n,o,...a);return Array.isArray(l)?pj(l):l},ix=({defaultRichTextElements:e,...t},n)=>{const s=kj(e),a=jT({...fj,...t,defaultRichTextElements:s},n),o={locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,messages:a.messages,onError:a.onError,defaultRichTextElements:s};return{...a,formatMessage:rx.bind(null,o,a.formatters),$t:rx.bind(null,o,a.formatters)}};function gf(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}class kp extends m.PureComponent{constructor(){super(...arguments);he(this,"cache",cj());he(this,"state",{cache:this.cache,intl:ix(gf(this.props),this.cache),prevConfig:gf(this.props)})}static getDerivedStateFromProps(n,{prevConfig:s,cache:a}){const o=gf(n);return NT(s,o)?null:{intl:ix(o,a),prevConfig:o}}render(){return hj(this.state.intl),r.jsx(LT,{value:this.state.intl,children:this.props.children})}}he(kp,"displayName","IntlProvider"),he(kp,"defaultProps",fj);xl("formatDate");xl("formatTime");xl("formatNumber");xl("formatList");xl("formatDisplayName");jj("formatDate");jj("formatTime");var V;(function(e){e.BACKLOG="BACKLOG",e.TODO="TODO",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.BLOCKED="BLOCKED",e.ARCHIVED="ARCHIVED"})(V||(V={}));var ax;(function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.CRITICAL="CRITICAL"})(ax||(ax={}));var ox;(function(e){e.TASK_CREATE="TASK_CREATE",e.TASK_UPDATE="TASK_UPDATE",e.TASK_DELETE="TASK_DELETE",e.POLICY_EVALUATE="POLICY_EVALUATE",e.ACCESS_DENIED="ACCESS_DENIED"})(ox||(ox={}));var lx;(function(e){e.USER="USER",e.SERVICE="SERVICE",e.INTEGRATION="INTEGRATION"})(lx||(lx={}));function dd(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function MT(e,t,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{f(s.next(g))}catch(y){l(y)}}function h(g){try{f(s.throw(g))}catch(y){l(y)}}function f(g){g.done?o(g.value):a(g.value).then(u,h)}f((s=s.apply(e,t||[])).next())})}const $T=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Lm extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class UT extends Lm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cx extends Lm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ux extends Lm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sp||(Sp={}));class BT{constructor(t,{headers:n={},customFetch:s,region:a=Sp.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=$T(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return MT(this,arguments,void 0,function*(n,s={}){var a;let o,l;try{const{headers:u,method:h,body:f,signal:g,timeout:y}=s;let v={},{region:S}=s;S||(S=this.region);const N=new URL(`${this.url}/${n}`);S&&S!=="any"&&(v["x-region"]=S,N.searchParams.set("forceFunctionRegion",S));let _;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",_=f):typeof f=="string"?(v["Content-Type"]="text/plain",_=f):typeof FormData<"u"&&f instanceof FormData?_=f:(v["Content-Type"]="application/json",_=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?_=JSON.stringify(f):_=f;let R=g;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),g?(R=l.signal,g.addEventListener("abort",()=>l.abort())):R=l.signal);const b=yield this.fetch(N.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:_,signal:R}).catch(M=>{throw new UT(M)}),w=b.headers.get("x-relay-error");if(w&&w==="true")throw new cx(b);if(!b.ok)throw new ux(b);let j=((a=b.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),T;return j==="application/json"?T=yield b.json():j==="application/octet-stream"||j==="application/pdf"?T=yield b.blob():j==="text/event-stream"?T=b:j==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(u){return{data:null,error:u,response:u instanceof ux||u instanceof cx?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var HT=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},FT=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,h=null,f=o.status,g=o.statusText;if(o.ok){var y,v;if(n.method!=="HEAD"){var S;const b=await o.text();b===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?u=b:u=JSON.parse(b))}const _=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),R=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");_&&R&&R.length>1&&(h=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var N;const _=await o.text();try{l=JSON.parse(_),Array.isArray(l)&&o.status===404&&(u=[],l=null,f=200,g="OK")}catch{o.status===404&&_===""?(f=204,g="No Content"):l={message:_}}if(l&&n.isMaybeSingle&&(!(l==null||(N=l.details)===null||N===void 0)&&N.includes("0 rows"))&&(l=null,f=200,g="OK"),l&&n.shouldThrowOnError)throw new HT(l)}return{error:l,data:u,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let u="";const h=o==null?void 0:o.cause;if(h){var f,g,y,v;const N=(f=h==null?void 0:h.message)!==null&&f!==void 0?f:"",_=(g=h==null?void 0:h.code)!==null&&g!==void 0?g:"";u=`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(v=h==null?void 0:h.name)!==null&&v!==void 0?v:"Error"}: ${N}`,_&&(u+=` (${_})`),h!=null&&h.stack&&(u+=`
${h.stack}`)}else{var S;u=(S=o==null?void 0:o.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},zT=class extends FT{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const dx=new RegExp("[,()]");var Wi=class extends zT{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&dx.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&dx.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},VT=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:s}=t??{},a=n?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(f=>/\s/.test(f)&&!o?"":(f==='"'&&(o=!o),f)).join(""),{url:u,headers:h}=this.cloneRequestState();return u.searchParams.set("select",l),s&&h.append("Prefer",`count=${s}`),new Wi({method:a,url:u,headers:h,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);o.searchParams.set("columns",h.join(","))}}return new Wi({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST",{url:u,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),s&&h.append("Prefer",`count=${s}`),a||h.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(f.length>0){const g=[...new Set(f)].map(y=>`"${y}"`);u.searchParams.set("columns",g.join(","))}}return new Wi({method:l,url:u,headers:h,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const s="PATCH",{url:a,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Wi({method:s,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Wi({method:n,url:s,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},WT=class Sj{constructor(t,{headers:n={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new VT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Sj(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:a=!1,count:o}={}){var l;let u;const h=new URL(`${this.url}/rpc/${t}`);let f;const g=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(g)),y=s&&Object.values(n).some(g);y?(u="POST",f=n):s||a?(u=s?"HEAD":"GET",Object.entries(n).filter(([S,N])=>N!==void 0).map(([S,N])=>[S,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([S,N])=>{h.searchParams.append(S,N)})):(u="POST",f=n);const v=new Headers(this.headers);return y?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new Wi({method:u,url:h,headers:v,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class KT{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const a=s.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const GT="2.91.0",qT=`realtime-js/${GT}`,JT="1.0.0",Nj="2.0.0",hx=Nj,Np=1e4,QT=1e3,XT=100;var Vs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Vs||(Vs={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var Rn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Rn||(Rn={}));var _p;(function(e){e.websocket="websocket"})(_p||(_p={}));var Vr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vr||(Vr={}));class YT{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,s){var a,o;const l=t.topic,u=(a=t.ref)!==null&&a!==void 0?a:"",h=(o=t.join_ref)!==null&&o!==void 0?o:"",f=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+u.length+l.length+f.length+y.length,S=new ArrayBuffer(this.HEADER_LENGTH+v);let N=new DataView(S),_=0;N.setUint8(_++,this.KINDS.userBroadcastPush),N.setUint8(_++,h.length),N.setUint8(_++,u.length),N.setUint8(_++,l.length),N.setUint8(_++,f.length),N.setUint8(_++,y.length),N.setUint8(_++,n),Array.from(h,b=>N.setUint8(_++,b.charCodeAt(0))),Array.from(u,b=>N.setUint8(_++,b.charCodeAt(0))),Array.from(l,b=>N.setUint8(_++,b.charCodeAt(0))),Array.from(f,b=>N.setUint8(_++,b.charCodeAt(0))),Array.from(y,b=>N.setUint8(_++,b.charCodeAt(0)));var R=new Uint8Array(S.byteLength+s.byteLength);return R.set(new Uint8Array(S),0),R.set(new Uint8Array(s),S.byteLength),R.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,o,l,u,h]=s;return n({join_ref:a,ref:o,topic:l,event:u,payload:h})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,s){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let h=this.HEADER_LENGTH+4;const f=s.decode(t.slice(h,h+a));h=h+a;const g=s.decode(t.slice(h,h+o));h=h+o;const y=s.decode(t.slice(h,h+l));h=h+l;const v=t.slice(h,t.byteLength),S=u===this.JSON_ENCODING?JSON.parse(s.decode(v)):v,N={type:this.BROADCAST_EVENT,event:g,payload:S};return l>0&&(N.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class _j{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_e||(_e={}));const fx=(e,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=ZT(l,e,t,a),o),{}):{}},ZT=(e,t,n,s)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,l=n[e];return o&&!s.includes(o)?Ej(o,l):Ep(l)},Ej=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return s1(t,n)}switch(e){case _e.bool:return e1(t);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return t1(t);case _e.json:case _e.jsonb:return n1(t);case _e.timestamp:return r1(t);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return Ep(t);default:return Ep(t)}},Ep=e=>e,e1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},t1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},n1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},s1=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Ej(t,u))}return e},r1=e=>typeof e=="string"?e.replace(" ","T"):e,Tj=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class vf{constructor(t,n,s={},a=Np){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var px;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(px||(px={}));class Fo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fo.syncState(this.state,a,o,l),this.pendingDiffs.forEach(h=>{this.state=Fo.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Fo.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const o=this.cloneDeep(t),l=this.transformState(n),u={},h={};return this.map(o,(f,g)=>{l[f]||(h[f]=g)}),this.map(l,(f,g)=>{const y=o[f];if(y){const v=g.map(R=>R.presence_ref),S=y.map(R=>R.presence_ref),N=g.filter(R=>S.indexOf(R.presence_ref)<0),_=y.filter(R=>v.indexOf(R.presence_ref)<0);N.length>0&&(u[f]=N),_.length>0&&(h[f]=_)}else u[f]=g}),this.syncDiff(o,{joins:u,leaves:h},s,a)}static syncDiff(t,n,s,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(u,h)=>{var f;const g=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(h),g.length>0){const y=t[u].map(S=>S.presence_ref),v=g.filter(S=>y.indexOf(S.presence_ref)<0);t[u].unshift(...v)}s(u,g,h)}),this.map(l,(u,h)=>{let f=t[u];if(!f)return;const g=h.map(y=>y.presence_ref);f=f.filter(y=>g.indexOf(y.presence_ref)<0),t[u]=f,a(u,f,h),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mx||(mx={}));var zo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zo||(zo={}));var gs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gs||(gs={}));class aa{constructor(t,n={config:{}},s){var a,o;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new vf(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new _j(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Fo(this),this.broadcastEndpointURL=Tj(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Xe.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,f=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(S=>S.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[zo.PRESENCE]&&this.bindings[zo.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(S=>t==null?void 0:t(gs.CHANNEL_ERROR,S)),this._onClose(()=>t==null?void 0:t(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t==null||t(gs.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,R=(N=_==null?void 0:_.length)!==null&&N!==void 0?N:0,b=[];for(let w=0;w<R;w++){const j=_[w],{filter:{event:T,schema:M,table:L,filter:P}}=j,H=S&&S[w];if(H&&H.event===T&&aa.isFilterValueEqual(H.schema,M)&&aa.isFilterValueEqual(H.table,L)&&aa.isFilterValueEqual(H.filter,P))b.push(Object.assign(Object.assign({},j),{id:H.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,t&&t(gs.SUBSCRIBED);return}}).receive("error",S=>{this.state=Xe.errored,t==null||t(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===Xe.joined&&t===zo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let h=u.statusText;try{const f=await u.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,h;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new vf(this,Rn.leave,{},t),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xe.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new vf(this,t,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>XT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,o;const l=t.toLocaleLowerCase(),{close:u,error:h,leave:f,join:g}=Rn;if(s&&[u,h,f,g].indexOf(l)>=0&&s!==this._joinRef())return;let v=this._onMessage(l,n,s);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var N,_,R;return((N=S.filter)===null||N===void 0?void 0:N.event)==="*"||((R=(_=S.filter)===null||_===void 0?void 0:_.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(S=>S.callback(v,s)):(o=this.bindings[l])===null||o===void 0||o.filter(S=>{var N,_,R,b,w,j,T,M;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in S){const L=S.id,P=(N=S.filter)===null||N===void 0?void 0:N.event;return L&&((_=n.ids)===null||_===void 0?void 0:_.includes(L))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))&&(!(!((b=S.filter)===null||b===void 0)&&b.table)||S.filter.table===((w=n.data)===null||w===void 0?void 0:w.table))}else{const L=(T=(j=S==null?void 0:S.filter)===null||j===void 0?void 0:j.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return L==="*"||L===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===l}).map(S=>{if(typeof v=="object"&&"ids"in v){const N=v.data,{schema:_,table:R,commit_timestamp:b,type:w,errors:j}=N;v=Object.assign(Object.assign({},{schema:_,table:R,commit_timestamp:b,eventType:w,new:{},old:{},errors:j}),this._getPayloadRecords(N))}S.callback(v,s)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&aa.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Rn.close,{},t)}_onError(t){this._on(Rn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=fx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=fx(t.columns,t.old_record)),n}}const yf=()=>{},Kc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i1=[1e3,2e3,5e3,1e4],a1=1e4,o1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l1{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Np,this.transport=null,this.heartbeatIntervalMs=Kc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yf,this.ref=0,this.reconnectTimer=null,this.vsn=hx,this.logger=yf,this.conn=null,this.sendBuffer=[],this.serializer=new YT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${_p.websocket}`,this.httpEndpoint=Tj(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=KT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Vs.connecting:return Vr.Connecting;case Vs.open:return Vr.Open;case Vs.closing:return Vr.Closing;default:return Vr.Closed}}isConnected(){return this.connectionState()===Vr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new aa(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:s,payload:a,ref:o}=t,l=()=>{this.encode(t,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${n} ${s} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(QT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Kc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${a} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Vs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vs.open||this.conn.readyState===Vs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Rn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([o1],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,s=!1;if(t)n=t,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:qT};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Rn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new _j(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Kc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,a,o,l,u,h,f,g,y,v,S;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Np,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Kc.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:yf,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:hx,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:N=>i1[N-1]||a1,this.vsn){case JT:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:(N,_)=>_(JSON.stringify(N)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(N,_)=>_(JSON.parse(N));break;case Nj:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(S=t==null?void 0:t.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ol=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function c1(e,t,n){const s=new URL(t,e);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function u1(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function d1(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:a,body:o,headers:l}){const u=c1(e.baseUrl,s,a),h=await u1(e.auth),f=await t(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...h,...l},body:o?JSON.stringify(o):void 0}),g=await f.text(),y=(f.headers.get("content-type")||"").includes("application/json"),v=y&&g?JSON.parse(g):g;if(!f.ok){const S=y?v:void 0,N=S==null?void 0:S.error;throw new ol((N==null?void 0:N.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:S})}return{status:f.status,headers:f.headers,data:v}}}}function Gc(e){return e.join("")}var h1=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Gc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gc(e.namespace)}`}),!0}catch(t){if(t instanceof ol&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ol&&n.status===409)return;throw n}}};function Ui(e){return e.join("")}var f1=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ui(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ol&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ol&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},p1=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=d1({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new h1(this.client,t),this.tableOps=new f1(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},hd=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var m1=class extends hd{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Tp=class extends hd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Pm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),g1=()=>Response,Cp=e=>{if(Array.isArray(e))return e.map(n=>Cp(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=Cp(s)}),t},v1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},y1=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function w1(e,t){if(ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ll(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x1(e){var t=w1(e,"string");return ll(t)=="symbol"?t:t+""}function b1(e,t,n){return(t=x1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gx(Object(n),!0).forEach(function(s){b1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gx(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const wf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},j1=async(e,t,n)=>{e instanceof await g1()&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new m1(wf(s),a,o))}).catch(s=>{t(new Tp(wf(s),s))}):t(new Tp(wf(e),e))},k1=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(v1(s)?(a.headers=ee({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),ee(ee({},a),n))};async function bl(e,t,n,s,a,o){return new Promise((l,u)=>{e(n,k1(t,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>j1(h,u,s))})}async function cl(e,t,n,s){return bl(e,"GET",t,n,s)}async function On(e,t,n,s,a){return bl(e,"POST",t,s,a,n)}async function Ip(e,t,n,s,a){return bl(e,"PUT",t,s,a,n)}async function S1(e,t,n,s){return bl(e,"HEAD",t,ee(ee({},n),{},{noResolveJson:!0}),s)}async function Mm(e,t,n,s,a){return bl(e,"DELETE",t,s,a,n)}var N1=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Me(t))return{data:null,error:t};throw t}}};let Cj;Cj=Symbol.toStringTag;var _1=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Cj]="BlobDownloadBuilder",this.promise=null}asStream(){return new N1(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Me(t))return{data:null,error:t};throw t}}};const E1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T1=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Pm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,s){var a=this;try{let o;const l=ee(ee({},vx),s);let u=ee(ee({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",a.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),h&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(h))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=a.toBase64(a.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),s!=null&&s.headers&&(u=ee(ee({},u),s.headers));const f=a._removeEmptyFolders(t),g=a._getFinalPath(f),y=await(e=="PUT"?Ip:On)(a.fetch,`${a.url}/object/${g}`,o,ee({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,s){var a=this;const o=a._removeEmptyFolders(e),l=a._getFinalPath(o),u=new URL(a.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let h;const f=ee({upsert:vx.upsert},s),g=ee(ee({},a.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",f.cacheControl)):(h=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{data:{path:o,fullPath:(await Ip(a.fetch,u.toString(),h,{headers:g})).Key},error:null}}catch(h){if(a.shouldThrowOnError)throw h;if(Me(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(e,t){var n=this;try{let s=n._getFinalPath(e);const a=ee({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const o=await On(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new hd("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var s=this;try{return{data:await On(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}async copy(e,t,n){var s=this;try{return{data:{path:(await On(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var s=this;try{let a=s._getFinalPath(e),o=await On(s.fetch,`${s.url}/object/sign/${a}`,ee({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var s=this;try{const a=await On(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>ee(ee({},l),{},{signedUrl:l.signedURL?encodeURI(`${s.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),l=()=>cl(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new _1(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Cp(await cl(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await S1(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Me(s)&&s instanceof Tp){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(e){var t=this;try{return{data:await Mm(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async list(e,t,n){var s=this;try{const a=ee(ee(ee({},E1),t),{},{prefix:e||""});return{data:await On(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},n),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Me(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const s=ee({},e);return{data:await On(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},t),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ij="2.91.0",Oj={"X-Client-Info":`storage-js/${Ij}`};var C1=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=ee(ee({},Oj),t),this.fetch=Pm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await cl(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await cl(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await On(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var n=this;try{return{data:await Ip(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Me(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await On(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},I1=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},Oj),t),this.fetch=Pm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await On(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await cl(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!y1(e))throw new hd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new p1({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(a,u),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}}}})}};const $m={"X-Client-Info":`storage-js/${Ij}`,"Content-Type":"application/json"};var Aj=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Kt(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var xf=class extends Aj{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},O1=class extends Aj{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Um=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),A1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),R1=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new xf(yx(o),s,l))}).catch(()=>{const o=s+"";t(new xf(a.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";t(new xf(a.statusText||`HTTP ${s} error`,s,o))}}else t(new O1(yx(e),e))},D1=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(A1(s)?(a.headers=ee({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,ee(ee({},a),n)):a};async function L1(e,t,n,s,a,o){return new Promise((l,u)=>{e(n,D1(t,s,a,o)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>R1(h,u,s))})}async function Gt(e,t,n,s,a){return L1(e,"POST",t,s,a,n)}var P1=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},$m),t),this.fetch=Um(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Gt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Gt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Kt(s))return{data:null,error:s};throw s}}},M1=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},$m),t),this.fetch=Um(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Gt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Gt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Gt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}},$1=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},$m),t),this.fetch=Um(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Gt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Kt(n))return{data:null,error:n};throw n}}},U1=class extends $1{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new B1(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},B1=class extends P1{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new H1(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},H1=class extends M1{constructor(e,t,n,s,a){super(e,t,a),this.vectorBucketName=n,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},F1=class extends C1{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new T1(this.url,this.headers,e,this.fetch)}get vectors(){return new U1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new I1(this.url+"/iceberg",this.headers,this.fetch)}};const Rj="2.91.0",Ki=30*1e3,Op=3,bf=Op*Ki,z1="http://localhost:9999",V1="supabase.auth.token",W1={"X-Client-Info":`gotrue-js/${Rj}`},Ap="X-Supabase-Api-Version",Dj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G1=10*60*1e3;class ul extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function J(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class q1 extends ul{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function J1(e){return J(e)&&e.name==="AuthApiError"}class Wr extends ul{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class _s extends ul{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class zt extends _s{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Q1(e){return J(e)&&e.name==="AuthSessionMissingError"}class Bi extends _s{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qc extends _s{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Jc extends _s{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X1(e){return J(e)&&e.name==="AuthImplicitGrantRedirectError"}class wx extends _s{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Y1 extends _s{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Rp extends _s{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function jf(e){return J(e)&&e.name==="AuthRetryableFetchError"}class xx extends _s{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Dp extends _s{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bx=` 	
\r=`.split(""),Z1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<bx.length;t+=1)e[bx[t].charCodeAt(0)]=-2;for(let t=0;t<Pu.length;t+=1)e[Pu[t].charCodeAt(0)]=t;return e})();function jx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Pu[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Pu[s]),t.queuedBits-=6}}function Lj(e,t,n){const s=Z1[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kx(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{nC(l,s,n)};for(let l=0;l<e.length;l+=1)Lj(e.charCodeAt(l),a,o);return t.join("")}function eC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tC(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}eC(s,t)}}function nC(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function fa(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Lj(e.charCodeAt(a),n,s);return new Uint8Array(t)}function sC(e){const t=[];return tC(e,n=>t.push(n)),new Uint8Array(t)}function Jr(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>jx(a,n,s)),jx(null,n,s),t.join("")}function rC(e){return Math.round(Date.now()/1e3)+e}function iC(){return Symbol("auth-callback")}const at=()=>typeof window<"u"&&typeof document<"u",Ur={tested:!1,writable:!1},Pj=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ur.tested)return Ur.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ur.tested=!0,Ur.writable=!0}catch{Ur.tested=!0,Ur.writable=!1}return Ur.writable};function aC(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const Mj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),oC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Gi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Br=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},it=async(e,t)=>{await e.removeItem(t)};class fd{constructor(){this.promise=new fd.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}fd.promiseConstructor=Promise;function kf(e){const t=e.split(".");if(t.length!==3)throw new Dp("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!K1.test(t[s]))throw new Dp("JWT not in base64url format");return{header:JSON.parse(kx(t[0])),payload:JSON.parse(kx(t[1])),signature:fa(t[2]),raw:{header:t[0],payload:t[1]}}}async function lC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cC(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){s(l);return}}catch(l){if(!t(o,l)){a(l);return}}})()})}function uC(e){return("0"+e.toString(16)).substr(-2)}function dC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,uC).join("")}async function hC(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function fC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await hC(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hi(e,t,n=!1){const s=dC();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await Gi(e,`${t}-code-verifier`,a);const o=await fC(s);return[o,s===o?"plain":"s256"]}const pC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mC(e){const t=e.headers.get(Ap);if(!t||!t.match(pC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gC(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function vC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fi(e){if(!yC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wC(e,t){return new Proxy(e,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,a)}})}function Sx(e){return JSON.parse(JSON.stringify(e))}const zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xC=[502,503,504];async function Nx(e){var t;if(!oC(e))throw new Rp(zr(e),0);if(xC.includes(e.status))throw new Rp(zr(e),e.status);let n;try{n=await e.json()}catch(o){throw new Wr(zr(o),o)}let s;const a=mC(e);if(a&&a.getTime()>=Dj["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new xx(zr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new zt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new xx(zr(n),e.status,n.weak_password.reasons);throw new q1(zr(n),e.status||500,s)}const bC=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Z(e,t,n,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[Ap]||(o[Ap]=Dj["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await jC(e,t,n+u,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function jC(e,t,n,s,a,o){const l=bC(t,s,a,o);let u;try{u=await e(n,Object.assign({},l))}catch(h){throw console.error(h),new Rp(zr(h),0)}if(u.ok||await Nx(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(h){await Nx(h)}}function Cn(e){var t;let n=null;NC(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=rC(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function _x(e){const t=Cn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Gs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kC(e){return{data:e,error:null}}function SC(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o}=e,l=dd(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function Ex(e){return e}function NC(e){return e.access_token&&e.refresh_token&&e.expires_in}const Nf=["global","local","others"];class _C{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=Mj(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Nf[0]){if(Nf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nf.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Gs})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=dd(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:SC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(J(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gs})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,o,l,u,h;try{const f={nextPage:null,lastPage:0,total:0},g=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Ex});if(g.error)throw g.error;const y=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(N.split(";")[1].split("=")[1]);f[`${R}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(J(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Fi(t);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gs})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Fi(t);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Gs})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){Fi(t);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Gs})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Fi(t.userId);try{const{data:n,error:s}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Fi(t.userId),Fi(t.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,a,o,l,u,h;try{const f={nextPage:null,lastPage:0,total:0},g=await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Ex});if(g.error)throw g.error;const y=await g.json(),v=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(N.split(";")[1].split("=")[1]);f[`${R}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(J(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}}function Tx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const zi={debug:!!(globalThis&&Pj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $j extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class EC extends $j{}async function TC(e,t,n){zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),zi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw zi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new EC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(zi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function CC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uj(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function IC(e){return parseInt(e,16)}function OC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function AC(e){var t;const{chainId:n,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:h,resources:f,scheme:g,uri:y,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=Uj(e.address),N=g?`${g}://${s}`:s,_=e.statement?`${e.statement}
`:"",R=`${N} wants you to sign in with your Ethereum account:
${S}

${_}`;let b=`URI: ${y}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(b+=`
Expiration Time: ${a.toISOString()}`),u&&(b+=`
Not Before: ${u.toISOString()}`),h&&(b+=`
Request ID: ${h}`),f){let w=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);w+=`
- ${j}`}b+=w}return`${R}
${b}`}class qe extends Error{constructor({message:t,code:n,cause:s,name:a}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Mu extends qe{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function RC({error:e,options:t}){var n,s,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new qe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new qe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new qe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new qe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new qe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Bj(l)){if(o.rp.id!==l)return new qe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new qe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new qe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function DC({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new qe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(Bj(s)){if(n.rpId!==s)return new qe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new qe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class LC{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const PC=new LC;function MC(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,a=dd(e,["challenge","user","excludeCredentials"]),o=fa(t).buffer,l=Object.assign(Object.assign({},n),{id:fa(n.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:l});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const f=s[h];u.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:fa(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function $C(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=dd(e,["challenge","allowCredentials"]),a=fa(t).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:fa(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function UC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Jr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Jr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BC(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Jr(new Uint8Array(a.authenticatorData)),clientDataJSON:Jr(new Uint8Array(a.clientDataJSON)),signature:Jr(new Uint8Array(a.signature)),userHandle:a.userHandle?Jr(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bj(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Cx(){var e,t;return!!(at()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function HC(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mu("Browser returned unexpected credential type",t)}:{data:null,error:new Mu("Empty credential response",t)}}catch(t){return{data:null,error:RC({error:t,options:e})}}}async function FC(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mu("Browser returned unexpected credential type",t)}:{data:null,error:new Mu("Empty credential response",t)}}catch(t){return{data:null,error:DC({error:t,options:e})}}}const zC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},VC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $u(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))s[o]=l;else if(n(l))s[o]=l;else if(t(l)){const u=s[o];t(u)?s[o]=$u(u,l):s[o]=$u(l)}else s[o]=l}return s}function WC(e,t){return $u(zC,e,t||{})}function KC(e,t){return $u(VC,e,t||{})}class GC{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:a},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const h=a??PC.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=WC(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:g,error:y}=await HC({publicKey:f,signal:h});return g?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const f=KC(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:g,error:y}=await FC(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:h}));return g?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(l){return J(l)?{data:null,error:l}:{data:null,error:new Wr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn authentication")};try{if(!Cx())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:o});if(!l)return{data:null,error:u};const{webauthn:h}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:s,credential_response:h.credential_response}})}catch(l){return J(l)?{data:null,error:l}:{data:null,error:new Wr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn registration")};try{if(!Cx())return{data:null,error:new Wr("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:u};const{data:h,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(l){return J(l)?{data:null,error:l}:{data:null,error:new Wr("Unexpected error in register",l)}}}}CC();const qC={url:z1,storageKey:V1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ix(e,t,n){return await n()}const Vi={};class dl{get jwks(){var t,n;return(n=(t=Vi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Vi[this.storageKey]=Object.assign(Object.assign({},Vi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Vi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vi[this.storageKey]=Object.assign(Object.assign({},Vi[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},qC),t);if(this.storageKey=o.storageKey,this.instanceID=(n=dl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,dl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&at()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new _C({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Mj(o.fetch),this.lock=o.lock||Ix,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&at()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=TC:this.lock=Ix,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Pj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Tx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Tx(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Rj}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(at()&&(n=aC(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),at()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),X1(o)){const h=(t=o.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return J(n)?this._returnResult({error:n}):this._returnResult({error:new Wr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Cn}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(o){if(J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,s,a;try{let o;if("email"in t){const{email:g,password:y,options:v}=t;let S=null,N=null;this.flowType==="pkce"&&([S,N]=await Hi(this.storage,this.storageKey)),o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:g,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:S,code_challenge_method:N},xform:Cn})}else if("phone"in t){const{phone:g,password:y,options:v}=t;o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(s=v==null?void 0:v.data)!==null&&s!==void 0?s:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Cn})}else throw new qc("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await it(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const h=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(o){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_x})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_x})}else throw new qc("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new Bi;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,a,o,l,u,h,f,g,y,v;let S,N;if("message"in t)S=t.message,N=t.signature;else{const{chain:_,wallet:R,statement:b,options:w}=t;let j;if(at())if(typeof R=="object")j=R;else{const ue=window;if("ethereum"in ue&&typeof ue.ethereum=="object"&&"request"in ue.ethereum&&typeof ue.ethereum.request=="function")j=ue.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=R}const T=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(ue=>ue).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=Uj(M[0]);let P=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const ue=await j.request({method:"eth_chainId"});P=IC(ue)}const H={domain:T.host,address:L,statement:b,uri:T.href,version:"1",chainId:P,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=w==null?void 0:w.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=w==null?void 0:w.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=w==null?void 0:w.signInWithEthereum)===null||g===void 0?void 0:g.resources};S=AC(H),N=await j.request({method:"personal_sign",params:[OC(S),L]})}try{const{data:_,error:R}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:N},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Cn});if(R)throw R;if(!_||!_.session||!_.user){const b=new Bi;return this._returnResult({data:{user:null,session:null},error:b})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:R})}catch(_){if(J(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var n,s,a,o,l,u,h,f,g,y,v,S;let N,_;if("message"in t)N=t.message,_=t.signature;else{const{chain:R,wallet:b,statement:w,options:j}=t;let T;if(at())if(typeof b=="object")T=b;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))T=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=b}const M=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const L=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),w?{statement:w}:null));let P;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")P=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)P=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)N=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),_=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${M.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(a=(s=j==null?void 0:j.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((h=j==null?void 0:j.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((y=(g=j==null?void 0:j.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...j.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const L=await T.signMessage(new TextEncoder().encode(N),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=L}}try{const{data:R,error:b}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Jr(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Cn});if(b)throw b;if(!R||!R.session||!R.user){const w=new Bi;return this._returnResult({data:{user:null,session:null},error:w})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:b})}catch(R){if(J(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(t){const n=await Br(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Y1;const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Cn});if(await it(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new Bi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",o.session)},0)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:o,nonce:l}=t,u=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Cn}),{data:h,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const g=new Bi;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,a,o,l;try{if("email"in t){const{email:u,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Hi(this.storage,this.storageKey));const{error:y}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:u,options:h}=t,{data:f,error:g}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g})}throw new qc("You must provide either an email or phone number.")}catch(u){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,s;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:u}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Cn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,f=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(a){if(J(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,s,a,o,l;try{let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Hi(this.storage,this.storageKey));const f=await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:h}),headers:this.headers,xform:kC});return!((o=f.data)===null||o===void 0)&&o.url&&at()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new zt;const{error:a}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(J(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:l}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:l,error:u}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new qc("You must provide either an email or phone number and a type")}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<bf:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const l=await Br(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Sf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=wC(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gs}):await this._useSession(async n=>{var s,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zt}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Gs})})}catch(n){if(J(n))return Q1(n)&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new zt;const l=a.session;let u=null,h=null;this.flowType==="pkce"&&t.email!=null&&([u,h]=await Hi(this.storage,this.storageKey));const{data:f,error:g}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:Gs});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zt;const n=Date.now()/1e3;let s=n,a=!0,o=null;const{payload:l}=kf(t.access_token);if(l.exp&&(s=l.exp,a=s<=n),a){const{data:u,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:h}=await this._getUser(t.access_token);if(h)throw h;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(J(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new zt;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(J(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!at())throw new Jc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Jc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new wx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Jc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new wx("No code detected.");const{data:w,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:h,token_type:f}=t;if(!o||!u||!l||!f)throw new Jc("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(u);let v=g+y;h&&(v=parseInt(h));const S=v-g;S*1e3<=Ki&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);const N=v-y;g-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,v,g):g-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,v,g);const{data:_,error:R}=await this._getUser(o);if(R)throw R;const b={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:t.type},error:null})}catch(s){if(J(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Br(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(J1(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await it(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=iC(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Hi(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:a}=await this._useSession(async o=>{var l,u,h,f,g;const{data:y,error:v}=o;if(v)throw v;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",S,{headers:this.headers,jwt:(g=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return at()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(J(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:u,token:h,access_token:f,nonce:g}=t,y=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:h,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cn}),{data:v,error:S}=y;return S?this._returnResult({data:{user:null,session:null},error:S}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Bi}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:S}))}catch(a){if(await it(this.storage,`${this.storageKey}-code-verifier`),J(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)throw l;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await cC(async a=>(a>0&&await lC(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Cn})),(a,o)=>{const l=200*Math.pow(2,a);return o&&jf(o)&&Date.now()+l-s<Ki})}catch(s){if(this._debug(n,"error",s),J(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),at()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Br(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Gi(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Sf()}else if(a&&!a.user&&!a.user){const l=await Br(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await it(this.storage,this.storageKey+"-user"),await Gi(this.storage,this.storageKey,a)):a.user=Sf()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<bf;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${bf}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),jf(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new zt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new fd;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new zt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),J(o)){const l={data:null,error:o};return jf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await it(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Gi(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=Sx(a);await Gi(this.storage,this.storageKey,o)}else{const a=Sx(n);await Gi(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await it(this.storage,this.storageKey),await it(this.storage,this.storageKey+"-code-verifier"),await it(this.storage,this.storageKey+"-user"),this.userStorage&&await it(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ki);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Ki);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ki}ms, refresh threshold is ${Op} ticks`),a<=Op&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $j)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,l]=await Hi(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:f}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?UC(t.webauthn.credential_response):BC(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:h}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:h}))})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:MC(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:$C(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kf(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await Z(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new zt})})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new zt});const l=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&at()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new zt});const l=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&at()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await Z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new zt})})}catch(t){if(J(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?(await Z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new zt})})}catch(n){if(J(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(u=>u.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+G1>a)return s;const{data:o,error:l}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(u=>u.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:S,error:N}=await this.getSession();if(N||!S.session)return this._returnResult({data:null,error:N});s=S.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:h}}=kf(s);n!=null&&n.allowExpired||gC(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:S}=await this.getUser(s);if(S)throw S;return{data:{claims:o,header:a,signature:l},error:null}}const g=vC(a.alg),y=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,l,sC(`${u}.${h}`)))throw new Dp("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(s){if(J(s))return this._returnResult({data:null,error:s});throw s}}}dl.nextInstanceID={};const JC=dl,QC="2.91.0";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const XC={"X-Client-Info":`supabase-js-${Ao}/${QC}`},YC={headers:XC},ZC={schema:"public"},eI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tI={};function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function nI(e,t){if(hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(hl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sI(e){var t=nI(e,"string");return hl(t)=="symbol"?t:t+""}function rI(e,t,n){return(t=sI(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ox(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ox(Object(n),!0).forEach(function(s){rI(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ox(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const iI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aI=()=>Headers,oI=(e,t,n)=>{const s=iI(n),a=aI();return async(o,l)=>{var u;const h=(u=await t())!==null&&u!==void 0?u:e;let f=new a(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),s(o,He(He({},l),{},{headers:f}))}};function lI(e){return e.endsWith("/")?e:e+"/"}function cI(e,t){var n,s;const{db:a,auth:o,realtime:l,global:u}=e,{db:h,auth:f,realtime:g,global:y}=t,v={db:He(He({},h),a),auth:He(He({},f),o),realtime:He(He({},g),l),storage:{},global:He(He(He({},y),u),{},{headers:He(He({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function uI(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lI(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var dI=class extends JC{constructor(e){super(e)}},hI=class{constructor(e,t,n){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const o=uI(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:ZC,realtime:tI,auth:He(He({},eI),{},{storageKey:l}),global:YC},h=cI(n??{},u);if(this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=h.auth)!==null&&f!==void 0?f:{},this.headers,h.global.fetch)}this.fetch=oI(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(He({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new WT(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new F1(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new BT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:o,flowType:l,lock:u,debug:h,throwOnError:f},g,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dI({url:this.authUrl.href,headers:He(He({},v),g),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:u,debug:h,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new l1(this.realtimeUrl.href,He(He({},e),{},{params:He(He({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const fI=(e,t,n)=>new hI(e,t,n);function pI(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}pI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mI="https://mvewgciqyhjcnxkfpawb.supabase.co",gI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12ZXdnY2lxeWhqY254a2ZwYXdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjM2MDQsImV4cCI6MjA4NDQ5OTYwNH0.TIHQZdtG9pfK19kaPjGTKDumxT5KKTsdGGVuhWPn7zU",Hs=fI(mI,gI),Ax=[{value:"email",labelId:"inbox.source.email",defaultMessage:"Email"},{value:"meeting",labelId:"inbox.source.meeting",defaultMessage:"Meeting note"},{value:"request",labelId:"inbox.source.request",defaultMessage:"Request"},{value:"idea",labelId:"inbox.source.idea",defaultMessage:"Idea"},{value:"external",labelId:"inbox.source.external",defaultMessage:"External"}],Rx=[{value:"this-week",labelId:"inbox.action.thisWeek",defaultMessage:"This Week"},{value:"next-week",labelId:"inbox.action.nextWeek",defaultMessage:"Next Week"},{value:"later",labelId:"inbox.action.later",defaultMessage:"Later"},{value:"archive",labelId:"inbox.action.archive",defaultMessage:"Archive"}],Dx=[{value:"LOW",labelId:"priority.low",defaultMessage:"Low"},{value:"MEDIUM",labelId:"priority.medium",defaultMessage:"Medium"},{value:"HIGH",labelId:"priority.high",defaultMessage:"High"},{value:"CRITICAL",labelId:"priority.critical",defaultMessage:"Critical"}],oe="http://localhost:4000",es="archived",Ot="all",Ft="mine",Lx="kanbax-inbox-items",Hj="kanbax-inbox-statuses",vI=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Hj);return e?JSON.parse(e):{}}catch{return{}}},yI=()=>{var oy,ly,cy,uy,dy,hy,fy,py,my,gy,vy,yy,wy,xy,by,jy,ky,Sy,Ny,_y,Ey,Ty,Cy,Iy,Oy,Ay,Ry,Dy,Ly,Py;const e=Dm(),t=(i,c)=>e.formatMessage({id:i},{defaultMessage:c}),n=(i,c,d,p)=>{if(!c)return t(d,p);const k=i.find(x=>x.value===c);return k?t(k.labelId,k.defaultMessage):c},s=i=>n(Ax,i,"inbox.field.selectSource","Quelle whlen"),a=i=>n(Rx,i,"inbox.field.selectAction","Aktion whlen"),o=i=>n(Dx,i,"task.field.selectPriority","Priority whlen"),[l,u]=m.useState("dashboard"),[h,f]=m.useState(null),[g,y]=m.useState("comments"),[v,S]=m.useState(null),[N,_]=m.useState(null),[R,b]=m.useState(vI),[w,j]=m.useState(null),[T,M]=m.useState("eingang"),L={eingang:{label:t("inbox.view.incoming","Eingang"),tooltip:t("inbox.tooltip.incoming","Unsortierte Arbeit. Entscheide was wichtig ist")},spaeter:{label:t("inbox.view.later","Spter"),tooltip:t("inbox.tooltip.review","Zur spteren berprfung")},bearbeitet:{label:t("inbox.view.review","Bearbeitet"),tooltip:t("inbox.tooltip.worked","Spter / in Bearbeitung")},archiv:{label:t("inbox.view.archived","Archiviert"),tooltip:t("inbox.tooltip.archived","Archivierte Items")}},[P,H]=m.useState(!1),[ue,re]=m.useState(!1),[ut,mn]=m.useState(!1),[gn,os]=m.useState(!1),Na=m.useRef(null),dr=m.useRef(null),hr=m.useRef(null),F=m.useRef(null),se=r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:[r.jsx("path",{d:"M5 6.5V20h14V8.5L17.5 5H6a1 1 0 0 0-1 1.5z"}),r.jsx("path",{d:"M6 5.5h10v4H6z"}),r.jsx("circle",{cx:"12",cy:"15.5",r:"2",fill:"currentColor",stroke:"none"})]}),[ne,De]=m.useState([]),ze=i=>{const c=typeof i=="function"?i(ne):i;De(c);try{localStorage.setItem(Lx,JSON.stringify(c))}catch{}},ai=i=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Hj,JSON.stringify(i))}catch{}},_t=(i,c)=>{b(d=>{if(d[i]===c)return d;const p={...d,[i]:c};return ai(p),p}),c==="bearbeitet"&&_(i),c!==T&&j(null)},_a=async(i,c)=>{var d;if(E)try{const p=Or(E),k=await fetch(`${oe}/commands/task/create`,{method:"POST",headers:le(!0,E),body:JSON.stringify({title:i.title,description:i.description||"",kinds:i.kind?[i.kind]:[],status:V.BACKLOG,priority:i.priority||(A==null?void 0:A.defaultPriority)||"MEDIUM",dueDate:void 0,attachments:[],ownerId:i.creatorId||($==null?void 0:$.id)||void 0,assignees:[],boardId:p,source:{type:"MANUAL",createdBy:i.creatorId||($==null?void 0:$.id)||"inbox"}})});if(!k.ok){let I="Failed to create task";try{const C=await k.json();I=(C==null?void 0:C.error)||I}catch{}throw new Error(I)}let x=null;try{const I=await k.json();x=((d=I==null?void 0:I.task)==null?void 0:d.id)||(I==null?void 0:I.id)||(I==null?void 0:I.taskId)||null}catch{x=null}x?(av(c,x),_t(x,"bearbeitet")):an(),_t(i.id,"bearbeitet"),S(null),$n(t("inbox.toast.addedToScope","Added to scope window"))}catch(p){alert(p.message||"Failed to add to scope")}},[Te,vn]=m.useState({title:"",source:"",suggestedAction:"",description:"",priority:"MEDIUM"}),Bm=i=>{ue&&Na.current&&!Na.current.contains(i.target)&&re(!1),ut&&dr.current&&!dr.current.contains(i.target)&&mn(!1),gn&&F.current&&!F.current.contains(i.target)&&os(!1),v&&hr.current&&!hr.current.contains(i.target)&&S(null)};m.useEffect(()=>{l==="list"&&u("table")},[l]),m.useEffect(()=>{const i=new URLSearchParams(window.location.search);if(i.get("view")==="calendar"){u("calendar"),i.delete("view");const d=i.toString();window.history.replaceState({},"",`${window.location.pathname}${d?`?${d}`:""}`)}},[]),m.useEffect(()=>{const i=()=>{const d=new URLSearchParams(window.location.search).get("scope");d?(sn(d),u("scope"),Tt("detail")):(sn(null),Tt("list"))};return i(),window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),m.useEffect(()=>{try{const i=localStorage.getItem(Lx);if(i){const c=JSON.parse(i);ze(c)}}catch{}},[]),m.useEffect(()=>{!w&&ne.length>0&&j(ne[0].id)},[ne,w]);const[G,Hm]=m.useState(null),[$,pd]=m.useState(null),[fr,md]=m.useState([]),[Ea,Fm]=m.useState([]),[E,zm]=m.useState(()=>{try{return localStorage.getItem("kanbax-active-tenant")}catch{return null}}),[Ta,jl]=m.useState(!1),[gd,vd]=m.useState(""),[Vm,Wm]=m.useState(""),[Km,Fj]=m.useState("MEMBER"),[Gm,zj]=m.useState([]),[kl,en]=m.useState(null),[Vj,qm]=m.useState(!1),[Jm,Wj]=m.useState(!1),[Kj,Gj]=m.useState(!1),[yd,Sl]=m.useState(!1),[oi,qj]=m.useState({}),[Es,wd]=m.useState("login"),[Nl,Jj]=m.useState(""),[xd,Qj]=m.useState(""),[Qm,_l]=m.useState(null),[Xm,Ca]=m.useState(null),[Xj,Ym]=m.useState(!1),[A,Oe]=m.useState(null),[Zm,eg]=m.useState(!1),[tg,bd]=m.useState(null),[El,$n]=m.useState(null),[jd,Ts]=m.useState([]),[Ia,Tl]=m.useState(null),[ng,li]=m.useState({}),[yn,sg]=m.useState({}),[rg,ig]=m.useState({}),[jI,ag]=m.useState(!1),[ls,og]=m.useState(null),[lg,cg]=m.useState(!1),Cl=m.useRef(!1);m.useRef(null);const ci=m.useRef(null),ui=m.useRef(null),ug=m.useRef(0),[kd,pr]=m.useState(!1),[Sd,tn]=m.useState(!1),[Nd,_d]=m.useState(!1),[di,mr]=m.useState(!1),[hi,gr]=m.useState(!1),Ed=m.useRef(null),Td=m.useRef(null),[kI,Yj]=m.useState(null),[fi,SI]=m.useState(30);m.useEffect(()=>{Yj(null)},[fi]);const[st,Zj]=m.useState(()=>{try{return localStorage.getItem("kanbax-sidebar-collapsed")==="true"}catch{return!1}}),[pe,Cd]=m.useState([]),[vr,Il]=m.useState(null),[Et,Id]=m.useState([]),[Un,dg]=m.useState({}),[Od,Ol]=m.useState(!1),[Ad,Al]=m.useState(!1),[Rd,Rl]=m.useState(!1),[Dl,ek]=m.useState(()=>{try{const i=localStorage.getItem("kanbax-scope-windows");if(!i)return{};const c=JSON.parse(i),d={};return Object.entries(c).forEach(([p,k])=>{if(Array.isArray(k))if(p.includes(":")){const x=p.split(":")[0];if(!x)return;const I=d[x]||[];k.forEach(C=>{I.some(O=>O.id===C.id)||I.push(C)}),d[x]=I}else d[p]=k}),d}catch{return{}}}),[Bn,Oa]=m.useState({name:"",description:"",startDate:"",endDate:""}),[hg,Ll]=m.useState(null),[fg,pg]=m.useState(""),[tk,Pl]=m.useState(null),[Hn,Cs]=m.useState(null),[nn,Tt]=m.useState("list"),[Aa,sn]=m.useState(null),[Fn,nk]=m.useState("ALL"),[zn,sk]=m.useState("ALL"),[pi,Ra]=m.useState(!1),[mi,Da]=m.useState(!1),[Ct,Dd]=m.useState("board"),[mg,Ml]=m.useState(!1),[NI,_I]=m.useState("current"),[La,Pa]=m.useState(!1),[gg,rk]=m.useState(!1),[$t,Ma]=m.useState({name:"",description:"",startDate:"",endDate:""}),[ae,gi]=m.useState(null),[$l,yr]=m.useState([]),[vg,yg]=m.useState(!1),[wg,Ld]=m.useState(null),[vi,wn]=m.useState(null),[$a,EI]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-pinned")||"[]")}catch{return[]}}),[xg,bg]=m.useState([]),[Ua,ik]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-recent")||"[]")}catch{return[]}}),[Vn,jg]=m.useState(null),[Is,kg]=m.useState("list"),[Wn,Pd]=m.useState("list"),[Ba,Md]=m.useState(0),[$d,Ha]=m.useState(!1),[Ud,Ul]=m.useState(!1),[Bd,Fa]=m.useState(!1),[yi,za]=m.useState(null),[Hd,Va]=m.useState(!1),[Bl,Wa]=m.useState(null),[Ka,Hl]=m.useState(null),[Ae,Kn]=m.useState({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),[Qe,dt]=m.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[wr,xr]=m.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[TI,CI]=m.useState({}),[Ga,Sg]=m.useState(""),[wi,ak]=m.useState("ALL"),[br,Ng]=m.useState(!1),[cs,_g]=m.useState("ALL"),[xn,Eg]=m.useState("ALL"),[bn,xi]=m.useState(!1),Fl=m.useRef(null),[Ut,qa]=m.useState([]),[bi,zl]=m.useState(!1),[Os,Ja]=m.useState(!1),Fd=m.useRef(null),zd=m.useRef(null),Vd=m.useRef(null),Wd=m.useRef(null),[Gn,rt]=m.useState(null),[ji,Tg]=m.useState(()=>new Date),[Kd,Gd]=m.useState(()=>new Date),[Cg,Ig]=m.useState([]),[ok,lk]=m.useState([]),[ck,Og]=m.useState(!1),[Ag,qn]=m.useState(null),[jn,Rg]=m.useState("auto"),[As,ki]=m.useState(!1),Vl=m.useRef(null),[Dg,uk]=m.useState({}),Wl=m.useRef(null),[Si,Kl]=m.useState(null),[Lg,Pg]=m.useState(0),[Gl,Mg]=m.useState(null),[$g,Ug]=m.useState(0),[ql,Qa]=m.useState(0),[Bg,qd]=m.useState(!1);m.useEffect(()=>{const i=c=>{const d=c.target;hi&&Ed.current&&!Ed.current.contains(d)&&gr(!1),di&&Td.current&&!Td.current.contains(d)&&mr(!1),bn&&Fl.current&&!Fl.current.contains(d)&&xi(!1),bi&&Fd.current&&!Fd.current.contains(d)&&zl(!1),Os&&zd.current&&!zd.current.contains(d)&&Ja(!1),pi&&Vd.current&&!Vd.current.contains(d)&&Ra(!1),mi&&Wd.current&&!Wd.current.contains(d)&&Da(!1),As&&Vl.current&&!Vl.current.contains(d)&&ki(!1),Gn&&(d.closest("[data-member-dropdown]")||rt(null))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[hi,di,bn,bi,Os,pi,mi,As,Gn]);const[Hg,Fg]=m.useState(""),[Jl,zg]=m.useState(null),[Ql,Xl]=m.useState(!1),[dk,hk]=m.useState(0),[Vg,Wg]=m.useState(""),[Yl,Kg]=m.useState(""),[II,Ni]=m.useState(()=>!st),[OI,_i]=m.useState(()=>!st&&l==="okr"),[Xa,Jd]=m.useState(!1);m.useEffect(()=>{l!=="kanban"&&l!=="table"&&Ni(!1),l!=="okr"&&_i(!1)},[l]);const[rn,Ei]=m.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[Gg,Ya]=m.useState([]),[Za,eo]=m.useState([]),[qg,to]=m.useState(""),[ye,Jg]=m.useState(null),[no,so]=m.useState(null),[jr,Zl]=m.useState(null),[Rs,Qd]=m.useState([]),[fk,pk]=m.useState(V.BACKLOG),[ro,Ds]=m.useState(!1),[Xd,kr]=m.useState(null),[io,Yd]=m.useState(!1),[ao,Zd]=m.useState(null),[Bt,oo]=m.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[me,Qg]=m.useState(null),[Sr,ec]=m.useState(null),[mk,Xg]=m.useState(null),[lo,gk]=m.useState(null),[Nr,tc]=m.useState(null),[Ls,eh]=m.useState([]),[vk,Yg]=m.useState([]),[nc,Ti]=m.useState([]),[yk,sc]=m.useState([]),[wk,rc]=m.useState([]),[co,ic]=m.useState([]),[Zg,ac]=m.useState(""),[ev,th]=m.useState(""),[_r,Er]=m.useState([]),[nh,Tr]=m.useState(""),[Ci,oc]=m.useState(null),[Jn,Ii]=m.useState([]),[uo,Cr]=m.useState(""),sh=m.useRef(null),rh=m.useRef(null),[tv,ih]=m.useState(!0),[nv,ah]=m.useState(null),le=(i=!0,c)=>{const d={"Content-Type":"application/json"};G!=null&&G.access_token&&(d.Authorization=`Bearer ${G.access_token}`);const p=i?c??E??"":"";return i&&p&&(d["x-tenant-id"]=p),$!=null&&$.id&&(d["x-user-id"]=$.id),d};m.useEffect(()=>{Hs.auth.getSession().then(({data:c})=>Hm(c.session));const{data:{subscription:i}}=Hs.auth.onAuthStateChange((c,d)=>{Hm(d)});return()=>i.unsubscribe()},[]),m.useEffect(()=>{const i=()=>{const d=Tv(window.location.pathname);jg(d),d&&u("okr")};i();const c=()=>i();return window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)},[]),m.useEffect(()=>{l!=="okr"&&window.location.pathname.startsWith("/okr")&&window.history.replaceState({},"","/")},[l]);const an=async()=>{var i,c;try{if(ih(!0),!G||!E){Cd([]),Il(null),ah(null),ih(!1);return}const d=await fetch(`${oe}/boards`,{headers:le()});if(!d.ok)throw new Error("Failed to fetch task lists");const p=await d.json();Id(p),E&&dg(q=>({...q,[E]:p}));const k=(()=>{try{return localStorage.getItem(`kanbax-active-board:${E}`)}catch{return null}})(),x=((i=p[0])==null?void 0:i.id)||null,C=k===es||k===Ot||k===Ft||k&&p.some(q=>q.id===k)?k:x;if(gi(C),C)try{localStorage.setItem(`kanbax-active-board:${E}`,C)}catch{}const O=C===es||C===Ot||C===Ft?"all":C||"",Q=await fetch(`${oe}/tasks?boardId=${encodeURIComponent(O)}`,{headers:le()});if(!Q.ok)throw new Error("Failed to fetch tasks");const ie=await Q.json(),we=($==null?void 0:$.id)||((c=G==null?void 0:G.user)==null?void 0:c.id)||"",Ne=C===Ft&&we?ie.filter(q=>q.ownerId===we||(q.assignees||[]).includes(we)):ie;Cd(Ne),E&&sg(q=>{const xe=q[E];return O!=="all"&&xe&&xe.length>0?q:{...q,[E]:ie}});const B=C&&C!==es&&C!==Ot&&C!==Ft&&(p.find(q=>q.id===C)||p[0])||null;Il(B);const Y=ie.flatMap(q=>(q.kinds||[]).map(xe=>xe.trim())).filter(q=>q.length>0),U=(()=>{try{const q=localStorage.getItem("kanbax-kind-history");return q?JSON.parse(q):[]}catch{return[]}})(),K=Array.from(new Set([...U,...Y])).sort((q,xe)=>q.localeCompare(xe));rc(K);try{localStorage.setItem("kanbax-kind-history",JSON.stringify(K))}catch{}ah(null)}catch(d){ah(d.message)}finally{ih(!1)}},Oi=i=>{const c=typeof i=="string"?i:(i==null?void 0:i.error)||(i==null?void 0:i.message)||"Unknown error",d=c.toLowerCase();return d.includes("permission")?{code:"permission",safeReason:"Blocked by permission."}:d.includes("policy")||d.includes("denied")?{code:"policy",safeReason:"Blocked by policy."}:{code:"unknown",safeReason:c}},sv=async()=>{if(!G||!E){yr([]),Ld(null),wn(null);return}try{yg(!0);const i=ae===Ot||ae===Ft||ae===es?Or(E):ae||"default-board",c=await fetch(`${oe}/okrs?boardId=${encodeURIComponent(i)}`,{headers:le()});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to load OKRs")}const d=await c.json();yr(d||[]),Ld(null),wn(null)}catch(i){Ld(i.message),wn(Oi(i))}finally{yg(!1)}},lc=async()=>{if(E)try{const i=await fetch(`${oe}/calendar/imports`,{headers:le(!0)});if(!i.ok){const d=await i.json();throw new Error(d.error||"Failed to load calendar imports")}const c=await i.json();lk(c||[])}catch(i){qn(i.message)}},ho=async(i,c)=>{if(E){Og(!0),qn(null);try{const d=new URLSearchParams({start:i.toISOString(),end:c.toISOString()}),p=await fetch(`${oe}/calendar/events?${d.toString()}`,{headers:le(!0)});if(!p.ok){const x=await p.json();throw new Error(x.error||"Failed to load calendar events")}const k=await p.json();Ig(k||[])}catch(d){Ig([]),qn(d.message)}finally{Og(!1)}}},xk=async()=>{if(!Jl){qn("Please select an .ics file to import.");return}Xl(!0),qn(null);try{const i=await Jl.text(),c=Hg.trim()||Jl.name.replace(/\.ics$/i,"")||"Imported calendar",d=await fetch(`${oe}/calendar/imports`,{method:"POST",headers:{...le(!0),"Content-Type":"application/json"},body:JSON.stringify({name:c,ics:i})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to import calendar")}Fg(""),zg(null),hk(p=>p+1),await lc(),ho(xt.start,xt.end)}catch(i){qn(i.message)}finally{Xl(!1)}},bk=async()=>{if(!Yl.trim()){qn("Please paste an ICS subscription URL.");return}Xl(!0),qn(null);try{const i=Vg.trim()||"Subscribed calendar",c=await fetch(`${oe}/calendar/imports`,{method:"POST",headers:{...le(!0),"Content-Type":"application/json"},body:JSON.stringify({name:i,url:Yl.trim()})});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to subscribe calendar")}Wg(""),Kg(""),await lc(),ho(xt.start,xt.end)}catch(i){qn(i.message)}finally{Xl(!1)}},jk=async i=>{try{const c=await fetch(`${oe}/calendar/imports/${i}`,{method:"DELETE",headers:le(!0)});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to remove calendar import")}await lc(),ho(xt.start,xt.end)}catch(c){qn(c.message)}},rv=i=>{const c=new Date(ji);c.setMonth(c.getMonth()+i),Tg(c),Gd(c)},kk=()=>{const i=new Date;Tg(i),Gd(i)},iv=async(i,c)=>{var d;if(E)try{const p={title:i.title.trim(),description:((d=i.description)==null?void 0:d.trim())||null,ownerId:i.ownerId||null,startDate:i.startDate||null,endDate:i.endDate||null,status:i.status||"ACTIVE",boardId:ae===Ot||ae===Ft||ae===es?Or(E):ae||"default-board"};if(!p.title){alert("Objective title is required");return}const k=!!yi,x=await fetch(k?`${oe}/okrs/objectives/${yi}`:`${oe}/okrs/objectives`,{method:k?"PATCH":"POST",headers:le(),body:JSON.stringify(p)});if(!x.ok){const C=await x.json();throw new Error(C.error||`Failed to ${k?"update":"create"} objective`)}const I=await x.json();yr(C=>k?C.map(O=>O.id===I.id?I:O):[I,...C]),wn(null),c&&c()}catch(p){alert(p.message),wn(Oi(p))}},Sk=async()=>{await iv(wr,()=>{xr({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Nk=async()=>{if(!E)return;const i=prompt("Task list name");if(i)try{const c=await fetch(`${oe}/boards`,{method:"POST",headers:le(),body:JSON.stringify({name:i.trim()})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to create task list")}const d=await c.json();Id(p=>p.concat(d)),gi(d.id),Il(d);try{localStorage.setItem(`kanbax-active-board:${E}`,d.id)}catch{}an()}catch(c){alert(c.message)}},_k=i=>{if(i){gi(i);try{localStorage.setItem(`kanbax-active-board:${E}`,i)}catch{}an()}},Ek=i=>{if(st){Ni(!0),u("kanban");return}if(i.target.closest(".sidebar-nav-chevron")){Ni(d=>!d);return}Ni(!0),u("kanban")},Tk=()=>{u("scope"),Tt("list"),sn(null),Qn(null,"replace")},Ck=()=>{var d;if(!Us||!Bn.name.trim())return;const i=qk(),c={id:i,name:Bn.name.trim(),description:((d=Bn.description)==null?void 0:d.trim())||null,startDate:Bn.startDate||null,endDate:Bn.endDate||null,taskIds:[],createdAt:new Date().toISOString()};yc(p=>p.concat(c)),Oa({name:"",description:"",startDate:"",endDate:""}),Cs(i),Ml(!1)},oh=i=>{Cs(i),Tt("detail"),sn(i),Qn(i,"push")},av=(i,c)=>{yc(d=>d.map(p=>p.id===i&&!p.taskIds.includes(c)?{...p,taskIds:p.taskIds.concat(c)}:p))},Ik=i=>{confirm("Delete this scope window and remove its task links?")&&(yc(c=>c.filter(d=>d.id!==i)),Ll(c=>c===i?null:c),i===Hn&&(Cs(null),Tt("list"),sn(null),Qn(null,"replace")))},Ok=(i,c)=>{i.preventDefault(),i.dataTransfer.dropEffect="move",Pl(c)},Ak=(i,c)=>{const d=i.currentTarget,p=i.relatedTarget;(!p||!d.contains(p))&&Pl(k=>k===c?null:k)},Rk=(i,c)=>{i.preventDefault();const d=i.dataTransfer.getData("text/plain")||ls||"";d&&(av(c,d),Pl(null),$n("Added to scope window"))},ov=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over")},lv=i=>{const c=i.currentTarget,d=i.relatedTarget;(!d||!c.contains(d))&&i.currentTarget.classList.remove("drag-over")},cv=(i,c)=>{i.preventDefault(),i.currentTarget.classList.remove("drag-over");const d=i.dataTransfer.getData("text/plain")||ls||"";if(!d||!de||!de.taskIds.includes(d))return;const p=fc.get(d);p&&p.status===c||(Th(d,c),$n(`Moved to ${c}`))},uv=async i=>{if(i&&!Un[i])try{const c=await fetch(`${oe}/boards`,{headers:le(!0,i)});if(!c.ok)return;const d=await c.json();dg(p=>({...p,[i]:d}))}catch{}},dv=async()=>{await iv(Qe,()=>{Fa(!1),za(null),dt({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Dk=i=>{za(i.id),dt({title:i.title,description:i.description||"",ownerId:i.ownerId||"",startDate:yv(i.startDate),endDate:yv(i.endDate),status:i.status||"ACTIVE"}),Ul(!0)},Lk=async i=>{if(confirm("Delete this objective and its key results?"))try{const c=await fetch(`${oe}/okrs/objectives/${i}`,{method:"DELETE",headers:le()});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to delete objective")}yr(d=>d.filter(p=>p.id!==i)),Ar("/okr")}catch(c){alert(c.message),wn(Oi(c))}},Pk=async(i,c)=>{if(confirm("Delete this key result?"))try{const d=await fetch(`${oe}/okrs/key-results/${i}`,{method:"DELETE",headers:le()});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to delete key result")}yr(p=>p.map(k=>k.id===c?{...k,keyResults:k.keyResults.filter(x=>x.id!==i)}:k))}catch(d){alert(d.message),wn(Oi(d))}},Mk=async()=>{if(!(!E||!ae)&&!(ae===es||ae===Ot||ae===Ft)&&confirm("Delete this task list and all its data? This cannot be undone."))try{const i=await fetch(`${oe}/boards/${ae}`,{method:"DELETE",headers:le()});if(!i.ok){const p=await i.json();throw new Error(p.error||"Failed to delete task list")}const c=Et.filter(p=>p.id!==ae);Id(c);const d=c[0]||null;gi((d==null?void 0:d.id)||null),Il(d),Ha(!1);try{d!=null&&d.id?localStorage.setItem(`kanbax-active-board:${E}`,d.id):localStorage.removeItem(`kanbax-active-board:${E}`)}catch{}an()}catch(i){alert(i.message)}},$k=i=>{Wa(i),Kn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),Hl(null),Va(!0)},lh=(i,c)=>{Wa(c),Kn({title:i.title,description:i.description||"",assignees:i.assignees||[],startValue:String(i.startValue),targetValue:String(i.targetValue),status:i.status||"ON_TRACK"}),Hl(i.id),Va(!0)},[hv,fo]=m.useState(null),[ch,uh]=m.useState(""),[dh,us]=m.useState(null),fv=i=>{fo(i.id),uh(String(Math.round(i.progress??0)))},cc=(i,c)=>{const d=Number(ch);if(Number.isNaN(d)){fo(null);return}const p=Math.max(0,Math.min(100,d)),k=i.targetValue-i.startValue,x=i.startValue+k*p/100;Ai(i.id,c,{currentValue:Number.isFinite(x)?x:i.currentValue}),fo(null)},wt=i=>i==="ON_TRACK"?"On track":i==="AT_RISK"?"At risk":i==="OFF_TRACK"?"Off track":i==="PAUSED"?"Paused":i==="DONE"?"Done":i,Uk=async()=>{var i,c;if(Bl){if(!Ae.title.trim()){alert("Key result title is required");return}if(Ka){await Ai(Ka,Bl,{title:Ae.title.trim(),description:((i=Ae.description)==null?void 0:i.trim())||null,assignees:Ae.assignees||[],startValue:Number(Ae.startValue),targetValue:Number(Ae.targetValue),status:Ae.status||"ON_TRACK"}),Va(!1),Wa(null),Hl(null),Kn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"});return}try{const d=await fetch(`${oe}/okrs/objectives/${Bl}/key-results`,{method:"POST",headers:le(),body:JSON.stringify({title:Ae.title.trim(),description:((c=Ae.description)==null?void 0:c.trim())||null,assignees:Ae.assignees||[],startValue:Number(Ae.startValue),targetValue:Number(Ae.targetValue),currentValue:Number(Ae.startValue),status:Ae.status||"ON_TRACK"})});if(!d.ok){const k=await d.json();throw new Error(k.error||"Failed to create key result")}const p=await d.json();yr(k=>k.map(x=>x.id===Bl?{...x,keyResults:[...x.keyResults,p],progress:x.keyResults.length?(x.keyResults.reduce((I,C)=>I+C.progress,0)+p.progress)/(x.keyResults.length+1):p.progress}:x)),Va(!1),Wa(null),Kn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),wn(null)}catch(d){alert(d.message),wn(Oi(d))}}},Ai=async(i,c,d)=>{try{const p=await fetch(`${oe}/okrs/key-results/${i}`,{method:"PATCH",headers:le(),body:JSON.stringify(d)});if(!p.ok){const x=await p.json();throw new Error(x.error||"Failed to update key result")}const k=await p.json();yr(x=>x.map(I=>{if(I.id!==c)return I;const C=I.keyResults.map(Q=>Q.id===i?{...Q,...k}:Q),O=C.length?C.reduce((Q,ie)=>Q+ie.progress,0)/C.length:0;return{...I,keyResults:C,progress:O}})),wn(null)}catch(p){alert(p.message),wn(Oi(p))}},Bk=i=>{var d;const c=((d=i==null?void 0:i.toUpperCase)==null?void 0:d.call(i))||"ON_TRACK";return c==="AT_RISK"?"AT_RISK":c==="OFF_TRACK"?"OFF_TRACK":"ON_TRACK"},Hk=i=>{if(i.length===0)return 0;const c=i.reduce((d,p)=>d+p.progress,0);return Math.round(c/i.length)},Ps=i=>i.status!=="DONE",uc=i=>{var x;if(!(i!=null&&i.dueDate)||i.status===V.DONE||i.status===V.ARCHIVED)return"none";const c=new Date(i.dueDate);if(Number.isNaN(c.getTime()))return"none";const d=new Date,p=((x=A==null?void 0:A.reminders)==null?void 0:x.dueSoonHours)??24,k=new Date(d.getTime()+p*60*60*1e3);return c<d?"overdue":c<=k?"due-soon":"none"},dc=i=>{const c=i.getFullYear(),d=String(i.getMonth()+1).padStart(2,"0"),p=String(i.getDate()).padStart(2,"0");return`${c}-${d}-${p}`},Ms=(i,c,d,p)=>{const k=[];for(let x=d-1;x>=0;x-=1){const I=new Date(c);I.setDate(c.getDate()-x);const C=new Date(I);C.setDate(I.getDate()+1);const O=i.filter(Q=>{const ie=new Date(Q.updatedAt||Q.createdAt||0).getTime();return!ie||ie<I.getTime()||ie>=C.getTime()?!1:p?p(Q):!0}).length;k.push(O)}return k},It=m.useMemo(()=>$l.map(i=>{const c=(i.keyResults||[]).map(x=>({id:x.id,objectiveId:x.objectiveId,title:x.title,description:x.description??null,assignees:x.assignees??[],metricType:"NUMERIC",startValue:x.startValue,targetValue:x.targetValue,currentValue:x.currentValue,status:Bk(x.status),progress:Math.round(x.progress??0),lastUpdatedAt:x.updatedAt||x.createdAt})),d=Hk(c),p=i.sourceType;return{id:i.id,title:i.title,description:i.description??null,ownerId:i.ownerId??null,startDate:i.startDate??null,endDate:i.endDate??null,status:i.status,confidence:typeof i.confidence=="number"?i.confidence:0,progress:d,keyResults:c,readOnly:!!(p&&p!=="MANUAL")}}),[$l]),Ri=m.useMemo(()=>E?yn[E]||pe||[]:[],[E,yn,pe]),hc=m.useMemo(()=>E?rg[E]||yn[E]||pe||[]:pe||[],[E,rg,yn,pe]),fc=m.useMemo(()=>new Map(hc.map(i=>[i.id,i])),[hc]),Di=m.useMemo(()=>{var My;const i=new Date,c=new Date;c.setDate(i.getDate()+7);const d=new Date(i);d.setHours(0,0,0,0);const p=Ri.filter(te=>te&&te.id),k=te=>te?new Date(te):null,x=p.reduce((te,ke)=>{const Mr=ke.status||"UNKNOWN";return te[Mr]=(te[Mr]||0)+1,te},{}),I=x.DONE||0,C=Ms(p,d,14),O=Ms(p,d,14,te=>te.status==="DONE"),Q=Ms(p,d,14,te=>Ps(te)),ie=It.flatMap(te=>te.keyResults),we=Ms(ie,d,14),Ne=C.slice(7),B=O.slice(7),Y=Q.slice(7),U=we.slice(7),K=te=>te?new Date(te).getTime():0,q=te=>te.reduce((ke,Mr)=>ke+Mr,0),xe=(te,ke)=>{const Mr=q(te),Bh=q(ke);return Bh===0?Mr===0?0:100:Math.round((Mr-Bh)/Bh*100)},pt=q(C),Ge=q(O),Le=q(Q),Yn=q(we),_n=xe(Ne,C.slice(0,7)),En=p.filter(te=>{const ke=k(te.dueDate);return ke&&ke>=i&&ke<=c&&Ps(te)}).sort((te,ke)=>K(te.dueDate)-K(ke.dueDate)).slice(0,5),Dr=p.filter(te=>{const ke=k(te.dueDate);return ke&&ke<i&&Ps(te)}).sort((te,ke)=>K(te.dueDate)-K(ke.dueDate)).slice(0,5),Uh=[...p].sort((te,ke)=>K(ke.updatedAt)-K(te.updatedAt)).slice(0,5),Lr=p.filter(te=>te.isFavorite).slice(0,5),Pr=p.filter(Ps).slice(0,5),AS=E?((My=Un[E])==null?void 0:My.length)??Et.length:Et.length,RS=ie.length?Math.round(ie.reduce((te,ke)=>te+ke.progress,0)/ie.length):0,DS=ie.filter(te=>te.status!=="ON_TRACK").length;return{totalTasks:p.length,openTasks:p.filter(Ps).length,dueSoonCount:p.filter(te=>{const ke=k(te.dueDate);return ke&&ke>=i&&ke<=c&&Ps(te)}).length,overdueCount:p.filter(te=>{const ke=k(te.dueDate);return ke&&ke<i&&Ps(te)}).length,favoriteCount:p.filter(te=>te.isFavorite).length,completionRate:p.length?Math.round(I/p.length*100):0,doneCount:I,statusCounts:x,boardCount:AS,objectiveCount:It.length,keyResultCount:ie.length,atRiskKrs:DS,averageKrProgress:RS,activitySeries:Ne,completionSeries:B,openSeries:Y,krSeries:U,activitySeries14:C,completionSeries14:O,openSeries14:Q,krSeries14:we,activityTotal14:pt,completionTotal14:Ge,openTotal14:Le,krTotal14:Yn,activityChange:_n,openChange:xe(Y,Q.slice(0,7)),completionChange:xe(B,O.slice(0,7)),okrChange:xe(U,we.slice(0,7)),activeTasks:Pr,dueSoonTasks:En,overdueTasks:Dr,recentTasks:Uh,favoriteTasks:Lr}},[Ri,E,Un,Et.length,It]);m.useMemo(()=>Ri.flatMap(c=>(c.activityLog||[]).map(p=>({id:p.id,taskId:c.id,tenantId:c.tenantId,boardId:c.boardId,title:c.title,message:p.message,actorId:p.actorId,timestamp:new Date(p.timestamp)}))).sort((c,d)=>d.timestamp.getTime()-c.timestamp.getTime()).slice(0,8),[Ri]);const Ir=m.useMemo(()=>{const i=new Date,c=new Date(i);c.setHours(0,0,0,0);const d=Ri.filter(k=>k&&k.id),p=It.flatMap(k=>k.keyResults);return{activity:Ms(d,c,fi),done:Ms(d,c,fi,k=>k.status==="DONE"),open:Ms(d,c,fi,k=>Ps(k)),kr:Ms(p,c,fi)}},[Ri,It,fi]);m.useMemo(()=>{const i=c=>c.reduce((d,p)=>d+p,0);return{activity:i(Ir.activity),done:i(Ir.done),open:i(Ir.open),kr:i(Ir.kr)}},[Ir]),m.useMemo(()=>{const i=Ir.activity.length;if(!i)return[];const c=new Date;return Array.from({length:i},(d,p)=>{const k=new Date(c);return k.setDate(c.getDate()-(i-1-p)),k.toLocaleDateString(void 0,{month:"short",day:"numeric"})})},[Ir.activity.length]),m.useMemo(()=>{const i=[],c=new Set,d=p=>{!p||c.has(p.id)||(c.add(p.id),i.push(p))};return Di.overdueTasks.forEach(d),Di.dueSoonTasks.forEach(d),i.length<5&&Di.activeTasks.forEach(d),i.slice(0,5)},[Di.overdueTasks,Di.dueSoonTasks,Di.activeTasks]);const xt=m.useMemo(()=>{const i=new Date(ji);i.setHours(0,0,0,0);const c=new Date(i.getFullYear(),i.getMonth(),1),d=(c.getDay()+6)%7,p=new Date(c);p.setDate(c.getDate()-d);const k=Array.from({length:42},(I,C)=>{const O=new Date(p);return O.setDate(p.getDate()+C),O}),x=new Date(k[k.length-1]);return x.setHours(23,59,59,999),{start:p,end:x,days:k}},[ji]),pv=m.useMemo(()=>{const i=new Map;return Cg.forEach(c=>{const d=new Date(c.start),p=new Date(c.end),k=new Date(d.getFullYear(),d.getMonth(),d.getDate()),x=new Date(p.getFullYear(),p.getMonth(),p.getDate());c.allDay&&x.getTime()===p.getTime()&&x.setDate(x.getDate()-1);let I=0;for(;k<=x&&I<40;){const C=dc(k),O=i.get(C)||[];O.push(c),i.set(C,O),k.setDate(k.getDate()+1),I+=1}}),i.forEach(c=>{c.sort((d,p)=>new Date(d.start).getTime()-new Date(p.start).getTime())}),i},[Cg]),mv=m.useMemo(()=>dc(Kd),[Kd]),hh=pv.get(mv)||[],Fk=m.useMemo(()=>ji.toLocaleDateString(void 0,{month:"long",year:"numeric"}),[ji]),zk=m.useMemo(()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[]),Vk=m.useMemo(()=>{try{return localStorage.getItem("kanbax-okr-legacy")==="1"}catch{return!1}},[]),pc=i=>{Ar(`/okr/objective/${i}`),ik(c=>[i,...c.filter(p=>p!==i)].slice(0,8))},X=m.useMemo(()=>It.find(i=>i.id===(Vn==null?void 0:Vn.objectiveId)),[It,Vn]),kn=(Vn==null?void 0:Vn.screen)||"library";m.useEffect(()=>{kn==="review"&&Md(0)},[kn,Vn==null?void 0:Vn.objectiveId]),m.useEffect(()=>{l!=="calendar"||!G||!E||lc()},[l,G,E]),m.useEffect(()=>{l!=="calendar"||!G||!E||ho(xt.start,xt.end)},[l,G,E,xt.start.getTime(),xt.end.getTime()]),m.useEffect(()=>{if(l!=="calendar"||!G||!E)return;const i=()=>ho(xt.start,xt.end),c=window.setInterval(i,18e4),d=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",d),()=>{window.clearInterval(c),document.removeEventListener("visibilitychange",d)}},[l,G,E,xt.start.getTime(),xt.end.getTime()]),m.useMemo(()=>{const i=$a.map(p=>It.find(k=>k.id===p)).filter(Boolean),c=Ua.map(p=>It.find(k=>k.id===p)).filter(Boolean),d=It.filter(p=>!$a.includes(p.id)&&!Ua.includes(p.id)).sort((p,k)=>k.progress-p.progress).slice(0,5);return{pinned:i,recent:c,suggested:d}},[$a,Ua,It]);const Li=m.useMemo(()=>X?[{title:"Relevance check",content:"Is this objective still aligned with the current quarter?"},{title:"KR validity check",content:"Do the metrics still represent success?"},{title:"Update KR values",content:X.readOnly?r.jsx("div",{className:"okr-empty",children:"This objective is read-only due to its source."}):r.jsx("div",{className:"okr-review-kr",children:X.keyResults.map(i=>r.jsxs("label",{children:[i.title,r.jsx("input",{type:"number",defaultValue:i.currentValue,onBlur:c=>Ai(i.id,X.id,{currentValue:Number(c.target.value)})})]},i.id))})},{title:"Review summary",content:`Progress ${X.progress}%  ${X.keyResults.length} key results`}]:[],[X]);m.useEffect(()=>{G&&E&&an()},[G,E]),m.useEffect(()=>{var d;if(ae!==Ft||!E)return;const i=($==null?void 0:$.id)||((d=G==null?void 0:G.user)==null?void 0:d.id)||"";if(!i)return;const c=yn[E];c&&Cd(c.filter(p=>p.ownerId===i||(p.assignees||[]).includes(i)))},[ae,E,$==null?void 0:$.id,(oy=G==null?void 0:G.user)==null?void 0:oy.id,yn]),m.useEffect(()=>{try{localStorage.setItem("kanbax-okr-pinned",JSON.stringify($a))}catch{}},[$a]),m.useEffect(()=>{try{localStorage.setItem("kanbax-okr-recent",JSON.stringify(Ua))}catch{}},[Ua]),m.useEffect(()=>{try{localStorage.setItem("kanbax-scope-windows",JSON.stringify(Dl))}catch{}},[Dl]),m.useEffect(()=>{l==="okr"&&sv()},[l,G,E,ae]),m.useEffect(()=>{if(l!=="scope"||!E||!(G!=null&&G.access_token))return;let i=!1;return(async()=>{try{const d=await fetch(`${oe}/tasks?boardId=all`,{headers:le(!0,E)});if(!d.ok)return;const p=await d.json();i||ig(k=>({...k,[E]:p}))}catch{}})(),()=>{i=!0}},[l,E,G==null?void 0:G.access_token]),m.useEffect(()=>{try{localStorage.setItem("kanbax-sidebar-collapsed",String(st))}catch{}},[st]),m.useEffect(()=>{st&&Ni(!1)},[st]),m.useEffect(()=>{st&&l!=="kanban"&&l!=="table"&&Ni(!1)},[st,l]),m.useEffect(()=>{Ll(null),pg("")},[E]),m.useEffect(()=>{st&&_i(!1)},[st]),m.useEffect(()=>{st&&l!=="okr"&&_i(!1)},[st,l]),m.useEffect(()=>{const i=document.createElement("div");i.className="app-tooltip",i.setAttribute("role","tooltip"),i.style.opacity="0",i.style.visibility="hidden",document.body.appendChild(i);let c=null,d=null;const p=U=>(U.getAttribute("data-tooltip")||U.getAttribute("data-label")||U.getAttribute("title")||"").trim()||null,k=U=>{U.dataset.tooltipTitle!==void 0&&(U.setAttribute("title",U.dataset.tooltipTitle),delete U.dataset.tooltipTitle)},x=()=>{var Dr;if(!c||!p(c))return;const K=c.getBoundingClientRect(),q=i.getBoundingClientRect(),xe=window.innerWidth,pt=window.innerHeight,Ge=8,Le=(Dr=document.querySelector(".dashboard"))==null?void 0:Dr.classList.contains("sidebar-collapsed"),Yn=!!c.closest(".sidebar")&&!!Le;let _n,En;Yn?(En=K.right+Ge,_n=K.top+K.height/2-q.height/2,En+q.width>xe-Ge&&(En=K.left-Ge-q.width)):(_n=K.top-Ge-q.height,En=K.left+K.width/2-q.width/2,_n<Ge&&(_n=K.bottom+Ge)),En=Math.max(Ge,Math.min(En,xe-Ge-q.width)),_n=Math.max(Ge,Math.min(_n,pt-Ge-q.height)),i.style.left=`${En}px`,i.style.top=`${_n}px`},I=()=>{d&&cancelAnimationFrame(d),d=window.requestAnimationFrame(x)},C=U=>{var pt;const K=p(U);if(!K)return;const q=(pt=document.querySelector(".dashboard"))==null?void 0:pt.classList.contains("sidebar-collapsed");U.closest(".sidebar")&&!q||(c&&c!==U&&k(c),c=U,U.hasAttribute("title")&&(U.dataset.tooltipTitle=U.getAttribute("title")||"",U.removeAttribute("title")),i.textContent=K,i.style.opacity="1",i.style.visibility="visible",I())},O=()=>{c&&k(c),c=null,i.style.opacity="0",i.style.visibility="hidden"},Q=U=>U instanceof HTMLElement?U.closest("[data-tooltip], [data-label], [title]"):null,ie=U=>{const K=Q(U.target);K&&(c&&(K===c||c.contains(K))||C(K))},we=U=>{if(!c)return;const K=U.relatedTarget;if(K&&c.contains(K))return;const q=Q(U.target);q&&q!==c||O()},Ne=U=>{const K=Q(U.target);K&&C(K)},B=()=>{O()},Y=()=>{c&&I()};return document.addEventListener("pointerover",ie),document.addEventListener("pointerout",we),document.addEventListener("focusin",Ne),document.addEventListener("focusout",B),window.addEventListener("scroll",Y,!0),window.addEventListener("resize",Y),()=>{d&&cancelAnimationFrame(d),document.removeEventListener("pointerover",ie),document.removeEventListener("pointerout",we),document.removeEventListener("focusin",Ne),document.removeEventListener("focusout",B),window.removeEventListener("scroll",Y,!0),window.removeEventListener("resize",Y),i.remove()}},[]);const fh=async()=>{var i,c,d,p,k;if(G!=null&&G.access_token){qm(!1);try{const x=await fetch(`${oe}/me`,{headers:le(!1)});if(!x.ok)throw new Error("Failed to load profile");const I=await x.json();pd(I.user),md(I.memberships||[]),Fm(I.invites||[]);const C=new Set((I.invites||[]).map(B=>String(B.id))),O=(I.invites||[]).filter(B=>!wh.current.has(B.id));wh.current.size>0&&O.length>0&&O.forEach(B=>{var K,q,xe;const Y=ht((K=B.tenant)==null?void 0:K.name)||B.tenantId,U=((q=B.invitedBy)==null?void 0:q.name)||((xe=B.invitedBy)==null?void 0:xe.email)||B.invitedByUserId||"Someone";Ts(pt=>[{id:`invite-${B.id}`,message:`${U} invited you to ${Y}`,huddleName:Y,timestamp:new Date(B.createdAt||Date.now()).toISOString(),read:!1,tenantId:B.tenantId},...pt])}),wh.current=C;const Q=(c=(i=I.user)==null?void 0:i.preferences)==null?void 0:c.defaultHuddleId,ie=E&&((d=I.memberships)==null?void 0:d.some(B=>B.tenantId===E)),we=(p=I.memberships)==null?void 0:p.find(B=>B.tenantId===Q),Ne=(k=I.memberships)==null?void 0:k[0];!ie&&(we!=null&&we.tenantId||Ne!=null&&Ne.tenantId)&&fs((we==null?void 0:we.tenantId)||(Ne==null?void 0:Ne.tenantId))}catch(x){Ca(x.message)}finally{qm(!0)}}};m.useEffect(()=>{fh()},[G]),m.useEffect(()=>{$&&A===null&&Oe(Cv($))},[$,A]),m.useEffect(()=>{Ta&&E&&yo(E)},[Ta,E]),m.useEffect(()=>{E&&wo(E)},[E]),m.useEffect(()=>{ye&&wo(ye)},[ye]),m.useEffect(()=>{me&&wo(me)},[me]),m.useEffect(()=>{if(!ye)return;uv(ye);const i=Ht(ye);if(i.length===0)return;const c=new Set(i.map(d=>d.userId));jr&&!c.has(jr)&&Zl(null),Rs.length>0&&Qd(Rs.filter(d=>c.has(d)))},[ye,oi]),m.useEffect(()=>{if(!ye)return;const i=po(ye);i.length!==0&&(!no||!i.some(c=>c.id===no))&&so(i[0].id)},[ye,no,Un,Et]),m.useEffect(()=>{if(!me)return;uv(me);const i=Ht(me);if(i.length===0)return;const c=new Set(i.map(d=>d.userId));Nr&&!c.has(Nr)&&tc(null),Ls.length>0&&eh(Ls.filter(d=>c.has(d)))},[me,oi]),m.useEffect(()=>{if(!me)return;const i=po(me);!i||i.length===0||(!Sr||!i.some(c=>c.id===Sr))&&ec(i[0].id)},[me,Un,Sr]),m.useEffect(()=>{Xa&&sh.current&&(sh.current.innerHTML=rn.description||"")},[Xa]),m.useEffect(()=>{io&&rh.current&&(rh.current.innerHTML=Bt.description||"")},[io]);const W=Xd?pe.find(i=>i.id===Xd)??null:null,gv=W?pe.filter(i=>(i.linkedTaskIds||[]).includes(W.id)):[],mc=new Map(pe.map(i=>[i.id,i])),Pi=String(($==null?void 0:$.email)||((ly=G==null?void 0:G.user)==null?void 0:ly.email)||"U"),Wk=Pi.charAt(0).toUpperCase()||"U",vv=(A==null?void 0:A.avatarUrl)||($==null?void 0:$.avatarUrl)||"",yv=i=>i?new Date(i).toISOString().slice(0,10):"",$s=ae===es,wv=ae===Ot,xv=ae===Ft,ph=wv||xv,Ke=$s?{name:"Archived"}:wv?{name:"All tasks"}:xv?{name:"My tickets"}:Et.find(i=>i.id===ae)||vr,Qn=(i,c="push")=>{const d=new URLSearchParams(window.location.search);i?d.set("scope",i):d.delete("scope");const p=d.toString(),k=`${window.location.pathname}${p?`?${p}`:""}`;c==="replace"?window.history.replaceState({},"",k):window.history.pushState({},"",k)},Kk=m.useMemo(()=>{const i=E&&Un[E]||Et,c=new Map;return(i||[]).forEach(d=>{d!=null&&d.id&&c.set(d.id,d.name||"Tasks")}),c.set(es,"Archived"),c.set(Ot,"All tasks"),c.set(Ft,"My tickets"),c.has("default-board")||c.set("default-board","Main Tasks"),c},[E,Un,Et]),mh=i=>i?Kk.get(i)||(i===Ot?"All tasks":i):"Tasks",bv=i=>i===V.TODO?"ToDo":i===V.IN_PROGRESS?"Doing":i===V.DONE?"Done":i===V.BACKLOG?"ToDo":String(i).replace(/_/g," "),Us=E||null,Ve=m.useMemo(()=>Us?Dl[Us]||[]:[],[Us,Dl]),de=m.useMemo(()=>Hn&&Ve.find(i=>i.id===Hn)||null,[Ve,Hn]),jv=m.useMemo(()=>[V.BACKLOG,V.TODO,V.IN_PROGRESS,V.DONE],[]),kv=m.useMemo(()=>{if(!de)return[];const c=de.taskIds.map(d=>fc.get(d)).filter(Boolean).filter(d=>!(Fn!=="ALL"&&d.priority!==Fn||zn!=="ALL"&&d.status!==zn));return jv.map(d=>({status:d,tasks:c.filter(p=>p.status===d)}))},[de,fc,jv,Fn,zn]),gc=m.useMemo(()=>kv.flatMap(i=>i.tasks),[kv]),Sv=m.useMemo(()=>{const i=new Set;return gc.forEach(c=>{(c.kinds||[]).forEach(d=>{const p=String(d||"").trim();p&&i.add(p)})}),Array.from(i).sort((c,d)=>c.localeCompare(d))},[gc]),vc=m.useMemo(()=>{var c;if(!de)return[];const i=($==null?void 0:$.id)||((c=G==null?void 0:G.user)==null?void 0:c.id)||"";return gc.filter(d=>{if(br&&!d.isFavorite||Fn!=="ALL"&&d.priority!==Fn||Ct==="list"&&zn!=="ALL"&&d.status!==zn)return!1;if(Ut.length>0){const x=(d.kinds||[]).map(C=>String(C));if(!Ut.some(C=>x.includes(C)))return!1}if(xn!=="ALL"){const x=d.dueDate?new Date(d.dueDate):null;if(xn==="MINE"&&(!i||!(d.ownerId===i||(d.assignees||[]).includes(i)))||xn==="OVERDUE"&&(!x||d.status===V.DONE||d.status===V.ARCHIVED||x>=new Date))return!1;if(xn==="WEEK"){if(!x)return!1;const I=new Date,C=new Date;if(C.setDate(I.getDate()+7),d.status===V.DONE||d.status===V.ARCHIVED||x<I||x>C)return!1}}const p=Ga.trim().toLowerCase();return p?[d.title,Rr(d.description||""),d.kinds.join(" ")].join(" ").toLowerCase().includes(p):!0})},[de,gc,br,Fn,zn,Ut,xn,Ga,Ct,$==null?void 0:$.id,(cy=G==null?void 0:G.user)==null?void 0:cy.id]),Gk=m.useMemo(()=>[V.TODO,V.IN_PROGRESS,V.DONE].map(c=>({status:c,tasks:vc.filter(d=>c===V.TODO?d.status===V.TODO||d.status===V.BACKLOG:d.status===c)})),[vc]),gh=m.useMemo(()=>{if(!de)return[];const i=new Set(de.taskIds);return hc.filter(c=>c.status!==V.ARCHIVED&&!i.has(c.id))},[de,hc]);m.useMemo(()=>{const i=fg.trim().toLowerCase();return i?gh.filter(c=>c.title.toLowerCase().includes(i)):gh},[gh,fg]);const Nv=i=>{const c=i.getDay(),d=(c===0?-6:1)-c,p=new Date(i);return p.setDate(i.getDate()+d),p.setHours(0,0,0,0),p},_v=(i,c)=>{if(i.length===0)return r.jsx("div",{className:"timeline-empty",children:c});const d=i.flatMap(B=>{const Y=Dg[B.id],U=(Y==null?void 0:Y.isPoint)??!B.dueDate,K=B.createdAt?new Date(B.createdAt):null,q=(Y==null?void 0:Y.date)||(B.dueDate?new Date(B.dueDate):null),xe=U&&q||K;return[xe,U?xe:q].filter(Boolean)}),p=Nv(new Date),k=d.length>0?new Date(Math.min(...d.map(B=>B.getTime()))):p,x=d.length>0?new Date(Math.max(...d.map(B=>B.getTime()))):p,C=Nv(jn==="auto"?k:new Date),O=Math.max(1,Math.ceil((x.getTime()-C.getTime())/864e5)+1),Q=jn==="auto"?Math.max(14,Math.min(31,O)):Number(jn),ie=Array.from({length:Q},(B,Y)=>{const U=new Date(C);return U.setDate(C.getDate()+Y),U}),we=44,Ne=B=>Math.max(0,Math.min(ie.length-1,Math.floor((B.getTime()-C.getTime())/864e5)));return r.jsx("div",{className:"timeline-view",children:r.jsx("div",{className:"timeline-grid",style:{"--timeline-col":`${we}px`},children:r.jsxs("div",{className:"timeline-shell",children:[r.jsxs("div",{className:"timeline-left",children:[r.jsx("div",{className:"timeline-header-title",children:"Tasks"}),r.jsx("div",{className:"timeline-left-rows",children:i.map(B=>r.jsx("div",{className:"timeline-title",children:B.title},B.id))})]}),r.jsx("div",{className:"timeline-right",children:r.jsxs("div",{className:"timeline-scroll",ref:Wl,children:[r.jsx("div",{className:"timeline-header-days",style:{"--timeline-days":ie.length},children:ie.map(B=>r.jsx("div",{className:"timeline-day",children:`${String(B.getDate()).padStart(2,"0")}.${String(B.getMonth()+1).padStart(2,"0")}`},B.toISOString()))}),r.jsx("div",{className:"timeline-rows",style:{"--timeline-days":ie.length},children:i.map(B=>{const Y=Dg[B.id],U=(Y==null?void 0:Y.isPoint)??!B.dueDate,K=B.createdAt?new Date(B.createdAt):new Date,q=(Y==null?void 0:Y.date)||(B.dueDate?new Date(B.dueDate):null),xe=U&&q||K,pt=U?xe:q||K,Ge=Ne(xe),Le=Ne(pt),Yn=Math.min(Ge,Le),_n=Math.max(Ge,Le),En=Math.max(1,_n-Yn+1),Dr=Si===B.id?ql:0,Uh={left:`calc(${Yn+Dr} * var(--timeline-col))`,width:`calc(${En} * var(--timeline-col))`};return r.jsx("div",{className:"timeline-track",children:U?r.jsx("div",{className:`timeline-dot priority-${B.priority.toLowerCase()}${Si===B.id?" dragging":""}`,style:{left:`calc(${Yn+Dr} * var(--timeline-col))`},onMouseDown:Lr=>{var Pr;B.sourceType&&B.sourceType!=="MANUAL"||(Lr.preventDefault(),Kl(B.id),Pg(Lr.clientX),Mg(q||K),Ug(((Pr=Wl.current)==null?void 0:Pr.scrollLeft)||0),Qa(0),qd(!0))}}):r.jsx("div",{className:`timeline-bar priority-${B.priority.toLowerCase()}${Si===B.id?" dragging":""}`,style:Uh,onMouseDown:Lr=>{var Pr;B.sourceType&&B.sourceType!=="MANUAL"||(Lr.preventDefault(),Kl(B.id),Pg(Lr.clientX),Mg(q||K),Ug(((Pr=Wl.current)==null?void 0:Pr.scrollLeft)||0),Qa(0),qd(!1))}})},B.id)})})]})})]})})})};m.useEffect(()=>{if(!E){Cs(null);return}if(Ve.length===0){Cs(null);return}(!Hn||!Ve.some(i=>i.id===Hn))&&Cs(Ve[0].id)},[E,Ve,Hn]),m.useEffect(()=>{Ll(null),pg("")},[Hn]),m.useEffect(()=>{if(!E||Ve.length===0){Tt("list");return}nn==="detail"&&!de&&Tt("list")},[E,Ve.length,de,nn]),m.useEffect(()=>{if(!Aa||Ve.length===0)return;const i=Ve.find(c=>c.id===Aa);if(i){Cs(i.id),Tt("detail");return}sn(null),Qn(null,"replace"),Tt("list")},[Aa,Ve]),m.useEffect(()=>{l!=="scope"&&Aa&&(sn(null),Qn(null,"replace"))},[l,Aa]),m.useEffect(()=>{nn!=="detail"&&(Ra(!1),Da(!1))},[nn]),m.useEffect(()=>{!La||!de||Ma({name:de.name,description:de.description||"",startDate:de.startDate||"",endDate:de.endDate||""})},[La,de]);const yc=i=>{Us&&ek(c=>{const d=c[Us]||[],p=i(d);return{...c,[Us]:p}})},qk=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`scope-${Date.now()}-${Math.random().toString(16).slice(2)}`,Ev=i=>i?new Date(i).toLocaleDateString():"",Jk=(i,c)=>!i||!c?!1:new Date(c)<new Date(i),wc=i=>!i.startDate&&!i.endDate?"No dates set":`${Ev(i.startDate)}  ${Ev(i.endDate)}`,vh=m.useMemo(()=>Jk($t.startDate,$t.endDate),[$t.startDate,$t.endDate]),Qk=()=>{if(!de)return;const i=$t.name.trim();i&&(vh||(yc(c=>c.map(d=>d.id===de.id?{...d,name:i,description:$t.description.trim()||null,startDate:$t.startDate||null,endDate:$t.endDate||null}:d)),Pa(!1)))},Xk=m.useMemo(()=>{const i=E&&Un[E]||Et,c=[],d=p=>{c.some(k=>k.id===p.id)||c.push(p)};return d({id:Ot,name:"All tasks"}),d({id:Ft,name:"My tickets"}),(Array.isArray(i)?i:[]).forEach(p=>{p!=null&&p.id&&d({id:p.id,name:p.name||"Tasks"})}),d({id:es,name:"Archived"}),c},[E,Un,Et]),po=i=>((i?Un[i]||(i===E?Et:[]):Et)||[]).filter(d=>d.id!==Ot&&d.id!==Ft),Or=i=>{var d;const c=po(i);return i===E&&ae&&ae!==Ot&&ae!==Ft&&ae!==es&&c.some(p=>p.id===ae)?ae:((d=c[0])==null?void 0:d.id)||"default-board"},Yk=()=>{var c;Ei({title:"",description:"",priority:(A==null?void 0:A.defaultPriority)||"MEDIUM",dueDate:""}),pk((A==null?void 0:A.defaultStatus)||V.BACKLOG),Ya([]),eo([]),to("");const i=E||((c=Se[0])==null?void 0:c.tenantId)||null;Jg(i),so(Or(i)),Zl(($==null?void 0:$.id)||null),Qd([]),Jd(!0)},ht=i=>i?i.toLowerCase()==="personal"?"Private Huddle":i:"Huddle",Zk=i=>{let c=0;for(let d=0;d<i.length;d+=1)c=(c<<5)-c+i.charCodeAt(d),c|=0;return Math.abs(c)},Sn=(i,c)=>{const d=`${i||""}:${c||""}`,p=Zk(d)%360;return{solid:`hsl(${p} 70% 60%)`,soft:`hsla(${p}, 70%, 60%, 0.16)`,border:`hsla(${p}, 70%, 60%, 0.35)`,text:`hsl(${p} 70% 75%)`}},Nn=(i,c)=>{var p,k;if(!i||!c)return"Unassigned";const d=(oi[i]||[]).find(x=>x.userId===c);return((p=d==null?void 0:d.user)==null?void 0:p.name)||((k=d==null?void 0:d.user)==null?void 0:k.email)||c},mo=(i,c)=>{var p,k,x;if(!i||!c)return{label:"Unassigned",avatarUrl:""};const d=(oi[i]||[]).find(I=>I.userId===c);return{label:((p=d==null?void 0:d.user)==null?void 0:p.name)||((k=d==null?void 0:d.user)==null?void 0:k.email)||c,avatarUrl:((x=d==null?void 0:d.user)==null?void 0:x.avatarUrl)||""}},go=i=>{var d,p;if(!i)return!1;const c=fr.find(k=>k.tenantId===i);return((p=(d=c==null?void 0:c.tenant)==null?void 0:d.name)==null?void 0:p.toLowerCase())==="personal"},Ht=i=>{var p,k;if(!i)return[];const c=oi[i]||[];if(!go(i))return c;const d=c.find(x=>x.userId===bt);return d?[d]:bt?[{userId:bt,role:"owner",user:{name:($==null?void 0:$.name)||($==null?void 0:$.email)||((p=G==null?void 0:G.user)==null?void 0:p.email)||"You",email:($==null?void 0:$.email)||((k=G==null?void 0:G.user)==null?void 0:k.email)||"",avatarUrl:($==null?void 0:$.avatarUrl)||""}}]:[]},Tv=i=>{if(!i.startsWith("/okr"))return null;const c=i.split("/").filter(Boolean);return c.length===1||c[1]==="objectives"?{screen:"library"}:c[1]==="objective"&&c[2]?{screen:"objective",objectiveId:c[2]}:c[1]==="review"&&c[2]?{screen:"review",objectiveId:c[2]}:{screen:"library"}},Ar=i=>{window.history.pushState({},"",i),u("okr"),jg(Tv(i))},eS=i=>{if(st){_i(!0),Ar("/okr");return}if(i.target.closest(".sidebar-nav-chevron")){_i(d=>!d);return}_i(!0),Ar("/okr")},Cv=i=>{var d,p,k,x,I,C,O,Q,ie,we,Ne,B,Y,U,K,q,xe,pt,Ge,Le,Yn;const c=(i==null?void 0:i.preferences)||{};return{name:(i==null?void 0:i.name)||"",avatarUrl:(i==null?void 0:i.avatarUrl)||"",timezone:c.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||"",locale:c.locale||navigator.language||"en",profileVisibility:c.profileVisibility||"huddle",defaultHuddleId:c.defaultHuddleId||E||"",defaultPriority:c.defaultPriority||"MEDIUM",defaultStatus:c.defaultStatus||"BACKLOG",notifications:{email:{assigned:((p=(d=c.notifications)==null?void 0:d.email)==null?void 0:p.assigned)??!0,mentions:((x=(k=c.notifications)==null?void 0:k.email)==null?void 0:x.mentions)??!0,due:((C=(I=c.notifications)==null?void 0:I.email)==null?void 0:C.due)??!0,invites:((Q=(O=c.notifications)==null?void 0:O.email)==null?void 0:Q.invites)??!0},inApp:{assigned:((we=(ie=c.notifications)==null?void 0:ie.inApp)==null?void 0:we.assigned)??!0,mentions:((B=(Ne=c.notifications)==null?void 0:Ne.inApp)==null?void 0:B.mentions)??!0,due:((U=(Y=c.notifications)==null?void 0:Y.inApp)==null?void 0:U.due)??!0,invites:((q=(K=c.notifications)==null?void 0:K.inApp)==null?void 0:q.invites)??!0}},workingHours:{start:((xe=c.workingHours)==null?void 0:xe.start)||"09:00",end:((pt=c.workingHours)==null?void 0:pt.end)||"17:00",days:((Ge=c.workingHours)==null?void 0:Ge.days)||["Mon","Tue","Wed","Thu","Fri"]},reminders:{dueSoonHours:((Le=c.reminders)==null?void 0:Le.dueSoonHours)??24,dailySummaryTime:((Yn=c.reminders)==null?void 0:Yn.dailySummaryTime)||"09:00"}}},Mi=i=>{var k,x;const c=i.trim().split(/\s+/),d=((k=c[0])==null?void 0:k[0])||"",p=c.length>1&&((x=c[c.length-1])==null?void 0:x[0])||"";return(d+p).toUpperCase()||"U"},ft=(i,c,d="")=>r.jsx("div",{className:`avatar-stack ${d}`.trim(),children:c.map(p=>{const{label:k,avatarUrl:x}=mo(i,p);return r.jsx("span",{className:"avatar avatar-tooltip","data-label":k,"aria-label":k,title:k,children:x?r.jsx("img",{src:x,alt:k}):Mi(k)},p)})}),Iv=i=>{var c,d;return((d=(c=i==null?void 0:i.tenant)==null?void 0:c.name)==null?void 0:d.toLowerCase())==="personal"},{displayMemberships:Se,activeMembership:ds,activeHuddleName:vo,isPersonalActive:Ov,hasSharedHuddles:tS,activeHuddleAccent:AI}=m.useMemo(()=>{var x,I,C,O;const i=fr.filter(Iv),c=fr.filter(Q=>!Iv(Q)),d=i.find(Q=>Q.tenantId===E)||i[0],p=d?[d,...c]:c,k=fr.find(Q=>Q.tenantId===E)||d;return{displayMemberships:p,activeMembership:k,activeHuddleName:ht((x=k==null?void 0:k.tenant)==null?void 0:x.name),isPersonalActive:((C=(I=k==null?void 0:k.tenant)==null?void 0:I.name)==null?void 0:C.toLowerCase())==="personal",hasSharedHuddles:c.length>0,activeHuddleAccent:Sn(E,(O=k==null?void 0:k.tenant)==null?void 0:O.name)}},[fr,E]),Av=(ds==null?void 0:ds.role)==="OWNER"||(ds==null?void 0:ds.role)==="ADMIN",hs=m.useMemo(()=>E&&yn[E]?yn[E]||[]:pe,[E,yn,pe]),nS=m.useMemo(()=>{const c=((A==null?void 0:A.name)||($==null?void 0:$.name)||Pi||"").trim().split(/\s+/)[0]||"there",d=new Date().getHours();return d<12?`Guten Morgen, ${c}`:d<18?`Guten Tag, ${c}`:`Guten Abend, ${c}`},[A==null?void 0:A.name,$==null?void 0:$.name,Pi]),sS=m.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),hs.filter(d=>{if(!d.dueDate||d.status===V.DONE||d.status===V.ARCHIVED)return!1;const p=new Date(d.dueDate);return p>=i&&p<=c}).length},[hs]),xc=m.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),hs.filter(d=>{if(!d.dueDate||d.status===V.DONE||d.status===V.ARCHIVED)return!1;const p=new Date(d.dueDate);return p>=i&&p<=c})},[hs]),bc=m.useMemo(()=>hs.filter(i=>i.isFavorite&&i.status!==V.ARCHIVED).slice(0,5).map(i=>({id:i.id,label:i.title,sublabel:mh(i.boardId)})),[hs]),Rv=m.useMemo(()=>{if(l==="settings")return[{label:"Settings"}];const c=[{label:vo||"Huddle",onClick:()=>u("dashboard")}];return l==="okr"?(c.push({label:"OKRs",onClick:()=>Ar("/okr")}),kn==="objective"&&X&&c.push({label:X.title,onClick:()=>pc(X.id)}),kn==="review"&&X&&c.push({label:"Review"}),c):(l==="dashboard"&&c.push({label:"Dashboard",onClick:()=>u("dashboard")}),l==="calendar"&&c.push({label:"Calendar",onClick:()=>u("calendar")}),l==="scope"?(c.push({label:"Scope Window",onClick:()=>{u("scope"),Tt("list"),sn(null),Qn(null,"replace")}}),nn==="detail"&&de&&c.push({label:de.name}),c):(l==="table"&&c.push({label:Ke!=null&&Ke.name?`Table  ${Ke.name}`:"Table",onClick:()=>u("table")}),l==="list"&&c.push({label:Ke!=null&&Ke.name?`Table  ${Ke.name}`:"Table",onClick:()=>u("table")}),l==="kanban"&&c.push({label:(Ke==null?void 0:Ke.name)||"Tasks",onClick:()=>u("kanban")}),c))},[l,vo,kn,X,Ke==null?void 0:Ke.name,nn,de]),yh=m.useRef({}),Dv=m.useRef(new Set),wh=m.useRef(new Set),bt=($==null?void 0:$.id)||"",rS=(i,c)=>{const d=i.activityLog.find(p=>p.type==="CREATE");return d!=null&&d.actorId?d.actorId:i.ownerId||c||""},Lv=m.useMemo(()=>hs.map(i=>{var p;const c=rS(i,bt),d=mo(i.tenantId,c||void 0);return{id:i.id,title:i.title,source:i.source,createdAt:i.createdAt||new Date().toISOString(),suggestedAction:"",description:i.description||void 0,priority:i.priority,kind:((p=i.kinds)==null?void 0:p[0])||"Incoming",creatorLabel:d.label,creatorAvatarUrl:d.avatarUrl}}),[hs,bt]),xh=m.useMemo(()=>[...ne,...Lv],[ne,Lv]),Pv=m.useMemo(()=>{const i={eingang:0,spaeter:0,bearbeitet:0,archiv:0};return xh.forEach(c=>{const d=R[c.id]||"eingang";i[d]+=1}),i},[xh,R]),Mv=(($==null?void 0:$.email)||"").toLowerCase(),jc=jd.filter(i=>!i.read).length,iS=i=>{Ts(c=>c.map(d=>d.id===i.id?{...d,read:!0}:d)),!(!i.taskId||!i.tenantId)&&(i.tenantId!==E&&fs(i.tenantId),kr(i.taskId),Ds(!0),pr(!1))};m.useEffect(()=>{W!=null&&W.tenantId&&wo(W.tenantId)},[W==null?void 0:W.tenantId]),m.useEffect(()=>{ro&&y("comments")},[ro,Xd]),m.useEffect(()=>{Array.from(new Set(pe.map(c=>c.tenantId).filter(Boolean))).forEach(c=>wo(c))},[pe]);const on=i=>{if(i==="createLink"){const c=prompt("Link URL");c&&document.execCommand(i,!1,c);return}document.execCommand(i,!1)},Rr=i=>i.replace(/<[^>]+>/g,""),$v=i=>{i.preventDefault();const c=i.clipboardData.getData("text/plain");if(document.queryCommandSupported("insertText")){document.execCommand("insertText",!1,c);return}const d=window.getSelection();!d||d.rangeCount===0||(d.deleteFromDocument(),d.getRangeAt(0).insertNode(document.createTextNode(c)),d.collapseToEnd())},fs=i=>{zm(i);try{localStorage.setItem("kanbax-active-tenant",i)}catch{}},aS=async i=>{i.preventDefault(),Ym(!0),Ca(null),_l(null);try{if(Es==="magic"){const{error:d}=await Hs.auth.signInWithOtp({email:Nl,options:{emailRedirectTo:window.location.origin}});if(d)throw d;_l("Check your email for the magic link.");return}if(Es==="signup"){const{error:d}=await Hs.auth.signUp({email:Nl,password:xd,options:{emailRedirectTo:window.location.origin}});if(d)throw d;_l("Account created. Check your email to confirm.");return}const{error:c}=await Hs.auth.signInWithPassword({email:Nl,password:xd});if(c)throw c}catch(c){Ca(c.message||"Authentication failed")}finally{Ym(!1)}},Uv=async i=>{Ca(null),_l(null);const{error:c}=await Hs.auth.signInWithOAuth({provider:i,options:{redirectTo:window.location.origin}});c&&Ca(c.message)},kc=async()=>{await Hs.auth.signOut(),pd(null),md([]),Fm([]),zm(null);try{localStorage.removeItem("kanbax-active-tenant")}catch{}},Bv=async i=>{i.preventDefault(),en(null);try{const c=await fetch(`${oe}/teams`,{method:"POST",headers:le(!1),body:JSON.stringify({name:gd})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to create huddle")}const d=await c.json();vd(""),md(p=>p.concat({...d.membership,tenant:d.tenant})),fs(d.tenant.id)}catch(c){en(c.message)}},yo=async i=>{try{const c=await fetch(`${oe}/teams/${i}/members`,{headers:le(!0)});if(!c.ok)throw new Error("Failed to load members");const d=await c.json();zj(d)}catch(c){en(c.message)}},oS=async i=>{if(i.preventDefault(),!!E){en(null);try{const c=await fetch(`${oe}/teams/${E}/invites`,{method:"POST",headers:le(!0),body:JSON.stringify({email:Vm,role:Km})});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to invite member")}Wm(""),await yo(E)}catch(c){en(c.message)}}},wo=async i=>{if(!(!i||oi[i]||!(G!=null&&G.access_token)))try{const c=await fetch(`${oe}/teams/${i}/members`,{headers:le(!1)});if(!c.ok)throw new Error("Failed to load members");const d=await c.json();qj(p=>({...p,[i]:d}))}catch(c){en(c.message)}},Hv=async(i,c)=>{en(null);try{const d=await fetch(`${oe}/invites/${i.id}/${c}`,{method:"POST",headers:le(!1)});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to update invite")}c==="accept"&&i.tenantId&&fs(i.tenantId),await fh(),c==="accept"&&Sl(!1)}catch(d){en(d.message)}},lS=async()=>{if(A){eg(!0),bd(null);try{const i=await fetch(`${oe}/me`,{method:"PATCH",headers:le(!1),body:JSON.stringify({name:A.name,avatarUrl:A.avatarUrl,preferences:{timezone:A.timezone,locale:A.locale,profileVisibility:A.profileVisibility,defaultHuddleId:A.defaultHuddleId||null,defaultPriority:A.defaultPriority,defaultStatus:A.defaultStatus,notifications:A.notifications,workingHours:A.workingHours,reminders:A.reminders}})});if(!i.ok){const d=await i.json();throw new Error(d.error||"Failed to save settings")}const c=await i.json();pd(c.user),Oe(Cv(c.user)),$n("Settings saved")}catch(i){$n(i.message)}finally{eg(!1)}}},cS=async()=>{if(!($!=null&&$.email))return;bd(null);const{error:i}=await Hs.auth.resetPasswordForEmail($.email,{redirectTo:window.location.origin});if(i){$n(i.message);return}$n("Password reset email sent.")},uS=async i=>{if(!i||i.length===0||!A)return;const c=i[0],d=new FileReader;d.onload=()=>{Oe({...A,avatarUrl:String(d.result||"")})},d.readAsDataURL(c)},Fv=(i,c,d="text/plain")=>{const p=new Blob([c],{type:d}),k=URL.createObjectURL(p),x=document.createElement("a");x.href=k,x.download=i,x.click(),URL.revokeObjectURL(k)},dS=()=>{const i=JSON.stringify(pe,null,2);Fv("kanbax-tasks.json",i,"application/json")},hS=()=>{const c=[["id","title","status","priority","dueDate","ownerId","assignees","huddleId"],...pe.map(d=>[d.id,d.title.replace(/"/g,'""'),d.status,d.priority,d.dueDate?new Date(d.dueDate).toISOString():"",d.ownerId||"",(d.assignees||[]).join("|"),d.tenantId])].map(d=>d.map(p=>`"${p}"`).join(",")).join(`
`);Fv("kanbax-tasks.csv",c,"text/csv")},fS=async i=>{bd(null);try{const c=await fetch(`${oe}/teams/${i}/leave`,{method:"POST",headers:le(!1)});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to leave huddle")}await fh(),E===i&&fs(""),$n("Left huddle")}catch(c){$n(c.message)}};m.useEffect(()=>{if(!El)return;const i=setTimeout(()=>$n(null),3e3);return()=>clearTimeout(i)},[El]);const pS=i=>i.toLowerCase(),mS=(i,c,d)=>{const p=yh.current,k={...p};if(!Dv.current.has(i)){d.forEach(x=>{k[`${i}:${x.id}`]={status:x.status,ownerId:x.ownerId||null,assignees:x.assignees||[],updatedAt:x.updatedAt,commentIds:x.comments.map(I=>I.id)}}),Dv.current.add(i),yh.current=k;return}d.forEach(x=>{const I=`${i}:${x.id}`,C=p[I],O=x.activityLog&&x.activityLog.length>0?[...x.activityLog].sort((U,K)=>new Date(K.timestamp).getTime()-new Date(U.timestamp).getTime())[0]:null,Q=(O==null?void 0:O.actorId)===bt;if(!C){Q||Ts(U=>[{id:`task-new-${I}`,message:`New task created: ${x.title}`,huddleName:c,timestamp:new Date(x.createdAt).toISOString(),read:!1,taskId:x.id,tenantId:i},...U]),k[I]={status:x.status,ownerId:x.ownerId||null,assignees:x.assignees||[],updatedAt:x.updatedAt,commentIds:x.comments.map(U=>U.id)};return}C.status!==x.status&&!Q&&Ts(U=>[{id:`task-status-${I}-${x.updatedAt}`,message:`Status changed: ${x.title}  ${x.status}`,huddleName:c,timestamp:new Date(x.updatedAt).toISOString(),read:!1,taskId:x.id,tenantId:i},...U]),C.ownerId!==x.ownerId&&x.ownerId&&!(x.ownerId===bt)&&!Q&&Ts(K=>[{id:`task-owner-${I}-${x.updatedAt}`,message:`Owner changed: ${x.title}`,huddleName:c,timestamp:new Date(x.updatedAt).toISOString(),read:!1,taskId:x.id,tenantId:i},...K]);const ie=new Set(C.assignees||[]);new Set(x.assignees||[]);const we=x.assignees.filter(U=>!ie.has(U));if(we.length>0){const U=bt&&we.includes(bt);Q||Ts(K=>[{id:`task-assignees-${I}-${x.updatedAt}`,message:U?`You were added to ${x.title}`:`Assignees updated: ${x.title}`,huddleName:c,timestamp:new Date(x.updatedAt).toISOString(),read:!1,taskId:x.id,tenantId:i},...K])}const Ne=new Set(C.commentIds||[]),B=x.comments.filter(U=>!Ne.has(U.id)),Y=B.some(U=>U.createdBy!==bt);if(B.length>0&&Y){const U=B.some(K=>Mv&&pS(K.text).includes(`@${Mv}`));Q||Ts(K=>[{id:`task-comment-${I}-${x.updatedAt}`,message:U?`You were mentioned in ${x.title}`:`New comment on ${x.title}`,huddleName:c,timestamp:new Date(x.updatedAt).toISOString(),read:!1,taskId:x.id,tenantId:i},...K])}k[I]={status:x.status,ownerId:x.ownerId||null,assignees:x.assignees||[],updatedAt:x.updatedAt,commentIds:x.comments.map(U=>U.id)}}),yh.current=k};m.useEffect(()=>{if(!(G!=null&&G.access_token)||Se.length===0)return;let i=!1;const c=async()=>{var d;if(!Cl.current){Cl.current=!0;for(const p of Se){const k=p.tenantId,x=ht((d=p.tenant)==null?void 0:d.name);try{const I=await fetch(`${oe}/tasks`,{headers:le(!0,k)});if(!I.ok)continue;const C=await I.json();i||(sg(O=>({...O,[k]:C})),mS(k,x,C))}catch{}}Cl.current=!1}};return c(),ui.current&&clearInterval(ui.current),ui.current=window.setInterval(c,3e4),()=>{i=!0,Cl.current=!1,ui.current&&(clearInterval(ui.current),ui.current=null)}},[G==null?void 0:G.access_token,Se]);const gS=async(i,c)=>{if(E){en(null);try{const d=await fetch(`${oe}/teams/${E}/members/${i}`,{method:"PATCH",headers:le(!0),body:JSON.stringify({role:c})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to update role")}await yo(E)}catch(d){en(d.message)}}},vS=async i=>{if(E){en(null);try{const c=await fetch(`${oe}/teams/${E}/members/${i}`,{method:"DELETE",headers:le(!0)});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to remove member")}await yo(E)}catch(c){en(c.message)}}},bh=m.useMemo(()=>{if($s)return["ALL",V.ARCHIVED];const i=new Set;return ph||((vr==null?void 0:vr.columns)||[]).forEach(c=>{c!=null&&c.status&&i.add(String(c.status))}),i.size===0&&pe.forEach(c=>{c.status&&c.status!==V.ARCHIVED&&i.add(c.status)}),["ALL",...Array.from(i)]},[vr==null?void 0:vr.columns,pe,$s,ph]),Sc=m.useMemo(()=>{const i=$s?pe.filter(d=>d.status===V.ARCHIVED):pe.filter(d=>d.status!==V.ARCHIVED),c=new Set;return i.forEach(d=>{(d.kinds||[]).forEach(p=>{const k=String(p||"").trim();k&&c.add(k)})}),Array.from(c).sort((d,p)=>d.localeCompare(p))},[pe,$s]);m.useEffect(()=>{qa(i=>i.filter(c=>Sc.includes(c)))},[Sc]),m.useEffect(()=>{cs!=="ALL"&&!bh.includes(cs)&&_g("ALL")},[cs,bh]),m.useEffect(()=>{l!=="table"&&Os&&Ja(!1)},[l,Os]),m.useEffect(()=>{bn&&(l==="dashboard"||l==="scope")&&xi(!1)},[l,bn]),m.useEffect(()=>{l==="dashboard"&&bn&&xi(!1)},[l,bn]);const zv=Ga.trim().toLowerCase(),Vv=i=>{if(br&&!i.isFavorite||wi!=="ALL"&&i.priority!==wi||l==="table"&&cs!=="ALL"&&i.status!==cs)return!1;if(Ut.length>0){const d=(i.kinds||[]).map(k=>String(k));if(!Ut.some(k=>d.includes(k)))return!1}if(xn!=="ALL"){const d=i.dueDate?new Date(i.dueDate):null;if(xn==="MINE"&&(!bt||!(i.ownerId===bt||(i.assignees||[]).includes(bt)))||xn==="OVERDUE"&&(!d||i.status===V.DONE||i.status===V.ARCHIVED||d>=new Date))return!1;if(xn==="WEEK"){if(!d)return!1;const p=new Date,k=new Date;if(k.setDate(p.getDate()+7),i.status===V.DONE||i.status===V.ARCHIVED||d<p||d>k)return!1}}return zv?[i.title,Rr(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(zv):!0},Wv=$s?pe.filter(i=>i.status===V.ARCHIVED):pe.filter(i=>i.status!==V.ARCHIVED),jh=Wv.filter(Vv),Kv=$s?[{status:V.ARCHIVED,tasks:jh}]:[V.TODO,V.IN_PROGRESS,V.DONE].map(i=>({status:i,tasks:Wv.filter(c=>i===V.TODO?c.status===V.TODO||c.status===V.BACKLOG:c.status===i)})),Gv=new Set(pe.flatMap(i=>i.linkedTaskIds)),Xn=Ga.trim().toLowerCase(),yS=Xn?Object.entries(yn).flatMap(([i,c])=>(c||[]).map(d=>({...d,tenantId:d.tenantId||i}))):[],kh=Xn?yS.filter(i=>[i.title,Rr(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(Xn)):[],Sh=Xn?Se.filter(i=>{var d;return(ht((d=i.tenant)==null?void 0:d.name)||i.tenantId).toLowerCase().includes(Xn)}):[],Nh=Xn?Kv.filter(i=>String(i.status).toLowerCase().includes(Xn)):[],qv=Se.length>0&&Se.every(i=>!!yn[i.tenantId]),Nc=(i,c,d)=>`${i||"unknown"}:${c||"unknown"}:${d}`,_h=(i,c,d)=>{if(!(!i||!c))try{localStorage.setItem(`kanbax-task-order:${i}:${c}`,JSON.stringify(d))}catch{}},Eh=(i,c)=>{i==="task"&&(c.tenantId&&c.tenantId!==E?(Tl({taskId:c.id,tenantId:c.tenantId}),fs(c.tenantId)):(kr(c.id),Ds(!0))),i==="huddle"&&(fs(c.tenantId),u("kanban")),i==="column"&&u("kanban"),Sg("")};m.useEffect(()=>{!Ia||Ia.tenantId!==E||!pe.some(c=>c.id===Ia.taskId)||(kr(Ia.taskId),Ds(!0),Tl(null))},[Ia,E,pe]),m.useEffect(()=>{if(!Xn){ag(!1);return}ag(!1)},[Xn,G,Se]),m.useEffect(()=>{if(!(!E||!ae))try{const i=localStorage.getItem(`kanbax-task-order:${E}:${ae}`);if(i){const c=JSON.parse(i);li(c)}else li({})}catch{li({})}},[E,ae]),m.useEffect(()=>{if(!E||pe.length===0)return;const i={...ng};Array.from(new Set(pe.map(d=>d.status))).forEach(d=>{const p=Nc(E,ae,d),k=i[p]||[],x=pe.filter(O=>O.status===d).map(O=>O.id),I=k.filter(O=>x.includes(O)),C=x.filter(O=>!I.includes(O));i[p]=I.concat(C)}),li(i),_h(E,ae,i)},[E,ae,pe]),pe.filter(i=>i.status!==V.ARCHIVED);const wS=async i=>{i.preventDefault();try{const c=no||Or(ye),d=await fetch(`${oe}/commands/task/create`,{method:"POST",headers:le(!0,ye),body:JSON.stringify({title:rn.title,description:rn.description,kinds:Za,status:fk,priority:rn.priority,dueDate:rn.dueDate||void 0,attachments:Gg,ownerId:jr??($==null?void 0:$.id)??void 0,assignees:Rs,boardId:c,source:{type:"MANUAL",createdBy:"admin-user-1"}})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to create task")}Jd(!1),Ei({title:"",description:"",priority:"MEDIUM",dueDate:""}),Ya([]),eo([]),to(""),so(null),Za.length>0&&rc(p=>{const k=new Set(p);Za.forEach(I=>k.add(I));const x=Array.from(k).sort((I,C)=>I.localeCompare(C));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(x))}catch{}return x}),an()}catch(c){alert(c.message)}},Th=async(i,c)=>{try{const d=await fetch(`${oe}/commands/task/update-status`,{method:"POST",headers:le(),body:JSON.stringify({taskId:i,newStatus:c})});if(!d.ok){const p=await d.json();throw new Error(p.error||"Failed to update status")}if(an(),l==="scope"&&E)try{const p=await fetch(`${oe}/tasks?boardId=all`,{headers:le(!0,E)});if(p.ok){const k=await p.json();ig(x=>({...x,[E]:k}))}}catch{}}catch(d){alert(d.message)}},xS=async i=>{const c=i.status===V.ARCHIVED?V.BACKLOG:V.ARCHIVED;await Th(i.id,c)},bS=async i=>{if(confirm("Are you sure you want to delete this task?"))try{const c=await fetch(`${oe}/commands/task/delete`,{method:"POST",headers:le(),body:JSON.stringify({taskId:i})});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to delete task")}Ds(!1),kr(null),an()}catch(c){alert(c.message)}},Ch=i=>{kr(i.id),Er(i.checklist||[]),th(""),Tr(""),Ii(i.linkedTaskIds||[]),Cr(""),Ds(!0)},Ih=i=>{lg||Date.now()-ug.current<200||Ch(i)},Oh=i=>{if(i.sourceType!=="MANUAL")return;Zd(i.id),gk(i.tenantId),Qg(i.tenantId),ec(i.boardId||Or(i.tenantId)),Xg(i.boardId||Or(i.tenantId)),tc(i.ownerId??null),eh(i.assignees??[]);const c=i.dueDate?new Date(i.dueDate).toISOString().split("T")[0]:"";oo({title:i.title,description:i.description||"",priority:i.priority,dueDate:c}),ic(i.kinds||[]),ac(""),Er(i.checklist||[]),Tr(""),Ii(i.linkedTaskIds||[]),Cr(""),i.kinds&&i.kinds.length>0&&rc(d=>{const p=new Set(d);i.kinds.forEach(x=>{x.trim().length>0&&p.add(x)});const k=Array.from(p).sort((x,I)=>x.localeCompare(I));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(k))}catch{}return k}),Yg(i.attachments||[]),Ti([]),sc([]),Yd(!0)},Ah=()=>{Jd(!1),Ya([]),eo([]),to(""),so(null)},_c=()=>{Ds(!1),kr(null)},Rh=()=>{Yd(!1),Zd(null),Ti([]),sc([]),ic([]),ac(""),Er([]),Tr(""),Ii([]),Cr("")},Dh=()=>{Va(!1),Wa(null),Hl(null)},Lh=()=>{Ul(!1),za(null)};m.useEffect(()=>{const i=c=>{if(c.key!=="Escape")return;let d=!1;Ci?(oc(null),d=!0):io?(Rh(),d=!0):ro?(_c(),d=!0):P?(H(!1),d=!0):gn?(os(!1),d=!0):Xa?(Ah(),d=!0):Hd?(Dh(),d=!0):Bd?(Fa(!1),d=!0):Ud?(Lh(),d=!0):La?(Pa(!1),d=!0):mg?(Ml(!1),d=!0):$d?(Ha(!1),d=!0):yd?(Sl(!1),d=!0):Ta?(jl(!1),d=!0):kd?(pr(!1),d=!0):hi?(gr(!1),d=!0):Sd?(tn(!1),d=!0):Nd?(_d(!1),d=!0):Od?(Ol(!1),d=!0):Ad?(Al(!1),d=!0):Rd?(Rl(!1),d=!0):di?(mr(!1),d=!0):v?(S(null),d=!0):hg?(Ll(null),d=!0):pi?(Ra(!1),d=!0):mi?(Da(!1),d=!0):bi?(zl(!1),d=!0):Os?(Ja(!1),d=!0):bn?(xi(!1),d=!0):Gn?(rt(null),d=!0):As&&(ki(!1),d=!0),d&&(c.preventDefault(),c.stopPropagation())};return window.addEventListener("keydown",i),document.addEventListener("mousedown",Bm),()=>{window.removeEventListener("keydown",i),document.removeEventListener("mousedown",Bm)}},[Ci,io,ro,Xa,Hd,Bd,Ud,La,$d,yd,Ta,kd,Sd,Nd,Od,Ad,Rd,hg,pi,mi,bi,Os,gn,As,v,ue,ut,Ah,_c,Rh,Dh,Lh]);const jS=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(d=>new Promise((p,k)=>{const x=new FileReader;x.onload=()=>p({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:d.name,size:d.size,type:d.type||"application/octet-stream",dataUrl:String(x.result||""),uploadedAt:new Date}),x.onerror=()=>k(new Error("Failed to read file")),x.readAsDataURL(d)}));try{const d=await Promise.all(c);Ya(p=>p.concat(d))}catch(d){alert(d.message||"Failed to attach file")}},kS=i=>{Ya(c=>c.filter(d=>d.id!==i))},Jv=(i,c)=>{const d=i.trim();return d?(c(p=>p.some(x=>x.toLowerCase()===d.toLowerCase())?p:[...p,d]),!0):!1};m.useEffect(()=>{if(!Si||!Gl)return;const i=44,c=p=>{var C;const k=(((C=Wl.current)==null?void 0:C.scrollLeft)||0)-$g,x=p.clientX-Lg+k,I=Math.round(x/i);Qa(I)},d=async()=>{const p=mc.get(Si);if(!p||!Gl){Kl(null),Qa(0);return}if(ql!==0){const k=new Date(Gl);k.setDate(k.getDate()+ql),uk(x=>({...x,[p.id]:{date:k,isPoint:Bg}}));try{const x=await fetch(`${oe}/commands/task/update-details`,{method:"POST",headers:le(!0,p.tenantId),body:JSON.stringify({taskId:p.id,title:p.title,description:p.description,dueDate:k.toISOString()})});if(!x.ok){let I="Failed to update task";try{const C=await x.json();I=(C==null?void 0:C.error)||I}catch{}throw new Error(I)}an()}catch(x){alert(x.message||"Failed to update task")}}Kl(null),Qa(0),qd(!1)};return window.addEventListener("mousemove",c),window.addEventListener("mouseup",d,{once:!0}),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d)}},[Si,Gl,Lg,$g,ql,Bg,mc]);const Qv=()=>{Jv(qg,eo)&&to("")},Xv=()=>{Jv(Zg,ic)&&ac("")},Yv=(i,c)=>{(i.key==="Enter"||i.key===",")&&(i.preventDefault(),c==="new"?Qv():Xv())},Zv=(i,c)=>{c(d=>d.filter(p=>p!==i))},ps=async i=>{if(!W)return;const c=await fetch(`${oe}/commands/task/update-details`,{method:"POST",headers:le(!0,W.tenantId),body:JSON.stringify({taskId:W.id,title:W.title,description:W.description,...i})});if(!c.ok){const d=await c.json();throw new Error(d.error||"Failed to update task")}await an()},SS=async()=>{const i=ev.trim();if(!(!i||!W))try{await ps({commentText:i}),th("")}catch(c){alert(c.message)}},ey=async()=>{const i=nh.trim();if(!i||!W)return;const c=[..._r,{id:Math.random().toString(36).substring(2,15),text:i,done:!1}];Er(c),Tr("");try{await ps({checklist:c})}catch(d){alert(d.message)}},ty=async i=>{const c=_r.map(d=>d.id===i?{...d,done:!d.done}:d);Er(c);try{await ps({checklist:c})}catch(d){alert(d.message)}},ny=async i=>{const c=_r.filter(d=>d.id!==i);Er(c);try{await ps({checklist:c})}catch(d){alert(d.message)}},sy=async()=>{if(!uo||!W)return;const i=Jn.includes(uo)?Jn:[...Jn,uo];Ii(i),Cr("");try{await ps({linkedTaskIds:i})}catch(c){alert(c.message)}},ry=async i=>{const c=Jn.filter(d=>d!==i);Ii(c);try{await ps({linkedTaskIds:c})}catch(d){alert(d.message)}},Ph=async i=>{try{await fetch(`${oe}/commands/task/update-details`,{method:"POST",headers:le(!0,i.tenantId),body:JSON.stringify({taskId:i.id,title:i.title,description:i.description,isFavorite:!i.isFavorite})}),an()}catch(c){alert(c.message)}},iy=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(d=>new Promise((p,k)=>{const x=new FileReader;x.onload=()=>p({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:d.name,size:d.size,type:d.type||"application/octet-stream",dataUrl:String(x.result||""),uploadedAt:new Date}),x.onerror=()=>k(new Error("Failed to read file")),x.readAsDataURL(d)}));try{const d=await Promise.all(c);Ti(p=>p.concat(d))}catch(d){alert(d.message||"Failed to attach file")}},NS=i=>{Ti(c=>c.filter(d=>d.id!==i)),Yg(c=>(c.some(p=>p.id===i)&&sc(p=>p.concat(i)),c.filter(p=>p.id!==i)))},_S=async i=>{if(i.preventDefault(),!!ao)try{const c=await fetch(`${oe}/commands/task/update-details`,{method:"POST",headers:le(!0,lo),body:JSON.stringify({taskId:ao,title:Bt.title,description:Bt.description,kinds:co,priority:Bt.priority,dueDate:Bt.dueDate?Bt.dueDate:null,ownerId:Nr||null,assignees:Ls,attachmentsToAdd:nc,attachmentsToRemove:yk})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to update task")}if(me&&lo&&me!==lo){const p=await fetch(`${oe}/commands/task/assign-huddle`,{method:"POST",headers:le(!0,lo),body:JSON.stringify({taskId:ao,targetTenantId:me})});if(!p.ok){const k=await p.json();throw new Error(k.error||"Failed to move task to huddle")}}const d=me||lo;if(Sr&&d&&Sr!==mk){const p=await fetch(`${oe}/commands/task/assign-board`,{method:"POST",headers:le(!0,d),body:JSON.stringify({taskId:ao,boardId:Sr})});if(!p.ok){const k=await p.json();throw new Error(k.error||"Failed to move task to board")}}Yd(!1),Zd(null),ec(null),Xg(null),Ds(!1),kr(null),Ti([]),sc([]),Er([]),Tr(""),Ii([]),Cr(""),co.length>0&&rc(p=>{const k=new Set(p);co.forEach(I=>k.add(I));const x=Array.from(k).sort((I,C)=>I.localeCompare(C));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(x))}catch{}return x}),an()}catch(c){alert(c.message)}},Mh=(i,c)=>{ug.current=Date.now(),i.dataTransfer.setData("text/plain",c),i.dataTransfer.effectAllowed="move",og(c),cg(!0)},$h=i=>{document.querySelectorAll(".task-card.drag-over-card").forEach(c=>{c.classList.remove("drag-over-card")}),document.querySelectorAll(".kanban-column.drag-over").forEach(c=>{c.classList.remove("drag-over")}),og(null),ci.current=null,Pl(null),setTimeout(()=>cg(!1),200)},ES=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over"),i.target===i.currentTarget&&(ci.current=null)},TS=i=>{i.currentTarget.classList.remove("drag-over")},CS=(i,c)=>{i.preventDefault(),i.currentTarget.classList.remove("drag-over");const d=i.dataTransfer.getData("text/plain")||ls||"";if(!d||!E)return;const p=pe.find(C=>C.id===d),k=p==null?void 0:p.status,x=Nc(E,ae,c),I=ci.current;if(ci.current=null,k&&k!==c&&Th(d,c),I!=null&&I.startsWith(`${c}:`)){const C=I.split(":")[1]||null;C&&ay(E,ae,c,d,C);return}li(C=>{const O={...C},Q=(O[x]||[]).filter(ie=>ie!==d);return O[x]=Q.concat(d),_h(E,ae,O),O})},ay=(i,c,d,p,k)=>{const x=Nc(i,c,d);li(I=>{const C={...I},O=(C[x]||[]).filter(Q=>Q!==p);if(k){const Q=O.indexOf(k);Q===-1?O.push(p):O.splice(Q,0,p)}else O.push(p);return C[x]=O,_h(i,c,C),C})},IS=(i,c,d)=>{if(i.preventDefault(),i.dataTransfer.dropEffect="move",!ls||ls===d||!E)return;const p=pe.find(x=>x.id===ls);if(!p||p.status!==c)return;const k=`${c}:${d}`;ci.current!==k&&(ci.current=k,ay(E,ae,c,ls,d),i.currentTarget.classList.add("drag-over-card"))},OS=i=>{const c=i.currentTarget,d=i.relatedTarget;c.contains(d)||i.currentTarget.classList.remove("drag-over-card")};return G?Vj?fr.length===0&&!Jm?r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Create your first huddle"}),r.jsx("p",{children:"Set up a shared space and invite teammates."})]}),r.jsxs("form",{className:"auth-form",onSubmit:Bv,children:[r.jsxs("label",{children:["Huddle name",r.jsx("input",{type:"text",value:gd,onChange:i=>vd(i.target.value),placeholder:"Design Squad",required:!0})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create huddle"}),kl&&r.jsx("div",{className:"auth-error",children:kl})]}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>Wj(!0),children:"Continue with private huddle"}),r.jsx("button",{className:"btn btn-ghost",onClick:kc,children:"Sign out"})]})}):!E&&fr.length>0&&!Jm?r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Select a huddle"}),r.jsx("p",{children:"Choose a space to continue."})]}),r.jsx("div",{className:"auth-form",children:r.jsxs("label",{children:["Huddle",r.jsxs("select",{value:E||"",onChange:i=>fs(i.target.value),children:[r.jsx("option",{value:"",disabled:!0,children:"Select huddle"}),Se.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})]})]})}),r.jsx("button",{className:"btn btn-ghost",onClick:kc,children:"Sign out"})]})}):r.jsxs("div",{className:`dashboard${st?" sidebar-collapsed":""}`,children:[r.jsx("datalist",{id:"kind-suggestions",children:wk.map(i=>r.jsx("option",{value:i},i))}),r.jsx("header",{className:"topbar",children:r.jsxs("div",{className:"topbar-inner",children:[r.jsxs("div",{className:"topbar-search",tabIndex:-1,children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"11",cy:"11",r:"7"}),r.jsx("path",{d:"M20 20l-3.5-3.5"})]}),r.jsx("input",{type:"search",placeholder:"Search tasks, huddles...",value:Ga,onChange:i=>Sg(i.target.value)})]}),Xn&&r.jsxs("div",{className:"topbar-search-panel",children:[!qv&&r.jsx("div",{className:"empty-state",children:"Indexing huddles..."}),qv&&Sh.length===0&&kh.length===0&&Nh.length===0&&r.jsx("div",{className:"empty-state",children:"No results."}),Sh.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Huddles"}),Sh.map(i=>{var c,d;return r.jsxs("button",{className:"search-item",onClick:()=>Eh("huddle",i),children:[r.jsx("span",{className:"huddle-item-dot",style:{background:Sn(i.tenantId,(c=i.tenant)==null?void 0:c.name).solid}}),ht((d=i.tenant)==null?void 0:d.name)||i.tenantId]},i.id)})]}),kh.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Tasks"}),kh.slice(0,6).map(i=>r.jsx("button",{className:"search-item",onClick:()=>Eh("task",i),children:i.title},i.id))]}),Nh.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Task columns"}),Nh.map(i=>r.jsx("button",{className:"search-item",onClick:()=>Eh("column",i),children:i.status},i.status))]})]}),r.jsx("div",{className:"topbar-personal",children:r.jsxs("div",{className:"topbar-greeting",children:[r.jsx("span",{className:"topbar-greeting-title",children:nS}),r.jsx("div",{className:"topbar-greeting-meta",children:r.jsxs("div",{className:`focus-dropdown${hi?" open":""}`,ref:Ed,children:[r.jsxs("button",{type:"button",className:"focus-dropdown-button",onClick:()=>{gr(i=>!i),mr(!1),pr(!1),tn(!1)},"aria-expanded":hi,"aria-haspopup":"menu",children:["Heute fllig: ",sS]}),hi&&r.jsx("div",{className:"quick-pins-panel focus-panel header-dropdown-panel",role:"menu",children:xc.length===0?r.jsxs("div",{className:"quick-pin-empty",children:[r.jsx("span",{className:"quick-pin-empty-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 7h16"}),r.jsx("path",{d:"M6 7v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),r.jsx("path",{d:"M9 4h6"}),r.jsx("path",{d:"M9 11h6"}),r.jsx("path",{d:"M9 15h4"})]})}),r.jsx("span",{children:"Keine Tasks fllig"})]}):xc.map(i=>r.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{u("kanban"),gi(i.boardId||Ot),Tl({taskId:i.id,tenantId:i.tenantId||E||""}),gr(!1)},children:[r.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),r.jsx("span",{className:"quick-pin-label",children:i.title}),r.jsx("span",{className:"quick-pin-meta",children:mh(i.boardId)})]},i.id))})]})})]})}),r.jsxs("div",{className:"topbar-actions",children:[bc.length>0&&r.jsxs("div",{className:`quick-pins quick-pins-icon${di?" open":""}`,ref:Td,children:[r.jsxs("button",{type:"button",className:"notif-button quick-pins-icon-button",onClick:()=>{mr(i=>!i),gr(!1),pr(!1),tn(!1)},"aria-expanded":di,"aria-haspopup":"menu",title:"Favoriten","aria-label":"Favoriten ffnen",children:[r.jsx("span",{className:"quick-pins-icon-star",children:""}),bc.length>0&&r.jsx("span",{className:"notif-badge",children:bc.length})]}),di&&r.jsx("div",{className:"quick-pins-panel header-dropdown-panel",role:"menu",children:bc.map(i=>r.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{const c=hs.find(d=>d.id===i.id);c&&(u("kanban"),gi(c.boardId||Ot),Tl({taskId:c.id,tenantId:c.tenantId||E||""}),mr(!1))},children:[r.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),r.jsx("span",{className:"quick-pin-label",children:i.label}),i.sublabel&&r.jsx("span",{className:"quick-pin-meta",children:i.sublabel})]},i.id))})]}),r.jsxs("div",{className:"notif-dropdown",children:[r.jsxs("button",{className:"notif-button",onClick:()=>{pr(i=>!i),mr(!1),gr(!1),tn(!1)},"aria-label":"Notifications",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),r.jsx("path",{d:"M10 21a2 2 0 0 0 4 0"})]}),jc>0&&r.jsx("span",{className:"notif-badge",children:jc})]}),kd&&r.jsxs("div",{className:"notif-panel header-dropdown-panel",children:[r.jsxs("div",{className:"notif-header",children:[r.jsx("div",{children:"Notifications"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Ts(i=>i.map(c=>({...c,read:!0}))),children:"Mark all read"})]}),r.jsxs("div",{className:"notif-list",children:[jd.length===0&&r.jsx("div",{className:"empty-state",children:"No notifications yet."}),jd.map(i=>r.jsxs("div",{className:`notif-item ${i.read?"read":""} ${i.taskId?"clickable":""}`,onClick:()=>i.taskId&&iS(i),children:[r.jsx("div",{className:"notif-title",children:i.message}),r.jsxs("div",{className:"notif-meta",children:[i.huddleName,"  ",new Date(i.timestamp).toLocaleString()]})]},i.id))]})]})]}),r.jsxs("div",{className:"user-menu",children:[r.jsx("button",{className:"user-menu-button",onClick:()=>{tn(i=>!i),pr(!1),mr(!1),gr(!1)},"aria-label":"User menu",children:vv?r.jsx("img",{src:vv,alt:"User avatar"}):r.jsx("span",{children:Mi(Pi)})}),Sd&&r.jsxs("div",{className:"user-menu-dropdown header-dropdown-panel",children:[r.jsxs("div",{className:"user-menu-header",children:[r.jsx("div",{className:"user-menu-name",children:(A==null?void 0:A.name)||Pi}),r.jsx("div",{className:"user-menu-email",children:Pi})]}),r.jsx("button",{className:"user-menu-item",onClick:()=>{u("dashboard"),tn(!1)},children:"Home"}),r.jsx("button",{className:"user-menu-item",onClick:()=>{u("kanban"),tn(!1)},children:"Work"}),r.jsx("button",{className:"user-menu-item",onClick:()=>{u("scope"),Tt("list"),sn(null),Qn(null,"replace"),tn(!1)},children:"Scope"}),r.jsx("button",{className:"user-menu-item",onClick:()=>{Ar("/okr"),tn(!1)},children:"Goals"}),r.jsxs("button",{className:"user-menu-item",onClick:()=>{pr(!0),tn(!1)},children:["Notifications ",jc>0?`(${jc})`:""]}),r.jsx("button",{className:"user-menu-item",onClick:()=>{u("settings"),tn(!1)},children:"Settings"}),r.jsx("button",{className:"user-menu-item danger",onClick:()=>{tn(!1),kc()},children:"Sign out"})]})]})]})]})}),r.jsxs("aside",{className:"sidebar",children:[r.jsx("div",{className:"sidebar-header",children:r.jsxs("div",{className:"sidebar-brand",children:[r.jsx("img",{className:"sidebar-logo",src:"/sqirch_logo.svg",alt:"sqirch"}),r.jsx("img",{className:"sidebar-logo-mark",src:"/sqirch_mark.svg",alt:"","aria-hidden":"true"})]})}),r.jsxs("div",{className:"sidebar-content",children:[r.jsxs("div",{className:"sidebar-huddle",children:[r.jsxs("button",{className:"sidebar-nav-item sidebar-huddle-toggle",onClick:()=>_d(i=>!i),"data-tooltip":"Huddles","aria-label":"Select huddle",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("circle",{cx:"8",cy:"8",r:"3.2"}),r.jsx("circle",{cx:"16",cy:"8",r:"3.2"}),r.jsx("path",{d:"M3.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"}),r.jsx("path",{d:"M11.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"})]}),r.jsx("span",{className:"sidebar-huddle-initial",children:ht(((dy=(uy=Se.find(i=>i.tenantId===E))==null?void 0:uy.tenant)==null?void 0:dy.name)||"H").charAt(0)}),r.jsx("span",{className:"sidebar-huddle-label",children:ht((fy=(hy=Se.find(i=>i.tenantId===E))==null?void 0:hy.tenant)==null?void 0:fy.name)||"Huddle"})]}),Nd&&r.jsx("div",{className:"sidebar-huddle-menu",children:Se.map(i=>{var d,p;const c=i.tenantId===E;return r.jsxs("button",{className:`sidebar-huddle-item ${c?"active":""}`,onClick:()=>{fs(i.tenantId),_d(!1)},children:[r.jsx("span",{className:"huddle-item-dot",style:{background:Sn(i.tenantId,(d=i.tenant)==null?void 0:d.name).solid}}),r.jsx("span",{className:"sidebar-huddle-name",children:ht((p=i.tenant)==null?void 0:p.name)||i.tenantId})]},i.id)})})]}),r.jsx("div",{className:"sidebar-team",children:r.jsxs("div",{className:"sidebar-nav",children:[r.jsxs("button",{className:`sidebar-nav-item ${l==="dashboard"?"active":""}`,onClick:()=>u("dashboard"),"data-tooltip":"Home",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("rect",{x:"3.5",y:"3.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"13.5",y:"3.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"3.5",y:"13.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"13.5",y:"13.5",width:"7",height:"7",rx:"2"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Home"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="inbox"?"active":""}`,onClick:()=>u("inbox"),"data-tooltip":"Inbox",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 4h16v12H4z"}),r.jsx("path",{d:"M4 16h6l2 3h4l2-3h6"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Inbox"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="kanban"||l==="table"||l==="timeline"?"active":""}`,onClick:Ek,"data-tooltip":"Work",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("rect",{x:"3.5",y:"4",width:"7",height:"16",rx:"2"}),r.jsx("rect",{x:"13.5",y:"4",width:"7",height:"9",rx:"2"}),r.jsx("path",{d:"M13.5 16h7"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Work"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="scope"?"active":""}`,onClick:Tk,"data-tooltip":"Scope",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),r.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),r.jsx("path",{d:"M12 4v3"}),r.jsx("path",{d:"M12 17v3"}),r.jsx("path",{d:"M4 12h3"}),r.jsx("path",{d:"M17 12h3"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Scope"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="initiatives"?"active":""}`,onClick:()=>u("initiatives"),"data-tooltip":"Initiatives",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 16l6-6 4 4 6-6"}),r.jsx("path",{d:"M4 20h16"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Initiatives"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="okr"?"active":""}`,onClick:eS,"data-tooltip":"Goals",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("circle",{cx:"12",cy:"12",r:"8"}),r.jsx("path",{d:"M12 6v6l4 2"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Goals"})]})]})}),r.jsx("div",{className:"sidebar-footer",children:r.jsx("button",{className:"sidebar-toggle",onClick:()=>Zj(i=>!i),"aria-label":st?"Expand sidebar":"Collapse sidebar",title:st?"Expand sidebar":"Collapse sidebar",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M6 12h12"}),r.jsx("path",{d:"M12 6l6 6-6 6"})]})})})]})]}),r.jsxs("main",{className:"main-content",children:[tv&&r.jsx("div",{className:"loading-strip",children:"Syncing huddle"}),Ov&&!tS&&!Kj&&r.jsxs("div",{className:"huddle-cta",children:[r.jsxs("div",{children:[r.jsx("div",{className:"huddle-cta-title",children:"Share work with a huddle"}),r.jsx("div",{className:"huddle-cta-text",children:"Create a shared huddle for your team while keeping your private tasks separate."})]}),r.jsxs("div",{className:"huddle-cta-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>jl(!0),children:"Create shared huddle"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Gj(!0),children:"Dismiss"})]})]}),Ea.length>0&&r.jsxs("div",{className:"invite-banner",children:[r.jsxs("div",{children:[r.jsx("div",{className:"invite-title",children:"Huddle invitations"}),r.jsxs("div",{className:"invite-text",children:["You have ",Ea.length," pending invitation",Ea.length>1?"s":"","."]})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Sl(!0),children:"View invites"})]}),!E&&r.jsxs("div",{className:"team-warning",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"No huddle selected."})," Create or join a huddle to start managing tasks."]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>jl(!0),children:"Create huddle"})]}),r.jsxs("div",{className:"page-heading-wrap",children:[r.jsxs("div",{className:"page-breadcrumbs-row",children:[r.jsx("div",{className:"page-breadcrumbs",children:Rv.map((i,c)=>r.jsxs("span",{className:"page-breadcrumb-item",children:[i.onClick?r.jsx("button",{type:"button",className:"page-breadcrumb-link",onClick:i.onClick,children:i.label}):r.jsx("span",{children:i.label}),c<Rv.length-1&&r.jsx("span",{className:"page-breadcrumb-sep",children:"/"})]},`${i.label}-${c}`))}),(l==="kanban"||l==="table"||l==="timeline"||l==="okr"||l==="scope")&&r.jsxs("div",{className:"page-breadcrumb-actions",children:[(l==="kanban"||l==="table")&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Ol(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),Od&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{Ol(!1),Nk()},children:"+ Taskliste erstellen"}),Xk.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===ae?"active":""}`,onClick:()=>{Ol(!1),_k(i.id)},children:i.name},i.id))]})]}),l==="okr"&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Al(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),Ad&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{Al(!1),Fa(!0)},children:"+ Objective erstellen"}),It.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===(X==null?void 0:X.id)?"active":""}`,onClick:()=>{Al(!1),pc(i.id)},children:i.title},i.id))]})]}),l==="scope"&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Rl(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),Rd&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:`board-switch-item ${nn==="list"?"active":""}`,onClick:()=>{Rl(!1),Tt("list"),sn(null),Qn(null,"replace")},children:"Scope list"}),Ve.length===0?r.jsx("div",{className:"board-switch-empty",children:"No scope windows yet."}):Ve.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===Hn?"active":""}`,onClick:()=>{Rl(!1),oh(i.id)},children:i.name},i.id))]})]})]})]}),r.jsx("div",{className:`page-heading${l==="kanban"||l==="table"||l==="timeline"?" page-heading-dark":""}`,children:!(l==="okr"&&kn==="objective")&&r.jsxs("div",{className:"page-heading-row",children:[r.jsx("div",{className:"page-heading-title",children:r.jsxs("h1",{children:[l==="settings"?"Settings":l==="okr"?"Goals":l==="dashboard"?"Home":l==="calendar"?"Calendar":l==="inbox"?"Inbox":l==="initiatives"?"Initiatives":l==="scope"?nn==="detail"&&de?de.name:"Scope":(Ke==null?void 0:Ke.name)||vo||"Work",l==="scope"&&r.jsx("button",{type:"button",className:"icon-action scope-help","data-tooltip":"Ein Scope Window ist ein zeitlicher Rahmen, in dem bestimmte Tasks erledigt werden sollen.","aria-label":"Was ist ein Scope Window?",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M9.5 9a2.5 2.5 0 0 1 5 0c0 2-2 2-2 4"}),r.jsx("path",{d:"M12 17h.01"})]})})]})}),(l==="kanban"||l==="table"||l==="timeline"||l==="scope"&&nn==="detail"&&de||l==="scope"&&nn==="list")&&r.jsxs("div",{className:"page-heading-actions",children:[(l==="kanban"||l==="table"||l==="timeline")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"icon-action scope-toggle",onClick:()=>rk(i=>!i),"data-tooltip":"Tasks zu Scope zuteilen","aria-label":"Tasks zu Scope zuteilen","aria-pressed":gg,children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"8"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M12 2v3"}),r.jsx("path",{d:"M12 19v3"}),r.jsx("path",{d:"M2 12h3"}),r.jsx("path",{d:"M19 12h3"})]})}),Av&&!$s&&!ph&&r.jsx("button",{className:"icon-action settings",onClick:()=>Ha(!0),"data-tooltip":"Einstellungen zu Tasks","aria-label":"Einstellungen zu Tasks",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})}),r.jsx("button",{className:"icon-action create",disabled:!E,onClick:Yk,"data-tooltip":"Task erstellen","aria-label":"Task erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),l==="scope"&&nn==="detail"&&de&&r.jsx(r.Fragment,{children:r.jsx("button",{className:"icon-action settings",onClick:()=>Pa(!0),"data-tooltip":"Scope Window settings","aria-label":"Scope Window settings",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})})]})]})})]}),l==="inbox"&&r.jsx("div",{className:"filter-bar inbox-filter-bar",children:r.jsx("div",{className:"view-switch inbox-view-switch",role:"tablist","aria-label":"Inbox view switcher",style:{"--active-index":["eingang","spaeter","bearbeitet","archiv"].indexOf(T),"--segment-count":4},children:[{key:"eingang",label:"Eingang",count:Pv.eingang},{key:"spaeter",label:"Spter",count:Pv.spaeter},{key:"bearbeitet",label:"Bearbeitet"},{key:"archiv",label:"Archiviert"}].map(i=>r.jsxs("button",{type:"button",className:`view-pill ${T===i.key?"active":""}`,onClick:()=>M(i.key),role:"tab","aria-selected":T===i.key,children:[r.jsx("span",{children:i.label}),"count"in i&&typeof i.count=="number"&&i.count>0&&r.jsx("span",{className:"view-pill-badge","aria-hidden":"true",children:i.count})]},i.key))})}),tv?r.jsxs("div",{className:"content-loader",children:[r.jsx("div",{className:"content-loader-title",children:"Loading huddle"}),r.jsx("div",{className:"content-loader-text",children:"Fetching tasks and status."})]}):l==="calendar"?r.jsxs("div",{className:"calendar-view",children:[r.jsxs("div",{className:"calendar-header",children:[r.jsxs("div",{className:"calendar-header-left",children:[r.jsx("div",{className:"calendar-title",children:Fk}),r.jsxs("div",{className:"calendar-nav",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:kk,children:"Today"}),r.jsx("button",{className:"icon-action",onClick:()=>rv(-1),"aria-label":"Previous month",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M15 6l-6 6 6 6"})})}),r.jsx("button",{className:"icon-action",onClick:()=>rv(1),"aria-label":"Next month",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M9 6l6 6-6 6"})})})]})]}),r.jsxs("div",{className:"calendar-imports",children:[r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:"Manual import (.ics)"}),r.jsx("div",{className:"calendar-import-meta",children:"Upload a calendar export. Re-upload to refresh."}),r.jsxs("div",{className:"calendar-import-form",children:[r.jsx("input",{type:"file",accept:".ics,text/calendar",onChange:i=>{var d;const c=((d=i.target.files)==null?void 0:d[0])||null;zg(c)}},dk),r.jsx("input",{type:"text",placeholder:"Optional label",value:Hg,onChange:i=>Fg(i.target.value)}),r.jsx("button",{className:"btn btn-primary btn-compact",onClick:xk,disabled:Ql||!Jl,children:Ql?"Importing":"Import"})]})]}),r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:"Subscribe via URL"}),r.jsx("div",{className:"calendar-import-meta",children:"Add a published ICS link. Auto-refreshes while open."}),r.jsxs("div",{className:"calendar-import-form",children:[r.jsx("input",{type:"url",placeholder:"https://outlook.office.com/calendar/...",value:Yl,onChange:i=>Kg(i.target.value)}),r.jsx("input",{type:"text",placeholder:"Optional label",value:Vg,onChange:i=>Wg(i.target.value)}),r.jsx("button",{className:"btn btn-primary btn-compact",onClick:bk,disabled:Ql||!Yl.trim(),children:Ql?"Subscribing":"Subscribe"})]})]}),ok.map(i=>r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:i.name}),r.jsxs("div",{className:"calendar-import-meta",children:[i.type==="url"?"URL subscription":"File import"," "," ",new Date(i.createdAt).toLocaleDateString()]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>jk(i.id),children:"Remove"})]},i.id))]})]}),Ag&&r.jsx("div",{className:"calendar-error",children:Ag}),r.jsxs("div",{className:"calendar-layout",children:[r.jsxs("div",{className:"calendar-grid",children:[r.jsx("div",{className:"calendar-weekdays",children:zk.map(i=>r.jsx("span",{children:i},i))}),r.jsx("div",{className:"calendar-days",children:xt.days.map(i=>{const c=dc(i),d=pv.get(c)||[],p=i.getMonth()===ji.getMonth(),k=c===dc(new Date),x=c===mv;return r.jsxs("button",{className:`calendar-day${p?"":" muted"}${k?" today":""}${x?" selected":""}`,onClick:()=>Gd(i),children:[r.jsx("span",{className:"calendar-day-number",children:i.getDate()}),r.jsxs("span",{className:"calendar-day-events",children:[d.slice(0,3).map((I,C)=>r.jsx("span",{className:`calendar-event-dot ${I.provider}`},`${I.id}-${C}`)),d.length>3&&r.jsxs("span",{className:"calendar-event-more",children:["+",d.length-3]})]})]},c)})})]}),r.jsxs("div",{className:"calendar-agenda",children:[r.jsxs("div",{className:"calendar-agenda-header",children:[r.jsx("div",{className:"calendar-agenda-date",children:Kd.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),r.jsxs("div",{className:"calendar-agenda-meta",children:[hh.length," events"]})]}),ck?r.jsx("div",{className:"calendar-loading",children:"Loading events"}):hh.length===0?r.jsx("div",{className:"calendar-empty",children:"No events scheduled."}):r.jsx("div",{className:"calendar-agenda-list",children:hh.map(i=>{const c=new Date(i.start),d=new Date(i.end),p=i.allDay?"All day":`${c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}  ${d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;return r.jsxs("div",{className:"calendar-agenda-item",children:[r.jsx("span",{className:`calendar-event-dot ${i.provider}`}),r.jsxs("div",{className:"calendar-agenda-info",children:[r.jsx("div",{className:"calendar-agenda-time",children:p}),r.jsx("div",{className:"calendar-agenda-title",children:i.title||"(No title)"}),i.location&&r.jsx("div",{className:"calendar-agenda-meta",children:i.location})]})]},`${i.provider}-${i.id}`)})})]})]})]}):l==="settings"?r.jsx("div",{className:"settings-panel",children:A?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:lS,disabled:Zm,children:Zm?"Saving...":"Save settings"}),tg&&r.jsx("div",{className:"settings-message",children:tg})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Profile"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("div",{className:"settings-avatar",children:[A.avatarUrl?r.jsx("img",{src:A.avatarUrl,alt:"Avatar preview"}):r.jsx("div",{className:"settings-avatar-placeholder",children:Mi(A.name||($==null?void 0:$.email)||"U")}),r.jsxs("label",{className:"settings-upload",children:["Upload avatar",r.jsx("input",{type:"file",accept:"image/*",onChange:i=>uS(i.target.files)})]})]}),r.jsxs("label",{children:["Name",r.jsx("input",{type:"text",value:A.name,onChange:i=>Oe({...A,name:i.target.value})})]}),r.jsxs("label",{children:["Avatar URL",r.jsx("input",{type:"text",value:A.avatarUrl,onChange:i=>Oe({...A,avatarUrl:i.target.value})})]}),r.jsxs("label",{children:["Email",r.jsx("input",{type:"text",value:($==null?void 0:$.email)||"",readOnly:!0})]}),r.jsxs("label",{children:["Profile visibility",r.jsxs("select",{value:A.profileVisibility,onChange:i=>Oe({...A,profileVisibility:i.target.value}),children:[r.jsx("option",{value:"huddle",children:"Visible to huddles"}),r.jsx("option",{value:"private",children:"Private"})]})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Localization"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Timezone",r.jsx("input",{type:"text",value:A.timezone,onChange:i=>Oe({...A,timezone:i.target.value})})]}),r.jsxs("label",{children:["Locale",r.jsx("input",{type:"text",value:A.locale,onChange:i=>Oe({...A,locale:i.target.value})})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Defaults"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Default huddle",r.jsx("select",{value:A.defaultHuddleId||"",onChange:i=>Oe({...A,defaultHuddleId:i.target.value}),children:Se.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("label",{children:["Default priority",r.jsxs("select",{value:A.defaultPriority,onChange:i=>Oe({...A,defaultPriority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("label",{children:["Default status",r.jsxs("select",{value:A.defaultStatus,onChange:i=>Oe({...A,defaultStatus:i.target.value}),children:[r.jsx("option",{value:"BACKLOG",children:"Backlog"}),r.jsx("option",{value:"TODO",children:"Todo"}),r.jsx("option",{value:"IN_PROGRESS",children:"Doing"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Notifications"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsx("div",{className:"settings-subtitle",children:"Email"}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.email.assigned,onChange:i=>Oe({...A,notifications:{...A.notifications,email:{...A.notifications.email,assigned:i.target.checked}}})}),"Task assigned"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.email.mentions,onChange:i=>Oe({...A,notifications:{...A.notifications,email:{...A.notifications.email,mentions:i.target.checked}}})}),"Mentions"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.email.due,onChange:i=>Oe({...A,notifications:{...A.notifications,email:{...A.notifications.email,due:i.target.checked}}})}),"Due date reminders"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.email.invites,onChange:i=>Oe({...A,notifications:{...A.notifications,email:{...A.notifications.email,invites:i.target.checked}}})}),"Huddle invites"]}),r.jsx("div",{className:"settings-subtitle",children:"In-app"}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.inApp.assigned,onChange:i=>Oe({...A,notifications:{...A.notifications,inApp:{...A.notifications.inApp,assigned:i.target.checked}}})}),"Task assigned"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.inApp.mentions,onChange:i=>Oe({...A,notifications:{...A.notifications,inApp:{...A.notifications.inApp,mentions:i.target.checked}}})}),"Mentions"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.inApp.due,onChange:i=>Oe({...A,notifications:{...A.notifications,inApp:{...A.notifications.inApp,due:i.target.checked}}})}),"Due date reminders"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:A.notifications.inApp.invites,onChange:i=>Oe({...A,notifications:{...A.notifications,inApp:{...A.notifications.inApp,invites:i.target.checked}}})}),"Huddle invites"]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Working hours"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Start",r.jsx("input",{type:"time",value:A.workingHours.start,onChange:i=>Oe({...A,workingHours:{...A.workingHours,start:i.target.value}})})]}),r.jsxs("label",{children:["End",r.jsx("input",{type:"time",value:A.workingHours.end,onChange:i=>Oe({...A,workingHours:{...A.workingHours,end:i.target.value}})})]}),r.jsx("div",{className:"settings-subtitle",children:"Days"}),r.jsx("div",{className:"settings-days",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(i=>r.jsxs("label",{className:"settings-day",children:[r.jsx("input",{type:"checkbox",checked:A.workingHours.days.includes(i),onChange:c=>{const d=c.target.checked?A.workingHours.days.concat(i):A.workingHours.days.filter(p=>p!==i);Oe({...A,workingHours:{...A.workingHours,days:d}})}}),i]},i))})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Reminders"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Due soon (hours)",r.jsx("input",{type:"number",min:1,value:A.reminders.dueSoonHours,onChange:i=>Oe({...A,reminders:{...A.reminders,dueSoonHours:Number(i.target.value)}})})]}),r.jsxs("label",{children:["Daily summary",r.jsx("input",{type:"time",value:A.reminders.dailySummaryTime,onChange:i=>Oe({...A,reminders:{...A.reminders,dailySummaryTime:i.target.value}})})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Huddles"})}),r.jsx("div",{className:"settings-card-body ui-card-body",children:r.jsx("div",{className:"template-list",children:Se.map(i=>{var c,d;return r.jsxs("div",{className:"template-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId}),r.jsxs("div",{className:"member-meta",children:["Role: ",i.role]})]}),((d=i.tenant)==null?void 0:d.name)!=="Personal"&&r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>fS(i.tenantId),children:"Leave"})]},i.id)})})})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Security & Sessions"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:cS,children:"Send password reset email"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:kc,children:"Sign out"})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Export"})}),r.jsx("div",{className:"settings-card-body ui-card-body",children:r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:dS,children:"Export JSON"}),r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:hS,children:"Export CSV"})]})})]})]})]}):r.jsx("div",{className:"empty-state",children:"Loading settings..."})}):l==="okr"?Vk?r.jsxs("div",{className:"okr-panel",children:[r.jsxs("div",{className:"okr-create ui-card",children:[r.jsx("div",{className:"okr-card-title ui-card-header",children:"Create objective"}),r.jsxs("div",{className:"okr-card-body ui-card-body",children:[r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:wr.title,onChange:i=>xr(c=>({...c,title:i.target.value})),placeholder:"Ship a new onboarding"})]}),r.jsxs("label",{children:["Owner",r.jsxs("select",{value:wr.ownerId,onChange:i=>xr(c=>({...c,ownerId:i.target.value})),children:[r.jsx("option",{value:"",children:"Unassigned"}),Ht(E).map(i=>{var c,d;return r.jsx("option",{value:i.userId,children:((c=i.user)==null?void 0:c.name)||((d=i.user)==null?void 0:d.email)||i.userId},i.userId)})]})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:wr.startDate,onChange:i=>xr(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:wr.endDate,onChange:i=>xr(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:wr.status,onChange:i=>xr(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{value:wr.description,onChange:i=>xr(c=>({...c,description:i.target.value})),placeholder:"Short context for the objective",rows:3})]})]}),r.jsxs("div",{className:"okr-actions",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:sv,children:"Refresh"}),r.jsx("button",{className:"icon-action create",onClick:Sk,"data-tooltip":"Objective erstellen","aria-label":"Objective erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]})]})]}),wg&&r.jsxs("div",{className:"okr-error",children:["Error: ",wg]}),vg?r.jsx("div",{className:"empty-state",children:"Loading OKRs..."}):r.jsxs("div",{className:"okr-list",children:[$l.length===0&&r.jsx("div",{className:"empty-state",children:"No objectives yet."}),$l.map(i=>{const c=i.ownerId?Nn(E,i.ownerId):"Unassigned",d=xg.includes(i.id);return r.jsxs("div",{className:"okr-card ui-card",onClick:()=>Ar(`/okr/objective/${i.id}`),children:[r.jsxs("div",{className:"okr-header ui-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-description",children:i.description}),r.jsxs("div",{className:"okr-meta",children:[r.jsx("span",{children:i.status}),i.ownerId?r.jsx("div",{className:"okr-owner-stack",children:ft(E||"",[i.ownerId])}):r.jsxs("span",{className:"okr-owner-badge",children:["Owner: ",c]}),i.startDate&&r.jsx("span",{children:new Date(i.startDate).toLocaleDateString()}),i.endDate&&r.jsx("span",{children:new Date(i.endDate).toLocaleDateString()})]})]}),r.jsxs("div",{className:"okr-progress",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-label",children:[Math.round(i.progress),"%"]})]}),r.jsx("button",{className:`okr-chevron ${d?"expanded":""}`,type:"button",onClick:p=>{p.stopPropagation(),bg(k=>k.includes(i.id)?k.filter(x=>x!==i.id):[...k,i.id])},"aria-expanded":d,"aria-label":d?"Hide key results":"Show key results",children:r.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"4 8 10 14 16 8"})})})]}),d&&r.jsx("div",{className:"okr-card-body ui-card-body",children:r.jsx("div",{className:"okr-keyresults-expanded",children:i.keyResults.length===0?r.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(p=>r.jsx("div",{className:"okr-kr-expanded",children:r.jsxs("div",{className:"okr-kr-expanded-header",children:[r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:p.title}),p.description&&r.jsx("div",{className:"okr-kr-description",children:p.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(p.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(p.progress),"%"]})]})]}),r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(p.updatedAt||p.createdAt).toLocaleDateString()]})]})},p.id))})})]},i.id)})]})]}):r.jsxs("div",{className:"okr-shell",children:[vi&&r.jsxs("div",{className:"okr-notice",children:[r.jsx("div",{className:"okr-notice-title",children:vi.code==="permission"?"Blocked by permission":vi.code==="policy"?"Blocked by policy":"Request blocked"}),r.jsx("div",{className:"okr-notice-text",children:vi.safeReason}),vi.correlationId&&r.jsxs("div",{className:"okr-notice-meta",children:["Ref: ",vi.correlationId]})]}),vg&&r.jsx("div",{className:"okr-loading",children:"Syncing OKRs"}),kn==="objective"&&X&&r.jsxs("div",{className:"okr-focus",children:[r.jsxs("div",{className:"okr-focus-main",children:[r.jsxs("div",{className:"okr-focus-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-focus-title",children:X.title}),r.jsxs("div",{className:"okr-focus-meta",children:[r.jsx("span",{children:X.status}),r.jsxs("span",{className:"okr-owner-inline",children:[r.jsx("span",{className:"okr-owner-label",children:"Owner"}),X.ownerId?ft(E||"",[X.ownerId]):r.jsx("span",{className:"okr-owner-empty",children:""})]}),X.startDate&&r.jsx("span",{children:new Date(X.startDate).toLocaleDateString()})," ",X.endDate&&r.jsx("span",{children:new Date(X.endDate).toLocaleDateString()})]}),X.description&&r.jsx("div",{className:"okr-focus-description",children:X.description})]}),r.jsx("div",{className:"okr-focus-actions",children:(X.ownerId===($==null?void 0:$.id)||Av)&&r.jsx("button",{className:"icon-action settings",onClick:()=>Dk(X),"data-tooltip":"Einstellungen zum Objective","aria-label":"Einstellungen zum Objective",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})})]}),r.jsxs("div",{className:"okr-focus-progress",children:[r.jsx("div",{className:"okr-progress-label",children:"Progress"}),r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${X.progress}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[X.progress,"% of ",X.keyResults.length," key results"]})]})]}),r.jsx("div",{className:"okr-focus-keyresults",children:r.jsxs("div",{className:"okr-focus-section",children:[r.jsx("div",{className:"okr-section-title",children:"Key results"}),r.jsxs("div",{className:"okr-section-toolbar",children:[r.jsxs("div",{className:"view-switch okr-view-switch okr-view-switch-three",role:"tablist","aria-label":"Key results view switcher",style:{"--active-index":Wn==="list"?0:Wn==="cards"?1:2,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${Wn==="list"?"active":""}`,onClick:()=>Pd("list"),role:"tab","aria-selected":Wn==="list",children:"Liste"}),r.jsx("button",{className:`view-pill ${Wn==="cards"?"active":""}`,onClick:()=>Pd("cards"),role:"tab","aria-selected":Wn==="cards",children:"Cards"}),r.jsx("button",{className:`view-pill ${Wn==="table"?"active":""}`,onClick:()=>Pd("table"),role:"tab","aria-selected":Wn==="table",children:"Table"})]}),!X.readOnly&&r.jsx("button",{className:"icon-action create",onClick:()=>$k(X.id),"data-tooltip":"Neuen Key result hinzufgen","aria-label":"Neuen Key result hinzufgen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","stroke-width":"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),Wn==="table"?r.jsx("div",{className:"task-table-wrap okr-kr-table-wrap",children:r.jsxs("table",{className:"task-table okr-kr-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Key result"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Progress"}),r.jsx("th",{children:"Members"}),r.jsx("th",{children:"Updated"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:X.keyResults.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"okr-empty",children:"No key results yet."})}):X.keyResults.map(i=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"okr-kr-table-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-kr-table-desc",children:i.description})]}),r.jsx("td",{children:dh===i.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>us(null),"aria-haspopup":"listbox","aria-expanded":"true",children:wt(i.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>r.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{Ai(i.id,X.id,{status:c}),us(null)},role:"option","aria-selected":i.status===c,children:wt(c)},c))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>us(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${wt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${wt(i.status)})`,children:wt(i.status)})}),r.jsx("td",{children:r.jsxs("div",{className:"okr-kr-table-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),hv===i.id?r.jsx("input",{type:"number",className:"okr-progress-input",value:ch,min:0,max:100,onChange:c=>uh(c.target.value),onBlur:()=>cc(i,X.id),onKeyDown:c=>{c.key==="Enter"&&cc(i,X.id),c.key==="Escape"&&fo(null)},autoFocus:!0}):r.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>fv(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})}),r.jsx("td",{children:i.assignees&&i.assignees.length>0?r.jsx("div",{className:"okr-kr-assignees",children:ft(E||"",i.assignees)}):r.jsx("span",{className:"okr-empty",children:""})}),r.jsx("td",{className:"okr-kr-date",children:new Date(i.lastUpdatedAt).toLocaleDateString()}),r.jsx("td",{children:r.jsx("button",{className:"icon-action settings",onClick:()=>lh(i,X.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})})]},i.id))})]})}):r.jsxs("div",{className:`okr-kr-list ${Wn==="cards"?"okr-kr-cards":""}`,children:[X.keyResults.length===0&&r.jsx("div",{className:"okr-empty",children:"No key results yet."}),X.keyResults.map(i=>r.jsxs("div",{className:"okr-kr-card ui-card",children:[r.jsx("div",{className:"okr-kr-card-header ui-card-header",children:r.jsxs("div",{className:"okr-kr-toprow",children:[r.jsxs("div",{className:"okr-kr-toprow-left",children:[dh===i.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>us(null),"aria-haspopup":"listbox","aria-expanded":"true",children:wt(i.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>r.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{Ai(i.id,X.id,{status:c}),us(null)},role:"option","aria-selected":i.status===c,children:wt(c)},c))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>us(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${wt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${wt(i.status)})`,children:wt(i.status)}),i.assignees&&i.assignees.length>0&&r.jsx("div",{className:"okr-kr-assignees",children:ft(E||"",i.assignees)})]}),r.jsxs("div",{className:"okr-kr-toprow-right",children:[r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(i.lastUpdatedAt).toLocaleDateString()]}),r.jsx("button",{className:"icon-action settings",onClick:()=>lh(i,X.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})}),r.jsx("div",{className:"okr-kr-card-body ui-card-body",children:r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-kr-description",children:i.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),hv===i.id?r.jsx("input",{type:"number",className:"okr-progress-input",value:ch,min:0,max:100,onChange:c=>uh(c.target.value),onBlur:()=>cc(i,X.id),onKeyDown:c=>{c.key==="Enter"&&cc(i,X.id),c.key==="Escape"&&fo(null)},autoFocus:!0}):r.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>fv(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})]})})]},i.id))]})]})})]}),kn==="objective"&&!X&&r.jsx("div",{className:"okr-empty",children:"Select an objective from Pulse to focus."}),kn==="review"&&X&&r.jsxs("div",{className:"okr-review",children:[r.jsxs("div",{className:"okr-review-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-review-title",children:"Strategic review"}),r.jsx("div",{className:"okr-review-subtitle",children:"6-minute guided check-in"})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>pc(X.id),children:"Back to focus"})]}),Li.length>0&&r.jsxs("div",{className:"okr-review-steps",children:[r.jsxs("div",{className:"okr-review-step",children:[r.jsx("div",{className:"okr-step-title",children:(py=Li[Ba])==null?void 0:py.title}),r.jsx("div",{className:"okr-step-text",children:(my=Li[Ba])==null?void 0:my.content})]}),r.jsxs("div",{className:"okr-review-nav",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Md(i=>Math.max(i-1,0)),disabled:Ba===0,children:"Back"}),r.jsxs("div",{className:"okr-review-progress",children:["Step ",Ba+1," / ",Li.length]}),r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>Md(i=>Math.min(i+1,Li.length-1)),disabled:Ba===Li.length-1,children:"Next"})]})]})]}),kn==="review"&&!X&&r.jsx("div",{className:"okr-empty",children:"Select an objective to start a review."}),kn==="library"&&r.jsxs("div",{className:"okr-pulse",children:[r.jsxs("div",{className:"okr-pulse-toolbar",children:[r.jsxs("div",{className:"view-switch okr-view-switch",role:"tablist","aria-label":"Objectives view switcher",style:{"--active-index":Is==="list"?0:1},children:[r.jsx("button",{className:`view-pill ${Is==="list"?"active":""}`,onClick:()=>kg("list"),role:"tab","aria-selected":Is==="list",children:"Liste"}),r.jsx("button",{className:`view-pill ${Is==="cards"?"active":""}`,onClick:()=>kg("cards"),role:"tab","aria-selected":Is==="cards",children:"Cards"})]}),r.jsx("div",{className:"okr-pulse-actions",children:r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Fa(!0),children:"+ Objective"})})]}),r.jsx("div",{className:"okr-pulse-section okr-pulse-objectives",children:It.length===0?r.jsx("div",{className:"okr-empty",children:"No objectives yet."}):r.jsx("div",{className:Is==="cards"?"okr-objective-grid":"task-list",children:It.map(i=>{const c=Is==="list"&&xg.includes(i.id),d=i.ownerId?Nn(E,i.ownerId):"Unassigned";return r.jsxs("div",{className:`okr-objective-item ${c?"expanded":""}`,children:[r.jsxs("div",{className:"task-row okr-objective-row",onClick:()=>pc(i.id),children:[r.jsxs("div",{className:"task-row-main",children:[r.jsx("div",{className:"task-row-title",children:r.jsx("span",{className:"okr-objective-title-text",children:i.title})}),i.description&&r.jsx("div",{className:"okr-objective-description",children:i.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(i.progress),"%"]})]}),r.jsxs("div",{className:"task-row-meta",children:[r.jsx("span",{className:"badge task-kind-badge",children:i.status}),r.jsxs("span",{className:"badge task-kind-badge",children:[i.keyResults.length," KRs"]}),i.ownerId?r.jsx("div",{className:"okr-owner-stack",children:ft(E||"",[i.ownerId])}):r.jsxs("span",{className:"badge task-kind-badge",children:["Owner: ",d]})]})]}),Is==="list"&&r.jsx("div",{className:"task-row-side",children:r.jsx("button",{className:`okr-chevron ${c?"expanded":""}`,type:"button",onClick:p=>{p.stopPropagation(),bg(k=>k.includes(i.id)?k.filter(x=>x!==i.id):[...k,i.id])},"aria-expanded":c,"aria-label":c?"Hide key results":"Show key results",children:r.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"4 8 10 14 16 8"})})})})]}),c&&r.jsx("div",{className:"okr-kr-inline",children:i.keyResults.length===0?r.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(p=>r.jsx("div",{className:"okr-kr-inline-row",children:r.jsxs("div",{className:"okr-kr-expanded-header okr-kr-detail-header",children:[r.jsxs("div",{className:"okr-kr-toprow",children:[r.jsxs("div",{className:"okr-kr-toprow-left",children:[dh===p.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>us(null),"aria-haspopup":"listbox","aria-expanded":"true",children:wt(p.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(k=>r.jsx("button",{type:"button",className:`filter-option ${p.status===k?"active":""} filter-option-${k.toLowerCase()}`,onClick:()=>{Ai(p.id,i.id,{status:k}),us(null)},role:"option","aria-selected":p.status===k,children:wt(k)},k))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${p.status.toLowerCase()} tooltip-target`,onClick:()=>us(p.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${wt(p.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${wt(p.status)})`,children:wt(p.status)}),p.assignees&&p.assignees.length>0&&r.jsx("div",{className:"okr-kr-assignees",children:ft(E||"",p.assignees)})]}),r.jsxs("div",{className:"okr-kr-toprow-right",children:[r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(p.lastUpdatedAt).toLocaleDateString()]}),r.jsx("button",{className:"icon-action settings",onClick:()=>lh(p,i.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]}),r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:p.title}),p.description&&r.jsx("div",{className:"okr-kr-description",children:p.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${p.progress}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(p.progress),"%"]})]})]})]})},p.id))})]},i.id)})})})]}),Bd&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:yi?"Objective bearbeiten":"Objective erstellen"}),r.jsx("div",{className:"panel-subtitle",children:"Create the objective details."})]}),r.jsx("button",{className:"panel-close",onClick:()=>Fa(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("label",{children:["Objective title",r.jsx("input",{type:"text",value:Qe.title,onChange:i=>dt(c=>({...c,title:i.target.value})),placeholder:"Deliver a calmer onboarding experience"})]}),r.jsxs("label",{children:["Description",r.jsx("textarea",{value:Qe.description,onChange:i=>dt(c=>({...c,description:i.target.value})),placeholder:"Short context for this objective",rows:3})]}),r.jsxs("label",{children:["Owner",r.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="objective-owner"?null:"objective-owner"),children:Qe.ownerId?Nn(E,Qe.ownerId):"Unassigned"}),Gn==="objective-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${Qe.ownerId?"":" active"}`,onClick:()=>{dt(i=>({...i,ownerId:""})),rt(null)},children:"Unassigned"}),Ht(E).map(i=>{var c,d;return r.jsx("button",{type:"button",className:`member-select-option${Qe.ownerId===i.userId?" active":""}`,onClick:()=>{dt(p=>({...p,ownerId:i.userId})),rt(null)},children:((c=i.user)==null?void 0:c.name)||((d=i.user)==null?void 0:d.email)||i.userId},i.userId)})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Timeline"}),r.jsxs("div",{className:"objective-row",children:[r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:Qe.startDate,onChange:i=>dt(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:Qe.endDate,onChange:i=>dt(c=>({...c,endDate:i.target.value}))})]})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:Qe.status,onChange:i=>dt(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:dv,children:yi?"Save changes":"Create objective"})})})})]})})]}):l==="scope"?r.jsx("div",{className:"dashboard-panel",children:E?nn==="detail"&&de?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":Ct==="board"?1:Ct==="timeline"?2:0,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${Ct==="list"?"active":""}`,onClick:()=>Dd("list"),role:"tab","aria-selected":Ct==="list",children:"List"}),r.jsx("button",{className:`view-pill ${Ct==="board"?"active":""}`,onClick:()=>Dd("board"),role:"tab","aria-selected":Ct==="board",children:"Board"}),r.jsx("button",{className:`view-pill ${Ct==="timeline"?"active":""}`,onClick:()=>Dd("timeline"),role:"tab","aria-selected":Ct==="timeline",children:"Timeline"})]}),r.jsxs("div",{className:"filter-actions",children:[r.jsx("div",{className:"filter-quick",children:[{key:"MINE",label:"My tasks"},{key:"OVERDUE",label:"Overdue"},{key:"WEEK",label:"This week"}].map(i=>r.jsx("button",{type:"button",className:`filter-quick-pill${xn===i.key?" active":""}`,onClick:()=>Eg(c=>c===i.key?"ALL":i.key),children:i.label},i.key))}),Ct==="timeline"&&r.jsxs("div",{className:"filter-dropdown",ref:Vl,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>ki(i=>!i),"aria-haspopup":"listbox","aria-expanded":As,children:jn==="auto"?"Auto range":`${jn} days`}),As&&r.jsx("div",{className:"filter-options",role:"listbox",children:[{value:"auto",label:"Auto range"},{value:14,label:"14 days"},{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days"}].map(i=>r.jsx("button",{type:"button",className:`filter-option ${jn===i.value?"active":""}`,onClick:()=>{Rg(i.value),ki(!1)},role:"option","aria-selected":jn===i.value,children:i.label},i.value))})]}),r.jsxs("div",{className:"filter-dropdown",ref:Vd,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Ra(i=>!i),"aria-haspopup":"listbox","aria-expanded":pi,children:Fn==="ALL"?"All priorities":Fn}),pi&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Fn===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{nk(i),Ra(!1)},role:"option","aria-selected":Fn===i,children:i==="ALL"?"All priorities":i},i))})]}),Ct==="list"&&r.jsxs("div",{className:"filter-dropdown",ref:Wd,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Da(i=>!i),"aria-haspopup":"listbox","aria-expanded":mi,children:zn==="ALL"?"All statuses":zn}),mi&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL",V.BACKLOG,V.TODO,V.IN_PROGRESS,V.DONE].map(i=>r.jsx("button",{type:"button",className:`filter-option ${zn===i?"active":""}`,onClick:()=>{sk(i),Da(!1)},role:"option","aria-selected":zn===i,children:i==="ALL"?"All statuses":i},i))})]}),r.jsxs("div",{className:"filter-dropdown",ref:Fl,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>xi(i=>!i),"aria-haspopup":"listbox","aria-expanded":bn,children:Ut.length>0?`Labels (${Ut.length})`:"All labels"}),bn&&r.jsxs("div",{className:"filter-options filter-options-multi",role:"listbox",children:[Sv.length===0&&r.jsx("div",{className:"filter-empty",children:"No labels found"}),Sv.map(i=>{const c=Ut.includes(i);return r.jsxs("button",{type:"button",className:`filter-option ${c?"active":""}`,onClick:()=>{qa(d=>d.includes(i)?d.filter(p=>p!==i):d.concat(i))},role:"option","aria-selected":c,children:[r.jsx("span",{children:i}),c&&r.jsx("span",{className:"filter-option-check",children:""})]},i)}),Ut.length>0&&r.jsx("button",{type:"button",className:"filter-option filter-option-clear",onClick:()=>qa([]),children:"Clear selection"})]})]}),r.jsxs("label",{className:`filter-checkbox filter-favorites ${br?"active":""}`,"data-tooltip":"Nur Favoriten","aria-label":"Nur Favoriten",children:[r.jsx("input",{type:"checkbox",checked:br,onChange:i=>Ng(i.target.checked)}),r.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),Ct==="board"?r.jsx("div",{className:"kanban-board-wrap",children:r.jsx("div",{className:"kanban-board",children:Gk.map(i=>r.jsxs("div",{className:"kanban-column",onDragOver:ov,onDragLeave:lv,onDrop:c=>cv(c,i.status),children:[r.jsxs("div",{className:"column-header",children:[r.jsx("span",{children:bv(i.status)}),r.jsx("span",{children:i.tasks.length})]}),r.jsx("div",{className:"column-content",children:i.tasks.map(c=>{const d=c.checklist.filter(Y=>Y.done).length,p=c.checklist.length,k=c.linkedTaskIds.length,x=p>0&&d===p,I=Gv.has(c.id),C=c.sourceType?c.sourceType==="MANUAL":!0,O=uc(c),Q=O==="overdue"?"Overdue":O==="due-soon"?"Due soon":null,ie=c.dueDate?new Date(c.dueDate).toLocaleDateString():"",we=O==="overdue"?" overdue":O==="due-soon"?" due-soon":"",Ne=O==="overdue"?" task-card-overdue":O==="due-soon"?" task-card-due-soon":"",B={cursor:C?"grab":"default",userSelect:"none",WebkitUserDrag:C?"element":"auto",pointerEvents:"auto"};return r.jsx("div",{className:`task-card${C?" task-card-draggable":""}${ls===c.id?" dragging":""}${Ne}`,style:B,draggable:C,onDragStart:Y=>C?Mh(Y,c.id):Y.preventDefault(),onDragEnd:$h,onClick:()=>Ih(c),children:r.jsxs("div",{className:"task-card-content",children:[r.jsxs("div",{className:"task-card-topbar",children:[r.jsxs("div",{className:`task-card-due${we}`,children:[r.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M5 4v16"}),r.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),r.jsx("span",{className:"task-card-due-date",children:ie}),Q&&r.jsx("span",{className:"task-card-due-badge",children:Q})]}),r.jsx("span",{className:`badge badge-priority-${c.priority.toLowerCase()} tooltip-target`,"data-tooltip":`Priority: ${c.priority}`,children:c.priority})]}),r.jsxs("div",{className:"task-card-header",children:[r.jsxs("div",{className:"task-title-row",children:[I&&r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),c.title]}),r.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${c.isFavorite?" active":""}`,onClick:Y=>{Y.stopPropagation(),Ph(c)},title:c.isFavorite?"Unfavorite":"Favorite","aria-label":c.isFavorite?"Unfavorite task":"Favorite task",children:c.isFavorite?"":""})]}),c.description&&r.jsx("div",{className:"task-card-description",children:Rr(c.description)}),r.jsx("hr",{className:"card-divider"}),r.jsxs("div",{className:"task-card-footer",children:[r.jsx("div",{className:"task-card-kinds",children:c.kinds.map(Y=>r.jsx("span",{className:"badge task-kind-badge",children:Y},Y))}),r.jsxs("div",{className:"task-card-people",children:[c.ownerId&&ft(c.tenantId,[c.ownerId]),c.assignees.length>0&&ft(c.tenantId,c.assignees.filter(Y=>Y!==c.ownerId))]}),r.jsxs("div",{className:"task-card-icons",children:[p>0&&r.jsxs("span",{className:x?"icon-badge checklist-complete":"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),r.jsx("path",{d:"M18 17l2 2 4-4"})]}),d,"/",p]}),c.comments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),c.comments.length]}),k>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),k]}),c.attachments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),c.attachments.length]})]})]})]})},c.id)})})]},i.status))})}):Ct==="timeline"?_v(vc,"No tasks to show on timeline."):r.jsx("div",{className:"task-table-wrap",children:r.jsxs("table",{className:"task-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Title"}),r.jsx("th",{children:"People"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Art"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Due"}),r.jsx("th",{children:"Source"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:vc.map(i=>{const c=uc(i),d=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,p=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",k=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"";return r.jsxs(Yc.Fragment,{children:[r.jsxs("tr",{className:`task-table-row${k}`,onClick:()=>Ch(i),children:[r.jsx("td",{children:i.title}),r.jsx("td",{children:r.jsxs("div",{className:"task-card-people",children:[i.ownerId&&ft(i.tenantId,[i.ownerId]),i.assignees.length>0&&ft(i.tenantId,i.assignees.filter(x=>x!==i.ownerId))]})}),r.jsx("td",{children:i.status}),r.jsx("td",{children:i.kinds.length>0?i.kinds.join(", "):""}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-priority-${i.priority.toLowerCase()}`,children:i.priority})}),r.jsx("td",{children:r.jsxs("div",{className:`task-table-due${k}`,children:[r.jsx("span",{className:"task-table-due-date",children:p}),d&&r.jsx("span",{className:"task-table-due-badge",children:d})]})}),r.jsx("td",{children:i.sourceIndicator||""}),r.jsx("td",{children:r.jsxs("div",{className:"table-actions",children:[i.sourceType==="MANUAL"&&r.jsx("button",{className:"icon-action settings",onClick:x=>{x.stopPropagation(),Oh(i)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),r.jsx("button",{className:"icon-action",onClick:x=>{x.stopPropagation(),f(I=>I===i.id?null:i.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),h===i.id&&r.jsx("tr",{className:"task-table-details",children:r.jsx("td",{colSpan:8,children:r.jsxs("div",{className:"table-details-grid",children:[r.jsxs("div",{className:"table-details-span",children:[r.jsx("div",{className:"table-details-label",children:"Description"}),r.jsx("div",{className:"table-details-text",children:i.description?Rr(i.description):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Members"}),r.jsx("div",{className:"table-details-text",children:i.assignees.length>0?i.assignees.map(x=>Nn(i.tenantId,x)).join(", "):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Checklist"}),r.jsx("div",{className:"table-details-text",children:i.checklist.length>0?`${i.checklist.filter(x=>x.done).length}/${i.checklist.length} done`:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Linked tasks"}),r.jsx("div",{className:"table-details-text",children:i.linkedTaskIds.length>0?i.linkedTaskIds.length:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Attachments"}),r.jsx("div",{className:"table-details-text",children:i.attachments.length>0?i.attachments.length:""})]})]})})})]},i.id)})})]})})]}):r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:r.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[r.jsx("div",{className:"inbox-header-left",children:r.jsx("span",{children:"Scope Windows"})}),r.jsx("div",{className:"inbox-header-actions",children:r.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Scope erstellen","aria-label":"Scope erstellen",onClick:()=>Ml(!0),children:r.jsx("span",{className:"btn-save-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:r.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:r.jsxs("div",{className:"inbox-layout scope-inbox-layout",children:[r.jsx("div",{className:"inbox-sidebar scope-inbox-sidebar",children:Ve.length===0?r.jsx("div",{className:"scope-empty",children:"Noch keine Scope Windows."}):Ve.map(i=>r.jsxs("button",{type:"button",className:`inbox-sidebar-item scope-sidebar-item${Hn===i.id?" active":""}`,onClick:()=>{Cs(i.id),Tt("list"),sn(null),Qn(null,"replace")},children:[r.jsx("div",{className:"inbox-avatar",children:Mi(i.name)}),r.jsxs("div",{className:"inbox-sidebar-body",children:[r.jsx("div",{className:"inbox-sidebar-title",children:i.name}),r.jsxs("div",{className:"inbox-sidebar-meta",children:[r.jsx("div",{className:"inbox-sidebar-meta-date",children:wc(i)}),i.taskIds.length," tasks"]})]})]},i.id))}),r.jsx("div",{className:"inbox-detail scope-detail",children:de?r.jsxs("div",{className:"scope-preview-card ui-card",children:[r.jsxs("div",{className:"ui-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"scope-preview-title",children:de.name}),r.jsxs("div",{className:"scope-preview-meta",children:[wc(de),"  ",de.taskIds.length," tasks"]})]}),r.jsx("button",{type:"button",className:"icon-action scope-toggle inbox-action tooltip-target",onClick:()=>oh(de.id),"data-tooltip":"Zu den Scope-Details","aria-label":"Zu den Scope-Details",children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M9 6l6 6-6 6"})})})})]}),r.jsx("div",{className:"ui-card-body scope-mini-board-wrapper",children:r.jsx("div",{className:"scope-mini-board",children:(()=>{const i=de.taskIds.map(C=>fc.get(C)).filter(C=>!!C),c=i.filter(C=>C.status===V.BACKLOG),d=i.filter(C=>C.status===V.TODO),p=i.filter(C=>C.status===V.IN_PROGRESS),k=i.filter(C=>C.status===V.DONE);return[{key:"todo",label:"ToDos",tasks:[...c,...d],status:V.TODO},{key:"doing",label:"Doing",tasks:p,status:V.IN_PROGRESS},{key:"done",label:"Done",tasks:k,status:V.DONE}].map(C=>r.jsxs("div",{className:"scope-mini-column",children:[r.jsx("div",{className:"scope-mini-column-title",children:C.label}),r.jsx("div",{className:"scope-mini-column-list",onDragOver:ov,onDragLeave:lv,onDrop:O=>cv(O,C.status),children:C.tasks.length===0?r.jsx("div",{className:"scope-mini-empty",children:"Keine Tasks"}):C.tasks.map(O=>r.jsxs("div",{className:"scope-mini-card",draggable:!0,onDragStart:Q=>Mh(Q,O.id),onDragEnd:$h,children:[r.jsx("div",{className:"scope-mini-card-title",children:O.title}),r.jsxs("div",{className:"scope-mini-card-meta",children:[O.priority,O.dueDate?`  ${new Date(O.dueDate).toLocaleDateString()}`:""]})]},O.id))})]},C.key))})()})})]}):r.jsxs("div",{className:"scope-empty scope-empty-cta",children:[r.jsx("div",{className:"scope-empty-title",children:"Scope auswhlen"}),r.jsx("div",{className:"scope-empty-text",children:"Whle links ein Scope Window aus."})]})})]})})]}):r.jsx("div",{className:"empty-state",children:"Select a huddle to build a scope window."})}):l==="dashboard"?r.jsx("div",{className:"dashboard-panel",children:E?r.jsxs("div",{className:"dashboard-visuals",children:[r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:"Scope"}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:Ve.length===0?r.jsx("div",{className:"dashboard-empty",children:"No scope windows yet."}):Ve.slice(0,5).map(i=>r.jsxs("button",{className:"dashboard-item",onClick:()=>oh(i.id),children:[r.jsx("div",{className:"dashboard-item-title",children:i.name}),r.jsxs("div",{className:"dashboard-item-meta",children:[wc(i),"  ",i.taskIds.length," tasks"]})]},i.id))})]}),r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:"My Focus"}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:xc.length===0?r.jsx("div",{className:"dashboard-empty",children:"Nothing due today."}):xc.slice(0,6).map(i=>r.jsxs("button",{className:"dashboard-item",onClick:()=>Ih(i),children:[r.jsx("div",{className:"dashboard-item-title",children:i.title}),r.jsxs("div",{className:"dashboard-item-meta",children:[i.dueDate?new Date(i.dueDate).toLocaleDateString():"No due date",r.jsxs("span",{children:[" ",mh(i.boardId)]})]})]},i.id))})]})]}):r.jsx("div",{className:"empty-state",children:"Select a huddle to see Home."})}):l==="inbox"?r.jsx("div",{className:"dashboard-panel",children:E?r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:r.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[(()=>{const i=L[T];return r.jsxs("div",{className:"inbox-header-left",children:[r.jsx("span",{children:i.label}),r.jsx("button",{type:"button",className:"info-icon tooltip-target","data-tooltip":i.tooltip,"aria-label":i.tooltip,children:"?"})]})})(),r.jsx("div",{className:"inbox-header-actions",children:r.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":t("inbox.tooltip.create","Erstellen"),"aria-label":t("inbox.tooltip.create","Erstellen"),onClick:()=>H(!0),children:r.jsx("span",{className:"btn-save-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:r.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:(()=>{const i=xh.filter(d=>{const p=R[d.id]||"eingang";return T==="eingang"?p==="eingang":T==="spaeter"?p==="spaeter":T==="bearbeitet"?p==="bearbeitet":p==="archiv"}),c=i.find(d=>d.id===w)||i[0]||null;return r.jsxs("div",{className:"inbox-layout",children:[r.jsxs("div",{className:"inbox-sidebar",children:[i.length===0&&r.jsxs("div",{className:"dashboard-empty inbox-empty",children:[r.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),r.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]}),i.map(d=>{const p=d.kind||t("inbox.incoming","Incoming"),k=d.createdAt?new Date(d.createdAt).toLocaleDateString():"Just now",x=N===d.id,I=d.creatorLabel||p||d.title,C=Mi(I);return r.jsxs("button",{type:"button",className:`inbox-sidebar-item${(c==null?void 0:c.id)===d.id?" active":""}${x?" moved":""}`,onClick:()=>j(d.id),children:[r.jsx("div",{className:`inbox-avatar${d.creatorAvatarUrl?" has-image":""} tooltip-target`,"aria-label":I,"data-tooltip":I,children:d.creatorAvatarUrl?r.jsx("img",{src:d.creatorAvatarUrl,alt:I}):C}),r.jsxs("div",{className:"inbox-sidebar-body",children:[r.jsx("div",{className:"inbox-sidebar-title",children:d.title}),r.jsxs("div",{className:"inbox-sidebar-meta",children:[r.jsx("span",{children:k}),r.jsx("span",{children:p})]})]})]},d.id)})]}),r.jsx("div",{className:"inbox-detail",children:c?r.jsx("div",{className:"inbox-detail",children:r.jsxs("div",{className:"inbox-detail-body",children:[r.jsxs("div",{className:"inbox-detail-topbar",children:[r.jsxs("div",{className:"inbox-detail-user",children:[r.jsx("div",{className:`inbox-avatar${c.creatorAvatarUrl?" has-image":""} tooltip-target`,"aria-label":c.creatorLabel||c.title,"data-tooltip":c.creatorLabel||c.title,children:c.creatorAvatarUrl?r.jsx("img",{src:c.creatorAvatarUrl,alt:c.creatorLabel||c.title}):Mi(c.creatorLabel||c.title)}),r.jsx("span",{className:"inbox-detail-user-label",children:c.creatorLabel||t("inbox.meta.owner","Owner")})]}),r.jsxs("div",{className:"inbox-detail-topbar-actions",children:[T==="eingang"&&r.jsxs("div",{className:"filter-dropdown inbox-scope-dropdown",ref:hr,children:[r.jsx("button",{type:"button",className:"icon-action scope-toggle inbox-action tooltip-target","data-tooltip":t("inbox.action.addScopeTooltip","Zum Scope hinzufgen"),"aria-label":t("inbox.action.addScope","Zum Scope hinzufgen"),onClick:()=>{S(d=>d===c.id?null:c.id)},children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),r.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),r.jsx("path",{d:"M12 4v3"}),r.jsx("path",{d:"M12 17v3"}),r.jsx("path",{d:"M4 12h3"}),r.jsx("path",{d:"M17 12h3"})]})})}),v===c.id&&r.jsx("div",{className:"filter-options",role:"listbox",children:Ve.length===0?r.jsx("div",{className:"filter-empty",children:t("scope.empty.title","No scopes yet")}):Ve.map(d=>r.jsxs("button",{type:"button",className:"filter-option",onClick:()=>_a(c,d.id),children:[r.jsx("span",{children:d.name}),r.jsx("span",{className:"filter-option-meta",children:wc(d)})]},d.id))})]}),T==="eingang"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.laterTooltip","Later"),"aria-label":t("inbox.action.later","Later"),onClick:()=>_t(c.id,"spaeter"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})}),(T==="eingang"||T==="spaeter"||T==="bearbeitet")&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.archiveTooltip","Archive"),"aria-label":t("inbox.action.archive","Archive"),onClick:()=>_t(c.id,"archiv"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 7h16"}),r.jsx("path",{d:"M6 7v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),r.jsx("path",{d:"M9 11h6"})]})})}),T==="archiv"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.backTooltip","Back to inbox"),"aria-label":t("inbox.action.backToInbox","Zum Eingang"),onClick:()=>{_t(c.id,"eingang"),j(null)},children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M14 7l-5 5 5 5"}),r.jsx("path",{d:"M19 12H9"})]})})}),T==="spaeter"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.moveToInboxTooltip","Zurck in den Eingang"),"aria-label":t("inbox.action.moveToInbox","Zur Eingang"),onClick:()=>_t(c.id,"eingang"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M9 12h8"}),r.jsx("path",{d:"M12 7l-5 5 5 5"})]})})})]})]}),r.jsxs("div",{className:"inbox-detail-meta",role:"list",children:[c.source&&r.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[r.jsxs("strong",{children:[t("inbox.field.source","Source"),":"]})," ",s(c.source)]}),c.suggestedAction&&r.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[r.jsxs("strong",{children:[t("inbox.field.action","Suggested action"),":"]})," ",a(c.suggestedAction)]})]}),r.jsxs("div",{className:"inbox-detail-header",children:[r.jsx("h3",{children:c.title}),r.jsx("span",{className:"inbox-detail-date",children:new Date(c.createdAt).toLocaleDateString()})]}),c.description&&r.jsx("p",{className:"inbox-detail-description",children:c.description})]})}):r.jsxs("div",{className:"inbox-empty-detail",children:[r.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),r.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]})})]})})()})]}):r.jsx("div",{className:"empty-state",children:"Select a huddle to see Inbox."})}):l==="initiatives"?r.jsx("div",{className:"empty-state",children:"Initiatives coming soon."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":l==="kanban"?1:l==="timeline"?2:0,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${l==="table"?"active":""}`,onClick:()=>u("table"),role:"tab","aria-selected":l==="table",children:"List"}),r.jsx("button",{className:`view-pill ${l==="kanban"?"active":""}`,onClick:()=>u("kanban"),role:"tab","aria-selected":l==="kanban",children:"Board"}),r.jsx("button",{className:`view-pill ${l==="timeline"?"active":""}`,onClick:()=>u("timeline"),role:"tab","aria-selected":l==="timeline",children:"Timeline"})]}),r.jsxs("div",{className:"filter-actions",children:[r.jsx("div",{className:"filter-quick",children:[{key:"MINE",label:"My tasks"},{key:"OVERDUE",label:"Overdue"},{key:"WEEK",label:"This week"}].map(i=>r.jsx("button",{type:"button",className:`filter-quick-pill${xn===i.key?" active":""}`,onClick:()=>Eg(c=>c===i.key?"ALL":i.key),children:i.label},i.key))}),l==="timeline"&&r.jsxs("div",{className:"filter-dropdown",ref:Vl,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>ki(i=>!i),"aria-haspopup":"listbox","aria-expanded":As,children:jn==="auto"?"Auto range":`${jn} days`}),As&&r.jsx("div",{className:"filter-options",role:"listbox",children:[{value:"auto",label:"Auto range"},{value:14,label:"14 days"},{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days"}].map(i=>r.jsx("button",{type:"button",className:`filter-option ${jn===i.value?"active":""}`,onClick:()=>{Rg(i.value),ki(!1)},role:"option","aria-selected":jn===i.value,children:i.label},i.value))})]}),r.jsxs("div",{className:"filter-dropdown",ref:Fd,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>zl(i=>!i),"aria-haspopup":"listbox","aria-expanded":bi,children:wi==="ALL"?"All priorities":wi}),bi&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>r.jsx("button",{type:"button",className:`filter-option ${wi===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{ak(i),zl(!1)},role:"option","aria-selected":wi===i,children:i==="ALL"?"All priorities":i},i))})]}),l==="table"&&r.jsxs("div",{className:"filter-dropdown",ref:zd,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Ja(i=>!i),"aria-haspopup":"listbox","aria-expanded":Os,children:cs==="ALL"?"All statuses":cs}),Os&&r.jsx("div",{className:"filter-options",role:"listbox",children:bh.map(i=>r.jsx("button",{type:"button",className:`filter-option ${cs===i?"active":""}`,onClick:()=>{_g(i),Ja(!1)},role:"option","aria-selected":cs===i,children:i==="ALL"?"All statuses":i},i))})]}),r.jsxs("div",{className:"filter-dropdown",ref:Fl,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>xi(i=>!i),"aria-haspopup":"listbox","aria-expanded":bn,children:Ut.length>0?`Labels (${Ut.length})`:"All labels"}),bn&&r.jsxs("div",{className:"filter-options filter-options-multi",role:"listbox",children:[Sc.length===0&&r.jsx("div",{className:"filter-empty",children:"No labels found"}),Sc.map(i=>{const c=Ut.includes(i);return r.jsxs("button",{type:"button",className:`filter-option ${c?"active":""}`,onClick:()=>{qa(d=>d.includes(i)?d.filter(p=>p!==i):d.concat(i))},role:"option","aria-selected":c,children:[r.jsx("span",{children:i}),c&&r.jsx("span",{className:"filter-option-check",children:""})]},i)}),Ut.length>0&&r.jsx("button",{type:"button",className:"filter-option filter-option-clear",onClick:()=>qa([]),children:"Clear selection"})]})]}),r.jsxs("label",{className:`filter-checkbox filter-favorites ${br?"active":""}`,"data-tooltip":"Nur Favoriten","aria-label":"Nur Favoriten",children:[r.jsx("input",{type:"checkbox",checked:br,onChange:i=>Ng(i.target.checked)}),r.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),nv&&r.jsxs("div",{style:{color:"#f87171",marginBottom:"1rem"},children:["Error: ",nv]}),l==="kanban"?r.jsxs("div",{className:"kanban-board-wrap",children:[E&&gg&&r.jsxs("div",{className:`scope-drop-row${lg?" dragging":""}`,children:[r.jsxs("div",{className:"scope-drop-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"scope-drop-title",children:"Scope Window"}),r.jsx("div",{className:"scope-drop-subtitle",children:"Drag tasks here to add them to a scope window."})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>{u("scope"),Tt("list"),sn(null),Qn(null,"replace")},children:"Open"})]}),Ve.length===0?r.jsx("div",{className:"scope-drop-empty",children:"No scope windows yet."}):r.jsx("div",{className:"scope-drop-list",children:Ve.map(i=>r.jsxs("div",{className:`scope-drop-item${tk===i.id?" over":""}`,onDragOver:c=>Ok(c,i.id),onDragLeave:c=>Ak(c,i.id),onDrop:c=>Rk(c,i.id),children:[r.jsx("div",{className:"scope-drop-name",children:i.name}),r.jsxs("div",{className:"scope-drop-meta",children:[i.taskIds.length," tasks"]})]},i.id))})]}),r.jsx("div",{className:"kanban-board",children:Kv.map(i=>{const c=i.tasks.filter(Vv),d=Nc(E,ae,i.status),p=ng[d]||[],k=new Map(c.map(O=>[O.id,O])),x=p.map(O=>k.get(O)).filter(Boolean),I=c.filter(O=>!p.includes(O.id)),C=x.concat(I);return r.jsxs("div",{className:"kanban-column",onDragOver:ES,onDragLeave:TS,onDrop:O=>CS(O,i.status),children:[r.jsxs("div",{className:"column-header",children:[r.jsx("span",{children:bv(i.status)}),r.jsx("span",{children:C.length})]}),r.jsx("div",{className:"column-content",children:C.map(O=>{const Q=O.checklist.filter(Le=>Le.done).length,ie=O.checklist.length,we=O.linkedTaskIds.length,Ne=ie>0&&Q===ie,B=Gv.has(O.id),Y=O.sourceType?O.sourceType==="MANUAL":!0,U=uc(O),K=U==="overdue"?"Overdue":U==="due-soon"?"Due soon":null,q=O.dueDate?new Date(O.dueDate).toLocaleDateString():"",xe=U==="overdue"?" overdue":U==="due-soon"?" due-soon":"",pt=U==="overdue"?" task-card-overdue":U==="due-soon"?" task-card-due-soon":"",Ge={cursor:Y?"grab":"default",userSelect:"none",WebkitUserDrag:Y?"element":"auto",pointerEvents:"auto"};return r.jsx(Yc.Fragment,{children:r.jsx("div",{className:`task-card${Y?" task-card-draggable":""}${ls===O.id?" dragging":""}${pt}`,style:Ge,draggable:Y,onDragStart:Le=>Y?Mh(Le,O.id):Le.preventDefault(),onDragEnd:$h,onDragOver:Le=>IS(Le,i.status,O.id),onDragLeave:OS,onClick:()=>Ih(O),children:r.jsxs("div",{className:"task-card-content",children:[r.jsxs("div",{className:"task-card-topbar",children:[r.jsxs("div",{className:`task-card-due${xe}`,children:[r.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M5 4v16"}),r.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),r.jsx("span",{className:"task-card-due-date",children:q}),K&&r.jsx("span",{className:"task-card-due-badge",children:K})]}),r.jsx("span",{className:`badge badge-priority-${O.priority.toLowerCase()} tooltip-target`,"data-tooltip":`Priority: ${O.priority}`,children:O.priority})]}),r.jsxs("div",{className:"task-card-header",children:[r.jsxs("div",{className:"task-title-row",children:[B&&r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),O.title]}),r.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${O.isFavorite?" active":""}`,onClick:Le=>{Le.stopPropagation(),Ph(O)},title:O.isFavorite?"Unfavorite":"Favorite","aria-label":O.isFavorite?"Unfavorite task":"Favorite task",children:O.isFavorite?"":""})]}),O.description&&r.jsx("div",{className:"task-card-description",children:Rr(O.description)}),r.jsx("hr",{className:"card-divider"}),r.jsxs("div",{className:"task-card-footer",children:[r.jsx("div",{className:"task-card-kinds",children:O.kinds.map(Le=>r.jsx("span",{className:"badge task-kind-badge",children:Le},Le))}),r.jsxs("div",{className:"task-card-people",children:[O.ownerId&&ft(O.tenantId,[O.ownerId]),O.assignees.length>0&&ft(O.tenantId,O.assignees.filter(Le=>Le!==O.ownerId))]}),r.jsxs("div",{className:"task-card-icons",children:[ie>0&&r.jsxs("span",{className:Ne?"icon-badge checklist-complete":"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),r.jsx("path",{d:"M18 17l2 2 4-4"})]}),Q,"/",ie]}),O.comments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),O.comments.length]}),we>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),we]}),O.attachments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),O.attachments.length]})]})]})]})})},O.id)})})]},i.status)})})]}):l==="timeline"?_v(jh,"No tasks to show on timeline."):l==="table"?r.jsx("div",{className:"task-table-wrap",children:r.jsxs("table",{className:"task-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Title"}),r.jsx("th",{children:"People"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Art"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Due"}),r.jsx("th",{children:"Source"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:jh.map(i=>{const c=uc(i),d=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,p=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",k=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"";return r.jsxs(Yc.Fragment,{children:[r.jsxs("tr",{className:`task-table-row${k}`,onClick:()=>Ch(i),children:[r.jsx("td",{children:i.title}),r.jsx("td",{children:r.jsxs("div",{className:"task-card-people",children:[i.ownerId&&ft(i.tenantId,[i.ownerId]),i.assignees.length>0&&ft(i.tenantId,i.assignees.filter(x=>x!==i.ownerId))]})}),r.jsx("td",{children:i.status}),r.jsx("td",{children:i.kinds.length>0?i.kinds.join(", "):""}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-priority-${i.priority.toLowerCase()}`,children:i.priority})}),r.jsx("td",{children:r.jsxs("div",{className:`task-table-due${k}`,children:[r.jsx("span",{className:"task-table-due-date",children:p}),d&&r.jsx("span",{className:"task-table-due-badge",children:d})]})}),r.jsx("td",{children:i.sourceIndicator}),r.jsx("td",{children:r.jsxs("div",{className:"table-actions",children:[i.sourceType==="MANUAL"&&r.jsx("button",{className:"icon-action settings",onClick:x=>{x.stopPropagation(),Oh(i)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),r.jsx("button",{className:"icon-action",onClick:x=>{x.stopPropagation(),f(I=>I===i.id?null:i.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),h===i.id&&r.jsx("tr",{className:"task-table-details",children:r.jsx("td",{colSpan:8,children:r.jsxs("div",{className:"table-details-grid",children:[r.jsxs("div",{className:"table-details-span",children:[r.jsx("div",{className:"table-details-label",children:"Description"}),r.jsx("div",{className:"table-details-text",children:i.description?Rr(i.description):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Members"}),r.jsx("div",{className:"table-details-text",children:i.assignees.length>0?i.assignees.map(x=>Nn(i.tenantId,x)).join(", "):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Checklist"}),r.jsx("div",{className:"table-details-text",children:i.checklist.length>0?`${i.checklist.filter(x=>x.done).length}/${i.checklist.length} done`:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Linked tasks"}),r.jsx("div",{className:"table-details-text",children:i.linkedTaskIds.length>0?i.linkedTaskIds.length:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Attachments"}),r.jsx("div",{className:"table-details-text",children:i.attachments.length>0?i.attachments.length:""})]})]})})})]},i.id)})})]})}):r.jsx("div",{className:"empty-state",children:"No tasks to display."})]}),El&&r.jsx("div",{className:"toast",children:El}),mg&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Create scope window"}),r.jsx("div",{className:"panel-subtitle",children:"Bundle tasks into a focused sprint scope."})]}),r.jsx("button",{className:"panel-close",onClick:()=>Ml(!1),"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsx("div",{className:"scope-create-grid",children:r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",placeholder:"e.g. Sprint 12",value:Bn.name,onChange:i=>Oa(c=>({...c,name:i.target.value}))})]})}),r.jsxs("div",{className:"scope-create-grid",children:[r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:Bn.startDate,onChange:i=>Oa(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:Bn.endDate,onChange:i=>Oa(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{className:"scope-create-span",children:["Notes",r.jsx("textarea",{rows:2,placeholder:"Optional note for this scope window.",value:Bn.description,onChange:i=>Oa(c=>({...c,description:i.target.value}))})]})]})]})}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Ck,disabled:!Bn.name.trim()||!Us,children:"Create scope window"})})})})]})})]}),$d&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Task settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage this task list"})]}),r.jsx("button",{className:"panel-close",onClick:()=>Ha(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Tasks"}),r.jsx("div",{className:"member-name",children:(Ke==null?void 0:Ke.name)||ae||"Tasks"}),r.jsxs("div",{className:"member-meta",children:["Role: ",(ds==null?void 0:ds.role)||"Member"]})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this task list and all tasks, objectives, and key results."}),r.jsx("button",{className:"btn btn-delete btn-compact",onClick:Mk,children:"Delete task list"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Ha(!1),children:"Close"})})})})]})}),La&&de&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Scope window settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage this scope window"})]}),r.jsx("button",{className:"panel-close",onClick:()=>Pa(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Scope window"}),r.jsxs("div",{className:"scope-create-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:$t.name,onChange:i=>Ma(c=>({...c,name:i.target.value}))})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:$t.startDate,onChange:i=>Ma(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:$t.endDate,onChange:i=>Ma(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{className:"scope-create-span",children:["Notes",r.jsx("textarea",{rows:3,value:$t.description,onChange:i=>Ma(c=>({...c,description:i.target.value}))})]})]}),vh&&r.jsx("div",{className:"form-error",children:"End date must be after start date."}),r.jsxs("div",{className:"member-meta",children:["Huddle: ",vo||""]})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this scope window and remove its task links."}),r.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Ik(de.id),Pa(!1)},children:"Delete scope window"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-primary btn-compact",onClick:Qk,disabled:!$t.name.trim()||vh,children:"Save changes"})})})})]})}),Hd&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:Ka?"KR bearbeiten":"KR erstellen"}),r.jsx("div",{className:"panel-subtitle",children:Ka?"Update the metric and target.":"Define the metric and target."})]}),r.jsx("button",{className:"panel-close",onClick:Dh,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",placeholder:"e.g. Improve activation rate",value:Ae.title,onChange:i=>Kn(c=>({...c,title:i.target.value}))})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{placeholder:"What does this key result capture?",value:Ae.description,onChange:i=>Kn(c=>({...c,description:i.target.value})),rows:3})]}),r.jsxs("label",{children:["Start",r.jsx("input",{type:"number",placeholder:"0",value:Ae.startValue,onChange:i=>Kn(c=>({...c,startValue:i.target.value}))})]}),r.jsxs("label",{children:["Target",r.jsx("input",{type:"number",placeholder:"100",value:Ae.targetValue,onChange:i=>Kn(c=>({...c,targetValue:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:Ae.status,onChange:i=>Kn(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ON_TRACK",children:"On track"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"OFF_TRACK",children:"Off track"})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"kr-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="kr-assignees"?null:"kr-assignees"),children:Ae.assignees.length>0?Ae.assignees.map(i=>Nn(E,i)).join(", "):"Select members"}),Gn==="kr-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[Ht(E).map(i=>{var d,p;const c=Ae.assignees.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const k=c?Ae.assignees.filter(x=>x!==i.userId):Ae.assignees.concat(i.userId);Kn(x=>({...x,assignees:k}))},children:((d=i.user)==null?void 0:d.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Ht(E).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-primary btn-compact",onClick:Uk,children:Ka?"Save changes":"Create key result"})})})})]})}),Ud&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Objective settings"}),r.jsx("div",{className:"panel-subtitle",children:"Edit or delete this objective"})]}),r.jsx("button",{className:"panel-close",onClick:Lh,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:Qe.title,onChange:i=>dt(c=>({...c,title:i.target.value}))})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{value:Qe.description,onChange:i=>dt(c=>({...c,description:i.target.value})),rows:3})]}),r.jsxs("label",{children:["Owner",r.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner-settings",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="objective-owner-settings"?null:"objective-owner-settings"),children:Qe.ownerId?Nn(E,Qe.ownerId):"Unassigned"}),Gn==="objective-owner-settings"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${Qe.ownerId?"":" active"}`,onClick:()=>{dt(i=>({...i,ownerId:""})),rt(null)},children:"Unassigned"}),Ht(E).map(i=>{var c,d;return r.jsx("button",{type:"button",className:`member-select-option${Qe.ownerId===i.userId?" active":""}`,onClick:()=>{dt(p=>({...p,ownerId:i.userId})),rt(null)},children:((c=i.user)==null?void 0:c.name)||((d=i.user)==null?void 0:d.email)||i.userId},i.userId)})]})]})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:Qe.startDate,onChange:i=>dt(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:Qe.endDate,onChange:i=>dt(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:Qe.status,onChange:i=>dt(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Key results"}),(gy=X==null?void 0:X.keyResults)!=null&&gy.length?r.jsx("div",{className:"template-list",children:X.keyResults.map(i=>r.jsxs("div",{className:"template-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:i.title}),r.jsxs("div",{className:"member-meta",children:[i.currentValue," / ",i.targetValue]})]}),r.jsx("button",{className:"icon-action delete",onClick:()=>Pk(i.id,X.id),"data-tooltip":"KR lschen","aria-label":"KR lschen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M6 6l12 12"}),r.jsx("path",{d:"M18 6L6 18"})]})})]},i.id))}):r.jsx("div",{className:"empty-state",children:"No key results yet."})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this objective and its key results."}),yi&&r.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Lk(yi),Ul(!1),za(null)},children:"Delete objective"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>{dv(),Ul(!1),za(null)},children:"Save changes"})})})})]})}),Ta&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content team-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Huddle settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage huddles and members"})]}),r.jsx("button",{className:"panel-close",onClick:()=>jl(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Active huddle"}),r.jsxs("div",{className:"team-active-row",children:[r.jsx("div",{className:"team-name",children:vo||E}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>E&&yo(E),children:"Refresh members"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Create a new huddle"}),r.jsxs("form",{className:"inline-form",onSubmit:Bv,children:[r.jsx("input",{type:"text",placeholder:"Huddle name",value:gd,onChange:i=>vd(i.target.value),required:!0}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Invite to huddle"}),Ov?r.jsx("div",{className:"empty-state",children:"Private huddles are personal and cannot have members."}):r.jsxs("form",{className:"inline-form",onSubmit:oS,children:[r.jsx("input",{type:"email",placeholder:"email@company.com",value:Vm,onChange:i=>Wm(i.target.value),required:!0}),r.jsxs("select",{value:Km,onChange:i=>Fj(i.target.value),children:[r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Invite"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Huddle members"}),r.jsxs("div",{className:"member-list",children:[Gm.map(i=>{var d,p,k;const c=i.userId===($==null?void 0:$.id);return r.jsxs("div",{className:"member-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:((d=i.user)==null?void 0:d.name)||((p=i.user)==null?void 0:p.email)}),r.jsx("div",{className:"member-meta",children:(k=i.user)==null?void 0:k.email})]}),r.jsxs("div",{className:"member-actions",children:[r.jsxs("select",{value:i.role,onChange:x=>gS(i.id,x.target.value),disabled:c,children:[r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>vS(i.id),disabled:c,children:"Remove"})]})]},i.id)}),Gm.length===0&&r.jsx("div",{className:"empty-state",children:"No members yet."})]})]}),kl&&r.jsx("div",{className:"auth-error",children:kl})]})]})}),yd&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content team-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Huddle invites"}),r.jsx("div",{className:"panel-subtitle",children:"Accept or decline invitations"})]}),r.jsx("button",{className:"panel-close",onClick:()=>Sl(!1),"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:Ea.length>0?r.jsx("div",{className:"invite-list",children:Ea.map(i=>{var c,d,p;return r.jsxs("div",{className:"invite-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId}),r.jsxs("div",{className:"member-meta",children:["Invited by ",((d=i.invitedBy)==null?void 0:d.name)||((p=i.invitedBy)==null?void 0:p.email)||i.invitedByUserId,"  ",new Date(i.createdAt).toLocaleString()]})]}),r.jsxs("div",{className:"invite-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Hv(i,"accept"),children:"Accept"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Hv(i,"decline"),children:"Decline"})]})]},i.id)})}):r.jsx("div",{className:"empty-state",children:"No pending invites."})})]})}),Xa&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"modal-header-row",children:[r.jsx("h2",{style:{marginBottom:0},children:"Create New Task"}),r.jsx("button",{className:"panel-close",onClick:Ah,"aria-label":"Close",children:""})]}),ye&&r.jsxs("div",{className:"huddle-inline",children:[r.jsx("span",{children:"Creating in"}),r.jsxs("span",{className:"huddle-chip",style:{background:Sn(ye,(yy=(vy=Se.find(i=>i.tenantId===ye))==null?void 0:vy.tenant)==null?void 0:yy.name).soft,borderColor:Sn(ye,(xy=(wy=Se.find(i=>i.tenantId===ye))==null?void 0:wy.tenant)==null?void 0:xy.name).border,color:Sn(ye,(jy=(by=Se.find(i=>i.tenantId===ye))==null?void 0:by.tenant)==null?void 0:jy.name).text},children:[r.jsx("span",{className:"huddle-dot",style:{background:Sn(ye,(Sy=(ky=Se.find(i=>i.tenantId===ye))==null?void 0:ky.tenant)==null?void 0:Sy.name).solid}}),ht((_y=(Ny=Se.find(i=>i.tenantId===ye))==null?void 0:Ny.tenant)==null?void 0:_y.name)]})]})]}),r.jsxs("form",{onSubmit:wS,children:[r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title"}),r.jsx("input",{type:"text",required:!0,value:rn.title,onChange:i=>Ei({...rn,title:i.target.value}),placeholder:"What needs to be done?"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Huddle"}),r.jsx("select",{value:ye||"",onChange:i=>Jg(i.target.value),children:Se.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Tasks"}),r.jsx("select",{value:no||"",onChange:i=>so(i.target.value),children:po(ye).map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))})]}),!go(ye)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Owner"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="new-task-owner"?null:"new-task-owner"),children:jr?Nn(ye,jr):"Unassigned"}),Gn==="new-task-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${jr?"":" active"}`,onClick:()=>{Zl(null),rt(null)},children:"Unassigned"}),Ht(ye).map(i=>{var c,d;return r.jsx("button",{type:"button",className:`member-select-option${jr===i.userId?" active":""}`,onClick:()=>{Zl(i.userId),rt(null)},children:((c=i.user)==null?void 0:c.name)||((d=i.user)==null?void 0:d.email)||i.userId},i.userId)})]})]})]}),!go(ye)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="new-task-assignees"?null:"new-task-assignees"),children:Rs.length>0?Rs.map(i=>Nn(ye,i)).join(", "):"Select members"}),Gn==="new-task-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[Ht(ye).map(i=>{var d,p;const c=Rs.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const k=c?Rs.filter(x=>x!==i.userId):Rs.concat(i.userId);Qd(k)},children:((d=i.user)==null?void 0:d.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Ht(ye).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsxs("div",{className:"rich-editor",children:[r.jsxs("div",{className:"rich-toolbar",children:[r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("bold"),children:"B"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("italic"),children:"I"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("underline"),children:"U"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("insertUnorderedList"),children:" List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("insertOrderedList"),children:"1. List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("createLink"),children:"Link"})]}),r.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:sh,onInput:i=>Ei({...rn,description:i.currentTarget.innerHTML}),onPaste:$v,"data-placeholder":"Optional details..."})]})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Art"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"text",value:qg,onChange:i=>to(i.target.value),onKeyDown:i=>Yv(i,"new"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Qv,children:"Add"})]}),Za.length>0&&r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Za.map(i=>r.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>Zv(i,eo),children:""})]},i))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Priority"}),r.jsxs("select",{value:rn.priority,onChange:i=>Ei({...rn,priority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Deadline"}),r.jsx("input",{type:"date",value:rn.dueDate,onChange:i=>Ei({...rn,dueDate:i.target.value})})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Files"}),r.jsx("input",{type:"file",multiple:!0,onChange:i=>jS(i.target.files)}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:Gg.map(i=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>kS(i.id),children:"Remove"})]},i.id))})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Checklist"}),r.jsxs("div",{className:"checklist-input-row",children:[r.jsx("input",{className:"checklist-input",type:"text",value:nh,onChange:i=>Tr(i.target.value),placeholder:"Add checklist item"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:ey,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"checklist-list",children:_r.length>0?_r.map(i=>r.jsxs("label",{className:"checklist-item",children:[r.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>ty(i.id)}),r.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>ny(i.id),children:"Remove"})]},i.id)):r.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),r.jsxs("div",{className:"link-row",children:[r.jsxs("select",{className:"link-select",value:uo,onChange:i=>Cr(i.target.value),children:[r.jsx("option",{value:"",children:"Select task to link"}),pe.filter(i=>i.id!==ao&&!Jn.includes(i.id)).map(i=>r.jsx("option",{value:i.id,children:i.title},i.id))]}),r.jsx("button",{type:"button",className:"icon-action create",onClick:sy,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"link-list",children:Jn.length>0?Jn.map(i=>{var c;return r.jsxs("div",{className:"link-chip",children:[r.jsx("span",{className:"link-title",children:((c=mc.get(i))==null?void 0:c.title)??i}),r.jsx("button",{type:"button",className:"link-remove",onClick:()=>ry(i),children:""})]},i)}):r.jsx("div",{className:"link-empty",children:"No linked tasks."})})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Speichern"})})})]})]})}),P&&r.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:r.jsxs("div",{className:"modal-content settings-modal",onClick:i=>i.stopPropagation(),style:{maxWidth:"560px",padding:0},children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Capture inbox item"}),r.jsx("div",{className:"panel-subtitle",children:"Add incoming work before sorting."})]}),r.jsx("button",{className:"panel-close",onClick:()=>H(!1),"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:r.jsxs("div",{className:"panel-section",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:Te.title,onChange:i=>vn(c=>({...c,title:i.target.value})),placeholder:"New incoming item"})]}),r.jsxs("label",{children:[t("inbox.field.description","Beschreibung"),r.jsx("textarea",{rows:2,value:Te.description,placeholder:t("inbox.field.descriptionPlaceholder","Kurz beschreiben, worum es geht"),onChange:i=>vn(c=>({...c,description:i.target.value}))})]}),r.jsxs("div",{className:"inbox-dropdown-row",children:[r.jsxs("label",{children:[t("inbox.field.source","Source"),r.jsxs("div",{className:"filter-dropdown",ref:Na,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{re(i=>!i),mn(!1),os(!1)},"aria-expanded":ue,children:Te.source?s(Te.source):t("inbox.field.selectSource","Select source")}),ue&&r.jsx("div",{className:"filter-options",role:"listbox",children:Ax.map(i=>r.jsx("button",{type:"button",className:`filter-option ${Te.source===i.value?"active":""}`,onClick:()=>{vn(c=>({...c,source:i.value})),re(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]}),r.jsxs("label",{children:[t("inbox.field.action","Suggested action"),r.jsxs("div",{className:"filter-dropdown",ref:dr,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{mn(i=>!i),re(!1),os(!1)},"aria-expanded":ut,children:Te.suggestedAction?a(Te.suggestedAction):t("inbox.field.selectAction","Select action")}),ut&&r.jsx("div",{className:"filter-options",role:"listbox",children:Rx.map(i=>r.jsx("button",{type:"button",className:`filter-option ${Te.suggestedAction===i.value?"active":""}`,onClick:()=>{vn(c=>({...c,suggestedAction:i.value})),mn(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]}),r.jsxs("label",{children:[t("task.field.priority","Priority"),r.jsxs("div",{className:"filter-dropdown",ref:F,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{mn(!1),re(!1),os(i=>!i)},"aria-expanded":gn,children:Te.priority?o(Te.priority):t("task.field.selectPriority","Priority whlen")}),gn&&r.jsx("div",{className:"filter-options",role:"listbox",children:Dx.map(i=>r.jsx("button",{type:"button",className:`filter-option ${Te.priority===i.value?"active":""}`,onClick:()=>{vn(c=>({...c,priority:i.value})),os(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]})]})]})}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Speichern","aria-label":"Speichern",onClick:()=>{if(!Te.title.trim())return;const i=new Date().toISOString(),c=mo(E,bt||void 0);ze(d=>[{id:`inbox-${i}-${Math.random().toString(36).slice(2,7)}`,title:Te.title.trim(),source:Te.source||void 0,suggestedAction:Te.suggestedAction||void 0,description:Te.description.trim()||void 0,priority:Te.priority||"MEDIUM",createdAt:i,kind:"Incoming",creatorLabel:c.label,creatorAvatarUrl:c.avatarUrl,creatorId:bt||void 0,tenantId:E||null},...d]),vn({title:"",source:"",suggestedAction:"",description:"",priority:"MEDIUM"}),H(!1)},children:r.jsx("span",{className:"btn-save-icon",children:se})})})})})]})}),ro&&W&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"detail-header-top",children:[r.jsxs("div",{className:"detail-meta",children:["Created ",new Date(W.createdAt).toLocaleDateString()]}),r.jsxs("div",{className:"detail-actions",children:[r.jsx("button",{className:"panel-close",onClick:_c,"aria-label":"Close",children:""}),r.jsx("button",{className:W.isFavorite?"icon-btn favorite-icon active":"icon-btn favorite-icon",onClick:()=>Ph(W),title:W.isFavorite?"Unfavorite":"Favorite","aria-label":W.isFavorite?"Unfavorite task":"Favorite task",children:W.isFavorite?"":""}),W.sourceType==="MANUAL"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"icon-btn",onClick:()=>xS(W),title:W.status===V.ARCHIVED?"Restore":"Archive","aria-label":W.status===V.ARCHIVED?"Restore task":"Archive task",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M3 7h18"}),r.jsx("path",{d:"M5 7l1 13h12l1-13"}),r.jsx("path",{d:"M9 11h6"})]})}),r.jsx("button",{className:"icon-btn",onClick:()=>{Ds(!1),Oh(W)},title:"Edit","aria-label":"Edit task",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})]}),r.jsx("div",{className:"detail-title",children:W.title}),r.jsxs("div",{className:"detail-chips",children:[W.kinds.map(i=>r.jsx("span",{className:"chip chip-muted",children:i},i)),r.jsx("span",{className:`chip chip-priority priority-${W.priority.toLowerCase()}`,children:W.priority})]})]}),r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Overview"}),r.jsxs("div",{className:"detail-rows",children:[r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M5 12h14"}),r.jsx("path",{d:"M12 5l7 7-7 7"})]}),"Status"]}),r.jsx("span",{className:"detail-value",children:W.status})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),r.jsx("path",{d:"M8 3v4M16 3v4M3 11h18"})]}),"Due date"]}),r.jsx("span",{className:"detail-value",children:W.dueDate?new Date(W.dueDate).toLocaleDateString():""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"}),r.jsx("circle",{cx:"12",cy:"8",r:"4"})]}),"Owner"]}),r.jsx("span",{className:"detail-value",children:W.ownerId?ft(W.tenantId,[W.ownerId],"avatar-stack-lg"):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("circle",{cx:"9",cy:"8",r:"3"}),r.jsx("circle",{cx:"17",cy:"9",r:"2.5"}),r.jsx("path",{d:"M3 21a6 6 0 0 1 12 0"}),r.jsx("path",{d:"M14.5 21a4.5 4.5 0 0 1 7.5 0"})]}),"Assignees"]}),r.jsx("span",{className:"detail-value",children:W.assignees.length>0?ft(W.tenantId,W.assignees,"avatar-stack-lg"):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:r.jsx("path",{d:"M20 12l-8 8-8-8 8-8 8 8z"})}),"Labels"]}),r.jsx("span",{className:"detail-value detail-value-wrap",children:W.kinds.length>0?W.kinds.map(i=>r.jsx("span",{className:"chip chip-muted",children:i},i)):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),"Linked in"]}),r.jsx("span",{className:"detail-value",children:gv.length>0?gv.map(i=>i.title).join(", "):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M4 7h16"}),r.jsx("path",{d:"M4 12h10"}),r.jsx("path",{d:"M4 17h13"})]}),"All tasks"]}),r.jsx("span",{className:"detail-value",children:r.jsxs("span",{className:"detail-toggle-row",children:[r.jsx("button",{type:"button",className:`detail-toggle ${W.excludeFromAll?"":"active"}`,onClick:()=>ps({excludeFromAll:!W.excludeFromAll}),disabled:W.sourceType!=="MANUAL","aria-label":"Show in All tasks",children:r.jsx("span",{className:"detail-toggle-knob"})}),r.jsx("span",{className:"detail-toggle-text",children:W.excludeFromAll?"Hidden":"Shown"})]})})]})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Description"}),r.jsx("div",{className:"detail-description-box",children:r.jsx("div",{className:"detail-description rich-display",dir:"ltr",dangerouslySetInnerHTML:{__html:W.description||"No description provided."}})})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),r.jsxs("div",{className:"link-row",children:[r.jsxs("select",{className:"link-select",value:uo,onChange:i=>Cr(i.target.value),children:[r.jsx("option",{value:"",children:"Select task to link"}),pe.filter(i=>i.id!==W.id&&!Jn.includes(i.id)).map(i=>r.jsx("option",{value:i.id,children:i.title},i.id))]}),r.jsx("button",{type:"button",className:"icon-action create",onClick:sy,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"link-list",children:Jn.length>0?Jn.map(i=>{var c;return r.jsxs("div",{className:"link-chip",children:[r.jsx("span",{className:"link-title",children:((c=mc.get(i))==null?void 0:c.title)??i}),r.jsx("button",{type:"button",className:"link-remove",onClick:()=>ry(i),children:""})]},i)}):r.jsx("div",{className:"link-empty",children:"No linked tasks."})})]}),r.jsxs("div",{className:"checklist-panel",children:[r.jsx("div",{className:"section-title",children:"Checklist"}),r.jsxs("div",{className:"checklist-input-row",children:[r.jsx("input",{className:"checklist-input",type:"text",value:nh,onChange:i=>Tr(i.target.value),placeholder:"Add checklist item"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:ey,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"checklist-list",children:_r.length>0?_r.map(i=>r.jsxs("label",{className:"checklist-item",children:[r.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>ty(i.id)}),r.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>ny(i.id),children:"Remove"})]},i.id)):r.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),r.jsxs("div",{className:"detail-tabs",style:{"--active-index":g==="comments"?0:g==="attachments"?1:2},children:[r.jsx("button",{className:`detail-tab ${g==="comments"?"active":""}`,onClick:()=>y("comments"),children:"Comments"}),r.jsx("button",{className:`detail-tab ${g==="attachments"?"active":""}`,onClick:()=>y("attachments"),children:"Attachments"}),r.jsx("button",{className:`detail-tab ${g==="activity"?"active":""}`,onClick:()=>y("activity"),children:"Activity"})]}),g==="comments"&&r.jsxs("div",{className:"comments-panel",children:[r.jsx("div",{className:"section-title",children:"Comments"}),r.jsxs("div",{className:"comment-input-row",children:[r.jsx("div",{className:"comment-avatar",children:Wk}),r.jsx("input",{className:"comment-input",type:"text",value:ev,onChange:i=>th(i.target.value),placeholder:"Write a comment"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:SS,"data-tooltip":"Kommentar erstellen","aria-label":"Kommentar erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"comment-list",children:W.comments&&W.comments.length>0?W.comments.map(i=>{const c=mo(W.tenantId,i.createdBy);return r.jsxs("div",{className:"comment-card",children:[c.avatarUrl?r.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):r.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),r.jsxs("div",{className:"comment-body",children:[r.jsxs("div",{className:"comment-meta",children:[r.jsx("span",{className:"comment-author",children:c.label}),r.jsx("span",{className:"comment-time",children:new Date(i.createdAt).toLocaleString()})]}),r.jsx("div",{className:"comment-text",children:i.text})]})]},i.id)}):r.jsx("div",{className:"comment-empty",children:"No comments yet."})})]}),g==="attachments"&&r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Attachments"}),r.jsxs("div",{className:"link-row",children:[r.jsx("input",{className:"link-select",type:"file",multiple:!0,onChange:i=>iy(i.target.files)}),r.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:async()=>{if(!(!W||nc.length===0))try{await ps({attachmentsToAdd:nc}),Ti([])}catch(i){alert(i.message)}},children:"Upload"})]}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:W.attachments&&W.attachments.length>0?W.attachments.map(i=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>ps({attachmentsToRemove:[i.id]}),children:"Remove"})]})]}),i.type.startsWith("image/")&&r.jsx("img",{src:i.dataUrl,alt:i.name,style:{width:"160px",height:"110px",objectFit:"cover",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},className:"attachment-thumb",onClick:()=>oc({src:i.dataUrl,name:i.name})})]},i.id)):r.jsx("div",{style:{color:"var(--text-secondary)"},children:"No attachments."})})]}),g==="activity"&&r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Activity"}),r.jsx("div",{className:"activity-list",children:W.activityLog&&W.activityLog.length>0?[...W.activityLog].sort((i,c)=>new Date(c.timestamp).getTime()-new Date(i.timestamp).getTime()).map(i=>{const c=mo(W.tenantId,i.actorId);return r.jsxs("div",{className:"activity-item",children:[c.avatarUrl?r.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):r.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),r.jsxs("div",{className:"activity-body",children:[r.jsx("div",{className:"activity-text",children:i.message}),r.jsxs("div",{className:"activity-meta",children:[c.label,"  ",new Date(i.timestamp).toLocaleString()]})]})]},i.id)}):r.jsx("div",{className:"activity-empty",children:"No activity yet."})})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[W.sourceType==="MANUAL"&&r.jsx("button",{className:"btn btn-secondary btn-delete",onClick:()=>bS(W.id),children:"Lschen"}),r.jsx("button",{className:"btn btn-secondary",onClick:_c,children:"Speichern"})]})})]})}),Ci&&r.jsx("div",{className:"image-overlay",onClick:()=>oc(null),children:r.jsxs("div",{className:"image-overlay-content",onClick:i=>i.stopPropagation(),children:[r.jsx("button",{className:"image-overlay-close",onClick:()=>oc(null),children:""}),r.jsx("img",{src:Ci.src,alt:Ci.name}),r.jsx("div",{className:"image-overlay-caption",children:Ci.name})]})}),io&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"modal-header-row",children:[r.jsx("h2",{style:{marginBottom:0},children:"Edit Task"}),r.jsx("button",{className:"panel-close",onClick:Rh,"aria-label":"Close",children:""})]}),me&&r.jsxs("div",{className:"huddle-inline",children:[r.jsx("span",{children:"Editing in"}),r.jsxs("span",{className:"huddle-chip",style:{background:Sn(me,(Ty=(Ey=Se.find(i=>i.tenantId===me))==null?void 0:Ey.tenant)==null?void 0:Ty.name).soft,borderColor:Sn(me,(Iy=(Cy=Se.find(i=>i.tenantId===me))==null?void 0:Cy.tenant)==null?void 0:Iy.name).border,color:Sn(me,(Ay=(Oy=Se.find(i=>i.tenantId===me))==null?void 0:Oy.tenant)==null?void 0:Ay.name).text},children:[r.jsx("span",{className:"huddle-dot",style:{background:Sn(me,(Dy=(Ry=Se.find(i=>i.tenantId===me))==null?void 0:Ry.tenant)==null?void 0:Dy.name).solid}}),ht((Py=(Ly=Se.find(i=>i.tenantId===me))==null?void 0:Ly.tenant)==null?void 0:Py.name)]})]})]}),r.jsxs("form",{onSubmit:_S,children:[r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title"}),r.jsx("input",{type:"text",required:!0,value:Bt.title,onChange:i=>oo({...Bt,title:i.target.value}),placeholder:"What needs to be done?"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Huddle"}),r.jsx("select",{value:me||"",onChange:i=>Qg(i.target.value),children:Se.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:ht((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Tasks"}),r.jsx("select",{value:Sr||"",onChange:i=>ec(i.target.value),children:po(me||E).map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))})]}),!go(me)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Owner"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="edit-task-owner"?null:"edit-task-owner"),children:Nr?Nn(me,Nr):"Unassigned"}),Gn==="edit-task-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${Nr?"":" active"}`,onClick:()=>{tc(null),rt(null)},children:"Unassigned"}),Ht(me).map(i=>{var c,d;return r.jsx("button",{type:"button",className:`member-select-option${Nr===i.userId?" active":""}`,onClick:()=>{tc(i.userId),rt(null)},children:((c=i.user)==null?void 0:c.name)||((d=i.user)==null?void 0:d.email)||i.userId},i.userId)})]})]})]}),!go(me)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>rt(i=>i==="edit-task-assignees"?null:"edit-task-assignees"),children:Ls.length>0?Ls.map(i=>Nn(me,i)).join(", "):"Select members"}),Gn==="edit-task-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[Ht(me).map(i=>{var d,p;const c=Ls.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const k=c?Ls.filter(x=>x!==i.userId):Ls.concat(i.userId);eh(k)},children:((d=i.user)==null?void 0:d.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Ht(me).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsxs("div",{className:"rich-editor",children:[r.jsxs("div",{className:"rich-toolbar",children:[r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("bold"),children:"B"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("italic"),children:"I"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("underline"),children:"U"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("insertUnorderedList"),children:" List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("insertOrderedList"),children:"1. List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>on("createLink"),children:"Link"})]}),r.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:rh,onInput:i=>oo({...Bt,description:i.currentTarget.innerHTML}),onPaste:$v,"data-placeholder":"Optional details..."})]})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Art"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"text",value:Zg,onChange:i=>ac(i.target.value),onKeyDown:i=>Yv(i,"edit"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Xv,children:"Add"})]}),co.length>0&&r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:co.map(i=>r.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>Zv(i,ic),children:""})]},i))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Priority"}),r.jsxs("select",{value:Bt.priority,onChange:i=>oo({...Bt,priority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Deadline"}),r.jsx("input",{type:"date",value:Bt.dueDate,onChange:i=>oo({...Bt,dueDate:i.target.value})})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Files"}),r.jsx("input",{type:"file",multiple:!0,onChange:i=>iy(i.target.files)}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[...vk,...nc].map(i=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>NS(i.id),children:"Remove"})]})]},i.id))})]})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})})})]})]})})]}):r.jsx("div",{style:{padding:"2rem"},children:"SQOPUS wird geladen ..."}):r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Kanbax"}),r.jsx("p",{children:"Sign in to manage your tasks, huddles, and work."})]}),r.jsxs("div",{className:"auth-tabs",children:[r.jsx("button",{className:Es==="login"?"auth-tab active":"auth-tab",onClick:()=>wd("login"),children:"Login"}),r.jsx("button",{className:Es==="signup"?"auth-tab active":"auth-tab",onClick:()=>wd("signup"),children:"Sign up"}),r.jsx("button",{className:Es==="magic"?"auth-tab active":"auth-tab",onClick:()=>wd("magic"),children:"Magic link"})]}),r.jsxs("form",{className:"auth-form",onSubmit:aS,children:[r.jsxs("label",{children:["Email",r.jsx("input",{type:"email",value:Nl,onChange:i=>Jj(i.target.value),placeholder:"you@company.com",required:!0})]}),Es!=="magic"&&r.jsxs("label",{children:["Password",r.jsx("input",{type:"password",value:xd,onChange:i=>Qj(i.target.value),placeholder:"",required:!0})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",disabled:Xj,children:Es==="signup"?"Create account":Es==="magic"?"Send magic link":"Sign in"}),Qm&&r.jsx("div",{className:"auth-message",children:Qm}),Xm&&r.jsx("div",{className:"auth-error",children:Xm})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or"})}),r.jsxs("div",{className:"auth-oauth",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>Uv("google"),children:"Continue with Google"}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>Uv("github"),children:"Continue with GitHub"})]})]})})},wI={de:{"inbox.title":"Inbox","inbox.incoming":"Eingang","inbox.empty.title":"Inbox Zero","inbox.empty.text":"Keine ungeplanten Aufgaben gerade.","inbox.intro.line1":"Incoming  Entscheiden  Einordnen.","inbox.intro.line2":"Keine Task-Management-Hlle.","inbox.tooltip.info":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.action.addScope":"Zum Scope hinzufgen","inbox.action.later":"Spter","inbox.action.archive":"Archivieren","inbox.action.addScopeTooltip":"Zum Scope hinzufgen","inbox.action.laterTooltip":"Spter bearbeiten","inbox.action.archiveTooltip":"Archivieren","inbox.action.backTooltip":"Zurck zum Eingang","inbox.action.backToInbox":"Zum Eingang","inbox.action.moveToInbox":"Zum Eingang","inbox.action.moveToInboxTooltip":"Zurck in den Eingang","inbox.meta.owner":"Owner","inbox.action.moved":"In Scope verschoben ","inbox.view.incoming":"Eingang","inbox.view.later":"Spter","inbox.view.review":"Bearbeitet","inbox.view.archived":"Archiviert","inbox.tooltip.incoming":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.tooltip.worked":"Wurde bereist verarbeitet","inbox.tooltip.review":"Zur spteren berprfung","inbox.tooltip.archived":"Archivierte Items","inbox.capture.title":"Inbox Item erfassen","inbox.capture.subtitle":"Fge eingehende Arbeit hinzu, bevor du sortierst.","inbox.field.title":"Titel","inbox.field.source":"Quelle","inbox.field.action":"Vorgeschlagene Aktion","inbox.field.selectSource":"Quelle whlen","inbox.field.selectAction":"Aktion whlen","inbox.field.description":"Beschreibung","inbox.field.descriptionPlaceholder":"Kurz beschreiben, worum es geht","inbox.tooltip.create":"Inbox Item erstellen","inbox.tooltip.save":"Speichern","inbox.source.email":"Email","inbox.source.meeting":"Meeting-Notiz","inbox.source.request":"Request","inbox.source.idea":"Idee","inbox.source.external":"Externe Anfrage","inbox.action.thisWeek":"Diese Woche","inbox.action.nextWeek":"Nchste Woche","priority.high":"Hoch","priority.medium":"Mittel","priority.low":"Niedrig","priority.critical":"Kritisch","task.field.priority":"Prioritt"}},Lp="de",xI=m.createContext({locale:Lp,setLocale:()=>null}),bI=({children:e})=>{const[t,n]=m.useState(Lp),s=m.useMemo(()=>wI[t],[t]);return r.jsx(xI.Provider,{value:{locale:t,setLocale:n},children:r.jsx(kp,{locale:t,messages:s,defaultLocale:Lp,children:e})})};_f.createRoot(document.getElementById("root")).render(r.jsx(Yc.StrictMode,{children:r.jsx(bI,{children:r.jsx(yI,{})})}));
