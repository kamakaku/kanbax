var Z_=Object.defineProperty;var eE=(e,t,n)=>t in e?Z_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pe=(e,t,n)=>eE(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function tE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R0={exports:{}},Gd={},L0={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ac=Symbol.for("react.element"),nE=Symbol.for("react.portal"),sE=Symbol.for("react.fragment"),rE=Symbol.for("react.strict_mode"),iE=Symbol.for("react.profiler"),aE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),lE=Symbol.for("react.forward_ref"),cE=Symbol.for("react.suspense"),uE=Symbol.for("react.memo"),dE=Symbol.for("react.lazy"),Mw=Symbol.iterator;function hE(e){return e===null||typeof e!="object"?null:(e=Mw&&e[Mw]||e["@@iterator"],typeof e=="function"?e:null)}var P0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M0=Object.assign,$0={};function Za(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||P0}Za.prototype.isReactComponent={};Za.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Za.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B0(){}B0.prototype=Za.prototype;function fg(e,t,n){this.props=e,this.context=t,this.refs=$0,this.updater=n||P0}var pg=fg.prototype=new B0;pg.constructor=fg;M0(pg,Za.prototype);pg.isPureReactComponent=!0;var $w=Array.isArray,U0=Object.prototype.hasOwnProperty,mg={current:null},F0={key:!0,ref:!0,__self:!0,__source:!0};function H0(e,t,n){var s,a={},o=null,l=null;if(t!=null)for(s in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)U0.call(t,s)&&!F0.hasOwnProperty(s)&&(a[s]=t[s]);var d=arguments.length-2;if(d===1)a.children=n;else if(1<d){for(var h=Array(d),p=0;p<d;p++)h[p]=arguments[p+2];a.children=h}if(e&&e.defaultProps)for(s in d=e.defaultProps,d)a[s]===void 0&&(a[s]=d[s]);return{$$typeof:ac,type:e,key:o,ref:l,props:a,_owner:mg.current}}function fE(e,t){return{$$typeof:ac,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gg(e){return typeof e=="object"&&e!==null&&e.$$typeof===ac}function pE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bw=/\/+/g;function vp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pE(""+e.key):t.toString(36)}function rd(e,t,n,s,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ac:case nE:l=!0}}if(l)return l=e,a=a(l),e=s===""?"."+vp(l,0):s,$w(a)?(n="",e!=null&&(n=e.replace(Bw,"$&/")+"/"),rd(a,t,n,"",function(p){return p})):a!=null&&(gg(a)&&(a=fE(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Bw,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=s===""?".":s+":",$w(e))for(var d=0;d<e.length;d++){o=e[d];var h=s+vp(o,d);l+=rd(o,t,n,h,a)}else if(h=hE(e),typeof h=="function")for(e=h.call(e),d=0;!(o=e.next()).done;)o=o.value,h=s+vp(o,d++),l+=rd(o,t,n,h,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ru(e,t,n){if(e==null)return e;var s=[],a=0;return rd(e,s,"","",function(o){return t.call(n,o,a++)}),s}function mE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},id={transition:null},gE={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:id,ReactCurrentOwner:mg};function z0(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Ru,forEach:function(e,t,n){Ru(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ru(e,function(){t++}),t},toArray:function(e){return Ru(e,function(t){return t})||[]},only:function(e){if(!gg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Za;ue.Fragment=sE;ue.Profiler=iE;ue.PureComponent=fg;ue.StrictMode=rE;ue.Suspense=cE;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gE;ue.act=z0;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=M0({},e.props),a=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=mg.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(h in t)U0.call(t,h)&&!F0.hasOwnProperty(h)&&(s[h]=t[h]===void 0&&d!==void 0?d[h]:t[h])}var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){d=Array(h);for(var p=0;p<h;p++)d[p]=arguments[p+2];s.children=d}return{$$typeof:ac,type:e.type,key:a,ref:o,props:s,_owner:l}};ue.createContext=function(e){return e={$$typeof:oE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:aE,_context:e},e.Consumer=e};ue.createElement=H0;ue.createFactory=function(e){var t=H0.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:lE,render:e}};ue.isValidElement=gg;ue.lazy=function(e){return{$$typeof:dE,_payload:{_status:-1,_result:e},_init:mE}};ue.memo=function(e,t){return{$$typeof:uE,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=id.transition;id.transition={};try{e()}finally{id.transition=t}};ue.unstable_act=z0;ue.useCallback=function(e,t){return Rt.current.useCallback(e,t)};ue.useContext=function(e){return Rt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return Rt.current.useEffect(e,t)};ue.useId=function(){return Rt.current.useId()};ue.useImperativeHandle=function(e,t,n){return Rt.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return Rt.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return Rt.current.useReducer(e,t,n)};ue.useRef=function(e){return Rt.current.useRef(e)};ue.useState=function(e){return Rt.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return Rt.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return Rt.current.useTransition()};ue.version="18.3.1";L0.exports=ue;var m=L0.exports;const ad=tE(m);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=m,yE=Symbol.for("react.element"),xE=Symbol.for("react.fragment"),wE=Object.prototype.hasOwnProperty,bE=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jE={key:!0,ref:!0,__self:!0,__source:!0};function V0(e,t,n){var s,a={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(s in t)wE.call(t,s)&&!jE.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:yE,type:e,key:o,ref:l,props:a,_owner:bE.current}}Gd.Fragment=xE;Gd.jsx=V0;Gd.jsxs=V0;R0.exports=Gd;var r=R0.exports,nm={},W0={exports:{}},un={},K0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,ae){var Y=K.length;K.push(ae);e:for(;0<Y;){var Re=Y-1>>>1,qe=K[Re];if(0<a(qe,ae))K[Re]=ae,K[Y]=qe,Y=Re;else break e}}function n(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var ae=K[0],Y=K.pop();if(Y!==ae){K[0]=Y;e:for(var Re=0,qe=K.length,Hs=qe>>>1;Re<Hs;){var On=2*(Re+1)-1,Ar=K[On],Kt=On+1,zs=K[Kt];if(0>a(Ar,Y))Kt<qe&&0>a(zs,Ar)?(K[Re]=zs,K[Kt]=Y,Re=Kt):(K[Re]=Ar,K[On]=Y,Re=On);else if(Kt<qe&&0>a(zs,Y))K[Re]=zs,K[Kt]=Y,Re=Kt;else break e}}return ae}function a(K,ae){var Y=K.sortIndex-ae.sortIndex;return Y!==0?Y:K.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var h=[],p=[],v=1,w=null,x=3,k=!1,E=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(K){for(var ae=n(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=K)s(p),ae.sortIndex=ae.expirationTime,t(h,ae);else break;ae=n(p)}}function A(K){if(T=!1,N(K),!E)if(n(h)!==null)E=!0,Ir(H);else{var ae=n(p);ae!==null&&Or(A,ae.startTime-K)}}function H(K,ae){E=!1,T&&(T=!1,S(W),W=-1),k=!0;var Y=x;try{for(N(ae),w=n(h);w!==null&&(!(w.expirationTime>ae)||K&&!vt());){var Re=w.callback;if(typeof Re=="function"){w.callback=null,x=w.priorityLevel;var qe=Re(w.expirationTime<=ae);ae=e.unstable_now(),typeof qe=="function"?w.callback=qe:w===n(h)&&s(h),N(ae)}else s(h);w=n(h)}if(w!==null)var Hs=!0;else{var On=n(p);On!==null&&Or(A,On.startTime-ae),Hs=!1}return Hs}finally{w=null,x=Y,k=!1}}var B=!1,F=null,W=-1,de=5,oe=-1;function vt(){return!(e.unstable_now()-oe<de)}function Cn(){if(F!==null){var K=e.unstable_now();oe=K;var ae=!0;try{ae=F(!0,K)}finally{ae?In():(B=!1,F=null)}}else B=!1}var In;if(typeof b=="function")In=function(){b(Cn)};else if(typeof MessageChannel<"u"){var xs=new MessageChannel,so=xs.port2;xs.port1.onmessage=Cn,In=function(){so.postMessage(null)}}else In=function(){R(Cn,0)};function Ir(K){F=K,B||(B=!0,In())}function Or(K,ae){W=R(function(){K(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){E||k||(E=!0,Ir(H))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(K){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var Y=x;x=ae;try{return K()}finally{x=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=x;x=K;try{return ae()}finally{x=Y}},e.unstable_scheduleCallback=function(K,ae,Y){var Re=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Re+Y:Re):Y=Re,K){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=Y+qe,K={id:v++,callback:ae,priorityLevel:K,startTime:Y,expirationTime:qe,sortIndex:-1},Y>Re?(K.sortIndex=Y,t(p,K),n(h)===null&&K===n(p)&&(T?(S(W),W=-1):T=!0,Or(A,Y-Re))):(K.sortIndex=qe,t(h,K),E||k||(E=!0,Ir(H))),K},e.unstable_shouldYield=vt,e.unstable_wrapCallback=function(K){var ae=x;return function(){var Y=x;x=ae;try{return K.apply(this,arguments)}finally{x=Y}}}})(G0);K0.exports=G0;var SE=K0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE=m,cn=SE;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q0=new Set,Ml={};function Ti(e,t){Ka(e,t),Ka(e+"Capture",t)}function Ka(e,t){for(Ml[e]=t,e=0;e<t.length;e++)q0.add(t[e])}var Ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sm=Object.prototype.hasOwnProperty,kE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uw={},Fw={};function _E(e){return sm.call(Fw,e)?!0:sm.call(Uw,e)?!1:kE.test(e)?Fw[e]=!0:(Uw[e]=!0,!1)}function EE(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TE(e,t,n,s){if(t===null||typeof t>"u"||EE(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lt(e,t,n,s,a,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new Lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new Lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new Lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new Lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new Lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new Lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gt[e]=new Lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gt[e]=new Lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gt[e]=new Lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var vg=/[\-:]([a-z])/g;function yg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vg,yg);gt[t]=new Lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vg,yg);gt[t]=new Lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vg,yg);gt[t]=new Lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gt[e]=new Lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function xg(e,t,n,s){var a=gt.hasOwnProperty(t)?gt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(TE(t,n,a,s)&&(n=null),s||a===null?_E(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Us=NE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),_a=Symbol.for("react.portal"),Ea=Symbol.for("react.fragment"),wg=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),J0=Symbol.for("react.provider"),Q0=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),jg=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),X0=Symbol.for("react.offscreen"),Hw=Symbol.iterator;function hl(e){return e===null||typeof e!="object"?null:(e=Hw&&e[Hw]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,yp;function bl(e){if(yp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yp=t&&t[1]||""}return`
`+yp+e}var xp=!1;function wp(e,t){if(!e||xp)return"";xp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var s=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){s=p}e.call(t.prototype)}else{try{throw Error()}catch(p){s=p}e()}}catch(p){if(p&&s&&typeof p.stack=="string"){for(var a=p.stack.split(`
`),o=s.stack.split(`
`),l=a.length-1,d=o.length-1;1<=l&&0<=d&&a[l]!==o[d];)d--;for(;1<=l&&0<=d;l--,d--)if(a[l]!==o[d]){if(l!==1||d!==1)do if(l--,d--,0>d||a[l]!==o[d]){var h=`
`+a[l].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=l&&0<=d);break}}}finally{xp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bl(e):""}function CE(e){switch(e.tag){case 5:return bl(e.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return e=wp(e.type,!1),e;case 11:return e=wp(e.type.render,!1),e;case 1:return e=wp(e.type,!0),e;default:return""}}function om(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ea:return"Fragment";case _a:return"Portal";case rm:return"Profiler";case wg:return"StrictMode";case im:return"Suspense";case am:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Q0:return(e.displayName||"Context")+".Consumer";case J0:return(e._context.displayName||"Context")+".Provider";case bg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jg:return t=e.displayName||null,t!==null?t:om(e.type)||"Memo";case or:t=e._payload,e=e._init;try{return om(e(t))}catch{}}return null}function IE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return om(t);case 8:return t===wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OE(e){var t=Y0(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){s=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pu(e){e._valueTracker||(e._valueTracker=OE(e))}function Z0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Y0(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function yd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function lm(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zw(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ej(e,t){t=t.checked,t!=null&&xg(e,"checked",t,!1)}function cm(e,t){ej(e,t);var n=Sr(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?um(e,t.type,n):t.hasOwnProperty("defaultValue")&&um(e,t.type,Sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Vw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function um(e,t,n){(t!=="number"||yd(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jl=Array.isArray;function Ba(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Sr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function dm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ww(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($(92));if(jl(n)){if(1<n.length)throw Error($(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Sr(n)}}function tj(e,t){var n=Sr(t.value),s=Sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Kw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mu,sj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mu=Mu||document.createElement("div"),Mu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $l(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AE=["Webkit","ms","Moz","O"];Object.keys(_l).forEach(function(e){AE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_l[t]=_l[e]})});function rj(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_l.hasOwnProperty(e)&&_l[e]?(""+t).trim():t+"px"}function ij(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=rj(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var DE=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(e,t){if(t){if(DE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function pm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function Sg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gm=null,Ua=null,Fa=null;function Gw(e){if(e=cc(e)){if(typeof gm!="function")throw Error($(280));var t=e.stateNode;t&&(t=Yd(t),gm(e.stateNode,e.type,t))}}function aj(e){Ua?Fa?Fa.push(e):Fa=[e]:Ua=e}function oj(){if(Ua){var e=Ua,t=Fa;if(Fa=Ua=null,Gw(e),t)for(e=0;e<t.length;e++)Gw(t[e])}}function lj(e,t){return e(t)}function cj(){}var bp=!1;function uj(e,t,n){if(bp)return e(t,n);bp=!0;try{return lj(e,t,n)}finally{bp=!1,(Ua!==null||Fa!==null)&&(cj(),oj())}}function Bl(e,t){var n=e.stateNode;if(n===null)return null;var s=Yd(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($(231,t,typeof n));return n}var vm=!1;if(Ps)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){vm=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{vm=!1}function RE(e,t,n,s,a,o,l,d,h){var p=Array.prototype.slice.call(arguments,3);try{t.apply(n,p)}catch(v){this.onError(v)}}var El=!1,xd=null,wd=!1,ym=null,LE={onError:function(e){El=!0,xd=e}};function PE(e,t,n,s,a,o,l,d,h){El=!1,xd=null,RE.apply(LE,arguments)}function ME(e,t,n,s,a,o,l,d,h){if(PE.apply(this,arguments),El){if(El){var p=xd;El=!1,xd=null}else throw Error($(198));wd||(wd=!0,ym=p)}}function Ci(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qw(e){if(Ci(e)!==e)throw Error($(188))}function $E(e){var t=e.alternate;if(!t){if(t=Ci(e),t===null)throw Error($(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return qw(a),e;if(o===s)return qw(a),t;o=o.sibling}throw Error($(188))}if(n.return!==s.return)n=a,s=o;else{for(var l=!1,d=a.child;d;){if(d===n){l=!0,n=a,s=o;break}if(d===s){l=!0,s=a,n=o;break}d=d.sibling}if(!l){for(d=o.child;d;){if(d===n){l=!0,n=o,s=a;break}if(d===s){l=!0,s=o,n=a;break}d=d.sibling}if(!l)throw Error($(189))}}if(n.alternate!==s)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?e:t}function hj(e){return e=$E(e),e!==null?fj(e):null}function fj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fj(e);if(t!==null)return t;e=e.sibling}return null}var pj=cn.unstable_scheduleCallback,Jw=cn.unstable_cancelCallback,BE=cn.unstable_shouldYield,UE=cn.unstable_requestPaint,Je=cn.unstable_now,FE=cn.unstable_getCurrentPriorityLevel,Ng=cn.unstable_ImmediatePriority,mj=cn.unstable_UserBlockingPriority,bd=cn.unstable_NormalPriority,HE=cn.unstable_LowPriority,gj=cn.unstable_IdlePriority,qd=null,vs=null;function zE(e){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot(qd,e,void 0,(e.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:KE,VE=Math.log,WE=Math.LN2;function KE(e){return e>>>=0,e===0?32:31-(VE(e)/WE|0)|0}var $u=64,Bu=4194304;function Sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jd(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~a;d!==0?s=Sl(d):(o&=l,o!==0&&(s=Sl(o)))}else l=n&~a,l!==0?s=Sl(l):o!==0&&(s=Sl(o));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Kn(t),a=1<<n,s|=e[n],t&=~a;return s}function GE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qE(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Kn(o),d=1<<l,h=a[l];h===-1?(!(d&n)||d&s)&&(a[l]=GE(d,t)):h<=t&&(e.expiredLanes|=d),o&=~d}}function xm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vj(){var e=$u;return $u<<=1,!($u&4194240)&&($u=64),e}function jp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kn(t),e[t]=n}function JE(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Kn(n),o=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~o}}function kg(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Kn(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Ne=0;function yj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xj,_g,wj,bj,jj,wm=!1,Uu=[],mr=null,gr=null,vr=null,Ul=new Map,Fl=new Map,ur=[],QE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qw(e,t){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Ul.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(t.pointerId)}}function pl(e,t,n,s,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[a]},t!==null&&(t=cc(t),t!==null&&_g(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function XE(e,t,n,s,a){switch(t){case"focusin":return mr=pl(mr,e,t,n,s,a),!0;case"dragenter":return gr=pl(gr,e,t,n,s,a),!0;case"mouseover":return vr=pl(vr,e,t,n,s,a),!0;case"pointerover":var o=a.pointerId;return Ul.set(o,pl(Ul.get(o)||null,e,t,n,s,a)),!0;case"gotpointercapture":return o=a.pointerId,Fl.set(o,pl(Fl.get(o)||null,e,t,n,s,a)),!0}return!1}function Sj(e){var t=vi(e.target);if(t!==null){var n=Ci(t);if(n!==null){if(t=n.tag,t===13){if(t=dj(n),t!==null){e.blockedOn=t,jj(e.priority,function(){wj(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function od(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);mm=s,n.target.dispatchEvent(s),mm=null}else return t=cc(n),t!==null&&_g(t),e.blockedOn=n,!1;t.shift()}return!0}function Xw(e,t,n){od(e)&&n.delete(t)}function YE(){wm=!1,mr!==null&&od(mr)&&(mr=null),gr!==null&&od(gr)&&(gr=null),vr!==null&&od(vr)&&(vr=null),Ul.forEach(Xw),Fl.forEach(Xw)}function ml(e,t){e.blockedOn===t&&(e.blockedOn=null,wm||(wm=!0,cn.unstable_scheduleCallback(cn.unstable_NormalPriority,YE)))}function Hl(e){function t(a){return ml(a,e)}if(0<Uu.length){ml(Uu[0],e);for(var n=1;n<Uu.length;n++){var s=Uu[n];s.blockedOn===e&&(s.blockedOn=null)}}for(mr!==null&&ml(mr,e),gr!==null&&ml(gr,e),vr!==null&&ml(vr,e),Ul.forEach(t),Fl.forEach(t),n=0;n<ur.length;n++)s=ur[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Sj(n),n.blockedOn===null&&ur.shift()}var Ha=Us.ReactCurrentBatchConfig,Sd=!0;function ZE(e,t,n,s){var a=Ne,o=Ha.transition;Ha.transition=null;try{Ne=1,Eg(e,t,n,s)}finally{Ne=a,Ha.transition=o}}function eT(e,t,n,s){var a=Ne,o=Ha.transition;Ha.transition=null;try{Ne=4,Eg(e,t,n,s)}finally{Ne=a,Ha.transition=o}}function Eg(e,t,n,s){if(Sd){var a=bm(e,t,n,s);if(a===null)Ap(e,t,s,Nd,n),Qw(e,s);else if(XE(a,e,t,n,s))s.stopPropagation();else if(Qw(e,s),t&4&&-1<QE.indexOf(e)){for(;a!==null;){var o=cc(a);if(o!==null&&xj(o),o=bm(e,t,n,s),o===null&&Ap(e,t,s,Nd,n),o===a)break;a=o}a!==null&&s.stopPropagation()}else Ap(e,t,s,null,n)}}var Nd=null;function bm(e,t,n,s){if(Nd=null,e=Sg(s),e=vi(e),e!==null)if(t=Ci(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dj(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Nd=e,null}function Nj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FE()){case Ng:return 1;case mj:return 4;case bd:case HE:return 16;case gj:return 536870912;default:return 16}default:return 16}}var fr=null,Tg=null,ld=null;function kj(){if(ld)return ld;var e,t=Tg,n=t.length,s,a="value"in fr?fr.value:fr.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(s=1;s<=l&&t[n-s]===a[o-s];s++);return ld=a.slice(e,1<s?1-s:void 0)}function cd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fu(){return!0}function Yw(){return!1}function dn(e){function t(n,s,a,o,l){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Fu:Yw,this.isPropagationStopped=Yw,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fu)},persist:function(){},isPersistent:Fu}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cg=dn(eo),lc=Ve({},eo,{view:0,detail:0}),tT=dn(lc),Sp,Np,gl,Jd=Ve({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ig,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gl&&(gl&&e.type==="mousemove"?(Sp=e.screenX-gl.screenX,Np=e.screenY-gl.screenY):Np=Sp=0,gl=e),Sp)},movementY:function(e){return"movementY"in e?e.movementY:Np}}),Zw=dn(Jd),nT=Ve({},Jd,{dataTransfer:0}),sT=dn(nT),rT=Ve({},lc,{relatedTarget:0}),kp=dn(rT),iT=Ve({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),aT=dn(iT),oT=Ve({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lT=dn(oT),cT=Ve({},eo,{data:0}),eb=dn(cT),uT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hT[e])?!!t[e]:!1}function Ig(){return fT}var pT=Ve({},lc,{key:function(e){if(e.key){var t=uT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ig,charCode:function(e){return e.type==="keypress"?cd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mT=dn(pT),gT=Ve({},Jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tb=dn(gT),vT=Ve({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ig}),yT=dn(vT),xT=Ve({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wT=dn(xT),bT=Ve({},Jd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jT=dn(bT),ST=[9,13,27,32],Og=Ps&&"CompositionEvent"in window,Tl=null;Ps&&"documentMode"in document&&(Tl=document.documentMode);var NT=Ps&&"TextEvent"in window&&!Tl,_j=Ps&&(!Og||Tl&&8<Tl&&11>=Tl),nb=" ",sb=!1;function Ej(e,t){switch(e){case"keyup":return ST.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ta=!1;function kT(e,t){switch(e){case"compositionend":return Tj(t);case"keypress":return t.which!==32?null:(sb=!0,nb);case"textInput":return e=t.data,e===nb&&sb?null:e;default:return null}}function _T(e,t){if(Ta)return e==="compositionend"||!Og&&Ej(e,t)?(e=kj(),ld=Tg=fr=null,Ta=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _j&&t.locale!=="ko"?null:t.data;default:return null}}var ET={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ET[e.type]:t==="textarea"}function Cj(e,t,n,s){aj(s),t=kd(t,"onChange"),0<t.length&&(n=new Cg("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Cl=null,zl=null;function TT(e){Uj(e,0)}function Qd(e){var t=Oa(e);if(Z0(t))return e}function CT(e,t){if(e==="change")return t}var Ij=!1;if(Ps){var _p;if(Ps){var Ep="oninput"in document;if(!Ep){var ib=document.createElement("div");ib.setAttribute("oninput","return;"),Ep=typeof ib.oninput=="function"}_p=Ep}else _p=!1;Ij=_p&&(!document.documentMode||9<document.documentMode)}function ab(){Cl&&(Cl.detachEvent("onpropertychange",Oj),zl=Cl=null)}function Oj(e){if(e.propertyName==="value"&&Qd(zl)){var t=[];Cj(t,zl,e,Sg(e)),uj(TT,t)}}function IT(e,t,n){e==="focusin"?(ab(),Cl=t,zl=n,Cl.attachEvent("onpropertychange",Oj)):e==="focusout"&&ab()}function OT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qd(zl)}function AT(e,t){if(e==="click")return Qd(t)}function DT(e,t){if(e==="input"||e==="change")return Qd(t)}function RT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:RT;function Vl(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!sm.call(t,a)||!qn(e[a],t[a]))return!1}return!0}function ob(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lb(e,t){var n=ob(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ob(n)}}function Aj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Aj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dj(){for(var e=window,t=yd();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yd(e.document)}return t}function Ag(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LT(e){var t=Dj(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Aj(n.ownerDocument.documentElement,n)){if(s!==null&&Ag(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(s.start,a);s=s.end===void 0?o:Math.min(s.end,a),!e.extend&&o>s&&(a=s,s=o,o=a),a=lb(n,o);var l=lb(n,s);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var PT=Ps&&"documentMode"in document&&11>=document.documentMode,Ca=null,jm=null,Il=null,Sm=!1;function cb(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sm||Ca==null||Ca!==yd(s)||(s=Ca,"selectionStart"in s&&Ag(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Il&&Vl(Il,s)||(Il=s,s=kd(jm,"onSelect"),0<s.length&&(t=new Cg("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ca)))}function Hu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ia={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},Tp={},Rj={};Ps&&(Rj=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Xd(e){if(Tp[e])return Tp[e];if(!Ia[e])return e;var t=Ia[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Rj)return Tp[e]=t[n];return e}var Lj=Xd("animationend"),Pj=Xd("animationiteration"),Mj=Xd("animationstart"),$j=Xd("transitionend"),Bj=new Map,ub="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Bj.set(e,t),Ti(t,[e])}for(var Cp=0;Cp<ub.length;Cp++){var Ip=ub[Cp],MT=Ip.toLowerCase(),$T=Ip[0].toUpperCase()+Ip.slice(1);kr(MT,"on"+$T)}kr(Lj,"onAnimationEnd");kr(Pj,"onAnimationIteration");kr(Mj,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr($j,"onTransitionEnd");Ka("onMouseEnter",["mouseout","mouseover"]);Ka("onMouseLeave",["mouseout","mouseover"]);Ka("onPointerEnter",["pointerout","pointerover"]);Ka("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function db(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,ME(s,t,void 0,e),e.currentTarget=null}function Uj(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var l=s.length-1;0<=l;l--){var d=s[l],h=d.instance,p=d.currentTarget;if(d=d.listener,h!==o&&a.isPropagationStopped())break e;db(a,d,p),o=h}else for(l=0;l<s.length;l++){if(d=s[l],h=d.instance,p=d.currentTarget,d=d.listener,h!==o&&a.isPropagationStopped())break e;db(a,d,p),o=h}}}if(wd)throw e=ym,wd=!1,ym=null,e}function Le(e,t){var n=t[Tm];n===void 0&&(n=t[Tm]=new Set);var s=e+"__bubble";n.has(s)||(Fj(t,e,2,!1),n.add(s))}function Op(e,t,n){var s=0;t&&(s|=4),Fj(n,e,s,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Wl(e){if(!e[zu]){e[zu]=!0,q0.forEach(function(n){n!=="selectionchange"&&(BT.has(n)||Op(n,!1,e),Op(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zu]||(t[zu]=!0,Op("selectionchange",!1,t))}}function Fj(e,t,n,s){switch(Nj(t)){case 1:var a=ZE;break;case 4:a=eT;break;default:a=Eg}n=a.bind(null,t,n,e),a=void 0,!vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ap(e,t,n,s,a){var o=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var d=s.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(l===4)for(l=s.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===a||h.nodeType===8&&h.parentNode===a))return;l=l.return}for(;d!==null;){if(l=vi(d),l===null)return;if(h=l.tag,h===5||h===6){s=o=l;continue e}d=d.parentNode}}s=s.return}uj(function(){var p=o,v=Sg(n),w=[];e:{var x=Bj.get(e);if(x!==void 0){var k=Cg,E=e;switch(e){case"keypress":if(cd(n)===0)break e;case"keydown":case"keyup":k=mT;break;case"focusin":E="focus",k=kp;break;case"focusout":E="blur",k=kp;break;case"beforeblur":case"afterblur":k=kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Zw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=sT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=yT;break;case Lj:case Pj:case Mj:k=aT;break;case $j:k=wT;break;case"scroll":k=tT;break;case"wheel":k=jT;break;case"copy":case"cut":case"paste":k=lT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=tb}var T=(t&4)!==0,R=!T&&e==="scroll",S=T?x!==null?x+"Capture":null:x;T=[];for(var b=p,N;b!==null;){N=b;var A=N.stateNode;if(N.tag===5&&A!==null&&(N=A,S!==null&&(A=Bl(b,S),A!=null&&T.push(Kl(b,A,N)))),R)break;b=b.return}0<T.length&&(x=new k(x,E,null,n,v),w.push({event:x,listeners:T}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",x&&n!==mm&&(E=n.relatedTarget||n.fromElement)&&(vi(E)||E[Ms]))break e;if((k||x)&&(x=v.window===v?v:(x=v.ownerDocument)?x.defaultView||x.parentWindow:window,k?(E=n.relatedTarget||n.toElement,k=p,E=E?vi(E):null,E!==null&&(R=Ci(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(k=null,E=p),k!==E)){if(T=Zw,A="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(T=tb,A="onPointerLeave",S="onPointerEnter",b="pointer"),R=k==null?x:Oa(k),N=E==null?x:Oa(E),x=new T(A,b+"leave",k,n,v),x.target=R,x.relatedTarget=N,A=null,vi(v)===p&&(T=new T(S,b+"enter",E,n,v),T.target=N,T.relatedTarget=R,A=T),R=A,k&&E)t:{for(T=k,S=E,b=0,N=T;N;N=ma(N))b++;for(N=0,A=S;A;A=ma(A))N++;for(;0<b-N;)T=ma(T),b--;for(;0<N-b;)S=ma(S),N--;for(;b--;){if(T===S||S!==null&&T===S.alternate)break t;T=ma(T),S=ma(S)}T=null}else T=null;k!==null&&hb(w,x,k,T,!1),E!==null&&R!==null&&hb(w,R,E,T,!0)}}e:{if(x=p?Oa(p):window,k=x.nodeName&&x.nodeName.toLowerCase(),k==="select"||k==="input"&&x.type==="file")var H=CT;else if(rb(x))if(Ij)H=DT;else{H=OT;var B=IT}else(k=x.nodeName)&&k.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(H=AT);if(H&&(H=H(e,p))){Cj(w,H,n,v);break e}B&&B(e,x,p),e==="focusout"&&(B=x._wrapperState)&&B.controlled&&x.type==="number"&&um(x,"number",x.value)}switch(B=p?Oa(p):window,e){case"focusin":(rb(B)||B.contentEditable==="true")&&(Ca=B,jm=p,Il=null);break;case"focusout":Il=jm=Ca=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,cb(w,n,v);break;case"selectionchange":if(PT)break;case"keydown":case"keyup":cb(w,n,v)}var F;if(Og)e:{switch(e){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else Ta?Ej(e,n)&&(W="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&(_j&&n.locale!=="ko"&&(Ta||W!=="onCompositionStart"?W==="onCompositionEnd"&&Ta&&(F=kj()):(fr=v,Tg="value"in fr?fr.value:fr.textContent,Ta=!0)),B=kd(p,W),0<B.length&&(W=new eb(W,e,null,n,v),w.push({event:W,listeners:B}),F?W.data=F:(F=Tj(n),F!==null&&(W.data=F)))),(F=NT?kT(e,n):_T(e,n))&&(p=kd(p,"onBeforeInput"),0<p.length&&(v=new eb("onBeforeInput","beforeinput",null,n,v),w.push({event:v,listeners:p}),v.data=F))}Uj(w,t)})}function Kl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kd(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Bl(e,n),o!=null&&s.unshift(Kl(e,o,a)),o=Bl(e,t),o!=null&&s.push(Kl(e,o,a))),e=e.return}return s}function ma(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hb(e,t,n,s,a){for(var o=t._reactName,l=[];n!==null&&n!==s;){var d=n,h=d.alternate,p=d.stateNode;if(h!==null&&h===s)break;d.tag===5&&p!==null&&(d=p,a?(h=Bl(n,o),h!=null&&l.unshift(Kl(n,h,d))):a||(h=Bl(n,o),h!=null&&l.push(Kl(n,h,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var UT=/\r\n?/g,FT=/\u0000|\uFFFD/g;function fb(e){return(typeof e=="string"?e:""+e).replace(UT,`
`).replace(FT,"")}function Vu(e,t,n){if(t=fb(t),fb(e)!==t&&n)throw Error($(425))}function _d(){}var Nm=null,km=null;function _m(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Em=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,pb=typeof Promise=="function"?Promise:void 0,zT=typeof queueMicrotask=="function"?queueMicrotask:typeof pb<"u"?function(e){return pb.resolve(null).then(e).catch(VT)}:Em;function VT(e){setTimeout(function(){throw e})}function Dp(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Hl(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Hl(t)}function yr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mb(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var to=Math.random().toString(36).slice(2),gs="__reactFiber$"+to,Gl="__reactProps$"+to,Ms="__reactContainer$"+to,Tm="__reactEvents$"+to,WT="__reactListeners$"+to,KT="__reactHandles$"+to;function vi(e){var t=e[gs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ms]||n[gs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mb(e);e!==null;){if(n=e[gs])return n;e=mb(e)}return t}e=n,n=e.parentNode}return null}function cc(e){return e=e[gs]||e[Ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Yd(e){return e[Gl]||null}var Cm=[],Aa=-1;function _r(e){return{current:e}}function Pe(e){0>Aa||(e.current=Cm[Aa],Cm[Aa]=null,Aa--)}function De(e,t){Aa++,Cm[Aa]=e.current,e.current=t}var Nr={},kt=_r(Nr),zt=_r(!1),Si=Nr;function Ga(e,t){var n=e.type.contextTypes;if(!n)return Nr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Vt(e){return e=e.childContextTypes,e!=null}function Ed(){Pe(zt),Pe(kt)}function gb(e,t,n){if(kt.current!==Nr)throw Error($(168));De(kt,t),De(zt,n)}function Hj(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error($(108,IE(e)||"Unknown",a));return Ve({},n,s)}function Td(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nr,Si=kt.current,De(kt,e),De(zt,zt.current),!0}function vb(e,t,n){var s=e.stateNode;if(!s)throw Error($(169));n?(e=Hj(e,t,Si),s.__reactInternalMemoizedMergedChildContext=e,Pe(zt),Pe(kt),De(kt,e)):Pe(zt),De(zt,n)}var As=null,Zd=!1,Rp=!1;function zj(e){As===null?As=[e]:As.push(e)}function GT(e){Zd=!0,zj(e)}function Er(){if(!Rp&&As!==null){Rp=!0;var e=0,t=Ne;try{var n=As;for(Ne=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}As=null,Zd=!1}catch(a){throw As!==null&&(As=As.slice(e+1)),pj(Ng,Er),a}finally{Ne=t,Rp=!1}}return null}var Da=[],Ra=0,Cd=null,Id=0,jn=[],Sn=0,Ni=null,Ds=1,Rs="";function hi(e,t){Da[Ra++]=Id,Da[Ra++]=Cd,Cd=e,Id=t}function Vj(e,t,n){jn[Sn++]=Ds,jn[Sn++]=Rs,jn[Sn++]=Ni,Ni=e;var s=Ds;e=Rs;var a=32-Kn(s)-1;s&=~(1<<a),n+=1;var o=32-Kn(t)+a;if(30<o){var l=a-a%5;o=(s&(1<<l)-1).toString(32),s>>=l,a-=l,Ds=1<<32-Kn(t)+a|n<<a|s,Rs=o+e}else Ds=1<<o|n<<a|s,Rs=e}function Dg(e){e.return!==null&&(hi(e,1),Vj(e,1,0))}function Rg(e){for(;e===Cd;)Cd=Da[--Ra],Da[Ra]=null,Id=Da[--Ra],Da[Ra]=null;for(;e===Ni;)Ni=jn[--Sn],jn[Sn]=null,Rs=jn[--Sn],jn[Sn]=null,Ds=jn[--Sn],jn[Sn]=null}var ln=null,on=null,Be=!1,Wn=null;function Wj(e,t){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yb(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ln=e,on=yr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ln=e,on=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ni!==null?{id:Ds,overflow:Rs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ln=e,on=null,!0):!1;default:return!1}}function Im(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Om(e){if(Be){var t=on;if(t){var n=t;if(!yb(e,t)){if(Im(e))throw Error($(418));t=yr(n.nextSibling);var s=ln;t&&yb(e,t)?Wj(s,n):(e.flags=e.flags&-4097|2,Be=!1,ln=e)}}else{if(Im(e))throw Error($(418));e.flags=e.flags&-4097|2,Be=!1,ln=e}}}function xb(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ln=e}function Wu(e){if(e!==ln)return!1;if(!Be)return xb(e),Be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_m(e.type,e.memoizedProps)),t&&(t=on)){if(Im(e))throw Kj(),Error($(418));for(;t;)Wj(e,t),t=yr(t.nextSibling)}if(xb(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){on=yr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}on=null}}else on=ln?yr(e.stateNode.nextSibling):null;return!0}function Kj(){for(var e=on;e;)e=yr(e.nextSibling)}function qa(){on=ln=null,Be=!1}function Lg(e){Wn===null?Wn=[e]:Wn.push(e)}var qT=Us.ReactCurrentBatchConfig;function vl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var s=n.stateNode}if(!s)throw Error($(147,e));var a=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var d=a.refs;l===null?delete d[o]:d[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error($(284));if(!n._owner)throw Error($(290,e))}return e}function Ku(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wb(e){var t=e._init;return t(e._payload)}function Gj(e){function t(S,b){if(e){var N=S.deletions;N===null?(S.deletions=[b],S.flags|=16):N.push(b)}}function n(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function s(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function a(S,b){return S=jr(S,b),S.index=0,S.sibling=null,S}function o(S,b,N){return S.index=N,e?(N=S.alternate,N!==null?(N=N.index,N<b?(S.flags|=2,b):N):(S.flags|=2,b)):(S.flags|=1048576,b)}function l(S){return e&&S.alternate===null&&(S.flags|=2),S}function d(S,b,N,A){return b===null||b.tag!==6?(b=Fp(N,S.mode,A),b.return=S,b):(b=a(b,N),b.return=S,b)}function h(S,b,N,A){var H=N.type;return H===Ea?v(S,b,N.props.children,A,N.key):b!==null&&(b.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===or&&wb(H)===b.type)?(A=a(b,N.props),A.ref=vl(S,b,N),A.return=S,A):(A=gd(N.type,N.key,N.props,null,S.mode,A),A.ref=vl(S,b,N),A.return=S,A)}function p(S,b,N,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==N.containerInfo||b.stateNode.implementation!==N.implementation?(b=Hp(N,S.mode,A),b.return=S,b):(b=a(b,N.children||[]),b.return=S,b)}function v(S,b,N,A,H){return b===null||b.tag!==7?(b=ji(N,S.mode,A,H),b.return=S,b):(b=a(b,N),b.return=S,b)}function w(S,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fp(""+b,S.mode,N),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lu:return N=gd(b.type,b.key,b.props,null,S.mode,N),N.ref=vl(S,null,b),N.return=S,N;case _a:return b=Hp(b,S.mode,N),b.return=S,b;case or:var A=b._init;return w(S,A(b._payload),N)}if(jl(b)||hl(b))return b=ji(b,S.mode,N,null),b.return=S,b;Ku(S,b)}return null}function x(S,b,N,A){var H=b!==null?b.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return H!==null?null:d(S,b,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Lu:return N.key===H?h(S,b,N,A):null;case _a:return N.key===H?p(S,b,N,A):null;case or:return H=N._init,x(S,b,H(N._payload),A)}if(jl(N)||hl(N))return H!==null?null:v(S,b,N,A,null);Ku(S,N)}return null}function k(S,b,N,A,H){if(typeof A=="string"&&A!==""||typeof A=="number")return S=S.get(N)||null,d(b,S,""+A,H);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Lu:return S=S.get(A.key===null?N:A.key)||null,h(b,S,A,H);case _a:return S=S.get(A.key===null?N:A.key)||null,p(b,S,A,H);case or:var B=A._init;return k(S,b,N,B(A._payload),H)}if(jl(A)||hl(A))return S=S.get(N)||null,v(b,S,A,H,null);Ku(b,A)}return null}function E(S,b,N,A){for(var H=null,B=null,F=b,W=b=0,de=null;F!==null&&W<N.length;W++){F.index>W?(de=F,F=null):de=F.sibling;var oe=x(S,F,N[W],A);if(oe===null){F===null&&(F=de);break}e&&F&&oe.alternate===null&&t(S,F),b=o(oe,b,W),B===null?H=oe:B.sibling=oe,B=oe,F=de}if(W===N.length)return n(S,F),Be&&hi(S,W),H;if(F===null){for(;W<N.length;W++)F=w(S,N[W],A),F!==null&&(b=o(F,b,W),B===null?H=F:B.sibling=F,B=F);return Be&&hi(S,W),H}for(F=s(S,F);W<N.length;W++)de=k(F,S,W,N[W],A),de!==null&&(e&&de.alternate!==null&&F.delete(de.key===null?W:de.key),b=o(de,b,W),B===null?H=de:B.sibling=de,B=de);return e&&F.forEach(function(vt){return t(S,vt)}),Be&&hi(S,W),H}function T(S,b,N,A){var H=hl(N);if(typeof H!="function")throw Error($(150));if(N=H.call(N),N==null)throw Error($(151));for(var B=H=null,F=b,W=b=0,de=null,oe=N.next();F!==null&&!oe.done;W++,oe=N.next()){F.index>W?(de=F,F=null):de=F.sibling;var vt=x(S,F,oe.value,A);if(vt===null){F===null&&(F=de);break}e&&F&&vt.alternate===null&&t(S,F),b=o(vt,b,W),B===null?H=vt:B.sibling=vt,B=vt,F=de}if(oe.done)return n(S,F),Be&&hi(S,W),H;if(F===null){for(;!oe.done;W++,oe=N.next())oe=w(S,oe.value,A),oe!==null&&(b=o(oe,b,W),B===null?H=oe:B.sibling=oe,B=oe);return Be&&hi(S,W),H}for(F=s(S,F);!oe.done;W++,oe=N.next())oe=k(F,S,W,oe.value,A),oe!==null&&(e&&oe.alternate!==null&&F.delete(oe.key===null?W:oe.key),b=o(oe,b,W),B===null?H=oe:B.sibling=oe,B=oe);return e&&F.forEach(function(Cn){return t(S,Cn)}),Be&&hi(S,W),H}function R(S,b,N,A){if(typeof N=="object"&&N!==null&&N.type===Ea&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Lu:e:{for(var H=N.key,B=b;B!==null;){if(B.key===H){if(H=N.type,H===Ea){if(B.tag===7){n(S,B.sibling),b=a(B,N.props.children),b.return=S,S=b;break e}}else if(B.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===or&&wb(H)===B.type){n(S,B.sibling),b=a(B,N.props),b.ref=vl(S,B,N),b.return=S,S=b;break e}n(S,B);break}else t(S,B);B=B.sibling}N.type===Ea?(b=ji(N.props.children,S.mode,A,N.key),b.return=S,S=b):(A=gd(N.type,N.key,N.props,null,S.mode,A),A.ref=vl(S,b,N),A.return=S,S=A)}return l(S);case _a:e:{for(B=N.key;b!==null;){if(b.key===B)if(b.tag===4&&b.stateNode.containerInfo===N.containerInfo&&b.stateNode.implementation===N.implementation){n(S,b.sibling),b=a(b,N.children||[]),b.return=S,S=b;break e}else{n(S,b);break}else t(S,b);b=b.sibling}b=Hp(N,S.mode,A),b.return=S,S=b}return l(S);case or:return B=N._init,R(S,b,B(N._payload),A)}if(jl(N))return E(S,b,N,A);if(hl(N))return T(S,b,N,A);Ku(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,b!==null&&b.tag===6?(n(S,b.sibling),b=a(b,N),b.return=S,S=b):(n(S,b),b=Fp(N,S.mode,A),b.return=S,S=b),l(S)):n(S,b)}return R}var Ja=Gj(!0),qj=Gj(!1),Od=_r(null),Ad=null,La=null,Pg=null;function Mg(){Pg=La=Ad=null}function $g(e){var t=Od.current;Pe(Od),e._currentValue=t}function Am(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function za(e,t){Ad=e,Pg=La=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function _n(e){var t=e._currentValue;if(Pg!==e)if(e={context:e,memoizedValue:t,next:null},La===null){if(Ad===null)throw Error($(308));La=e,Ad.dependencies={lanes:0,firstContext:e}}else La=La.next=e;return t}var yi=null;function Bg(e){yi===null?yi=[e]:yi.push(e)}function Jj(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,Bg(t)):(n.next=a.next,a.next=n),t.interleaved=n,$s(e,s)}function $s(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var lr=!1;function Ug(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,we&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,$s(e,n)}return a=s.interleaved,a===null?(t.next=t,Bg(s)):(t.next=a.next,a.next=t),s.interleaved=t,$s(e,n)}function ud(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,kg(e,n)}}function bb(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dd(e,t,n,s){var a=e.updateQueue;lr=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var h=d,p=h.next;h.next=null,l===null?o=p:l.next=p,l=h;var v=e.alternate;v!==null&&(v=v.updateQueue,d=v.lastBaseUpdate,d!==l&&(d===null?v.firstBaseUpdate=p:d.next=p,v.lastBaseUpdate=h))}if(o!==null){var w=a.baseState;l=0,v=p=h=null,d=o;do{var x=d.lane,k=d.eventTime;if((s&x)===x){v!==null&&(v=v.next={eventTime:k,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var E=e,T=d;switch(x=t,k=n,T.tag){case 1:if(E=T.payload,typeof E=="function"){w=E.call(k,w,x);break e}w=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=T.payload,x=typeof E=="function"?E.call(k,w,x):E,x==null)break e;w=Ve({},w,x);break e;case 2:lr=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,x=a.effects,x===null?a.effects=[d]:x.push(d))}else k={eventTime:k,lane:x,tag:d.tag,payload:d.payload,callback:d.callback,next:null},v===null?(p=v=k,h=w):v=v.next=k,l|=x;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;x=d,d=x.next,x.next=null,a.lastBaseUpdate=x,a.shared.pending=null}}while(!0);if(v===null&&(h=w),a.baseState=h,a.firstBaseUpdate=p,a.lastBaseUpdate=v,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);_i|=l,e.lanes=l,e.memoizedState=w}}function jb(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error($(191,a));a.call(s)}}}var uc={},ys=_r(uc),ql=_r(uc),Jl=_r(uc);function xi(e){if(e===uc)throw Error($(174));return e}function Fg(e,t){switch(De(Jl,t),De(ql,e),De(ys,uc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hm(t,e)}Pe(ys),De(ys,t)}function Qa(){Pe(ys),Pe(ql),Pe(Jl)}function Xj(e){xi(Jl.current);var t=xi(ys.current),n=hm(t,e.type);t!==n&&(De(ql,e),De(ys,n))}function Hg(e){ql.current===e&&(Pe(ys),Pe(ql))}var He=_r(0);function Rd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lp=[];function zg(){for(var e=0;e<Lp.length;e++)Lp[e]._workInProgressVersionPrimary=null;Lp.length=0}var dd=Us.ReactCurrentDispatcher,Pp=Us.ReactCurrentBatchConfig,ki=0,ze=null,st=null,it=null,Ld=!1,Ol=!1,Ql=0,JT=0;function jt(){throw Error($(321))}function Vg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qn(e[n],t[n]))return!1;return!0}function Wg(e,t,n,s,a,o){if(ki=o,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dd.current=e===null||e.memoizedState===null?ZT:eC,e=n(s,a),Ol){o=0;do{if(Ol=!1,Ql=0,25<=o)throw Error($(301));o+=1,it=st=null,t.updateQueue=null,dd.current=tC,e=n(s,a)}while(Ol)}if(dd.current=Pd,t=st!==null&&st.next!==null,ki=0,it=st=ze=null,Ld=!1,t)throw Error($(300));return e}function Kg(){var e=Ql!==0;return Ql=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?ze.memoizedState=it=e:it=it.next=e,it}function En(){if(st===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=it===null?ze.memoizedState:it.next;if(t!==null)it=t,st=e;else{if(e===null)throw Error($(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},it===null?ze.memoizedState=it=e:it=it.next=e}return it}function Xl(e,t){return typeof t=="function"?t(e):t}function Mp(e){var t=En(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=st,a=s.baseQueue,o=n.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}s.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,s=s.baseState;var d=l=null,h=null,p=o;do{var v=p.lane;if((ki&v)===v)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),s=p.hasEagerState?p.eagerState:e(s,p.action);else{var w={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(d=h=w,l=s):h=h.next=w,ze.lanes|=v,_i|=v}p=p.next}while(p!==null&&p!==o);h===null?l=s:h.next=d,qn(s,t.memoizedState)||(Ht=!0),t.memoizedState=s,t.baseState=l,t.baseQueue=h,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do o=a.lane,ze.lanes|=o,_i|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $p(e){var t=En(),n=t.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);qn(o,t.memoizedState)||(Ht=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Yj(){}function Zj(e,t){var n=ze,s=En(),a=t(),o=!qn(s.memoizedState,a);if(o&&(s.memoizedState=a,Ht=!0),s=s.queue,Gg(nS.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Yl(9,tS.bind(null,n,s,a,t),void 0,null),at===null)throw Error($(349));ki&30||eS(n,t,a)}return a}function eS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tS(e,t,n,s){t.value=n,t.getSnapshot=s,sS(t)&&rS(e)}function nS(e,t,n){return n(function(){sS(t)&&rS(e)})}function sS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qn(e,n)}catch{return!0}}function rS(e){var t=$s(e,1);t!==null&&Gn(t,e,1,-1)}function Sb(e){var t=fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:e},t.queue=e,e=e.dispatch=YT.bind(null,ze,e),[t.memoizedState,e]}function Yl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function iS(){return En().memoizedState}function hd(e,t,n,s){var a=fs();ze.flags|=e,a.memoizedState=Yl(1|t,n,void 0,s===void 0?null:s)}function eh(e,t,n,s){var a=En();s=s===void 0?null:s;var o=void 0;if(st!==null){var l=st.memoizedState;if(o=l.destroy,s!==null&&Vg(s,l.deps)){a.memoizedState=Yl(t,n,o,s);return}}ze.flags|=e,a.memoizedState=Yl(1|t,n,o,s)}function Nb(e,t){return hd(8390656,8,e,t)}function Gg(e,t){return eh(2048,8,e,t)}function aS(e,t){return eh(4,2,e,t)}function oS(e,t){return eh(4,4,e,t)}function lS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cS(e,t,n){return n=n!=null?n.concat([e]):null,eh(4,4,lS.bind(null,t,e),n)}function qg(){}function uS(e,t){var n=En();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vg(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function dS(e,t){var n=En();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Vg(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function hS(e,t,n){return ki&21?(qn(n,t)||(n=vj(),ze.lanes|=n,_i|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=n)}function QT(e,t){var n=Ne;Ne=n!==0&&4>n?n:4,e(!0);var s=Pp.transition;Pp.transition={};try{e(!1),t()}finally{Ne=n,Pp.transition=s}}function fS(){return En().memoizedState}function XT(e,t,n){var s=br(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},pS(e))mS(t,n);else if(n=Jj(e,t,n,s),n!==null){var a=Dt();Gn(n,e,s,a),gS(n,t,s)}}function YT(e,t,n){var s=br(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(pS(e))mS(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,d=o(l,n);if(a.hasEagerState=!0,a.eagerState=d,qn(d,l)){var h=t.interleaved;h===null?(a.next=a,Bg(t)):(a.next=h.next,h.next=a),t.interleaved=a;return}}catch{}finally{}n=Jj(e,t,a,s),n!==null&&(a=Dt(),Gn(n,e,s,a),gS(n,t,s))}}function pS(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function mS(e,t){Ol=Ld=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gS(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,kg(e,n)}}var Pd={readContext:_n,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},ZT={readContext:_n,useCallback:function(e,t){return fs().memoizedState=[e,t===void 0?null:t],e},useContext:_n,useEffect:Nb,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hd(4194308,4,lS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hd(4194308,4,e,t)},useInsertionEffect:function(e,t){return hd(4,2,e,t)},useMemo:function(e,t){var n=fs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=fs();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=XT.bind(null,ze,e),[s.memoizedState,e]},useRef:function(e){var t=fs();return e={current:e},t.memoizedState=e},useState:Sb,useDebugValue:qg,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=Sb(!1),t=e[0];return e=QT.bind(null,e[1]),fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ze,a=fs();if(Be){if(n===void 0)throw Error($(407));n=n()}else{if(n=t(),at===null)throw Error($(349));ki&30||eS(s,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Nb(nS.bind(null,s,o,e),[e]),s.flags|=2048,Yl(9,tS.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=fs(),t=at.identifierPrefix;if(Be){var n=Rs,s=Ds;n=(s&~(1<<32-Kn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ql++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=JT++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eC={readContext:_n,useCallback:uS,useContext:_n,useEffect:Gg,useImperativeHandle:cS,useInsertionEffect:aS,useLayoutEffect:oS,useMemo:dS,useReducer:Mp,useRef:iS,useState:function(){return Mp(Xl)},useDebugValue:qg,useDeferredValue:function(e){var t=En();return hS(t,st.memoizedState,e)},useTransition:function(){var e=Mp(Xl)[0],t=En().memoizedState;return[e,t]},useMutableSource:Yj,useSyncExternalStore:Zj,useId:fS,unstable_isNewReconciler:!1},tC={readContext:_n,useCallback:uS,useContext:_n,useEffect:Gg,useImperativeHandle:cS,useInsertionEffect:aS,useLayoutEffect:oS,useMemo:dS,useReducer:$p,useRef:iS,useState:function(){return $p(Xl)},useDebugValue:qg,useDeferredValue:function(e){var t=En();return st===null?t.memoizedState=e:hS(t,st.memoizedState,e)},useTransition:function(){var e=$p(Xl)[0],t=En().memoizedState;return[e,t]},useMutableSource:Yj,useSyncExternalStore:Zj,useId:fS,unstable_isNewReconciler:!1};function Fn(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Dm(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var th={isMounted:function(e){return(e=e._reactInternals)?Ci(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Dt(),a=br(e),o=Ls(s,a);o.payload=t,n!=null&&(o.callback=n),t=xr(e,o,a),t!==null&&(Gn(t,e,a,s),ud(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Dt(),a=br(e),o=Ls(s,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=xr(e,o,a),t!==null&&(Gn(t,e,a,s),ud(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Dt(),s=br(e),a=Ls(n,s);a.tag=2,t!=null&&(a.callback=t),t=xr(e,a,s),t!==null&&(Gn(t,e,s,n),ud(t,e,s))}};function kb(e,t,n,s,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,l):t.prototype&&t.prototype.isPureReactComponent?!Vl(n,s)||!Vl(a,o):!0}function vS(e,t,n){var s=!1,a=Nr,o=t.contextType;return typeof o=="object"&&o!==null?o=_n(o):(a=Vt(t)?Si:kt.current,s=t.contextTypes,o=(s=s!=null)?Ga(e,a):Nr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=th,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function _b(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&th.enqueueReplaceState(t,t.state,null)}function Rm(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ug(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=_n(o):(o=Vt(t)?Si:kt.current,a.context=Ga(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Dm(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&th.enqueueReplaceState(a,a.state,null),Dd(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xa(e,t){try{var n="",s=t;do n+=CE(s),s=s.return;while(s);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Bp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var nC=typeof WeakMap=="function"?WeakMap:Map;function yS(e,t,n){n=Ls(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){$d||($d=!0,Wm=s),Lm(e,t)},n}function xS(e,t,n){n=Ls(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){Lm(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Lm(e,t),typeof s!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Eb(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new nC;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=gC.bind(null,e,t,n),t.then(e,e))}function Tb(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cb(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ls(-1,1),t.tag=2,xr(n,t,1))),n.lanes|=1),e)}var sC=Us.ReactCurrentOwner,Ht=!1;function At(e,t,n,s){t.child=e===null?qj(t,null,n,s):Ja(t,e.child,n,s)}function Ib(e,t,n,s,a){n=n.render;var o=t.ref;return za(t,a),s=Wg(e,t,n,s,o,a),n=Kg(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(Be&&n&&Dg(t),t.flags|=1,At(e,t,s,a),t.child)}function Ob(e,t,n,s,a){if(e===null){var o=n.type;return typeof o=="function"&&!nv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,wS(e,t,o,s,a)):(e=gd(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Vl,n(l,s)&&e.ref===t.ref)return Bs(e,t,a)}return t.flags|=1,e=jr(o,s),e.ref=t.ref,e.return=t,t.child=e}function wS(e,t,n,s,a){if(e!==null){var o=e.memoizedProps;if(Vl(o,s)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=s=o,(e.lanes&a)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,Bs(e,t,a)}return Pm(e,t,n,s,a)}function bS(e,t,n){var s=t.pendingProps,a=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ma,sn),sn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Ma,sn),sn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,De(Ma,sn),sn|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,De(Ma,sn),sn|=s;return At(e,t,a,n),t.child}function jS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pm(e,t,n,s,a){var o=Vt(n)?Si:kt.current;return o=Ga(t,o),za(t,a),n=Wg(e,t,n,s,o,a),s=Kg(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Bs(e,t,a)):(Be&&s&&Dg(t),t.flags|=1,At(e,t,n,a),t.child)}function Ab(e,t,n,s,a){if(Vt(n)){var o=!0;Td(t)}else o=!1;if(za(t,a),t.stateNode===null)fd(e,t),vS(t,n,s),Rm(t,n,s,a),s=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var h=l.context,p=n.contextType;typeof p=="object"&&p!==null?p=_n(p):(p=Vt(n)?Si:kt.current,p=Ga(t,p));var v=n.getDerivedStateFromProps,w=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==s||h!==p)&&_b(t,l,s,p),lr=!1;var x=t.memoizedState;l.state=x,Dd(t,s,l,a),h=t.memoizedState,d!==s||x!==h||zt.current||lr?(typeof v=="function"&&(Dm(t,n,v,s),h=t.memoizedState),(d=lr||kb(t,n,d,s,x,h,p))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=h),l.props=s,l.state=h,l.context=p,s=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{l=t.stateNode,Qj(e,t),d=t.memoizedProps,p=t.type===t.elementType?d:Fn(t.type,d),l.props=p,w=t.pendingProps,x=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=_n(h):(h=Vt(n)?Si:kt.current,h=Ga(t,h));var k=n.getDerivedStateFromProps;(v=typeof k=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==w||x!==h)&&_b(t,l,s,h),lr=!1,x=t.memoizedState,l.state=x,Dd(t,s,l,a);var E=t.memoizedState;d!==w||x!==E||zt.current||lr?(typeof k=="function"&&(Dm(t,n,k,s),E=t.memoizedState),(p=lr||kb(t,n,p,s,x,E,h)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,E,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,E,h)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=E),l.props=s,l.state=E,l.context=h,s=p):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),s=!1)}return Mm(e,t,n,s,o,a)}function Mm(e,t,n,s,a,o){jS(e,t);var l=(t.flags&128)!==0;if(!s&&!l)return a&&vb(t,n,!1),Bs(e,t,o);s=t.stateNode,sC.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&l?(t.child=Ja(t,e.child,null,o),t.child=Ja(t,null,d,o)):At(e,t,d,o),t.memoizedState=s.state,a&&vb(t,n,!0),t.child}function SS(e){var t=e.stateNode;t.pendingContext?gb(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gb(e,t.context,!1),Fg(e,t.containerInfo)}function Db(e,t,n,s,a){return qa(),Lg(a),t.flags|=256,At(e,t,n,s),t.child}var $m={dehydrated:null,treeContext:null,retryLane:0};function Bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function NS(e,t,n){var s=t.pendingProps,a=He.current,o=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(a&2)!==0),d?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),De(He,a&1),e===null)return Om(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},!(s&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=rh(l,s,0,null),e=ji(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Bm(n),t.memoizedState=$m,e):Jg(t,l));if(a=e.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return rC(e,t,l,s,d,a,n);if(o){o=s.fallback,l=t.mode,a=e.child,d=a.sibling;var h={mode:"hidden",children:s.children};return!(l&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=h,t.deletions=null):(s=jr(a,h),s.subtreeFlags=a.subtreeFlags&14680064),d!==null?o=jr(d,o):(o=ji(o,l,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=e.child.memoizedState,l=l===null?Bm(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=$m,s}return o=e.child,e=o.sibling,s=jr(o,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Jg(e,t){return t=rh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gu(e,t,n,s){return s!==null&&Lg(s),Ja(t,e.child,null,n),e=Jg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rC(e,t,n,s,a,o,l){if(n)return t.flags&256?(t.flags&=-257,s=Bp(Error($(422))),Gu(e,t,l,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,a=t.mode,s=rh({mode:"visible",children:s.children},a,0,null),o=ji(o,a,l,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,t.mode&1&&Ja(t,e.child,null,l),t.child.memoizedState=Bm(l),t.memoizedState=$m,o);if(!(t.mode&1))return Gu(e,t,l,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var d=s.dgst;return s=d,o=Error($(419)),s=Bp(o,s,void 0),Gu(e,t,l,s)}if(d=(l&e.childLanes)!==0,Ht||d){if(s=at,s!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,$s(e,a),Gn(s,e,a,-1))}return tv(),s=Bp(Error($(421))),Gu(e,t,l,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=vC.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,on=yr(a.nextSibling),ln=t,Be=!0,Wn=null,e!==null&&(jn[Sn++]=Ds,jn[Sn++]=Rs,jn[Sn++]=Ni,Ds=e.id,Rs=e.overflow,Ni=t),t=Jg(t,s.children),t.flags|=4096,t)}function Rb(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Am(e.return,t,n)}function Up(e,t,n,s,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=a)}function kS(e,t,n){var s=t.pendingProps,a=s.revealOrder,o=s.tail;if(At(e,t,s.children,n),s=He.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rb(e,n,t);else if(e.tag===19)Rb(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(De(He,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Rd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Up(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Rd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Up(t,!0,n,null,o);break;case"together":Up(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),_i|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,n=jr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function iC(e,t,n){switch(t.tag){case 3:SS(t),qa();break;case 5:Xj(t);break;case 1:Vt(t.type)&&Td(t);break;case 4:Fg(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;De(Od,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(De(He,He.current&1),t.flags|=128,null):n&t.child.childLanes?NS(e,t,n):(De(He,He.current&1),e=Bs(e,t,n),e!==null?e.sibling:null);De(He,He.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return kS(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),De(He,He.current),s)break;return null;case 22:case 23:return t.lanes=0,bS(e,t,n)}return Bs(e,t,n)}var _S,Um,ES,TS;_S=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};ES=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,xi(ys.current);var o=null;switch(n){case"input":a=lm(e,a),s=lm(e,s),o=[];break;case"select":a=Ve({},a,{value:void 0}),s=Ve({},s,{value:void 0}),o=[];break;case"textarea":a=dm(e,a),s=dm(e,s),o=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=_d)}fm(n,s);var l;n=null;for(p in a)if(!s.hasOwnProperty(p)&&a.hasOwnProperty(p)&&a[p]!=null)if(p==="style"){var d=a[p];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ml.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in s){var h=s[p];if(d=a!=null?a[p]:void 0,s.hasOwnProperty(p)&&h!==d&&(h!=null||d!=null))if(p==="style")if(d){for(l in d)!d.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&d[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,d=d?d.__html:void 0,h!=null&&d!==h&&(o=o||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ml.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Le("scroll",e),o||d===h||(o=[])):(o=o||[]).push(p,h))}n&&(o=o||[]).push("style",n);var p=o;(t.updateQueue=p)&&(t.flags|=4)}};TS=function(e,t,n,s){n!==s&&(t.flags|=4)};function yl(e,t){if(!Be)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function aC(e,t,n){var s=t.pendingProps;switch(Rg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Vt(t.type)&&Ed(),St(t),null;case 3:return s=t.stateNode,Qa(),Pe(zt),Pe(kt),zg(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Wu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wn!==null&&(qm(Wn),Wn=null))),Um(e,t),St(t),null;case 5:Hg(t);var a=xi(Jl.current);if(n=t.type,e!==null&&t.stateNode!=null)ES(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error($(166));return St(t),null}if(e=xi(ys.current),Wu(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[gs]=t,s[Gl]=o,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Le(Nl[a],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":zw(s,o),Le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Le("invalid",s);break;case"textarea":Ww(s,o),Le("invalid",s)}fm(n,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var d=o[l];l==="children"?typeof d=="string"?s.textContent!==d&&(o.suppressHydrationWarning!==!0&&Vu(s.textContent,d,e),a=["children",d]):typeof d=="number"&&s.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&Vu(s.textContent,d,e),a=["children",""+d]):Ml.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&Le("scroll",s)}switch(n){case"input":Pu(s),Vw(s,o,!0);break;case"textarea":Pu(s),Kw(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=_d)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nj(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),n==="select"&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[gs]=t,e[Gl]=s,_S(e,t,!1,!1),t.stateNode=e;e:{switch(l=pm(n,s),n){case"dialog":Le("cancel",e),Le("close",e),a=s;break;case"iframe":case"object":case"embed":Le("load",e),a=s;break;case"video":case"audio":for(a=0;a<Nl.length;a++)Le(Nl[a],e);a=s;break;case"source":Le("error",e),a=s;break;case"img":case"image":case"link":Le("error",e),Le("load",e),a=s;break;case"details":Le("toggle",e),a=s;break;case"input":zw(e,s),a=lm(e,s),Le("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ve({},s,{value:void 0}),Le("invalid",e);break;case"textarea":Ww(e,s),a=dm(e,s),Le("invalid",e);break;default:a=s}fm(n,a),d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];o==="style"?ij(e,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&sj(e,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&$l(e,h):typeof h=="number"&&$l(e,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ml.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Le("scroll",e):h!=null&&xg(e,o,h,l))}switch(n){case"input":Pu(e),Vw(e,s,!1);break;case"textarea":Pu(e),Kw(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Sr(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Ba(e,!!s.multiple,o,!1):s.defaultValue!=null&&Ba(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=_d)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)TS(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error($(166));if(n=xi(Jl.current),xi(ys.current),Wu(t)){if(s=t.stateNode,n=t.memoizedProps,s[gs]=t,(o=s.nodeValue!==n)&&(e=ln,e!==null))switch(e.tag){case 3:Vu(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vu(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[gs]=t,t.stateNode=s}return St(t),null;case 13:if(Pe(He),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Be&&on!==null&&t.mode&1&&!(t.flags&128))Kj(),qa(),t.flags|=98560,o=!1;else if(o=Wu(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error($(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[gs]=t}else qa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),o=!1}else Wn!==null&&(qm(Wn),Wn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||He.current&1?rt===0&&(rt=3):tv())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return Qa(),Um(e,t),e===null&&Wl(t.stateNode.containerInfo),St(t),null;case 10:return $g(t.type._context),St(t),null;case 17:return Vt(t.type)&&Ed(),St(t),null;case 19:if(Pe(He),o=t.memoizedState,o===null)return St(t),null;if(s=(t.flags&128)!==0,l=o.rendering,l===null)if(s)yl(o,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Rd(e),l!==null){for(t.flags|=128,yl(o,!1),s=l.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(He,He.current&1|2),t.child}e=e.sibling}o.tail!==null&&Je()>Ya&&(t.flags|=128,s=!0,yl(o,!1),t.lanes=4194304)}else{if(!s)if(e=Rd(l),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),yl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Be)return St(t),null}else 2*Je()-o.renderingStartTime>Ya&&n!==1073741824&&(t.flags|=128,s=!0,yl(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=He.current,De(He,s?n&1|2:n&1),t):(St(t),null);case 22:case 23:return ev(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?sn&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function oC(e,t){switch(Rg(t),t.tag){case 1:return Vt(t.type)&&Ed(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qa(),Pe(zt),Pe(kt),zg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hg(t),null;case 13:if(Pe(He),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));qa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(He),null;case 4:return Qa(),null;case 10:return $g(t.type._context),null;case 22:case 23:return ev(),null;case 24:return null;default:return null}}var qu=!1,Nt=!1,lC=typeof WeakSet=="function"?WeakSet:Set,G=null;function Pa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ge(e,t,s)}else n.current=null}function Fm(e,t,n){try{n()}catch(s){Ge(e,t,s)}}var Lb=!1;function cC(e,t){if(Nm=Sd,e=Dj(),Ag(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,d=-1,h=-1,p=0,v=0,w=e,x=null;t:for(;;){for(var k;w!==n||a!==0&&w.nodeType!==3||(d=l+a),w!==o||s!==0&&w.nodeType!==3||(h=l+s),w.nodeType===3&&(l+=w.nodeValue.length),(k=w.firstChild)!==null;)x=w,w=k;for(;;){if(w===e)break t;if(x===n&&++p===a&&(d=l),x===o&&++v===s&&(h=l),(k=w.nextSibling)!==null)break;w=x,x=w.parentNode}w=k}n=d===-1||h===-1?null:{start:d,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:e,selectionRange:n},Sd=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var E=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var T=E.memoizedProps,R=E.memoizedState,S=t.stateNode,b=S.getSnapshotBeforeUpdate(t.elementType===t.type?T:Fn(t.type,T),R);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(A){Ge(t,t.return,A)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return E=Lb,Lb=!1,E}function Al(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Fm(t,n,o)}a=a.next}while(a!==s)}}function nh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Hm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function CS(e){var t=e.alternate;t!==null&&(e.alternate=null,CS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[gs],delete t[Gl],delete t[Tm],delete t[WT],delete t[KT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IS(e){return e.tag===5||e.tag===3||e.tag===4}function Pb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_d));else if(s!==4&&(e=e.child,e!==null))for(zm(e,t,n),e=e.sibling;e!==null;)zm(e,t,n),e=e.sibling}function Vm(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Vm(e,t,n),e=e.sibling;e!==null;)Vm(e,t,n),e=e.sibling}var pt=null,zn=!1;function ar(e,t,n){for(n=n.child;n!==null;)OS(e,t,n),n=n.sibling}function OS(e,t,n){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount(qd,n)}catch{}switch(n.tag){case 5:Nt||Pa(n,t);case 6:var s=pt,a=zn;pt=null,ar(e,t,n),pt=s,zn=a,pt!==null&&(zn?(e=pt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(zn?(e=pt,n=n.stateNode,e.nodeType===8?Dp(e.parentNode,n):e.nodeType===1&&Dp(e,n),Hl(e)):Dp(pt,n.stateNode));break;case 4:s=pt,a=zn,pt=n.stateNode.containerInfo,zn=!0,ar(e,t,n),pt=s,zn=a;break;case 0:case 11:case 14:case 15:if(!Nt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Fm(n,t,l),a=a.next}while(a!==s)}ar(e,t,n);break;case 1:if(!Nt&&(Pa(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(d){Ge(n,t,d)}ar(e,t,n);break;case 21:ar(e,t,n);break;case 22:n.mode&1?(Nt=(s=Nt)||n.memoizedState!==null,ar(e,t,n),Nt=s):ar(e,t,n);break;default:ar(e,t,n)}}function Mb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lC),t.forEach(function(s){var a=yC.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Bn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var o=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:pt=d.stateNode,zn=!1;break e;case 3:pt=d.stateNode.containerInfo,zn=!0;break e;case 4:pt=d.stateNode.containerInfo,zn=!0;break e}d=d.return}if(pt===null)throw Error($(160));OS(o,l,a),pt=null,zn=!1;var h=a.alternate;h!==null&&(h.return=null),a.return=null}catch(p){Ge(a,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AS(t,e),t=t.sibling}function AS(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bn(t,e),hs(e),s&4){try{Al(3,e,e.return),nh(3,e)}catch(T){Ge(e,e.return,T)}try{Al(5,e,e.return)}catch(T){Ge(e,e.return,T)}}break;case 1:Bn(t,e),hs(e),s&512&&n!==null&&Pa(n,n.return);break;case 5:if(Bn(t,e),hs(e),s&512&&n!==null&&Pa(n,n.return),e.flags&32){var a=e.stateNode;try{$l(a,"")}catch(T){Ge(e,e.return,T)}}if(s&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,d=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&ej(a,o),pm(d,l);var p=pm(d,o);for(l=0;l<h.length;l+=2){var v=h[l],w=h[l+1];v==="style"?ij(a,w):v==="dangerouslySetInnerHTML"?sj(a,w):v==="children"?$l(a,w):xg(a,v,w,p)}switch(d){case"input":cm(a,o);break;case"textarea":tj(a,o);break;case"select":var x=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?Ba(a,!!o.multiple,k,!1):x!==!!o.multiple&&(o.defaultValue!=null?Ba(a,!!o.multiple,o.defaultValue,!0):Ba(a,!!o.multiple,o.multiple?[]:"",!1))}a[Gl]=o}catch(T){Ge(e,e.return,T)}}break;case 6:if(Bn(t,e),hs(e),s&4){if(e.stateNode===null)throw Error($(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(T){Ge(e,e.return,T)}}break;case 3:if(Bn(t,e),hs(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Hl(t.containerInfo)}catch(T){Ge(e,e.return,T)}break;case 4:Bn(t,e),hs(e);break;case 13:Bn(t,e),hs(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Yg=Je())),s&4&&Mb(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(Nt=(p=Nt)||v,Bn(t,e),Nt=p):Bn(t,e),hs(e),s&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!v&&e.mode&1)for(G=e,v=e.child;v!==null;){for(w=G=v;G!==null;){switch(x=G,k=x.child,x.tag){case 0:case 11:case 14:case 15:Al(4,x,x.return);break;case 1:Pa(x,x.return);var E=x.stateNode;if(typeof E.componentWillUnmount=="function"){s=x,n=x.return;try{t=s,E.props=t.memoizedProps,E.state=t.memoizedState,E.componentWillUnmount()}catch(T){Ge(s,n,T)}}break;case 5:Pa(x,x.return);break;case 22:if(x.memoizedState!==null){Bb(w);continue}}k!==null?(k.return=x,G=k):Bb(w)}v=v.sibling}e:for(v=null,w=e;;){if(w.tag===5){if(v===null){v=w;try{a=w.stateNode,p?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=w.stateNode,h=w.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,d.style.display=rj("display",l))}catch(T){Ge(e,e.return,T)}}}else if(w.tag===6){if(v===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(T){Ge(e,e.return,T)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===e)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===e)break e;for(;w.sibling===null;){if(w.return===null||w.return===e)break e;v===w&&(v=null),w=w.return}v===w&&(v=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Bn(t,e),hs(e),s&4&&Mb(e);break;case 21:break;default:Bn(t,e),hs(e)}}function hs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(IS(n)){var s=n;break e}n=n.return}throw Error($(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&($l(a,""),s.flags&=-33);var o=Pb(e);Vm(e,o,a);break;case 3:case 4:var l=s.stateNode.containerInfo,d=Pb(e);zm(e,d,l);break;default:throw Error($(161))}}catch(h){Ge(e,e.return,h)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uC(e,t,n){G=e,DS(e)}function DS(e,t,n){for(var s=(e.mode&1)!==0;G!==null;){var a=G,o=a.child;if(a.tag===22&&s){var l=a.memoizedState!==null||qu;if(!l){var d=a.alternate,h=d!==null&&d.memoizedState!==null||Nt;d=qu;var p=Nt;if(qu=l,(Nt=h)&&!p)for(G=a;G!==null;)l=G,h=l.child,l.tag===22&&l.memoizedState!==null?Ub(a):h!==null?(h.return=l,G=h):Ub(a);for(;o!==null;)G=o,DS(o),o=o.sibling;G=a,qu=d,Nt=p}$b(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,G=o):$b(e)}}function $b(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||nh(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Nt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Fn(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&jb(t,o,s);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}jb(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var h=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var w=v.dehydrated;w!==null&&Hl(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}Nt||t.flags&512&&Hm(t)}catch(x){Ge(t,t.return,x)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function Bb(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function Ub(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nh(4,t)}catch(h){Ge(t,n,h)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(h){Ge(t,a,h)}}var o=t.return;try{Hm(t)}catch(h){Ge(t,o,h)}break;case 5:var l=t.return;try{Hm(t)}catch(h){Ge(t,l,h)}}}catch(h){Ge(t,t.return,h)}if(t===e){G=null;break}var d=t.sibling;if(d!==null){d.return=t.return,G=d;break}G=t.return}}var dC=Math.ceil,Md=Us.ReactCurrentDispatcher,Qg=Us.ReactCurrentOwner,kn=Us.ReactCurrentBatchConfig,we=0,at=null,Ye=null,mt=0,sn=0,Ma=_r(0),rt=0,Zl=null,_i=0,sh=0,Xg=0,Dl=null,Ft=null,Yg=0,Ya=1/0,Is=null,$d=!1,Wm=null,wr=null,Ju=!1,pr=null,Bd=0,Rl=0,Km=null,pd=-1,md=0;function Dt(){return we&6?Je():pd!==-1?pd:pd=Je()}function br(e){return e.mode&1?we&2&&mt!==0?mt&-mt:qT.transition!==null?(md===0&&(md=vj()),md):(e=Ne,e!==0||(e=window.event,e=e===void 0?16:Nj(e.type)),e):1}function Gn(e,t,n,s){if(50<Rl)throw Rl=0,Km=null,Error($(185));oc(e,n,s),(!(we&2)||e!==at)&&(e===at&&(!(we&2)&&(sh|=n),rt===4&&dr(e,mt)),Wt(e,s),n===1&&we===0&&!(t.mode&1)&&(Ya=Je()+500,Zd&&Er()))}function Wt(e,t){var n=e.callbackNode;qE(e,t);var s=jd(e,e===at?mt:0);if(s===0)n!==null&&Jw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Jw(n),t===1)e.tag===0?GT(Fb.bind(null,e)):zj(Fb.bind(null,e)),zT(function(){!(we&6)&&Er()}),n=null;else{switch(yj(s)){case 1:n=Ng;break;case 4:n=mj;break;case 16:n=bd;break;case 536870912:n=gj;break;default:n=bd}n=FS(n,RS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function RS(e,t){if(pd=-1,md=0,we&6)throw Error($(327));var n=e.callbackNode;if(Va()&&e.callbackNode!==n)return null;var s=jd(e,e===at?mt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Ud(e,s);else{t=s;var a=we;we|=2;var o=PS();(at!==e||mt!==t)&&(Is=null,Ya=Je()+500,bi(e,t));do try{pC();break}catch(d){LS(e,d)}while(!0);Mg(),Md.current=o,we=a,Ye!==null?t=0:(at=null,mt=0,t=rt)}if(t!==0){if(t===2&&(a=xm(e),a!==0&&(s=a,t=Gm(e,a))),t===1)throw n=Zl,bi(e,0),dr(e,s),Wt(e,Je()),n;if(t===6)dr(e,s);else{if(a=e.current.alternate,!(s&30)&&!hC(a)&&(t=Ud(e,s),t===2&&(o=xm(e),o!==0&&(s=o,t=Gm(e,o))),t===1))throw n=Zl,bi(e,0),dr(e,s),Wt(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error($(345));case 2:fi(e,Ft,Is);break;case 3:if(dr(e,s),(s&130023424)===s&&(t=Yg+500-Je(),10<t)){if(jd(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Dt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Em(fi.bind(null,e,Ft,Is),t);break}fi(e,Ft,Is);break;case 4:if(dr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var l=31-Kn(s);o=1<<l,l=t[l],l>a&&(a=l),s&=~o}if(s=a,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*dC(s/1960))-s,10<s){e.timeoutHandle=Em(fi.bind(null,e,Ft,Is),s);break}fi(e,Ft,Is);break;case 5:fi(e,Ft,Is);break;default:throw Error($(329))}}}return Wt(e,Je()),e.callbackNode===n?RS.bind(null,e):null}function Gm(e,t){var n=Dl;return e.current.memoizedState.isDehydrated&&(bi(e,t).flags|=256),e=Ud(e,t),e!==2&&(t=Ft,Ft=n,t!==null&&qm(t)),e}function qm(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function hC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],o=a.getSnapshot;a=a.value;try{if(!qn(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dr(e,t){for(t&=~Xg,t&=~sh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kn(t),s=1<<n;e[n]=-1,t&=~s}}function Fb(e){if(we&6)throw Error($(327));Va();var t=jd(e,0);if(!(t&1))return Wt(e,Je()),null;var n=Ud(e,t);if(e.tag!==0&&n===2){var s=xm(e);s!==0&&(t=s,n=Gm(e,s))}if(n===1)throw n=Zl,bi(e,0),dr(e,t),Wt(e,Je()),n;if(n===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fi(e,Ft,Is),Wt(e,Je()),null}function Zg(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Ya=Je()+500,Zd&&Er())}}function Ei(e){pr!==null&&pr.tag===0&&!(we&6)&&Va();var t=we;we|=1;var n=kn.transition,s=Ne;try{if(kn.transition=null,Ne=1,e)return e()}finally{Ne=s,kn.transition=n,we=t,!(we&6)&&Er()}}function ev(){sn=Ma.current,Pe(Ma)}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,HT(n)),Ye!==null)for(n=Ye.return;n!==null;){var s=n;switch(Rg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ed();break;case 3:Qa(),Pe(zt),Pe(kt),zg();break;case 5:Hg(s);break;case 4:Qa();break;case 13:Pe(He);break;case 19:Pe(He);break;case 10:$g(s.type._context);break;case 22:case 23:ev()}n=n.return}if(at=e,Ye=e=jr(e.current,null),mt=sn=t,rt=0,Zl=null,Xg=sh=_i=0,Ft=Dl=null,yi!==null){for(t=0;t<yi.length;t++)if(n=yi[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,o=n.pending;if(o!==null){var l=o.next;o.next=a,s.next=l}n.pending=s}yi=null}return e}function LS(e,t){do{var n=Ye;try{if(Mg(),dd.current=Pd,Ld){for(var s=ze.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Ld=!1}if(ki=0,it=st=ze=null,Ol=!1,Ql=0,Qg.current=null,n===null||n.return===null){rt=1,Zl=t,Ye=null;break}e:{var o=e,l=n.return,d=n,h=t;if(t=mt,d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,v=d,w=v.tag;if(!(v.mode&1)&&(w===0||w===11||w===15)){var x=v.alternate;x?(v.updateQueue=x.updateQueue,v.memoizedState=x.memoizedState,v.lanes=x.lanes):(v.updateQueue=null,v.memoizedState=null)}var k=Tb(l);if(k!==null){k.flags&=-257,Cb(k,l,d,o,t),k.mode&1&&Eb(o,p,t),t=k,h=p;var E=t.updateQueue;if(E===null){var T=new Set;T.add(h),t.updateQueue=T}else E.add(h);break e}else{if(!(t&1)){Eb(o,p,t),tv();break e}h=Error($(426))}}else if(Be&&d.mode&1){var R=Tb(l);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Cb(R,l,d,o,t),Lg(Xa(h,d));break e}}o=h=Xa(h,d),rt!==4&&(rt=2),Dl===null?Dl=[o]:Dl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var S=yS(o,h,t);bb(o,S);break e;case 1:d=h;var b=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(wr===null||!wr.has(N)))){o.flags|=65536,t&=-t,o.lanes|=t;var A=xS(o,d,t);bb(o,A);break e}}o=o.return}while(o!==null)}$S(n)}catch(H){t=H,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(!0)}function PS(){var e=Md.current;return Md.current=Pd,e===null?Pd:e}function tv(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||!(_i&268435455)&&!(sh&268435455)||dr(at,mt)}function Ud(e,t){var n=we;we|=2;var s=PS();(at!==e||mt!==t)&&(Is=null,bi(e,t));do try{fC();break}catch(a){LS(e,a)}while(!0);if(Mg(),we=n,Md.current=s,Ye!==null)throw Error($(261));return at=null,mt=0,rt}function fC(){for(;Ye!==null;)MS(Ye)}function pC(){for(;Ye!==null&&!BE();)MS(Ye)}function MS(e){var t=US(e.alternate,e,sn);e.memoizedProps=e.pendingProps,t===null?$S(e):Ye=t,Qg.current=null}function $S(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oC(n,t),n!==null){n.flags&=32767,Ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,Ye=null;return}}else if(n=aC(n,t,sn),n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);rt===0&&(rt=5)}function fi(e,t,n){var s=Ne,a=kn.transition;try{kn.transition=null,Ne=1,mC(e,t,n,s)}finally{kn.transition=a,Ne=s}return null}function mC(e,t,n,s){do Va();while(pr!==null);if(we&6)throw Error($(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(JE(e,o),e===at&&(Ye=at=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,FS(bd,function(){return Va(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var l=Ne;Ne=1;var d=we;we|=4,Qg.current=null,cC(e,n),AS(n,e),LT(km),Sd=!!Nm,km=Nm=null,e.current=n,uC(n),UE(),we=d,Ne=l,kn.transition=o}else e.current=n;if(Ju&&(Ju=!1,pr=e,Bd=a),o=e.pendingLanes,o===0&&(wr=null),zE(n.stateNode),Wt(e,Je()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if($d)throw $d=!1,e=Wm,Wm=null,e;return Bd&1&&e.tag!==0&&Va(),o=e.pendingLanes,o&1?e===Km?Rl++:(Rl=0,Km=e):Rl=0,Er(),null}function Va(){if(pr!==null){var e=yj(Bd),t=kn.transition,n=Ne;try{if(kn.transition=null,Ne=16>e?16:e,pr===null)var s=!1;else{if(e=pr,pr=null,Bd=0,we&6)throw Error($(331));var a=we;for(we|=4,G=e.current;G!==null;){var o=G,l=o.child;if(G.flags&16){var d=o.deletions;if(d!==null){for(var h=0;h<d.length;h++){var p=d[h];for(G=p;G!==null;){var v=G;switch(v.tag){case 0:case 11:case 15:Al(8,v,o)}var w=v.child;if(w!==null)w.return=v,G=w;else for(;G!==null;){v=G;var x=v.sibling,k=v.return;if(CS(v),v===p){G=null;break}if(x!==null){x.return=k,G=x;break}G=k}}}var E=o.alternate;if(E!==null){var T=E.child;if(T!==null){E.child=null;do{var R=T.sibling;T.sibling=null,T=R}while(T!==null)}}G=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,G=l;else e:for(;G!==null;){if(o=G,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Al(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,G=S;break e}G=o.return}}var b=e.current;for(G=b;G!==null;){l=G;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,G=N;else e:for(l=b;G!==null;){if(d=G,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:nh(9,d)}}catch(H){Ge(d,d.return,H)}if(d===l){G=null;break e}var A=d.sibling;if(A!==null){A.return=d.return,G=A;break e}G=d.return}}if(we=a,Er(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot(qd,e)}catch{}s=!0}return s}finally{Ne=n,kn.transition=t}}return!1}function Hb(e,t,n){t=Xa(n,t),t=yS(e,t,1),e=xr(e,t,1),t=Dt(),e!==null&&(oc(e,1,t),Wt(e,t))}function Ge(e,t,n){if(e.tag===3)Hb(e,e,n);else for(;t!==null;){if(t.tag===3){Hb(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wr===null||!wr.has(s))){e=Xa(n,e),e=xS(t,e,1),t=xr(t,e,1),e=Dt(),t!==null&&(oc(t,1,e),Wt(t,e));break}}t=t.return}}function gC(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(mt&n)===n&&(rt===4||rt===3&&(mt&130023424)===mt&&500>Je()-Yg?bi(e,0):Xg|=n),Wt(e,t)}function BS(e,t){t===0&&(e.mode&1?(t=Bu,Bu<<=1,!(Bu&130023424)&&(Bu=4194304)):t=1);var n=Dt();e=$s(e,t),e!==null&&(oc(e,t,n),Wt(e,n))}function vC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),BS(e,n)}function yC(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error($(314))}s!==null&&s.delete(t),BS(e,n)}var US;US=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||zt.current)Ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ht=!1,iC(e,t,n);Ht=!!(e.flags&131072)}else Ht=!1,Be&&t.flags&1048576&&Vj(t,Id,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;fd(e,t),e=t.pendingProps;var a=Ga(t,kt.current);za(t,n),a=Wg(null,t,s,e,a,n);var o=Kg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vt(s)?(o=!0,Td(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ug(t),a.updater=th,t.stateNode=a,a._reactInternals=t,Rm(t,s,e,n),t=Mm(null,t,s,!0,o,n)):(t.tag=0,Be&&o&&Dg(t),At(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(fd(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=wC(s),e=Fn(s,e),a){case 0:t=Pm(null,t,s,e,n);break e;case 1:t=Ab(null,t,s,e,n);break e;case 11:t=Ib(null,t,s,e,n);break e;case 14:t=Ob(null,t,s,Fn(s.type,e),n);break e}throw Error($(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fn(s,a),Pm(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fn(s,a),Ab(e,t,s,a,n);case 3:e:{if(SS(t),e===null)throw Error($(387));s=t.pendingProps,o=t.memoizedState,a=o.element,Qj(e,t),Dd(t,s,null,n);var l=t.memoizedState;if(s=l.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=Xa(Error($(423)),t),t=Db(e,t,s,n,a);break e}else if(s!==a){a=Xa(Error($(424)),t),t=Db(e,t,s,n,a);break e}else for(on=yr(t.stateNode.containerInfo.firstChild),ln=t,Be=!0,Wn=null,n=qj(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qa(),s===a){t=Bs(e,t,n);break e}At(e,t,s,n)}t=t.child}return t;case 5:return Xj(t),e===null&&Om(t),s=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,l=a.children,_m(s,a)?l=null:o!==null&&_m(s,o)&&(t.flags|=32),jS(e,t),At(e,t,l,n),t.child;case 6:return e===null&&Om(t),null;case 13:return NS(e,t,n);case 4:return Fg(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ja(t,null,s,n):At(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fn(s,a),Ib(e,t,s,a,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,o=t.memoizedProps,l=a.value,De(Od,s._currentValue),s._currentValue=l,o!==null)if(qn(o.value,l)){if(o.children===a.children&&!zt.current){t=Bs(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){l=o.child;for(var h=d.firstContext;h!==null;){if(h.context===s){if(o.tag===1){h=Ls(-1,n&-n),h.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?h.next=h:(h.next=v.next,v.next=h),p.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Am(o.return,n,t),d.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error($(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),Am(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}At(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,za(t,n),a=_n(a),s=s(a),t.flags|=1,At(e,t,s,n),t.child;case 14:return s=t.type,a=Fn(s,t.pendingProps),a=Fn(s.type,a),Ob(e,t,s,a,n);case 15:return wS(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fn(s,a),fd(e,t),t.tag=1,Vt(s)?(e=!0,Td(t)):e=!1,za(t,n),vS(t,s,a),Rm(t,s,a,n),Mm(null,t,s,!0,e,n);case 19:return kS(e,t,n);case 22:return bS(e,t,n)}throw Error($(156,t.tag))};function FS(e,t){return pj(e,t)}function xC(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(e,t,n,s){return new xC(e,t,n,s)}function nv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wC(e){if(typeof e=="function")return nv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bg)return 11;if(e===jg)return 14}return 2}function jr(e,t){var n=e.alternate;return n===null?(n=Nn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gd(e,t,n,s,a,o){var l=2;if(s=e,typeof e=="function")nv(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ea:return ji(n.children,a,o,t);case wg:l=8,a|=8;break;case rm:return e=Nn(12,n,t,a|2),e.elementType=rm,e.lanes=o,e;case im:return e=Nn(13,n,t,a),e.elementType=im,e.lanes=o,e;case am:return e=Nn(19,n,t,a),e.elementType=am,e.lanes=o,e;case X0:return rh(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case J0:l=10;break e;case Q0:l=9;break e;case bg:l=11;break e;case jg:l=14;break e;case or:l=16,s=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=Nn(l,n,t,a),t.elementType=e,t.type=s,t.lanes=o,t}function ji(e,t,n,s){return e=Nn(7,e,s,t),e.lanes=n,e}function rh(e,t,n,s){return e=Nn(22,e,s,t),e.elementType=X0,e.lanes=n,e.stateNode={isHidden:!1},e}function Fp(e,t,n){return e=Nn(6,e,null,t),e.lanes=n,e}function Hp(e,t,n){return t=Nn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bC(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jp(0),this.expirationTimes=jp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jp(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function sv(e,t,n,s,a,o,l,d,h){return e=new bC(e,t,n,d,h),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Nn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ug(o),e}function jC(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_a,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function HS(e){if(!e)return Nr;e=e._reactInternals;e:{if(Ci(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var n=e.type;if(Vt(n))return Hj(e,n,t)}return t}function zS(e,t,n,s,a,o,l,d,h){return e=sv(n,s,!0,e,a,o,l,d,h),e.context=HS(null),n=e.current,s=Dt(),a=br(n),o=Ls(s,a),o.callback=t??null,xr(n,o,a),e.current.lanes=a,oc(e,a,s),Wt(e,s),e}function ih(e,t,n,s){var a=t.current,o=Dt(),l=br(a);return n=HS(n),t.context===null?t.context=n:t.pendingContext=n,t=Ls(o,l),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=xr(a,t,l),e!==null&&(Gn(e,a,l,o),ud(e,a,l)),l}function Fd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function rv(e,t){zb(e,t),(e=e.alternate)&&zb(e,t)}function SC(){return null}var VS=typeof reportError=="function"?reportError:function(e){console.error(e)};function iv(e){this._internalRoot=e}ah.prototype.render=iv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));ih(e,t,null,null)};ah.prototype.unmount=iv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ei(function(){ih(null,e,null,null)}),t[Ms]=null}};function ah(e){this._internalRoot=e}ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=bj();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ur.length&&t!==0&&t<ur[n].priority;n++);ur.splice(n,0,e),n===0&&Sj(e)}};function av(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vb(){}function NC(e,t,n,s,a){if(a){if(typeof s=="function"){var o=s;s=function(){var p=Fd(l);o.call(p)}}var l=zS(t,s,e,0,null,!1,!1,"",Vb);return e._reactRootContainer=l,e[Ms]=l.current,Wl(e.nodeType===8?e.parentNode:e),Ei(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var d=s;s=function(){var p=Fd(h);d.call(p)}}var h=sv(e,0,!1,null,null,!1,!1,"",Vb);return e._reactRootContainer=h,e[Ms]=h.current,Wl(e.nodeType===8?e.parentNode:e),Ei(function(){ih(t,h,n,s)}),h}function lh(e,t,n,s,a){var o=n._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var d=a;a=function(){var h=Fd(l);d.call(h)}}ih(t,l,e,a)}else l=NC(n,t,e,a,s);return Fd(l)}xj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sl(t.pendingLanes);n!==0&&(kg(t,n|1),Wt(t,Je()),!(we&6)&&(Ya=Je()+500,Er()))}break;case 13:Ei(function(){var s=$s(e,1);if(s!==null){var a=Dt();Gn(s,e,1,a)}}),rv(e,1)}};_g=function(e){if(e.tag===13){var t=$s(e,134217728);if(t!==null){var n=Dt();Gn(t,e,134217728,n)}rv(e,134217728)}};wj=function(e){if(e.tag===13){var t=br(e),n=$s(e,t);if(n!==null){var s=Dt();Gn(n,e,t,s)}rv(e,t)}};bj=function(){return Ne};jj=function(e,t){var n=Ne;try{return Ne=e,t()}finally{Ne=n}};gm=function(e,t,n){switch(t){case"input":if(cm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Yd(s);if(!a)throw Error($(90));Z0(s),cm(s,a)}}}break;case"textarea":tj(e,n);break;case"select":t=n.value,t!=null&&Ba(e,!!n.multiple,t,!1)}};lj=Zg;cj=Ei;var kC={usingClientEntryPoint:!1,Events:[cc,Oa,Yd,aj,oj,Zg]},xl={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_C={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hj(e),e===null?null:e.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||SC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{qd=Qu.inject(_C),vs=Qu}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kC;un.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!av(t))throw Error($(200));return jC(e,t,null,n)};un.createRoot=function(e,t){if(!av(e))throw Error($(299));var n=!1,s="",a=VS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=sv(e,1,!1,null,null,n,!1,s,a),e[Ms]=t.current,Wl(e.nodeType===8?e.parentNode:e),new iv(t)};un.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=hj(t),e=e===null?null:e.stateNode,e};un.flushSync=function(e){return Ei(e)};un.hydrate=function(e,t,n){if(!oh(t))throw Error($(200));return lh(null,e,t,!0,n)};un.hydrateRoot=function(e,t,n){if(!av(e))throw Error($(405));var s=n!=null&&n.hydratedSources||null,a=!1,o="",l=VS;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=zS(t,null,e,1,n??null,a,!1,o,l),e[Ms]=t.current,Wl(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new ah(t)};un.render=function(e,t,n){if(!oh(t))throw Error($(200));return lh(null,e,t,!1,n)};un.unmountComponentAtNode=function(e){if(!oh(e))throw Error($(40));return e._reactRootContainer?(Ei(function(){lh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ms]=null})}),!0):!1};un.unstable_batchedUpdates=Zg;un.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!oh(n))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return lh(e,t,n,!1,s)};un.version="18.3.1-next-f1338f8080-20240426";function WS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WS)}catch(e){console.error(e)}}WS(),W0.exports=un;var EC=W0.exports,Wb=EC;nm.createRoot=Wb.createRoot,nm.hydrateRoot=Wb.hydrateRoot;function ps(e,t){const n=t&&t.cache?t.cache:RC,s=t&&t.serializer?t.serializer:AC;return(t&&t.strategy?t.strategy:IC)(e,{cache:n,serializer:s})}function TC(e){return e==null||typeof e=="number"||typeof e=="boolean"}function CC(e,t,n,s){const a=TC(s)?s:n(s);let o=t.get(a);return typeof o>"u"&&(o=e.call(this,s),t.set(a,o)),o}function KS(e,t,n){const s=Array.prototype.slice.call(arguments,3),a=n(s);let o=t.get(a);return typeof o>"u"&&(o=e.apply(this,s),t.set(a,o)),o}function GS(e,t,n,s,a){return n.bind(t,e,s,a)}function IC(e,t){const n=e.length===1?CC:KS;return GS(e,this,n,t.cache.create(),t.serializer)}function OC(e,t){return GS(e,this,KS,t.cache.create(),t.serializer)}const AC=function(){return JSON.stringify(arguments)};class DC{constructor(){pe(this,"cache");this.cache=Object.create(null)}get(t){return this.cache[t]}set(t,n){this.cache[t]=n}}const RC={create:function(){return new DC}},ms={variadic:OC},LC=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function PC(e){const t={};return e.replace(LC,n=>{const s=n.length;switch(n[0]){case"G":t.era=s===4?"long":s===5?"narrow":"short";break;case"y":t.year=s===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][s-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][s-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=s===4?"long":s===5?"narrow":"short";break;case"e":if(s<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][s-4];break;case"c":if(s<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][s-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][s-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][s-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][s-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][s-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][s-1];break;case"s":t.second=["numeric","2-digit"][s-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=s<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}const MC=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function $C(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");const t=e.split(MC).filter(s=>s.length>0),n=[];for(const s of t){let a=s.split("/");if(a.length===0)throw new Error("Invalid number skeleton");const[o,...l]=a;for(const d of l)if(d.length===0)throw new Error("Invalid number skeleton");n.push({stem:o,options:l})}return n}function BC(e){return e.replace(/^(.*?)-/,"")}const Kb=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,qS=/^(@+)?(\+|#+)?[rs]?$/g,UC=/(\*)(0+)|(#+)(0+)|(0+)/g,JS=/^(0+)$/;function Gb(e){const t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(qS,function(n,s,a){return typeof a!="string"?(t.minimumSignificantDigits=s.length,t.maximumSignificantDigits=s.length):a==="+"?t.minimumSignificantDigits=s.length:s[0]==="#"?t.maximumSignificantDigits=s.length:(t.minimumSignificantDigits=s.length,t.maximumSignificantDigits=s.length+(typeof a=="string"?a.length:0)),""}),t}function QS(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function FC(e){let t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){const n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!JS.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function qb(e){const t={},n=QS(e);return n||t}function HC(e){let t={};for(const n of e){switch(n.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=n.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=BC(n.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t={...t,notation:"scientific",...n.options.reduce((o,l)=>({...o,...qb(l)}),{})};continue;case"engineering":t={...t,notation:"engineering",...n.options.reduce((o,l)=>({...o,...qb(l)}),{})};continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(n.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(UC,function(o,l,d,h,p,v){if(l)t.minimumIntegerDigits=d.length;else{if(h&&p)throw new Error("We currently do not support maximum integer digits");if(v)throw new Error("We currently do not support exact integer digits")}return""});continue}if(JS.test(n.stem)){t.minimumIntegerDigits=n.stem.length;continue}if(Kb.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(Kb,function(l,d,h,p,v,w){return h==="*"?t.minimumFractionDigits=d.length:p&&p[0]==="#"?t.maximumFractionDigits=p.length:v&&w?(t.minimumFractionDigits=v.length,t.maximumFractionDigits=v.length+w.length):(t.minimumFractionDigits=d.length,t.maximumFractionDigits=d.length),""});const o=n.options[0];o==="w"?t={...t,trailingZeroDisplay:"stripIfInteger"}:o&&(t={...t,...Gb(o)});continue}if(qS.test(n.stem)){t={...t,...Gb(n.stem)};continue}const s=QS(n.stem);s&&(t={...t,...s});const a=FC(n.stem);a&&(t={...t,...a})}return t}let Ue=function(e){return e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag",e}({}),Hd=function(e){return e[e.number=0]="number",e[e.dateTime=1]="dateTime",e}({});function Jb(e){return e.type===Ue.literal}function zC(e){return e.type===Ue.argument}function XS(e){return e.type===Ue.number}function YS(e){return e.type===Ue.date}function ZS(e){return e.type===Ue.time}function eN(e){return e.type===Ue.select}function tN(e){return e.type===Ue.plural}function VC(e){return e.type===Ue.pound}function nN(e){return e.type===Ue.tag}function sN(e){return!!(e&&typeof e=="object"&&e.type===Hd.number)}function Jm(e){return!!(e&&typeof e=="object"&&e.type===Hd.dateTime)}let xe=function(e){return e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG",e}({});const rN=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Xu={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GS:["H","h","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ku-SY":["H","hB"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function WC(e,t){let n="";for(let s=0;s<e.length;s++){const a=e.charAt(s);if(a==="j"){let o=0;for(;s+1<e.length&&e.charAt(s+1)===a;)o++,s++;let l=1+(o&1),d=o<2?1:3+(o>>1),h="a",p=KC(t);for((p=="H"||p=="k")&&(d=0);d-- >0;)n+=h;for(;l-- >0;)n=p+n}else a==="J"?n+="H":n+=a}return n}function KC(e){let t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}const n=e.language;let s;return n!=="root"&&(s=e.maximize().region),(Xu[s||""]||Xu[n||""]||Xu[`${n}-001`]||Xu["001"])[0]}const GC=new RegExp(`^${rN.source}*`),qC=new RegExp(`${rN.source}*$`);function ge(e,t){return{start:e,end:t}}const JC=!!Object.fromEntries,QC=!!String.prototype.trimStart,XC=!!String.prototype.trimEnd,Qb=JC?Object.fromEntries:function(t){const n={};for(const[s,a]of t)n[s]=a;return n},YC=QC?function(t){return t.trimStart()}:function(t){return t.replace(GC,"")},ZC=XC?function(t){return t.trimEnd()}:function(t){return t.replace(qC,"")},Xb=new RegExp("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");function e1(e,t){return Xb.lastIndex=t,Xb.exec(e)[1]??""}class t1{constructor(t,n={}){pe(this,"message");pe(this,"position");pe(this,"locale");pe(this,"ignoreTag");pe(this,"requiresOtherClause");pe(this,"shouldParseSkeletons");this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}parse(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)}parseMessage(t,n,s){let a=[];for(;!this.isEOF();){const o=this.char();if(o===123){const l=this.parseArgument(t,s);if(l.err)return l;a.push(l.val)}else{if(o===125&&t>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){const l=this.clonePosition();this.bump(),a.push({type:Ue.pound,location:ge(l,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(s)break;return this.error(xe.UNMATCHED_CLOSING_TAG,ge(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&Qm(this.peek()||0)){const l=this.parseTag(t,n);if(l.err)return l;a.push(l.val)}else{const l=this.parseLiteral(t,n);if(l.err)return l;a.push(l.val)}}}return{val:a,err:null}}parseTag(t,n){const s=this.clonePosition();this.bump();const a=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Ue.literal,value:`<${a}/>`,location:ge(s,this.clonePosition())},err:null};if(this.bumpIf(">")){const o=this.parseMessage(t+1,n,!0);if(o.err)return o;const l=o.val,d=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Qm(this.char()))return this.error(xe.INVALID_TAG,ge(d,this.clonePosition()));const h=this.clonePosition(),p=this.parseTagName();return a!==p?this.error(xe.UNMATCHED_CLOSING_TAG,ge(h,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Ue.tag,value:a,children:l,location:ge(s,this.clonePosition())},err:null}:this.error(xe.INVALID_TAG,ge(d,this.clonePosition())))}else return this.error(xe.UNCLOSED_TAG,ge(s,this.clonePosition()))}else return this.error(xe.INVALID_TAG,ge(s,this.clonePosition()))}parseTagName(){const t=this.offset();for(this.bump();!this.isEOF()&&s1(this.char());)this.bump();return this.message.slice(t,this.offset())}parseLiteral(t,n){const s=this.clonePosition();let a="";for(;;){const l=this.tryParseQuote(n);if(l){a+=l;continue}const d=this.tryParseUnquoted(t,n);if(d){a+=d;continue}const h=this.tryParseLeftAngleBracket();if(h){a+=h;continue}break}const o=ge(s,this.clonePosition());return{val:{type:Ue.literal,value:a,location:o},err:null}}tryParseLeftAngleBracket(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!n1(this.peek()||0))?(this.bump(),"<"):null}tryParseQuote(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();const n=[this.char()];for(this.bump();!this.isEOF();){const s=this.char();if(s===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(s);this.bump()}return String.fromCodePoint(...n)}tryParseUnquoted(t,n){if(this.isEOF())return null;const s=this.char();return s===60||s===123||s===35&&(n==="plural"||n==="selectordinal")||s===125&&t>0?null:(this.bump(),String.fromCodePoint(s))}parseArgument(t,n){const s=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(s,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(xe.EMPTY_ARGUMENT,ge(s,this.clonePosition()));let a=this.parseIdentifierIfPossible().value;if(!a)return this.error(xe.MALFORMED_ARGUMENT,ge(s,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(s,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Ue.argument,value:a,location:ge(s,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(s,this.clonePosition())):this.parseArgumentOptions(t,n,a,s);default:return this.error(xe.MALFORMED_ARGUMENT,ge(s,this.clonePosition()))}}parseIdentifierIfPossible(){const t=this.clonePosition(),n=this.offset(),s=e1(this.message,n),a=n+s.length;this.bumpTo(a);const o=this.clonePosition(),l=ge(t,o);return{value:s,location:l}}parseArgumentOptions(t,n,s,a){let o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,d=this.clonePosition();switch(l){case"":return this.error(xe.EXPECT_ARGUMENT_TYPE,ge(o,d));case"number":case"date":case"time":{this.bumpSpace();let h=null;if(this.bumpIf(",")){this.bumpSpace();const w=this.clonePosition(),x=this.parseSimpleArgStyleIfPossible();if(x.err)return x;const k=ZC(x.val);if(k.length===0)return this.error(xe.EXPECT_ARGUMENT_STYLE,ge(this.clonePosition(),this.clonePosition()));const E=ge(w,this.clonePosition());h={style:k,styleLocation:E}}const p=this.tryParseArgumentClose(a);if(p.err)return p;const v=ge(a,this.clonePosition());if(h&&h.style.startsWith("::")){let w=YC(h.style.slice(2));if(l==="number"){const x=this.parseNumberSkeletonFromString(w,h.styleLocation);return x.err?x:{val:{type:Ue.number,value:s,location:v,style:x.val},err:null}}else{if(w.length===0)return this.error(xe.EXPECT_DATE_TIME_SKELETON,v);let x=w;this.locale&&(x=WC(w,this.locale));const k={type:Hd.dateTime,pattern:x,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?PC(x):{}};return{val:{type:l==="date"?Ue.date:Ue.time,value:s,location:v,style:k},err:null}}}return{val:{type:l==="number"?Ue.number:l==="date"?Ue.date:Ue.time,value:s,location:v,style:(h==null?void 0:h.style)??null},err:null}}case"plural":case"selectordinal":case"select":{const h=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(xe.EXPECT_SELECT_ARGUMENT_OPTIONS,ge(h,{...h}));this.bumpSpace();let p=this.parseIdentifierIfPossible(),v=0;if(l!=="select"&&p.value==="offset"){if(!this.bumpIf(":"))return this.error(xe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,ge(this.clonePosition(),this.clonePosition()));this.bumpSpace();const E=this.tryParseDecimalInteger(xe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,xe.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(E.err)return E;this.bumpSpace(),p=this.parseIdentifierIfPossible(),v=E.val}const w=this.tryParsePluralOrSelectOptions(t,l,n,p);if(w.err)return w;const x=this.tryParseArgumentClose(a);if(x.err)return x;const k=ge(a,this.clonePosition());return l==="select"?{val:{type:Ue.select,value:s,options:Qb(w.val),location:k},err:null}:{val:{type:Ue.plural,value:s,options:Qb(w.val),offset:v,pluralType:l==="plural"?"cardinal":"ordinal",location:k},err:null}}default:return this.error(xe.INVALID_ARGUMENT_TYPE,ge(o,d))}}tryParseArgumentClose(t){return this.isEOF()||this.char()!==125?this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,ge(t,this.clonePosition())):(this.bump(),{val:!0,err:null})}parseSimpleArgStyleIfPossible(){let t=0;const n=this.clonePosition();for(;!this.isEOF();)switch(this.char()){case 39:{this.bump();let a=this.clonePosition();if(!this.bumpUntil("'"))return this.error(xe.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,ge(a,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}return{val:this.message.slice(n.offset,this.offset()),err:null}}parseNumberSkeletonFromString(t,n){let s=[];try{s=$C(t)}catch{return this.error(xe.INVALID_NUMBER_SKELETON,n)}return{val:{type:Hd.number,tokens:s,location:n,parsedOptions:this.shouldParseSkeletons?HC(s):{}},err:null}}tryParsePluralOrSelectOptions(t,n,s,a){let o=!1;const l=[],d=new Set;let{value:h,location:p}=a;for(;;){if(h.length===0){const k=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){const E=this.tryParseDecimalInteger(xe.EXPECT_PLURAL_ARGUMENT_SELECTOR,xe.INVALID_PLURAL_ARGUMENT_SELECTOR);if(E.err)return E;p=ge(k,this.clonePosition()),h=this.message.slice(k.offset,this.offset())}else break}if(d.has(h))return this.error(n==="select"?xe.DUPLICATE_SELECT_ARGUMENT_SELECTOR:xe.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,p);h==="other"&&(o=!0),this.bumpSpace();const v=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?xe.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:xe.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,ge(this.clonePosition(),this.clonePosition()));const w=this.parseMessage(t+1,n,s);if(w.err)return w;const x=this.tryParseArgumentClose(v);if(x.err)return x;l.push([h,{value:w.val,location:ge(v,this.clonePosition())}]),d.add(h),this.bumpSpace(),{value:h,location:p}=this.parseIdentifierIfPossible()}return l.length===0?this.error(n==="select"?xe.EXPECT_SELECT_ARGUMENT_SELECTOR:xe.EXPECT_PLURAL_ARGUMENT_SELECTOR,ge(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(xe.MISSING_OTHER_CLAUSE,ge(this.clonePosition(),this.clonePosition())):{val:l,err:null}}tryParseDecimalInteger(t,n){let s=1;const a=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(s=-1);let o=!1,l=0;for(;!this.isEOF();){const h=this.char();if(h>=48&&h<=57)o=!0,l=l*10+(h-48),this.bump();else break}const d=ge(a,this.clonePosition());return o?(l*=s,Number.isSafeInteger(l)?{val:l,err:null}:this.error(n,d)):this.error(t,d)}offset(){return this.position.offset}isEOF(){return this.offset()===this.message.length}clonePosition(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}}char(){const t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");const n=this.message.codePointAt(t);if(n===void 0)throw Error(`Offset ${t} is at invalid UTF-16 code unit boundary`);return n}error(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}}bump(){if(this.isEOF())return;const t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}bumpIf(t){if(this.message.startsWith(t,this.offset())){for(let n=0;n<t.length;n++)this.bump();return!0}return!1}bumpUntil(t){const n=this.offset(),s=this.message.indexOf(t,n);return s>=0?(this.bumpTo(s),!0):(this.bumpTo(this.message.length),!1)}bumpTo(t){if(this.offset()>t)throw Error(`targetOffset ${t} must be greater than or equal to the current offset ${this.offset()}`);for(t=Math.min(t,this.message.length);;){const n=this.offset();if(n===t)break;if(n>t)throw Error(`targetOffset ${t} is at invalid UTF-16 code unit boundary`);if(this.bump(),this.isEOF())break}}bumpSpace(){for(;!this.isEOF()&&r1(this.char());)this.bump()}peek(){if(this.isEOF())return null;const t=this.char(),n=this.offset();return this.message.charCodeAt(n+(t>=65536?2:1))??null}}function Qm(e){return e>=97&&e<=122||e>=65&&e<=90}function n1(e){return Qm(e)||e===47}function s1(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function r1(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function Xm(e){e.forEach(t=>{if(delete t.location,eN(t)||tN(t))for(const n in t.options)delete t.options[n].location,Xm(t.options[n].value);else XS(t)&&sN(t.style)||(YS(t)||ZS(t))&&Jm(t.style)?delete t.style.location:nN(t)&&Xm(t.children)})}function i1(e,t={}){t={shouldParseSkeletons:!0,requiresOtherClause:!0,...t};const n=new t1(e,t).parse();if(n.err){const s=SyntaxError(xe[n.err.kind]);throw s.location=n.err.location,s.originalMessage=n.err.message,s}return t!=null&&t.captureLocation||Xm(n.val),n.val}let Tr=function(e){return e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API",e}({});class Cr extends Error{constructor(n,s,a){super(n);pe(this,"code");pe(this,"originalMessage");this.code=s,this.originalMessage=a}toString(){return`[formatjs Error: ${this.code}] ${this.message}`}}class Yb extends Cr{constructor(t,n,s,a){super(`Invalid values for "${t}": "${n}". Options are "${Object.keys(s).join('", "')}"`,Tr.INVALID_VALUE,a)}}class a1 extends Cr{constructor(t,n,s){super(`Value for "${t}" must be of type ${n}`,Tr.INVALID_VALUE,s)}}class o1 extends Cr{constructor(t,n){super(`The intl string context variable "${t}" was not provided to the string "${n}"`,Tr.MISSING_VALUE,n)}}let nn=function(e){return e[e.literal=0]="literal",e[e.object=1]="object",e}({});function l1(e){return e.length<2?e:e.reduce((t,n)=>{const s=t[t.length-1];return!s||s.type!==nn.literal||n.type!==nn.literal?t.push(n):s.value+=n.value,t},[])}function iN(e){return typeof e=="function"}function vd(e,t,n,s,a,o,l){if(e.length===1&&Jb(e[0]))return[{type:nn.literal,value:e[0].value}];const d=[];for(const h of e){if(Jb(h)){d.push({type:nn.literal,value:h.value});continue}if(VC(h)){typeof o=="number"&&d.push({type:nn.literal,value:n.getNumberFormat(t).format(o)});continue}const{value:p}=h;if(!(a&&p in a))throw new o1(p,l);let v=a[p];if(zC(h)){(!v||typeof v=="string"||typeof v=="number"||typeof v=="bigint")&&(v=typeof v=="string"||typeof v=="number"||typeof v=="bigint"?String(v):""),d.push({type:typeof v=="string"?nn.literal:nn.object,value:v});continue}if(YS(h)){const w=typeof h.style=="string"?s.date[h.style]:Jm(h.style)?h.style.parsedOptions:void 0;d.push({type:nn.literal,value:n.getDateTimeFormat(t,w).format(v)});continue}if(ZS(h)){const w=typeof h.style=="string"?s.time[h.style]:Jm(h.style)?h.style.parsedOptions:s.time.medium;d.push({type:nn.literal,value:n.getDateTimeFormat(t,w).format(v)});continue}if(XS(h)){const w=typeof h.style=="string"?s.number[h.style]:sN(h.style)?h.style.parsedOptions:void 0;if(w&&w.scale){const x=w.scale||1;if(typeof v=="bigint"){if(!Number.isInteger(x))throw new TypeError(`Cannot apply fractional scale ${x} to bigint value. Scale must be an integer when formatting bigint.`);v=v*BigInt(x)}else v=v*x}d.push({type:nn.literal,value:n.getNumberFormat(t,w).format(v)});continue}if(nN(h)){const{children:w,value:x}=h,k=a[x];if(!iN(k))throw new a1(x,"function",l);const E=vd(w,t,n,s,a,o);let T=k(E.map(R=>R.value));Array.isArray(T)||(T=[T]),d.push(...T.map(R=>({type:typeof R=="string"?nn.literal:nn.object,value:R})))}if(eN(h)){const w=v,x=(Object.prototype.hasOwnProperty.call(h.options,w)?h.options[w]:void 0)||h.options.other;if(!x)throw new Yb(h.value,v,Object.keys(h.options),l);d.push(...vd(x.value,t,n,s,a));continue}if(tN(h)){const w=`=${v}`;let x=Object.prototype.hasOwnProperty.call(h.options,w)?h.options[w]:void 0;if(!x){if(!Intl.PluralRules)throw new Cr(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Tr.MISSING_INTL_API,l);const E=typeof v=="bigint"?Number(v):v,T=n.getPluralRules(t,{type:h.pluralType}).select(E-(h.offset||0));x=(Object.prototype.hasOwnProperty.call(h.options,T)?h.options[T]:void 0)||h.options.other}if(!x)throw new Yb(h.value,v,Object.keys(h.options),l);const k=typeof v=="bigint"?Number(v):v;d.push(...vd(x.value,t,n,s,a,k-(h.offset||0)));continue}}return l1(d)}function c1(e,t){return t?{...e,...t,...Object.keys(e).reduce((n,s)=>(n[s]={...e[s],...t[s]},n),{})}:e}function u1(e,t){return t?Object.keys(e).reduce((n,s)=>(n[s]=c1(e[s],t[s]),n),{...e}):e}function zp(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function d1(e={number:{},dateTime:{},pluralRules:{}}){return{getNumberFormat:ps((...t)=>new Intl.NumberFormat(...t),{cache:zp(e.number),strategy:ms.variadic}),getDateTimeFormat:ps((...t)=>new Intl.DateTimeFormat(...t),{cache:zp(e.dateTime),strategy:ms.variadic}),getPluralRules:ps((...t)=>new Intl.PluralRules(...t),{cache:zp(e.pluralRules),strategy:ms.variadic})}}const Ut=class Ut{constructor(t,n=Ut.defaultLocale,s,a){pe(this,"ast");pe(this,"locales");pe(this,"resolvedLocale");pe(this,"formatters");pe(this,"formats");pe(this,"message");pe(this,"formatterCache",{number:{},dateTime:{},pluralRules:{}});pe(this,"format",t=>{const n=this.formatToParts(t);if(n.length===1)return n[0].value;const s=n.reduce((a,o)=>(!a.length||o.type!==nn.literal||typeof a[a.length-1]!="string"?a.push(o.value):a[a.length-1]+=o.value,a),[]);return s.length<=1?s[0]||"":s});pe(this,"formatToParts",t=>vd(this.ast,this.locales,this.formatters,this.formats,t,void 0,this.message));pe(this,"resolvedOptions",()=>{var t;return{locale:((t=this.resolvedLocale)==null?void 0:t.toString())||Intl.NumberFormat.supportedLocalesOf(this.locales)[0]}});pe(this,"getAst",()=>this.ast);if(this.locales=n,this.resolvedLocale=Ut.resolveLocale(n),typeof t=="string"){if(this.message=t,!Ut.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");const{...o}=a||{};this.ast=Ut.__parse(t,{...o,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=u1(Ut.formats,s),this.formatters=a&&a.formatters||d1(this.formatterCache)}static get defaultLocale(){return Ut.memoizedDefaultLocale||(Ut.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),Ut.memoizedDefaultLocale}};pe(Ut,"memoizedDefaultLocale",null),pe(Ut,"resolveLocale",t=>{if(typeof Intl.Locale>"u")return;const n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}),pe(Ut,"__parse",i1),pe(Ut,"formats",{number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}});let zd=Ut,dc=function(e){return e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION",e}({});class Ii extends Error{constructor(n,s,a){const o=a?a instanceof Error?a:new Error(String(a)):void 0;super(`[@formatjs/intl Error ${n}] ${s}
${o?`
${o.message}
${o.stack}`:""}`);pe(this,"code");this.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ii)}}class h1 extends Ii{constructor(t,n){super(dc.UNSUPPORTED_FORMATTER,t,n)}}class f1 extends Ii{constructor(t,n){super(dc.INVALID_CONFIG,t,n)}}class Zb extends Ii{constructor(t,n){super(dc.MISSING_DATA,t,n)}}class Tn extends Ii{constructor(n,s,a){super(dc.FORMAT_ERROR,`${n}
Locale: ${s}
`,a);pe(this,"descriptor");pe(this,"locale");this.locale=s}}class Vp extends Tn{constructor(n,s,a,o){super(`${n}
MessageID: ${a==null?void 0:a.id}
Default Message: ${a==null?void 0:a.defaultMessage}
Description: ${a==null?void 0:a.description}
`,s,o);pe(this,"descriptor");pe(this,"locale");this.descriptor=a,this.locale=s}}class p1 extends Ii{constructor(n,s){super(dc.MISSING_TRANSLATION,`Missing message: "${n.id}" for locale "${s}", using ${n.defaultMessage?`default message (${typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(a=>a.value??JSON.stringify(a)).join()})`:"id"} as fallback.`);pe(this,"descriptor");this.descriptor=n}}function m1(e,t,n=Error){if(!e)throw new n(t)}function no(e,t,n={}){return t.reduce((s,a)=>(a in e?s[a]=e[a]:a in n&&(s[a]=n[a]),s),{})}const g1=e=>{},v1=e=>{},aN={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:g1,onWarn:v1};function oN(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ci(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function y1(e=oN()){const t=Intl.RelativeTimeFormat,n=Intl.ListFormat,s=Intl.DisplayNames,a=ps((...d)=>new Intl.DateTimeFormat(...d),{cache:ci(e.dateTime),strategy:ms.variadic}),o=ps((...d)=>new Intl.NumberFormat(...d),{cache:ci(e.number),strategy:ms.variadic}),l=ps((...d)=>new Intl.PluralRules(...d),{cache:ci(e.pluralRules),strategy:ms.variadic});return{getDateTimeFormat:a,getNumberFormat:o,getMessageFormat:ps((d,h,p,v)=>new zd(d,h,p,{formatters:{getNumberFormat:o,getDateTimeFormat:a,getPluralRules:l},...v}),{cache:ci(e.message),strategy:ms.variadic}),getRelativeTimeFormat:ps((...d)=>new t(...d),{cache:ci(e.relativeTime),strategy:ms.variadic}),getPluralRules:l,getListFormat:ps((...d)=>new n(...d),{cache:ci(e.list),strategy:ms.variadic}),getDisplayNames:ps((...d)=>new s(...d),{cache:ci(e.displayNames),strategy:ms.variadic})}}function ov(e,t,n,s){const a=e&&e[t];let o;if(a&&(o=a[n]),o)return o;s(new h1(`No ${t} format named: ${n}`))}function Yu(e,t){return Object.keys(e).reduce((n,s)=>(n[s]={timeZone:t,...e[s]},n),{})}function e0(e,t){return Object.keys({...e,...t}).reduce((s,a)=>(s[a]={...e[a],...t[a]},s),{})}function t0(e,t){if(!t)return e;const n=zd.formats;return{...n,...e,date:e0(Yu(n.date,t),Yu(e.date||{},t)),time:e0(Yu(n.time,t),Yu(e.time||{},t))}}const Ym=({locale:e,formats:t,messages:n,defaultLocale:s,defaultFormats:a,fallbackOnEmptyString:o,onError:l,timeZone:d,defaultRichTextElements:h},p,v={id:""},w,x)=>{const{id:k,defaultMessage:E}=v;m1(!!k,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");const T=String(k),R=n&&Object.prototype.hasOwnProperty.call(n,T)&&n[T];if(Array.isArray(R)&&R.length===1&&R[0].type===Ue.literal)return R[0].value;if(w={...h,...w},t=t0(t,d),a=t0(a,d),!R){if(o===!1&&R==="")return R;if((!E||e&&e.toLowerCase()!==s.toLowerCase())&&l(new p1(v,e)),E)try{return p.getMessageFormat(E,s,a,x).format(w)}catch(S){return l(new Vp(`Error formatting default message for: "${T}", rendering default message verbatim`,e,v,S)),typeof E=="string"?E:T}return T}try{return p.getMessageFormat(R,e,t,{formatters:p,...x}).format(w)}catch(S){l(new Vp(`Error formatting message: "${T}", using ${E?"default message":"id"} as fallback.`,e,v,S))}if(E)try{return p.getMessageFormat(E,s,a,x).format(w)}catch(S){l(new Vp(`Error formatting the default message for: "${T}", rendering message verbatim`,e,v,S))}return typeof R=="string"?R:typeof E=="string"?E:T},x1=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function hc({locale:e,formats:t,onError:n,timeZone:s},a,o,l={}){const{format:d}=l,h={...s&&{timeZone:s},...d&&ov(t,a,d,n)};let p=no(l,x1,h);return a==="time"&&!p.hour&&!p.minute&&!p.second&&!p.timeStyle&&!p.dateStyle&&(p={...p,hour:"numeric",minute:"numeric"}),o(e,p)}function w1(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return hc(e,"date",t,s).format(a)}catch(o){e.onError(new Tn("Error formatting date.",e.locale,o))}return String(a)}function b1(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return hc(e,"time",t,s).format(a)}catch(o){e.onError(new Tn("Error formatting time.",e.locale,o))}return String(a)}function j1(e,t,n,s,a={}){const o=typeof n=="string"?new Date(n||0):n,l=typeof s=="string"?new Date(s||0):s;try{return hc(e,"dateTimeRange",t,a).formatRange(o,l)}catch(d){e.onError(new Tn("Error formatting date time range.",e.locale,d))}return String(o)}function S1(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return hc(e,"date",t,s).formatToParts(a)}catch(o){e.onError(new Tn("Error formatting date.",e.locale,o))}return[]}function N1(e,t,n,s={}){const a=typeof n=="string"?new Date(n||0):n;try{return hc(e,"time",t,s).formatToParts(a)}catch(o){e.onError(new Tn("Error formatting time.",e.locale,o))}return[]}const k1=["style","type","fallback","languageDisplay"];function _1({locale:e,onError:t},n,s,a){Intl.DisplayNames||t(new Cr(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,Tr.MISSING_INTL_API));const l=no(a,k1);try{return n(e,l).of(s)}catch(d){t(new Tn("Error formatting display name.",e,d))}}const E1=["type","style"],n0=Date.now();function T1(e){return`${n0}_${e}_${n0}`}function C1(e,t,n,s={}){const a=lN(e,t,n,s).reduce((o,l)=>{const d=l.value;return typeof d!="string"?o.push(d):typeof o[o.length-1]=="string"?o[o.length-1]+=d:o.push(d),o},[]);return a.length===1?a[0]:a.length===0?"":a}function lN({locale:e,onError:t},n,s,a={}){Intl.ListFormat||t(new Cr(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,Tr.MISSING_INTL_API));const l=no(a,E1);try{const d={},h=Array.from(s).map((p,v)=>{if(typeof p=="object"&&p!==null){const w=T1(v);return d[w]=p,w}return String(p)});return n(e,l).formatToParts(h).map(p=>p.type==="literal"?p:{...p,value:d[p.value]||p.value})}catch(d){t(new Tn("Error formatting list.",e,d))}return s}const I1=["type"];function O1({locale:e,onError:t},n,s,a={}){Intl.PluralRules||t(new Cr(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Tr.MISSING_INTL_API));const o=no(a,I1);try{return n(e,o).select(s)}catch(l){t(new Tn("Error formatting plural.",e,l))}return"other"}const A1=["numeric","style"];function D1({locale:e,formats:t,onError:n},s,a={}){const{format:o}=a,l=!!o&&ov(t,"relative",o,n)||{},d=no(a,A1,l);return s(e,d)}function R1(e,t,n,s,a={}){s||(s="second"),Intl.RelativeTimeFormat||e.onError(new Cr(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,Tr.MISSING_INTL_API));try{return D1(e,t,a).format(n,s)}catch(l){e.onError(new Tn("Error formatting relative time.",e.locale,l))}return String(n)}const L1=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function cN({locale:e,formats:t,onError:n},s,a={}){const{format:o}=a,l=o&&ov(t,"number",o,n)||{},d=no(a,L1,l);return s(e,d)}function P1(e,t,n,s={}){try{return cN(e,t,s).format(n)}catch(a){e.onError(new Tn("Error formatting number.",e.locale,a))}return String(n)}function M1(e,t,n,s={}){try{return cN(e,t,s).formatToParts(n)}catch(a){e.onError(new Tn("Error formatting number.",e.locale,a))}return[]}function $1(e){return typeof(e?e[Object.keys(e)[0]]:void 0)=="string"}function B1(e){e.onWarn&&e.defaultRichTextElements&&$1(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function U1(e,t){const n=y1(t),s={...aN,...e},{locale:a,defaultLocale:o,onError:l}=s;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&l?l(new Zb(`Missing locale data for locale: "${a}" in Intl.NumberFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&l&&l(new Zb(`Missing locale data for locale: "${a}" in Intl.DateTimeFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):(l&&l(new f1(`"locale" was not configured, using "${o}" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details`)),s.locale=s.defaultLocale||"en"),B1(s),{...s,formatters:n,formatNumber:P1.bind(null,s,n.getNumberFormat),formatNumberToParts:M1.bind(null,s,n.getNumberFormat),formatRelativeTime:R1.bind(null,s,n.getRelativeTimeFormat),formatDate:w1.bind(null,s,n.getDateTimeFormat),formatDateToParts:S1.bind(null,s,n.getDateTimeFormat),formatTime:b1.bind(null,s,n.getDateTimeFormat),formatDateTimeRange:j1.bind(null,s,n.getDateTimeFormat),formatTimeToParts:N1.bind(null,s,n.getDateTimeFormat),formatPlural:O1.bind(null,s,n.getPluralRules),formatMessage:Ym.bind(null,s,n),$t:Ym.bind(null,s,n),formatList:C1.bind(null,s,n.getListFormat),formatListToParts:lN.bind(null,s,n.getListFormat),formatDisplayName:_1.bind(null,s,n.getDisplayNames)}}function F1(e,t,n=Error){if(!e)throw new n(t)}function uN(e){F1(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}const dN={...aN,textComponent:m.Fragment},hN=e=>m.Children.toArray(e).map((n,s)=>m.isValidElement(n)?r.jsx(m.Fragment,{children:n},s):n);function H1(e){return function(t){return e(hN(t))}}function z1(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),s=Object.keys(t),a=n.length;if(s.length!==a)return!1;for(var o=0;o<a;o++){var l=n[o];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}var fN={exports:{}},ke={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ot=typeof Symbol=="function"&&Symbol.for,lv=ot?Symbol.for("react.element"):60103,cv=ot?Symbol.for("react.portal"):60106,ch=ot?Symbol.for("react.fragment"):60107,uh=ot?Symbol.for("react.strict_mode"):60108,dh=ot?Symbol.for("react.profiler"):60114,hh=ot?Symbol.for("react.provider"):60109,fh=ot?Symbol.for("react.context"):60110,uv=ot?Symbol.for("react.async_mode"):60111,ph=ot?Symbol.for("react.concurrent_mode"):60111,mh=ot?Symbol.for("react.forward_ref"):60112,gh=ot?Symbol.for("react.suspense"):60113,V1=ot?Symbol.for("react.suspense_list"):60120,vh=ot?Symbol.for("react.memo"):60115,yh=ot?Symbol.for("react.lazy"):60116,W1=ot?Symbol.for("react.block"):60121,K1=ot?Symbol.for("react.fundamental"):60117,G1=ot?Symbol.for("react.responder"):60118,q1=ot?Symbol.for("react.scope"):60119;function hn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case lv:switch(e=e.type,e){case uv:case ph:case ch:case dh:case uh:case gh:return e;default:switch(e=e&&e.$$typeof,e){case fh:case mh:case yh:case vh:case hh:return e;default:return t}}case cv:return t}}}function pN(e){return hn(e)===ph}ke.AsyncMode=uv;ke.ConcurrentMode=ph;ke.ContextConsumer=fh;ke.ContextProvider=hh;ke.Element=lv;ke.ForwardRef=mh;ke.Fragment=ch;ke.Lazy=yh;ke.Memo=vh;ke.Portal=cv;ke.Profiler=dh;ke.StrictMode=uh;ke.Suspense=gh;ke.isAsyncMode=function(e){return pN(e)||hn(e)===uv};ke.isConcurrentMode=pN;ke.isContextConsumer=function(e){return hn(e)===fh};ke.isContextProvider=function(e){return hn(e)===hh};ke.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===lv};ke.isForwardRef=function(e){return hn(e)===mh};ke.isFragment=function(e){return hn(e)===ch};ke.isLazy=function(e){return hn(e)===yh};ke.isMemo=function(e){return hn(e)===vh};ke.isPortal=function(e){return hn(e)===cv};ke.isProfiler=function(e){return hn(e)===dh};ke.isStrictMode=function(e){return hn(e)===uh};ke.isSuspense=function(e){return hn(e)===gh};ke.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ch||e===ph||e===dh||e===uh||e===gh||e===V1||typeof e=="object"&&e!==null&&(e.$$typeof===yh||e.$$typeof===vh||e.$$typeof===hh||e.$$typeof===fh||e.$$typeof===mh||e.$$typeof===K1||e.$$typeof===G1||e.$$typeof===q1||e.$$typeof===W1)};ke.typeOf=hn;fN.exports=ke;var J1=fN.exports,mN=J1,Q1={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},X1={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gN={};gN[mN.ForwardRef]=Q1;gN[mN.Memo]=X1;const vN=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=m.createContext(null)):m.createContext(null),{Consumer:ZA,Provider:Y1}=vN,Z1=Y1,eI=vN;function dv(){const e=m.useContext(eI);return uN(e),e}var yN=function(e){return e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName",e}(yN||{}),xN=function(e){return e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts",e}(xN||{});function wN(e){const t=n=>{const s=dv(),{value:a,children:o,...l}=n,d=typeof a=="string"?new Date(a||0):a,h=e==="formatDate"?s.formatDateToParts(d,l):s.formatTimeToParts(d,l);return o(h)};return t.displayName=xN[e],t}function fc(e){const t=n=>{const s=dv(),{value:a,children:o,...l}=n,d=s[e](a,l);if(typeof o=="function")return o(d);const h=s.textComponent||m.Fragment;return r.jsx(h,{children:d})};return t.displayName=yN[e],t}function bN(e){return e&&Object.keys(e).reduce((t,n)=>{const s=e[n];return t[n]=iN(s)?H1(s):s,t},{})}const s0=(e,t,n,s,...a)=>{const o=bN(s),l=Ym(e,t,n,o,...a);return Array.isArray(l)?hN(l):l},r0=({defaultRichTextElements:e,...t},n)=>{const s=bN(e),a=U1({...dN,...t,defaultRichTextElements:s},n),o={locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,messages:a.messages,onError:a.onError,defaultRichTextElements:s};return{...a,formatMessage:s0.bind(null,o,a.formatters),$t:s0.bind(null,o,a.formatters)}};function Wp(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}class Zm extends m.PureComponent{constructor(){super(...arguments);pe(this,"cache",oN());pe(this,"state",{cache:this.cache,intl:r0(Wp(this.props),this.cache),prevConfig:Wp(this.props)})}static getDerivedStateFromProps(n,{prevConfig:s,cache:a}){const o=Wp(n);return z1(s,o)?null:{intl:r0(o,a),prevConfig:o}}render(){return uN(this.state.intl),r.jsx(Z1,{value:this.state.intl,children:this.props.children})}}pe(Zm,"displayName","IntlProvider"),pe(Zm,"defaultProps",dN);fc("formatDate");fc("formatTime");fc("formatNumber");fc("formatList");fc("formatDisplayName");wN("formatDate");wN("formatTime");var V;(function(e){e.BACKLOG="BACKLOG",e.TODO="TODO",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.BLOCKED="BLOCKED",e.ARCHIVED="ARCHIVED"})(V||(V={}));var i0;(function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.CRITICAL="CRITICAL"})(i0||(i0={}));var a0;(function(e){e.TASK_CREATE="TASK_CREATE",e.TASK_UPDATE="TASK_UPDATE",e.TASK_DELETE="TASK_DELETE",e.POLICY_EVALUATE="POLICY_EVALUATE",e.ACCESS_DENIED="ACCESS_DENIED"})(a0||(a0={}));var o0;(function(e){e.USER="USER",e.SERVICE="SERVICE",e.INTEGRATION="INTEGRATION"})(o0||(o0={}));function xh(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function tI(e,t,n,s){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function d(v){try{p(s.next(v))}catch(w){l(w)}}function h(v){try{p(s.throw(v))}catch(w){l(w)}}function p(v){v.done?o(v.value):a(v.value).then(d,h)}p((s=s.apply(e,t||[])).next())})}const nI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class hv extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class sI extends hv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class l0 extends hv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class c0 extends hv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var eg;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(eg||(eg={}));class rI{constructor(t,{headers:n={},customFetch:s,region:a=eg.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=nI(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return tI(this,arguments,void 0,function*(n,s={}){var a;let o,l;try{const{headers:d,method:h,body:p,signal:v,timeout:w}=s;let x={},{region:k}=s;k||(k=this.region);const E=new URL(`${this.url}/${n}`);k&&k!=="any"&&(x["x-region"]=k,E.searchParams.set("forceFunctionRegion",k));let T;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",T=p):typeof p=="string"?(x["Content-Type"]="text/plain",T=p):typeof FormData<"u"&&p instanceof FormData?T=p:(x["Content-Type"]="application/json",T=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?T=JSON.stringify(p):T=p;let R=v;w&&(l=new AbortController,o=setTimeout(()=>l.abort(),w),v?(R=l.signal,v.addEventListener("abort",()=>l.abort())):R=l.signal);const S=yield this.fetch(E.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:T,signal:R}).catch(H=>{throw new sI(H)}),b=S.headers.get("x-relay-error");if(b&&b==="true")throw new l0(S);if(!S.ok)throw new c0(S);let N=((a=S.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),A;return N==="application/json"?A=yield S.json():N==="application/octet-stream"||N==="application/pdf"?A=yield S.blob():N==="text/event-stream"?A=S:N==="multipart/form-data"?A=yield S.formData():A=yield S.text(),{data:A,error:null,response:S}}catch(d){return{data:null,error:d,response:d instanceof c0||d instanceof l0?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var iI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},aI=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,d=null,h=null,p=o.status,v=o.statusText;if(o.ok){var w,x;if(n.method!=="HEAD"){var k;const S=await o.text();S===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((k=n.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?d=S:d=JSON.parse(S))}const T=(w=n.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),R=(x=o.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");T&&R&&R.length>1&&(h=parseInt(R[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,p=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var E;const T=await o.text();try{l=JSON.parse(T),Array.isArray(l)&&o.status===404&&(d=[],l=null,p=200,v="OK")}catch{o.status===404&&T===""?(p=204,v="No Content"):l={message:T}}if(l&&n.isMaybeSingle&&(!(l==null||(E=l.details)===null||E===void 0)&&E.includes("0 rows"))&&(l=null,p=200,v="OK"),l&&n.shouldThrowOnError)throw new iI(l)}return{error:l,data:d,count:h,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let d="";const h=o==null?void 0:o.cause;if(h){var p,v,w,x;const E=(p=h==null?void 0:h.message)!==null&&p!==void 0?p:"",T=(v=h==null?void 0:h.code)!==null&&v!==void 0?v:"";d=`${(w=o==null?void 0:o.name)!==null&&w!==void 0?w:"FetchError"}: ${o==null?void 0:o.message}`,d+=`

Caused by: ${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"Error"}: ${E}`,T&&(d+=` (${T})`),h!=null&&h.stack&&(d+=`
${h.stack}`)}else{var k;d=(k=o==null?void 0:o.stack)!==null&&k!==void 0?k:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},oI=class extends aI{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const u0=new RegExp("[,()]");var Sa=class extends oI{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&u0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&u0.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},lI=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:s}=t??{},a=n?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:d,headers:h}=this.cloneRequestState();return d.searchParams.set("select",l),s&&h.append("Prefer",`count=${s}`),new Sa({method:a,url:d,headers:h,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var s;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);o.searchParams.set("columns",h.join(","))}}return new Sa({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST",{url:d,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&d.searchParams.set("on_conflict",t),s&&h.append("Prefer",`count=${s}`),a||h.append("Prefer","missing=default"),Array.isArray(e)){const p=e.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(p.length>0){const v=[...new Set(p)].map(w=>`"${w}"`);d.searchParams.set("columns",v.join(","))}}return new Sa({method:l,url:d,headers:h,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const s="PATCH",{url:a,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Sa({method:s,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Sa({method:n,url:s,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},cI=class jN{constructor(t,{headers:n={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new lI(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new jN(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:a=!1,count:o}={}){var l;let d;const h=new URL(`${this.url}/rpc/${t}`);let p;const v=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(v)),w=s&&Object.values(n).some(v);w?(d="POST",p=n):s||a?(d=s?"HEAD":"GET",Object.entries(n).filter(([k,E])=>E!==void 0).map(([k,E])=>[k,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([k,E])=>{h.searchParams.append(k,E)})):(d="POST",p=n);const x=new Headers(this.headers);return w?x.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&x.set("Prefer",`count=${o}`),new Sa({method:d,url:h,headers:x,schema:this.schemaName,body:p,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class uI{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const s=n.versions;if(s&&s.node){const a=s.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const dI="2.91.0",hI=`realtime-js/${dI}`,fI="1.0.0",SN="2.0.0",d0=SN,tg=1e4,pI=1e3,mI=100;var cr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(cr||(cr={}));var nt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(nt||(nt={}));var Vn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vn||(Vn={}));var ng;(function(e){e.websocket="websocket"})(ng||(ng={}));var mi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mi||(mi={}));class gI{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,s){var a,o;const l=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",h=(o=t.join_ref)!==null&&o!==void 0?o:"",p=t.payload.event,v=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+l.length+p.length+w.length,k=new ArrayBuffer(this.HEADER_LENGTH+x);let E=new DataView(k),T=0;E.setUint8(T++,this.KINDS.userBroadcastPush),E.setUint8(T++,h.length),E.setUint8(T++,d.length),E.setUint8(T++,l.length),E.setUint8(T++,p.length),E.setUint8(T++,w.length),E.setUint8(T++,n),Array.from(h,S=>E.setUint8(T++,S.charCodeAt(0))),Array.from(d,S=>E.setUint8(T++,S.charCodeAt(0))),Array.from(l,S=>E.setUint8(T++,S.charCodeAt(0))),Array.from(p,S=>E.setUint8(T++,S.charCodeAt(0))),Array.from(w,S=>E.setUint8(T++,S.charCodeAt(0)));var R=new Uint8Array(k.byteLength+s.byteLength);return R.set(new Uint8Array(k),0),R.set(new Uint8Array(s),k.byteLength),R.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,o,l,d,h]=s;return n({join_ref:a,ref:o,topic:l,event:d,payload:h})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,s){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),d=n.getUint8(4);let h=this.HEADER_LENGTH+4;const p=s.decode(t.slice(h,h+a));h=h+a;const v=s.decode(t.slice(h,h+o));h=h+o;const w=s.decode(t.slice(h,h+l));h=h+l;const x=t.slice(h,t.byteLength),k=d===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,E={type:this.BROADCAST_EVENT,event:v,payload:k};return l>0&&(E.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class NN{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ae||(Ae={}));const h0=(e,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=vI(l,e,t,a),o),{}):{}},vI=(e,t,n,s)=>{const a=t.find(d=>d.name===e),o=a==null?void 0:a.type,l=n[e];return o&&!s.includes(o)?kN(o,l):sg(l)},kN=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return bI(t,n)}switch(e){case Ae.bool:return yI(t);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return xI(t);case Ae.json:case Ae.jsonb:return wI(t);case Ae.timestamp:return jI(t);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return sg(t);default:return sg(t)}},sg=e=>e,yI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},xI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},wI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},bI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(d=>kN(t,d))}return e},jI=e=>typeof e=="string"?e.replace(" ","T"):e,_N=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Kp{constructor(t,n,s={},a=tg){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var f0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(f0||(f0={}));class Ll{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ll.syncState(this.state,a,o,l),this.pendingDiffs.forEach(h=>{this.state=Ll.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ll.syncDiff(this.state,a,o,l),d())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const o=this.cloneDeep(t),l=this.transformState(n),d={},h={};return this.map(o,(p,v)=>{l[p]||(h[p]=v)}),this.map(l,(p,v)=>{const w=o[p];if(w){const x=v.map(R=>R.presence_ref),k=w.map(R=>R.presence_ref),E=v.filter(R=>k.indexOf(R.presence_ref)<0),T=w.filter(R=>x.indexOf(R.presence_ref)<0);E.length>0&&(d[p]=E),T.length>0&&(h[p]=T)}else d[p]=v}),this.syncDiff(o,{joins:d,leaves:h},s,a)}static syncDiff(t,n,s,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(d,h)=>{var p;const v=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(h),v.length>0){const w=t[d].map(k=>k.presence_ref),x=v.filter(k=>w.indexOf(k.presence_ref)<0);t[d].unshift(...x)}s(d,v,h)}),this.map(l,(d,h)=>{let p=t[d];if(!p)return;const v=h.map(w=>w.presence_ref);p=p.filter(w=>v.indexOf(w.presence_ref)<0),t[d]=p,a(d,p,h),p.length===0&&delete t[d]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var p0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(p0||(p0={}));var Pl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Pl||(Pl={}));var Os;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Os||(Os={}));class $a{constructor(t,n={config:{}},s){var a,o;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Kp(this,Vn.join,this.params,this.timeout),this.rejoinTimer=new NN(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vn.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new Ll(this),this.broadcastEndpointURL=_N(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:l,presence:d,private:h}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(k=>k.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Pl.PRESENCE]&&this.bindings[Pl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},x={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(k=>t==null?void 0:t(Os.CHANNEL_ERROR,k)),this._onClose(()=>t==null?void 0:t(Os.CLOSED)),this.updateJoinPayload(Object.assign({config:x},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:k})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){t==null||t(Os.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,R=(E=T==null?void 0:T.length)!==null&&E!==void 0?E:0,S=[];for(let b=0;b<R;b++){const N=T[b],{filter:{event:A,schema:H,table:B,filter:F}}=N,W=k&&k[b];if(W&&W.event===A&&$a.isFilterValueEqual(W.schema,H)&&$a.isFilterValueEqual(W.table,B)&&$a.isFilterValueEqual(W.filter,F))S.push(Object.assign(Object.assign({},N),{id:W.id}));else{this.unsubscribe(),this.state=nt.errored,t==null||t(Os.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(Os.SUBSCRIBED);return}}).receive("error",k=>{this.state=nt.errored,t==null||t(Os.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Os.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===nt.joined&&t===Pl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const p=await d.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,d,h;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=nt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Kp(this,Vn.leave,{},t),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Kp(this,t,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>mI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,o;const l=t.toLocaleLowerCase(),{close:d,error:h,leave:p,join:v}=Vn;if(s&&[d,h,p,v].indexOf(l)>=0&&s!==this._joinRef())return;let x=this._onMessage(l,n,s);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(k=>{var E,T,R;return((E=k.filter)===null||E===void 0?void 0:E.event)==="*"||((R=(T=k.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===l}).map(k=>k.callback(x,s)):(o=this.bindings[l])===null||o===void 0||o.filter(k=>{var E,T,R,S,b,N,A,H;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in k){const B=k.id,F=(E=k.filter)===null||E===void 0?void 0:E.event;return B&&((T=n.ids)===null||T===void 0?void 0:T.includes(B))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((R=n.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))&&(!(!((S=k.filter)===null||S===void 0)&&S.table)||k.filter.table===((b=n.data)===null||b===void 0?void 0:b.table))}else{const B=(A=(N=k==null?void 0:k.filter)===null||N===void 0?void 0:N.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return B==="*"||B===((H=n==null?void 0:n.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===l}).map(k=>{if(typeof x=="object"&&"ids"in x){const E=x.data,{schema:T,table:R,commit_timestamp:S,type:b,errors:N}=E;x=Object.assign(Object.assign({},{schema:T,table:R,commit_timestamp:S,eventType:b,new:{},old:{},errors:N}),this._getPayloadRecords(E))}k.callback(x,s)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&$a.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vn.close,{},t)}_onError(t){this._on(Vn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=h0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=h0(t.columns,t.old_record)),n}}const Gp=()=>{},Zu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SI=[1e3,2e3,5e3,1e4],NI=1e4,kI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _I{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tg,this.transport=null,this.heartbeatIntervalMs=Zu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gp,this.ref=0,this.reconnectTimer=null,this.vsn=d0,this.logger=Gp,this.conn=null,this.sendBuffer=[],this.serializer=new gI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ng.websocket}`,this.httpEndpoint=_N(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case cr.connecting:return mi.Connecting;case cr.open:return mi.Open;case cr.closing:return mi.Closing;default:return mi.Closed}}isConnected(){return this.connectionState()===mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new $a(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:s,payload:a,ref:o}=t,l=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${s} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(pI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Zu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:o,ref:l}=n,d=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${s} ${a} ${d}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===cr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===cr.open||this.conn.readyState===cr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([kI],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,s=!1;if(t)n=t,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:hI};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Vn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new NN(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,a,o,l,d,h,p,v,w,x,k;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:tg,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Zu.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Gp,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:d0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=t==null?void 0:t.reconnectAfterMs)!==null&&p!==void 0?p:E=>SI[E-1]||NI,this.vsn){case fI:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:(E,T)=>T(JSON.stringify(E)),this.decode=(w=t==null?void 0:t.decode)!==null&&w!==void 0?w:(E,T)=>T(JSON.parse(E));break;case SN:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(k=t==null?void 0:t.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var ec=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function EI(e,t,n){const s=new URL(t,e);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function TI(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function CI(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:a,body:o,headers:l}){const d=EI(e.baseUrl,s,a),h=await TI(e.auth),p=await t(d,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...h,...l},body:o?JSON.stringify(o):void 0}),v=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),x=w&&v?JSON.parse(v):v;if(!p.ok){const k=w?x:void 0,E=k==null?void 0:k.error;throw new ec((E==null?void 0:E.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:k})}return{status:p.status,headers:p.headers,data:x}}}}function ed(e){return e.join("")}var II=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:ed(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ed(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ed(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ed(e.namespace)}`}),!0}catch(t){if(t instanceof ec&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ec&&n.status===409)return;throw n}}};function ga(e){return e.join("")}var OI=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ga(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ec&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ec&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},AI=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=CI({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new II(this.client,t),this.tableOps=new OI(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},wh=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Fe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var DI=class extends wh{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rg=class extends wh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const fv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RI=()=>Response,ig=e=>{if(Array.isArray(e))return e.map(n=>ig(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=ig(s)}),t},LI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},PI=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function MI(e,t){if(tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tc(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $I(e){var t=MI(e,"string");return tc(t)=="symbol"?t:t+""}function BI(e,t,n){return(t=$I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m0(Object(n),!0).forEach(function(s){BI(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const qp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},UI=async(e,t,n)=>{e instanceof await RI()&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new DI(qp(s),a,o))}).catch(s=>{t(new rg(qp(s),s))}):t(new rg(qp(e),e))},FI=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(LI(s)?(a.headers=ee({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),ee(ee({},a),n))};async function pc(e,t,n,s,a,o){return new Promise((l,d)=>{e(n,FI(t,s,a,o)).then(h=>{if(!h.ok)throw h;return s!=null&&s.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>UI(h,d,s))})}async function nc(e,t,n,s){return pc(e,"GET",t,n,s)}async function Hn(e,t,n,s,a){return pc(e,"POST",t,s,a,n)}async function ag(e,t,n,s,a){return pc(e,"PUT",t,s,a,n)}async function HI(e,t,n,s){return pc(e,"HEAD",t,ee(ee({},n),{},{noResolveJson:!0}),s)}async function pv(e,t,n,s,a){return pc(e,"DELETE",t,s,a,n)}var zI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Fe(t))return{data:null,error:t};throw t}}};let EN;EN=Symbol.toStringTag;var VI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[EN]="BlobDownloadBuilder",this.promise=null}asStream(){return new zI(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Fe(t))return{data:null,error:t};throw t}}};const WI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},g0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var KI=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=fv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,s){var a=this;try{let o;const l=ee(ee({},g0),s);let d=ee(ee({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",a.encodeMetadata(h)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),h&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(h))):(o=n,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,h&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),s!=null&&s.headers&&(d=ee(ee({},d),s.headers));const p=a._removeEmptyFolders(t),v=a._getFinalPath(p),w=await(e=="PUT"?ag:Hn)(a.fetch,`${a.url}/object/${v}`,o,ee({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Fe(o))return{data:null,error:o};throw o}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,s){var a=this;const o=a._removeEmptyFolders(e),l=a._getFinalPath(o),d=new URL(a.url+`/object/upload/sign/${l}`);d.searchParams.set("token",t);try{let h;const p=ee({upsert:g0.upsert},s),v=ee(ee({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",p.cacheControl)):(h=n,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{data:{path:o,fullPath:(await ag(a.fetch,d.toString(),h,{headers:v})).Key},error:null}}catch(h){if(a.shouldThrowOnError)throw h;if(Fe(h))return{data:null,error:h};throw h}}async createSignedUploadUrl(e,t){var n=this;try{let s=n._getFinalPath(e);const a=ee({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const o=await Hn(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(n.url+o.url),d=l.searchParams.get("token");if(!d)throw new wh("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:d},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var s=this;try{return{data:await Hn(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async copy(e,t,n){var s=this;try{return{data:{path:(await Hn(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var s=this;try{let a=s._getFinalPath(e),o=await Hn(s.fetch,`${s.url}/object/sign/${a}`,ee({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${s.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var s=this;try{const a=await Hn(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>ee(ee({},l),{},{signedUrl:l.signedURL?encodeURI(`${s.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",o=this._getFinalPath(e),l=()=>nc(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new VI(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:ig(await nc(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await HI(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Fe(s)&&s instanceof rg){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}async remove(e){var t=this;try{return{data:await pv(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async list(e,t,n){var s=this;try{const a=ee(ee(ee({},WI),t),{},{prefix:e||""});return{data:await Hn(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},n),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Fe(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const s=ee({},e);return{data:await Hn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},t),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const TN="2.91.0",CN={"X-Client-Info":`storage-js/${TN}`};var GI=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=ee(ee({},CN),t),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await nc(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await nc(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await Hn(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var n=this;try{return{data:await ag(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await Hn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await pv(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},qI=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},CN),t),this.fetch=fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Hn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await nc(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await pv(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Fe(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!PI(e))throw new wh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new AI({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...d)=>{try{return{data:await l.apply(a,d),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}}}})}};const mv={"X-Client-Info":`storage-js/${TN}`,"Content-Type":"application/json"};var IN=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function rn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Jp=class extends IN{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},JI=class extends IN{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const gv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),QI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},v0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XI=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Jp(v0(o),s,l))}).catch(()=>{const o=s+"";t(new Jp(a.statusText||`HTTP ${s} error`,s,o))});else{const o=s+"";t(new Jp(a.statusText||`HTTP ${s} error`,s,o))}}else t(new JI(v0(e),e))},YI=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(QI(s)?(a.headers=ee({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,ee(ee({},a),n)):a};async function ZI(e,t,n,s,a,o){return new Promise((l,d)=>{e(n,YI(t,s,a,o)).then(h=>{if(!h.ok)throw h;if(s!=null&&s.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>l(h)).catch(h=>XI(h,d,s))})}async function an(e,t,n,s,a){return ZI(e,"POST",t,s,a,n)}var eO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},mv),t),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await an(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await an(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(rn(s))return{data:null,error:s};throw s}}},tO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},mv),t),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await an(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await an(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await an(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}},nO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ee(ee({},mv),t),this.fetch=gv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await an(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await an(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}},sO=class extends nO{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new rO(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},rO=class extends eO{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new iO(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},iO=class extends tO{constructor(e,t,n,s,a){super(e,t,a),this.vectorBucketName=n,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ee(ee({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},aO=class extends GI{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new KI(this.url,this.headers,e,this.fetch)}get vectors(){return new sO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qI(this.url+"/iceberg",this.headers,this.fetch)}};const ON="2.91.0",Na=30*1e3,og=3,Qp=og*Na,oO="http://localhost:9999",lO="supabase.auth.token",cO={"X-Client-Info":`gotrue-js/${ON}`},lg="X-Supabase-Api-Version",AN={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},uO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dO=10*60*1e3;class sc extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function X(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class hO extends sc{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function fO(e){return X(e)&&e.name==="AuthApiError"}class gi extends sc{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Fs extends sc{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class tn extends Fs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pO(e){return X(e)&&e.name==="AuthSessionMissingError"}class va extends Fs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class td extends Fs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class nd extends Fs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mO(e){return X(e)&&e.name==="AuthImplicitGrantRedirectError"}class y0 extends Fs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gO extends Fs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class cg extends Fs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Xp(e){return X(e)&&e.name==="AuthRetryableFetchError"}class x0 extends Fs{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ug extends Fs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),w0=` 	
\r=`.split(""),vO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<w0.length;t+=1)e[w0[t].charCodeAt(0)]=-2;for(let t=0;t<Vd.length;t+=1)e[Vd[t].charCodeAt(0)]=t;return e})();function b0(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Vd[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Vd[s]),t.queuedBits-=6}}function DN(e,t,n){const s=vO[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function j0(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{wO(l,s,n)};for(let l=0;l<e.length;l+=1)DN(e.charCodeAt(l),a,o);return t.join("")}function yO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function xO(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}yO(s,t)}}function wO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Wa(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)DN(e.charCodeAt(a),n,s);return new Uint8Array(t)}function bO(e){const t=[];return xO(e,n=>t.push(n)),new Uint8Array(t)}function wi(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>b0(a,n,s)),b0(null,n,s),t.join("")}function jO(e){return Math.round(Date.now()/1e3)+e}function SO(){return Symbol("auth-callback")}const ft=()=>typeof window<"u"&&typeof document<"u",ui={tested:!1,writable:!1},RN=()=>{if(!ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ui.tested)return ui.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ui.tested=!0,ui.writable=!0}catch{ui.tested=!0,ui.writable=!1}return ui.writable};function NO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const LN=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),kO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ka=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},di=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ht=async(e,t)=>{await e.removeItem(t)};class bh{constructor(){this.promise=new bh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}bh.promiseConstructor=Promise;function Yp(e){const t=e.split(".");if(t.length!==3)throw new ug("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!uO.test(t[s]))throw new ug("JWT not in base64url format");return{header:JSON.parse(j0(t[0])),payload:JSON.parse(j0(t[1])),signature:Wa(t[2]),raw:{header:t[0],payload:t[1]}}}async function _O(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function EO(e,t){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){s(l);return}}catch(l){if(!t(o,l)){a(l);return}}})()})}function TO(e){return("0"+e.toString(16)).substr(-2)}function CO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,TO).join("")}async function IO(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function OO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await IO(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ya(e,t,n=!1){const s=CO();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await ka(e,`${t}-code-verifier`,a);const o=await OO(s);return[o,s===o?"plain":"s256"]}const AO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DO(e){const t=e.headers.get(lg);if(!t||!t.match(AO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function RO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xa(e){if(!PO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zp(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function MO(e,t){return new Proxy(e,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,a)}})}function S0(e){return JSON.parse(JSON.stringify(e))}const pi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$O=[502,503,504];async function N0(e){var t;if(!kO(e))throw new cg(pi(e),0);if($O.includes(e.status))throw new cg(pi(e),e.status);let n;try{n=await e.json()}catch(o){throw new gi(pi(o),o)}let s;const a=DO(e);if(a&&a.getTime()>=AN["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new x0(pi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new tn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new x0(pi(n),e.status,n.weak_password.reasons);throw new hO(pi(n),e.status||500,s)}const BO=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Z(e,t,n,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[lg]||(o[lg]=AN["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await UO(e,t,n+d,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(h):{data:Object.assign({},h),error:null}}async function UO(e,t,n,s,a,o){const l=BO(t,s,a,o);let d;try{d=await e(n,Object.assign({},l))}catch(h){throw console.error(h),new cg(pi(h),0)}if(d.ok||await N0(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(h){await N0(h)}}function Un(e){var t;let n=null;zO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=jO(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function k0(e){const t=Un(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FO(e){return{data:e,error:null}}function HO(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o}=e,l=xh(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:o},h=Object.assign({},l);return{data:{properties:d,user:h},error:null}}function _0(e){return e}function zO(e){return e.access_token&&e.refresh_token&&e.expires_in}const em=["global","local","others"];class VO{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=LN(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=em[0]){if(em.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${em.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(X(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:hr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=xh(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:HO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(X(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,o,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:_0});if(v.error)throw v.error;const w=await v.json(),x=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,k=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return k.length>0&&(k.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);p[`${R}Page`]=T}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(X(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){xa(t);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hr})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){xa(t);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:hr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){xa(t);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:hr})}catch(s){if(X(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){xa(t.userId);try{const{data:n,error:s}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _deleteFactor(t){xa(t.userId),xa(t.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,a,o,l,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:_0});if(v.error)throw v.error;const w=await v.json(),x=(l=v.headers.get("x-total-count"))!==null&&l!==void 0?l:0,k=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return k.length>0&&(k.forEach(E=>{const T=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(E.split(";")[1].split("=")[1]);p[`${R}Page`]=T}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(X(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(X(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}}function E0(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const wa={debug:!!(globalThis&&RN()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class PN extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WO extends PN{}async function KO(e,t,n){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),wa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(wa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function GO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function MN(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function qO(e){return parseInt(e,16)}function JO(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function QO(e){var t;const{chainId:n,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:d,requestId:h,resources:p,scheme:v,uri:w,version:x}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const k=MN(e.address),E=v?`${v}://${s}`:s,T=e.statement?`${e.statement}
`:"",R=`${E} wants you to sign in with your Ethereum account:
${k}

${T}`;let S=`URI: ${w}
Version: ${x}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),d&&(S+=`
Not Before: ${d.toISOString()}`),h&&(S+=`
Request ID: ${h}`),p){let b=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);b+=`
- ${N}`}S+=b}return`${R}
${S}`}class Xe extends Error{constructor({message:t,code:n,cause:s,name:a}){var o;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Wd extends Xe{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function XO({error:e,options:t}){var n,s,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Xe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Xe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Xe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Xe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Xe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Xe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Xe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if($N(l)){if(o.rp.id!==l)return new Xe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Xe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Xe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function YO({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Xe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Xe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if($N(s)){if(n.rpId!==s)return new Xe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Xe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Xe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Xe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class ZO{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const eA=new ZO;function tA(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,a=xh(e,["challenge","user","excludeCredentials"]),o=Wa(t).buffer,l=Object.assign(Object.assign({},n),{id:Wa(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:l});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let h=0;h<s.length;h++){const p=s[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Wa(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function nA(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=xh(e,["challenge","allowCredentials"]),a=Wa(t).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const d=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},d),{id:Wa(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function sA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:wi(new Uint8Array(e.response.attestationObject)),clientDataJSON:wi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function rA(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wi(new Uint8Array(a.authenticatorData)),clientDataJSON:wi(new Uint8Array(a.clientDataJSON)),signature:wi(new Uint8Array(a.signature)),userHandle:a.userHandle?wi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function $N(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function T0(){var e,t;return!!(ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function iA(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:XO({error:t,options:e})}}}async function aA(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wd("Browser returned unexpected credential type",t)}:{data:null,error:new Wd("Empty credential response",t)}}catch(t){return{data:null,error:YO({error:t,options:e})}}}const oA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},lA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Kd(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))s[o]=l;else if(n(l))s[o]=l;else if(t(l)){const d=s[o];t(d)?s[o]=Kd(d,l):s[o]=Kd(l)}else s[o]=l}return s}function cA(e,t){return Kd(oA,e,t||{})}function uA(e,t){return Kd(lA,e,t||{})}class dA{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:a},o){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:d};const h=a??eA.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=cA(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:w}=await iA({publicKey:p,signal:h});return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const p=uA(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:w}=await aA(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(l){return X(l)?{data:null,error:l}:{data:null,error:new gi("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new sc("rpId is required for WebAuthn authentication")};try{if(!T0())return{data:null,error:new gi("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:o});if(!l)return{data:null,error:d};const{webauthn:h}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:s,credential_response:h.credential_response}})}catch(l){return X(l)?{data:null,error:l}:{data:null,error:new gi("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new sc("rpId is required for WebAuthn registration")};try{if(!T0())return{data:null,error:new gi("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:s,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return X(l)?{data:null,error:l}:{data:null,error:new gi("Unexpected error in register",l)}}}}GO();const hA={url:oO,storageKey:lO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function C0(e,t,n){return await n()}const ba={};class rc{get jwks(){var t,n;return(n=(t=ba[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ba[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ba[this.storageKey]=Object.assign(Object.assign({},ba[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},hA),t);if(this.storageKey=o.storageKey,this.instanceID=(n=rc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,rc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&ft()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new VO({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=LN(o.fetch),this.lock=o.lock||C0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&ft()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=KO:this.lock=C0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:RN()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=E0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=E0(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ON}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(ft()&&(n=NO(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),ft()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),mO(o)){const h=(t=o.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return X(n)?this._returnResult({error:n}):this._returnResult({error:new gi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Un}),{data:l,error:d}=o;if(d||!l)return this._returnResult({data:{user:null,session:null},error:d});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(X(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,s,a;try{let o;if("email"in t){const{email:v,password:w,options:x}=t;let k=null,E=null;this.flowType==="pkce"&&([k,E]=await ya(this.storage,this.storageKey)),o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:v,password:w,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:k,code_challenge_method:E},xform:Un})}else if("phone"in t){const{phone:v,password:w,options:x}=t;o=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Un})}else throw new td("You must provide either an email or phone number and a password");const{data:l,error:d}=o;if(d||!l)return await ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:d}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:k0})}else if("phone"in t){const{phone:o,password:l,options:d}=t;n=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:k0})}else throw new td("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new va;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,a,o,l,d,h,p,v,w,x;let k,E;if("message"in t)k=t.message,E=t.signature;else{const{chain:T,wallet:R,statement:S,options:b}=t;let N;if(ft())if(typeof R=="object")N=R;else{const de=window;if("ethereum"in de&&typeof de.ethereum=="object"&&"request"in de.ethereum&&typeof de.ethereum.request=="function")N=de.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=R}const A=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),H=await N.request({method:"eth_requestAccounts"}).then(de=>de).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=MN(H[0]);let F=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!F){const de=await N.request({method:"eth_chainId"});F=qO(de)}const W={domain:A.host,address:B,statement:S,uri:A.href,version:"1",chainId:F,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=b==null?void 0:b.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=b==null?void 0:b.signInWithEthereum)===null||v===void 0?void 0:v.resources};k=QO(W),E=await N.request({method:"personal_sign",params:[JO(k),B]})}try{const{data:T,error:R}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:E},!((w=t.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Un});if(R)throw R;if(!T||!T.session||!T.user){const S=new va;return this._returnResult({data:{user:null,session:null},error:S})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:R})}catch(T){if(X(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(t){var n,s,a,o,l,d,h,p,v,w,x,k;let E,T;if("message"in t)E=t.message,T=t.signature;else{const{chain:R,wallet:S,statement:b,options:N}=t;let A;if(ft())if(typeof S=="object")A=S;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))A=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=S}const H=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const B=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),b?{statement:b}:null));let F;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")F=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)F=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)E=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),T=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${H.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(a=(s=N==null?void 0:N.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N==null?void 0:N.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((w=(v=N==null?void 0:N.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...N.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const B=await A.signMessage(new TextEncoder().encode(E),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=B}}try{const{data:R,error:S}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:wi(T)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(k=t.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Un});if(S)throw S;if(!R||!R.session||!R.user){const b=new va;return this._returnResult({data:{user:null,session:null},error:b})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:S})}catch(R){if(X(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(t){const n=await di(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new gO;const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Un});if(await ht(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const d=new va;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",o.session)},0)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:o,nonce:l}=t,d=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Un}),{data:h,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const v=new va;return this._returnResult({data:{user:null,session:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,a,o,l;try{if("email"in t){const{email:d,options:h}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ya(this.storage,this.storageKey));const{error:w}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(s=h==null?void 0:h.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in t){const{phone:d,options:h}=t,{data:p,error:v}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new td("You must provide either an email or phone number.")}catch(d){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var n,s;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:d}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Un});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(a){if(X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,s,a,o,l;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await ya(this.storage,this.storageKey));const p=await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:FO});return!((o=p.data)===null||o===void 0)&&o.url&&ft()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new tn;const{error:a}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(X(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:o}=t,{error:l}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:s,type:a,options:o}=t,{data:l,error:d}=await Z(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new td("You must provide either an email or phone number and a type")}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await di(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Qp:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const l=await di(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Zp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=MO(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hr}):await this._useSession(async n=>{var s,a,o;const{data:l,error:d}=n;if(d)throw d;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new tn}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:hr})})}catch(n){if(X(n))return pO(n)&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new tn;const l=a.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await ya(this.storage,this.storageKey));const{data:p,error:v}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:l.access_token,xform:hr});if(v)throw v;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new tn;const n=Date.now()/1e3;let s=n,a=!0,o=null;const{payload:l}=Yp(t.access_token);if(l.exp&&(s=l.exp,a=s<=n),a){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;o={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(X(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:l,error:d}=n;if(d)throw d;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new tn;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!ft())throw new nd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new nd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new y0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new y0("No code detected.");const{data:b,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:d,expires_at:h,token_type:p}=t;if(!o||!d||!l||!p)throw new nd("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(d);let x=v+w;h&&(x=parseInt(h));const k=x-v;k*1e3<=Na&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${w}s`);const E=x-w;v-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,x,v):v-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,x,v);const{data:T,error:R}=await this._getUser(o);if(R)throw R;const S={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:x,refresh_token:l,token_type:p,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:t.type},error:null})}catch(s){if(X(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await di(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(fO(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=SO(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await ya(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:a}=await this._useSession(async o=>{var l,d,h,p,v;const{data:w,error:x}=o;if(x)throw x;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",k,{headers:this.headers,jwt:(v=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return ft()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(X(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:d,token:h,access_token:p,nonce:v}=t,w=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:h,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Un}),{data:x,error:k}=w;return k?this._returnResult({data:{user:null,session:null},error:k}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new va}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:k}))}catch(a){if(await ht(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)throw l;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await EO(async a=>(a>0&&await _O(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Un})),(a,o)=>{const l=200*Math.pow(2,a);return o&&Xp(o)&&Date.now()+l-s<Na})}catch(s){if(this._debug(n,"error",s),X(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),ft()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await di(this.storage,this.storageKey);if(a&&this.userStorage){let l=await di(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await ka(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Zp()}else if(a&&!a.user&&!a.user){const l=await di(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await ht(this.storage,this.storageKey+"-user"),await ka(this.storage,this.storageKey,a)):a.user=Zp()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qp;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${Qp}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Xp(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(a.access_token);!d&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new tn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new bh;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new tn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),X(o)){const l={data:null,error:o};return Xp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,n)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ht(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await ka(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=S0(a);await ka(this.storage,this.storageKey,o)}else{const a=S0(n);await ka(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ht(this.storage,this.storageKey),await ht(this.storage,this.storageKey+"-code-verifier"),await ht(this.storage,this.storageKey+"-user"),this.userStorage&&await ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Na);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Na}ms, refresh threshold is ${og} ticks`),a<=og&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof PN)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,l]=await ya(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(d.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:p}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?sA(t.webauthn.credential_response):rA(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:tA(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:nA(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Yp(s.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await Z(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new tn})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new tn});const l=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new tn});const l=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&ft()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await Z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new tn})})}catch(t){if(X(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?(await Z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new tn})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(d=>d.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===t),s&&this.jwks_cached_at+dO>a)return s;const{data:o,error:l}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(d=>d.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:k,error:E}=await this.getSession();if(E||!k.session)return this._returnResult({data:null,error:E});s=k.session.access_token}const{header:a,payload:o,signature:l,raw:{header:d,payload:h}}=Yp(s);n!=null&&n.allowExpired||RO(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:k}=await this.getUser(s);if(k)throw k;return{data:{claims:o,header:a,signature:l},error:null}}const v=LO(a.alg),w=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,l,bO(`${d}.${h}`)))throw new ug("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(s){if(X(s))return this._returnResult({data:null,error:s});throw s}}}rc.nextInstanceID={};const fA=rc,pA="2.91.0";let kl="";typeof Deno<"u"?kl="deno":typeof document<"u"?kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kl="react-native":kl="node";const mA={"X-Client-Info":`supabase-js-${kl}/${pA}`},gA={headers:mA},vA={schema:"public"},yA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xA={};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}function wA(e,t){if(ic(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ic(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bA(e){var t=wA(e,"string");return ic(t)=="symbol"?t:t+""}function jA(e,t,n){return(t=bA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I0(Object(n),!0).forEach(function(s){jA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I0(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const SA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),NA=()=>Headers,kA=(e,t,n)=>{const s=SA(n),a=NA();return async(o,l)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:e;let p=new a(l==null?void 0:l.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),s(o,Ke(Ke({},l),{},{headers:p}))}};function _A(e){return e.endsWith("/")?e:e+"/"}function EA(e,t){var n,s;const{db:a,auth:o,realtime:l,global:d}=e,{db:h,auth:p,realtime:v,global:w}=t,x={db:Ke(Ke({},h),a),auth:Ke(Ke({},p),o),realtime:Ke(Ke({},v),l),storage:{},global:Ke(Ke(Ke({},w),d),{},{headers:Ke(Ke({},(n=w==null?void 0:w.headers)!==null&&n!==void 0?n:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function TA(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_A(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var CA=class extends fA{constructor(e){super(e)}},IA=class{constructor(e,t,n){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const o=TA(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:vA,realtime:xA,auth:Ke(Ke({},yA),{},{storageKey:l}),global:gA},h=EA(n??{},d);if(this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=h.auth)!==null&&p!==void 0?p:{},this.headers,h.global.fetch)}this.fetch=kA(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new cI(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new aO(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new rI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:o,flowType:l,lock:d,debug:h,throwOnError:p},v,w){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CA({url:this.authUrl.href,headers:Ke(Ke({},x),v),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:d,debug:h,throwOnError:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new _I(this.realtimeUrl.href,Ke(Ke({},e),{},{params:Ke(Ke({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const OA=(e,t,n)=>new IA(e,t,n);function AA(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}AA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DA="https://mvewgciqyhjcnxkfpawb.supabase.co",RA="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12ZXdnY2lxeWhqY254a2ZwYXdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjM2MDQsImV4cCI6MjA4NDQ5OTYwNH0.TIHQZdtG9pfK19kaPjGTKDumxT5KKTsdGGVuhWPn7zU",Oe=OA(DA,RA),O0=[{value:"email",labelId:"inbox.source.email",defaultMessage:"Email"},{value:"meeting",labelId:"inbox.source.meeting",defaultMessage:"Meeting note"},{value:"request",labelId:"inbox.source.request",defaultMessage:"Request"},{value:"idea",labelId:"inbox.source.idea",defaultMessage:"Idea"},{value:"external",labelId:"inbox.source.external",defaultMessage:"External"}],A0=[{value:"this-week",labelId:"inbox.action.thisWeek",defaultMessage:"This Week"},{value:"next-week",labelId:"inbox.action.nextWeek",defaultMessage:"Next Week"},{value:"later",labelId:"inbox.action.later",defaultMessage:"Later"},{value:"archive",labelId:"inbox.action.archive",defaultMessage:"Archive"}],D0=[{value:"LOW",labelId:"priority.low",defaultMessage:"Low"},{value:"MEDIUM",labelId:"priority.medium",defaultMessage:"Medium"},{value:"HIGH",labelId:"priority.high",defaultMessage:"High"},{value:"CRITICAL",labelId:"priority.critical",defaultMessage:"Critical"}],ne="http://localhost:4000",ja="archived",sd="all",wl="mine",tm="kanbax-inbox-items",dg="kanbax-inbox-statuses",BN="kanbax-timeline-overrides",UN="kanbax-initiatives",LA=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(dg);return e?JSON.parse(e):{}}catch{return{}}},PA=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(BN);return e?JSON.parse(e):{}}catch{return{}}},MA=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(UN);return e?JSON.parse(e):{}}catch{return{}}},$A=()=>{var Xx,Yx,Zx,ew,tw,nw,sw,rw,iw,aw,ow,lw,cw,uw,dw,hw,fw,pw,mw,gw,vw,yw,xw,ww,bw,jw,Sw,Nw,kw,_w,Ew,Tw,Cw,Iw,Ow,Aw,Dw,Rw,Lw;const e=dv(),t=(i,c)=>e.formatMessage({id:i},{defaultMessage:c}),n=(i,c,u,f)=>{if(!c)return t(u,f);const g=i.find(y=>y.value===c);return g?t(g.labelId,g.defaultMessage):c},s=i=>n(O0,i,"inbox.field.selectSource","Quelle whlen"),a=i=>n(A0,i,"inbox.field.selectAction","Aktion whlen"),o=i=>n(D0,i,"task.field.selectPriority","Priority whlen"),[l,d]=m.useState("dashboard"),[h,p]=m.useState(null),[v,w]=m.useState("comments"),[x,k]=m.useState(null),[E,T]=m.useState(null),[R,S]=m.useState(LA),[b,N]=m.useState(null),[A,H]=m.useState("eingang"),B={eingang:{label:t("inbox.view.incoming","Eingang"),tooltip:t("inbox.tooltip.incoming","Unsortierte Arbeit. Entscheide was wichtig ist")},spaeter:{label:t("inbox.view.later","Spter"),tooltip:t("inbox.tooltip.review","Zur spteren berprfung")},bearbeitet:{label:t("inbox.view.review","Bearbeitet"),tooltip:t("inbox.tooltip.worked","Spter / in Bearbeitung")},archiv:{label:t("inbox.view.archived","Archiviert"),tooltip:t("inbox.tooltip.archived","Archivierte Items")}},[F,W]=m.useState(!1),[de,oe]=m.useState(!1),[vt,Cn]=m.useState(!1),[In,xs]=m.useState(!1),so=m.useRef(null),Ir=m.useRef(null),Or=m.useRef(null),K=m.useRef(null),ae=r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:[r.jsx("path",{d:"M5 6.5V20h14V8.5L17.5 5H6a1 1 0 0 0-1 1.5z"}),r.jsx("path",{d:"M6 5.5h10v4H6z"}),r.jsx("circle",{cx:"12",cy:"15.5",r:"2",fill:"currentColor",stroke:"none"})]}),[Y,Re]=m.useState([]),qe=m.useRef({items:[],statuses:{}}),Hs=m.useRef({}),On=m.useRef({}),Ar=m.useRef({}),Kt=m.useRef({tenantId:null,skipNextSave:!1}),zs=i=>{const c=typeof i=="function"?i(Y):i;Re(c);try{localStorage.setItem(tm,JSON.stringify(c))}catch{}},FN=i=>{if(!(typeof window>"u"))try{window.localStorage.setItem(dg,JSON.stringify(i))}catch{}};m.useEffect(()=>{qe.current={items:Y,statuses:R}},[Y,R]);const ro=(i,c)=>{S(u=>{if(u[i]===c)return u;const f={...u,[i]:c};return FN(f),f}),c==="bearbeitet"&&T(i),c!==A&&N(null)};async function io(i,c,u){try{if(!(I!=null&&I.access_token))return;Kt.current={tenantId:i,skipNextSave:!0};const f=await fetch(`${ne}/teams/${i}/inbox`,{headers:se(!0,i)});if(!f.ok)return;const g=await f.json(),y=Array.isArray(g==null?void 0:g.items)?g.items:[],_=g!=null&&g.statuses&&typeof g.statuses=="object"?g.statuses:{},C=c.filter(O=>!O.tenantId||O.tenantId===i);if(y.length===0&&C.length>0){await vv(i,C,u),Kt.current={tenantId:i,skipNextSave:!0},Re(C),S(u);return}Re(y),S(_);try{localStorage.setItem(tm,JSON.stringify(y)),localStorage.setItem(dg,JSON.stringify(_))}catch{}}catch{}}async function vv(i,c,u){try{if(!(I!=null&&I.access_token))return;const f=c.filter(_=>!_.tenantId||_.tenantId===i),g=new Set(f.map(_=>_.id)),y=Object.fromEntries(Object.entries(u).filter(([_])=>g.has(_)));await fetch(`${ne}/teams/${i}/inbox`,{method:"PUT",headers:se(!0,i),body:JSON.stringify({items:f.map(_=>({..._,creatorAvatarUrl:void 0})),statuses:y})})}catch{}}const HN=async(i,c)=>{if(j)try{const u=si(j),f=await fetch(`${ne}/commands/task/create`,{method:"POST",headers:se(!0,j),body:JSON.stringify({title:i.title,description:i.description||"",kinds:i.kind?[i.kind]:[],status:V.BACKLOG,priority:i.priority||(L==null?void 0:L.defaultPriority)||"MEDIUM",dueDate:void 0,attachments:[],ownerId:i.creatorId||(D==null?void 0:D.id)||void 0,assignees:[],boardId:u,source:{type:"MANUAL",createdBy:i.creatorId||(D==null?void 0:D.id)||"inbox"}})});if(!f.ok){let _="Failed to create task";try{const C=await f.json();_=(C==null?void 0:C.error)||_}catch{}throw new Error(_)}let g=null,y=null;try{const _=await f.json();y=(_==null?void 0:_.task)||_,g=(y==null?void 0:y.id)||(_==null?void 0:_.taskId)||null}catch{g=null}g?(y&&(ho(_=>{const C=_[j]||[];return C.some(O=>O.id===g)?_:{..._,[j]:[y,...C]}}),fo(_=>{const C=_[j]||[];return C.some(O=>O.id===g)?_:{..._,[j]:[y,...C]}}),$i(_=>_.some(C=>C.id===g)?_:[y,..._])),Wy(c,g)):xn(),ro(i.id,"bearbeitet"),k(null),fn(t("inbox.toast.addedToScope","Added to scope window"))}catch(u){alert(u.message||"Failed to add to scope")}},zN=i=>{Dr({title:i.title||"",source:i.source||"",suggestedAction:i.suggestedAction||"",description:i.description||"",priority:i.priority||"MEDIUM"}),mc(i.id),W(!0)},[We,Dr]=m.useState({title:"",source:"",suggestedAction:"",description:"",priority:"MEDIUM"}),[yv,mc]=m.useState(null),xv=i=>{de&&so.current&&!so.current.contains(i.target)&&oe(!1),vt&&Ir.current&&!Ir.current.contains(i.target)&&Cn(!1),In&&K.current&&!K.current.contains(i.target)&&xs(!1),x&&Or.current&&!Or.current.contains(i.target)&&k(null),Fh&&af.current&&!af.current.contains(i.target)&&jo(!1)};m.useEffect(()=>{l==="list"&&d("table")},[l]),m.useEffect(()=>{const i=new URLSearchParams(window.location.search);if(i.get("view")==="calendar"){d("calendar"),i.delete("view");const u=i.toString();window.history.replaceState({},"",`${window.location.pathname}${u?`?${u}`:""}`)}},[]),m.useEffect(()=>{const i=()=>{const u=new URLSearchParams(window.location.search).get("scope");u?(vn(u),d("scope"),$t("detail")):(vn(null),$t("list"))};return i(),window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),m.useEffect(()=>{const i=()=>{const u=new URLSearchParams(window.location.search).get("initiative");u?(ws(u),d("initiatives"),Dn("detail")):(ws(null),Dn("list"))};return i(),window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]);const[I,wv]=m.useState(null),[D,jh]=m.useState(null),[yt,gc]=m.useState([]),[ao,bv]=m.useState([]),[j,jv]=m.useState(()=>{try{return localStorage.getItem("kanbax-active-tenant")}catch{return null}});m.useEffect(()=>{try{const i=localStorage.getItem(tm);if(i){const u=JSON.parse(i).map(f=>({...f,creatorAvatarUrl:void 0}));zs(u)}}catch{}},[]),m.useEffect(()=>{!j||!(I!=null&&I.access_token)||io(j,Y,R)},[j,I==null?void 0:I.access_token]),m.useEffect(()=>{if(!j||!(I!=null&&I.access_token)||l!=="inbox")return;io(j,Y,R);const i=window.setInterval(()=>{io(j,Y,R)},1e4);return()=>window.clearInterval(i)},[j,I==null?void 0:I.access_token,l]),m.useEffect(()=>{!b&&Y.length>0&&N(Y[0].id)},[Y,b]),m.useEffect(()=>{if(!(!j||!(I!=null&&I.access_token))){if(Kt.current.skipNextSave&&Kt.current.tenantId===j){Kt.current={tenantId:j,skipNextSave:!1};return}vv(j,Y,R)}},[j,Y,R,I==null?void 0:I.access_token]);const[oo,lo]=m.useState(!1),[Sh,Nh]=m.useState(""),[Sv,Nv]=m.useState(""),[kv,_v]=m.useState(!1),[Ev,Tv]=m.useState(""),[Cv,VN]=m.useState("MEMBER"),[Iv,WN]=m.useState([]),[vc,Pt]=m.useState(null),[KN,Ov]=m.useState(!1),[Av,GN]=m.useState(!1),[qN,JN]=m.useState(!1),[kh,yc]=m.useState(!1),[Oi,QN]=m.useState({}),[Vs,_h]=m.useState("login"),[xc,XN]=m.useState(""),[Eh,YN]=m.useState(""),[Dv,wc]=m.useState(null),[Rv,co]=m.useState(null),[ZN,Lv]=m.useState(!1),[L,Me]=m.useState(null),[Pv,Mv]=m.useState(!1),[$v,Th]=m.useState(null),[bc,fn]=m.useState(null),[Ch,Ws]=m.useState([]),[uo,jc]=m.useState(null),[Bv,Ai]=m.useState({}),[An,ho]=m.useState({}),[Uv,fo]=m.useState({}),[HA,Fv]=m.useState(!1),[pn,Hv]=m.useState(null),[zv,Vv]=m.useState(!1),Sc=m.useRef(!1);m.useRef(null);const Di=m.useRef(null),Ri=m.useRef(null),Wv=m.useRef(0),[Ih,Rr]=m.useState(!1),[Oh,Jn]=m.useState(!1),[Ah,Nc]=m.useState(!1),[Li,Lr]=m.useState(!1),[Pi,Pr]=m.useState(!1),Dh=m.useRef(null),Rh=m.useRef(null),[zA,ek]=m.useState(null),[Mi,VA]=m.useState(30);m.useEffect(()=>{ek(null)},[Mi]);const[_t,tk]=m.useState(()=>{try{return localStorage.getItem("kanbax-sidebar-collapsed")==="true"}catch{return!1}}),[me,$i]=m.useState([]),[Mr,kc]=m.useState(null),[Mt,Lh]=m.useState([]),[Qn,Kv]=m.useState({}),[Ph,_c]=m.useState(!1),[Gv,nk]=m.useState(!1),[Mh,Ec]=m.useState(!1),[sk,$h]=m.useState(!1),[Tc,rk]=m.useState(()=>MA()),[Ks,Cc]=m.useState(()=>{try{const i=localStorage.getItem("kanbax-scope-windows");if(!i)return{};const c=JSON.parse(i),u={};return Object.entries(c).forEach(([f,g])=>{if(Array.isArray(g))if(f.includes(":")){const y=f.split(":")[0];if(!y)return;const _=u[y]||[];g.forEach(C=>{_.some(O=>O.id===C.id)||_.push({...C,visibility:C.visibility==="personal"?"personal":"shared",createdBy:C.createdBy||null,initiativeId:C.initiativeId??null})}),u[y]=_}else u[f]=g.map(y=>({...y,visibility:y.visibility==="personal"?"personal":"shared",createdBy:y.createdBy||null,initiativeId:y.initiativeId??null}))}),u}catch{return{}}}),[mn,Bi]=m.useState({name:"",description:"",startDate:"",endDate:"",visibility:"shared"}),[qv,Ic]=m.useState(null),[Jv,Qv]=m.useState(""),[ik,Oc]=m.useState(null),[gn,Gs]=m.useState(null),[Et,$t]=m.useState("list"),[po,vn]=m.useState(null),[Xn,ak]=m.useState("ALL"),[Yn,ok]=m.useState("ALL"),[Ui,mo]=m.useState(!1),[Fi,go]=m.useState(!1),[Bt,Bh]=m.useState("board"),[Ac,vo]=m.useState(!1),[$r,Xv]=m.useState("current"),[yo,xo]=m.useState(!1),[Zn,Dn]=m.useState("list"),[wo,ws]=m.useState(null),[Ze,Hi]=m.useState(null),[bs,bo]=m.useState("ACTIVE"),[lk,zi]=m.useState(!1),[Gt,js]=m.useState({name:"",goal:"",description:"",ownerId:""}),[Yv,Dc]=m.useState(""),[ck,Uh]=m.useState(null),[qt,Rc]=m.useState(null),[Fh,jo]=m.useState(!1),So=m.useRef({tenantId:null,skipNextSave:!1}),[Zv,uk]=m.useState(!1),[et,Ss]=m.useState({name:"",description:"",startDate:"",endDate:"",visibility:"shared",members:[]}),[Lc,Hh]=m.useState(""),[ey,zh]=m.useState("MEMBER"),[Vh,Wh]=m.useState(""),[ty,Kh]=m.useState(""),[Gh,Pc]=m.useState(""),[dk,Mc]=m.useState(!1),[le,Vi]=m.useState(null),[$c,Br]=m.useState([]),[ny,sy]=m.useState(!1),[ry,qh]=m.useState(null),[Wi,Rn]=m.useState(null),[No,WA]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-pinned")||"[]")}catch{return[]}}),[iy,ay]=m.useState([]),[ko,hk]=m.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-recent")||"[]")}catch{return[]}}),[es,oy]=m.useState(null),[qs,ly]=m.useState("list"),[ts,Jh]=m.useState("list"),[_o,Qh]=m.useState(0),[Xh,Eo]=m.useState(!1),[Yh,Bc]=m.useState(!1),[Zh,Uc]=m.useState(!1),[Ki,To]=m.useState(null),[ef,Co]=m.useState(!1),[Fc,Io]=m.useState(null),[Oo,Hc]=m.useState(null),[$e,ns]=m.useState({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),[tt,xt]=m.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[Ur,Fr]=m.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[KA,GA]=m.useState({}),[Ao,cy]=m.useState(""),[Gi,fk]=m.useState("ALL"),[Hr,uy]=m.useState(!1),[Ns,dy]=m.useState("ALL"),[Ln,hy]=m.useState("ALL"),[Pn,qi]=m.useState(!1),zc=m.useRef(null),[Jt,Do]=m.useState([]),[Ji,Vc]=m.useState(!1),[Js,Ro]=m.useState(!1),tf=m.useRef(null),nf=m.useRef(null),sf=m.useRef(null),rf=m.useRef(null),af=m.useRef(null),[ss,lt]=m.useState(null),[Qi,fy]=m.useState(()=>new Date),[of,lf]=m.useState(()=>new Date),[py,my]=m.useState([]),[pk,mk]=m.useState([]),[gk,gy]=m.useState(!1),[vy,rs]=m.useState(null),[Mn,yy]=m.useState("auto"),[Qs,Xi]=m.useState(!1),Wc=m.useRef(null),[ks,cf]=m.useState(PA),xy=m.useRef({}),Lo=m.useRef({tenantId:null,skipNextSave:!1}),Po=m.useRef(null),[Yi,Zi]=m.useState(null),[wy,uf]=m.useState(0),[zr,df]=m.useState(null),[by,hf]=m.useState(0),[is,Vr]=m.useState(0),[Kc,Mo]=m.useState(!1),[ff,$o]=m.useState(1),[Bo,Uo]=m.useState("move"),[jy,Fo]=m.useState(null),[Sy,Ho]=m.useState(1);m.useEffect(()=>{const i=c=>{const u=c.target;Pi&&Dh.current&&!Dh.current.contains(u)&&Pr(!1),Li&&Rh.current&&!Rh.current.contains(u)&&Lr(!1),Pn&&zc.current&&!zc.current.contains(u)&&qi(!1),Ji&&tf.current&&!tf.current.contains(u)&&Vc(!1),Js&&nf.current&&!nf.current.contains(u)&&Ro(!1),Ui&&sf.current&&!sf.current.contains(u)&&mo(!1),Fi&&rf.current&&!rf.current.contains(u)&&go(!1),Qs&&Wc.current&&!Wc.current.contains(u)&&Xi(!1),ss&&(u.closest("[data-member-dropdown]")||lt(null))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[Pi,Li,Pn,Ji,Js,Ui,Fi,Qs,ss]),m.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(BN,JSON.stringify(ks))}catch{}},[ks]),m.useEffect(()=>{xy.current=ks},[ks]);async function Ny(i,c){try{if(!(I!=null&&I.access_token)||On.current[i])return;On.current[i]=!0,Lo.current={tenantId:i,skipNextSave:!0};const u=await fetch(`${ne}/teams/${i}/timeline-overrides`,{headers:se(!0,i)});if(!u.ok)return;const f=await u.json(),g=f!=null&&f.overrides&&typeof f.overrides=="object"?f.overrides:{};if(Object.keys(g).length===0&&Object.keys(c).length>0){await ky(i,c),Lo.current={tenantId:i,skipNextSave:!0},cf(c);return}cf(g)}catch{}finally{On.current[i]=!1}}async function ky(i,c){try{if(!(I!=null&&I.access_token))return;await fetch(`${ne}/teams/${i}/timeline-overrides`,{method:"PUT",headers:se(!0,i),body:JSON.stringify({overrides:c})})}catch{}}const[_y,Ey]=m.useState(""),[Gc,Ty]=m.useState(null),[qc,Jc]=m.useState(!1),[vk,yk]=m.useState(0),[Cy,Iy]=m.useState(""),[Qc,Oy]=m.useState(""),[qA,pf]=m.useState(()=>!_t),[JA,mf]=m.useState(()=>!_t&&l==="okr"),[zo,gf]=m.useState(!1);m.useEffect(()=>{l!=="kanban"&&l!=="table"&&pf(!1),l!=="okr"&&mf(!1)},[l]);const[yn,ea]=m.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[Ay,Vo]=m.useState([]),[Wo,Ko]=m.useState([]),[Dy,Go]=m.useState(""),[be,Ry]=m.useState(null),[qo,Jo]=m.useState(null),[Wr,Xc]=m.useState(null),[Xs,vf]=m.useState([]),[xk,wk]=m.useState(V.BACKLOG),[Qo,Ys]=m.useState(!1),[yf,Kr]=m.useState(null),[Xo,xf]=m.useState(!1),[Yo,wf]=m.useState(null),[Qt,Zo]=m.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[ve,Ly]=m.useState(null),[Gr,Yc]=m.useState(null),[bk,Py]=m.useState(null),[el,jk]=m.useState(null),[qr,Zc]=m.useState(null),[Zs,bf]=m.useState([]),[Sk,My]=m.useState([]),[eu,ta]=m.useState([]),[Nk,tu]=m.useState([]),[kk,nu]=m.useState([]),[tl,su]=m.useState([]),[$y,ru]=m.useState(""),[By,jf]=m.useState(""),[Jr,Qr]=m.useState([]),[Sf,Xr]=m.useState(""),[na,iu]=m.useState(null),[as,sa]=m.useState([]),[nl,Yr]=m.useState(""),Nf=m.useRef(null),kf=m.useRef(null),[Uy,_f]=m.useState(!0),[Fy,Ef]=m.useState(null),se=(i=!0,c)=>{const u={"Content-Type":"application/json"};I!=null&&I.access_token&&(u.Authorization=`Bearer ${I.access_token}`);const f=i?c??j??"":"";return i&&f&&(u["x-tenant-id"]=f),D!=null&&D.id&&(u["x-user-id"]=D.id),u};m.useEffect(()=>{Oe.auth.getSession().then(({data:c})=>wv(c.session));const{data:{subscription:i}}=Oe.auth.onAuthStateChange((c,u)=>{wv(u)});return()=>i.unsubscribe()},[]),m.useEffect(()=>{const i=()=>{const u=yx(window.location.pathname);oy(u),u&&d("okr")};i();const c=()=>i();return window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)},[]),m.useEffect(()=>{l!=="okr"&&window.location.pathname.startsWith("/okr")&&window.history.replaceState({},"","/")},[l]);const au=m.useRef(!1),Tf=m.useRef(!1),xn=async()=>{var i,c;if(!au.current){au.current=!0;try{if(_f(!0),!I||!j){$i([]),kc(null),Ef(null),_f(!1);return}const u=await fetch(`${ne}/boards`,{headers:se()});if(!u.ok)throw new Error("Failed to fetch task lists");const f=await u.json();Lh(f),j&&Kv(M=>({...M,[j]:f}));const g=(()=>{try{return localStorage.getItem(`kanbax-active-board:${j}`)}catch{return null}})(),y=((i=f[0])==null?void 0:i.id)||null,_=g&&f.some(M=>M.id===g)?g:y;if(Vi(_),_)try{localStorage.setItem(`kanbax-active-board:${j}`,_)}catch{}const C=_||"",O=await fetch(`${ne}/tasks?boardId=${encodeURIComponent(C)}`,{headers:se()});if(!O.ok)throw new Error("Failed to fetch tasks");const z=await O.json(),ie=(D==null?void 0:D.id)||((c=I==null?void 0:I.user)==null?void 0:c.id)||"";$i(z),j&&ho(M=>{const q=M[j];return C!=="all"&&q&&q.length>0?M:{...M,[j]:z}});const ye=_&&(f.find(M=>M.id===_)||f[0])||null;kc(ye);const fe=z.flatMap(M=>(M.kinds||[]).map(q=>q.trim())).filter(M=>M.length>0),U=(()=>{try{const M=localStorage.getItem("kanbax-kind-history");return M?JSON.parse(M):[]}catch{return[]}})(),J=Array.from(new Set([...U,...fe])).sort((M,q)=>M.localeCompare(q));nu(J);try{localStorage.setItem("kanbax-kind-history",JSON.stringify(J))}catch{}Ef(null)}catch(u){Ef(u.message)}finally{_f(!1),au.current=!1,Tf.current&&(Tf.current=!1,xn())}}},ou=()=>{if(au.current){Tf.current=!0;return}xn()},ra=i=>{const c=typeof i=="string"?i:(i==null?void 0:i.error)||(i==null?void 0:i.message)||"Unknown error",u=c.toLowerCase();return u.includes("permission")?{code:"permission",safeReason:"Blocked by permission."}:u.includes("policy")||u.includes("denied")?{code:"policy",safeReason:"Blocked by policy."}:{code:"unknown",safeReason:c}},Hy=async()=>{if(!I||!j){Br([]),qh(null),Rn(null);return}try{sy(!0);const i=le===sd||le===wl||le===ja?si(j):le||"default-board",c=await fetch(`${ne}/okrs?boardId=${encodeURIComponent(i)}`,{headers:se()});if(!c.ok){const f=await c.json();throw new Error(f.error||"Failed to load OKRs")}const u=await c.json();Br(u||[]),qh(null),Rn(null)}catch(i){qh(i.message),Rn(ra(i))}finally{sy(!1)}},lu=async()=>{if(j)try{const i=await fetch(`${ne}/calendar/imports`,{headers:se(!0)});if(!i.ok){const u=await i.json();throw new Error(u.error||"Failed to load calendar imports")}const c=await i.json();mk(c||[])}catch(i){rs(i.message)}},sl=async(i,c)=>{if(j){gy(!0),rs(null);try{const u=new URLSearchParams({start:i.toISOString(),end:c.toISOString()}),f=await fetch(`${ne}/calendar/events?${u.toString()}`,{headers:se(!0)});if(!f.ok){const y=await f.json();throw new Error(y.error||"Failed to load calendar events")}const g=await f.json();my(g||[])}catch(u){my([]),rs(u.message)}finally{gy(!1)}}},_k=async()=>{if(!Gc){rs("Please select an .ics file to import.");return}Jc(!0),rs(null);try{const i=await Gc.text(),c=_y.trim()||Gc.name.replace(/\.ics$/i,"")||"Imported calendar",u=await fetch(`${ne}/calendar/imports`,{method:"POST",headers:{...se(!0),"Content-Type":"application/json"},body:JSON.stringify({name:c,ics:i})});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to import calendar")}Ey(""),Ty(null),yk(f=>f+1),await lu(),sl(Ct.start,Ct.end)}catch(i){rs(i.message)}finally{Jc(!1)}},Ek=async()=>{if(!Qc.trim()){rs("Please paste an ICS subscription URL.");return}Jc(!0),rs(null);try{const i=Cy.trim()||"Subscribed calendar",c=await fetch(`${ne}/calendar/imports`,{method:"POST",headers:{...se(!0),"Content-Type":"application/json"},body:JSON.stringify({name:i,url:Qc.trim()})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to subscribe calendar")}Iy(""),Oy(""),await lu(),sl(Ct.start,Ct.end)}catch(i){rs(i.message)}finally{Jc(!1)}},Tk=async i=>{try{const c=await fetch(`${ne}/calendar/imports/${i}`,{method:"DELETE",headers:se(!0)});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to remove calendar import")}await lu(),sl(Ct.start,Ct.end)}catch(c){rs(c.message)}},zy=i=>{const c=new Date(Qi);c.setMonth(c.getMonth()+i),fy(c),lf(c)},Ck=()=>{const i=new Date;fy(i),lf(i)},Vy=async(i,c)=>{var u;if(j)try{const f={title:i.title.trim(),description:((u=i.description)==null?void 0:u.trim())||null,ownerId:i.ownerId||null,startDate:i.startDate||null,endDate:i.endDate||null,status:i.status||"ACTIVE",boardId:le===sd||le===wl||le===ja?si(j):le||"default-board"};if(!f.title){alert("Objective title is required");return}const g=!!Ki,y=await fetch(g?`${ne}/okrs/objectives/${Ki}`:`${ne}/okrs/objectives`,{method:g?"PATCH":"POST",headers:se(),body:JSON.stringify(f)});if(!y.ok){const C=await y.json();throw new Error(C.error||`Failed to ${g?"update":"create"} objective`)}const _=await y.json();Br(C=>g?C.map(O=>O.id===_.id?_:O):[_,...C]),Rn(null),c&&c()}catch(f){alert(f.message),Rn(ra(f))}},Ik=async()=>{await Vy(Ur,()=>{Fr({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Ok=async()=>{if(!j)return;const i=prompt("Task list name");if(i)try{const c=await fetch(`${ne}/boards`,{method:"POST",headers:se(),body:JSON.stringify({name:i.trim()})});if(!c.ok){const f=await c.json();throw new Error(f.error||"Failed to create task list")}const u=await c.json();Lh(f=>f.concat(u)),Vi(u.id),kc(u);try{localStorage.setItem(`kanbax-active-board:${j}`,u.id)}catch{}xn()}catch(c){alert(c.message)}},Ak=i=>{if(i){Vi(i);try{localStorage.setItem(`kanbax-active-board:${j}`,i)}catch{}xn()}},Dk=()=>{d("scope"),$t("list"),vn(null),ls(null,"replace")},Rk=()=>{d("initiatives"),Dn("list"),ws(null),ei(null,"replace")},Lk=()=>{var u,f,g,y;if(!cs||!mn.name.trim())return;const i=d_(),c={id:i,name:mn.name.trim(),description:((u=mn.description)==null?void 0:u.trim())||null,startDate:mn.startDate||null,endDate:mn.endDate||null,taskIds:[],createdAt:new Date().toISOString(),visibility:mn.visibility==="personal"?"personal":"shared",createdBy:(D==null?void 0:D.id)||((f=I==null?void 0:I.user)==null?void 0:f.id)||null,completionStatus:null,completionComment:null,completedAt:null,completedBy:null,initiativeId:ck||null,members:D!=null&&D.id||(g=I==null?void 0:I.user)!=null&&g.id?[{userId:(D==null?void 0:D.id)||((y=I==null?void 0:I.user)==null?void 0:y.id)||"",role:"ADMIN"}]:[]};rr(_=>_.concat(c)),Bi({name:"",description:"",startDate:"",endDate:"",visibility:"shared"}),Gs(i),vo(!1),Uh(null)},cu=i=>{d("scope"),Gs(i),$t("detail"),vn(i),ls(i,"push")},Cf=i=>{Hi(i),Dn("detail"),ws(i),ei(i,"push")},Pk=()=>{var f;if(!j)return;const i=Gt.name.trim();if(!i)return;const c=new Date().toISOString(),u={id:u_(),name:i,goal:Gt.goal.trim()||null,description:Gt.description.trim()||null,ownerId:Gt.ownerId||(D==null?void 0:D.id)||((f=I==null?void 0:I.user)==null?void 0:f.id)||null,status:"ACTIVE",createdAt:c,closedAt:null};ol(j,g=>g.concat(u)),js({name:"",goal:"",description:"",ownerId:""}),zi(!1),bo("ACTIVE"),Cf(u.id)},Mk=()=>{if(!j||!qt)return;const i=Gt.name.trim();i&&(ol(j,c=>c.map(u=>u.id===qt?{...u,name:i,goal:Gt.goal.trim()||null,description:Gt.description.trim()||null,ownerId:Gt.ownerId||null}:u)),Rc(null),js({name:"",goal:"",description:"",ownerId:""}),zi(!1))},$k=i=>{j&&(ol(j,c=>c.map(u=>u.id===i?{...u,status:"CLOSED",closedAt:new Date().toISOString()}:u)),bs==="ACTIVE"&&bo("CLOSED"))},Bk=i=>{j&&(ol(j,c=>c.map(u=>u.id===i?{...u,status:"ACTIVE",closedAt:null}:u)),bs==="CLOSED"&&bo("ACTIVE"))},Uk=i=>{j&&confirm("Delete this initiative and unlink its scopes?")&&(ol(j,c=>c.filter(u=>u.id!==i)),rr(c=>c.map(u=>u.initiativeId===i?{...u,initiativeId:null}:u)),Ze===i&&(Hi(null),Dn("list"),ws(null),ei(null,"replace")))},Wy=(i,c)=>{Es(i)&&rr(u=>u.map(f=>f.id===i&&!f.taskIds.includes(c)?{...f,taskIds:f.taskIds.concat(c)}:f))},If=(i,c)=>{il(i)&&rr(u=>u.map(f=>f.id===i?{...f,initiativeId:c||null}:f))},Fk=i=>{il(i)&&confirm("Delete this scope window and remove its task links?")&&(rr(c=>c.filter(u=>u.id!==i)),Ic(c=>c===i?null:c),i===gn&&(Gs(null),$t("list"),vn(null),ls(null,"replace")))},Hk=(i,c)=>{Es(c)&&(i.preventDefault(),i.dataTransfer.dropEffect="move",Oc(c))},zk=(i,c)=>{const u=i.currentTarget,f=i.relatedTarget;(!f||!u.contains(f))&&Oc(g=>g===c?null:g)},Vk=(i,c)=>{if(!Es(c))return;i.preventDefault();const u=i.dataTransfer.getData("text/plain")||pn||"";u&&(Wy(c,u),Oc(null),fn("Added to scope window"),pa())},uu=m.useRef(null),Wk=i=>i.status===V.BACKLOG?V.TODO:i.status,Ky=(i,c,u,f)=>{Es(i)&&rr(g=>g.map(y=>{if(y.id!==i)return y;const _=y.taskIds.filter(z=>z!==c);let C=_.length;if(u){const z=_.indexOf(u);z>=0&&(C=z)}else if(f){const z=_.reduce((ie,ye,fe)=>{const U=os.get(ye);return U&&Wk(U)===f?fe:ie},-1);C=z>=0?z+1:_.length}const O=_.slice();return O.splice(C,0,c),{...y,taskIds:O}}))},Kk=(i,c,u)=>{if(!Es(P==null?void 0:P.id)||(i.preventDefault(),i.dataTransfer.dropEffect="move",!pn||!P)||!P.taskIds.includes(pn))return;const f=`${c}:${u}`;uu.current!==f&&(uu.current=f,i.currentTarget.classList.add("drag-over-card"))},Gk=i=>{const c=i.currentTarget,u=i.relatedTarget;(!u||!c.contains(u))&&i.currentTarget.classList.remove("drag-over-card")},qk=(i,c,u)=>{if(!Es(P==null?void 0:P.id))return;i.preventDefault(),i.currentTarget.classList.remove("drag-over-card");const f=i.dataTransfer.getData("text/plain")||pn||"";if(!f||!P||!P.taskIds.includes(f))return;const g=os.get(f),y=c===V.TODO?V.TODO:c;g&&(g.status===y||y===V.TODO&&g.status===V.BACKLOG)||Au(f,y),Ky(P.id,f,u,y),uu.current=null,pa()},Gy=i=>{Es(P==null?void 0:P.id)&&(i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over"))},qy=i=>{const c=i.currentTarget,u=i.relatedTarget;(!u||!c.contains(u))&&i.currentTarget.classList.remove("drag-over")},Jy=(i,c)=>{if(!Es(P==null?void 0:P.id))return;i.preventDefault(),i.currentTarget.classList.remove("drag-over");const u=i.dataTransfer.getData("text/plain")||pn||"";if(!u||!P||!P.taskIds.includes(u))return;const f=os.get(u),g=c===V.TODO?V.TODO:c;f&&(f.status===g||g===V.TODO&&f.status===V.BACKLOG)||Au(u,g),Ky(P.id,u,null,g),fn(`Moved to ${g}`),pa()},Qy=async i=>{if(i&&!Qn[i])try{const c=await fetch(`${ne}/boards`,{headers:se(!0,i)});if(!c.ok)return;const u=await c.json();Kv(f=>({...f,[i]:u}))}catch{}},Xy=async()=>{await Vy(tt,()=>{Uc(!1),To(null),xt({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Jk=i=>{To(i.id),xt({title:i.title,description:i.description||"",ownerId:i.ownerId||"",startDate:ix(i.startDate),endDate:ix(i.endDate),status:i.status||"ACTIVE"}),Bc(!0)},Qk=async i=>{if(confirm("Delete this objective and its key results?"))try{const c=await fetch(`${ne}/okrs/objectives/${i}`,{method:"DELETE",headers:se()});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to delete objective")}Br(u=>u.filter(f=>f.id!==i)),Kf("/okr")}catch(c){alert(c.message),Rn(ra(c))}},Xk=async(i,c)=>{if(confirm("Delete this key result?"))try{const u=await fetch(`${ne}/okrs/key-results/${i}`,{method:"DELETE",headers:se()});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to delete key result")}Br(f=>f.map(g=>g.id===c?{...g,keyResults:g.keyResults.filter(y=>y.id!==i)}:g))}catch(u){alert(u.message),Rn(ra(u))}},Yk=async()=>{if(!(!j||!le)&&!(le===ja||le===sd||le===wl)&&confirm("Delete this task list and all its data? This cannot be undone."))try{const i=await fetch(`${ne}/boards/${le}`,{method:"DELETE",headers:se()});if(!i.ok){const f=await i.json();throw new Error(f.error||"Failed to delete task list")}const c=Mt.filter(f=>f.id!==le);Lh(c);const u=c[0]||null;Vi((u==null?void 0:u.id)||null),kc(u),Eo(!1);try{u!=null&&u.id?localStorage.setItem(`kanbax-active-board:${j}`,u.id):localStorage.removeItem(`kanbax-active-board:${j}`)}catch{}xn()}catch(i){alert(i.message)}},Zk=i=>{Io(i),ns({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),Hc(null),Co(!0)},Of=(i,c)=>{Io(c),ns({title:i.title,description:i.description||"",assignees:i.assignees||[],startValue:String(i.startValue),targetValue:String(i.targetValue),status:i.status||"ON_TRACK"}),Hc(i.id),Co(!0)},[Yy,rl]=m.useState(null),[Af,Df]=m.useState(""),[Rf,_s]=m.useState(null),Zy=i=>{rl(i.id),Df(String(Math.round(i.progress??0)))},du=(i,c)=>{const u=Number(Af);if(Number.isNaN(u)){rl(null);return}const f=Math.max(0,Math.min(100,u)),g=i.targetValue-i.startValue,y=i.startValue+g*f/100;ia(i.id,c,{currentValue:Number.isFinite(y)?y:i.currentValue}),rl(null)},Tt=i=>i==="ON_TRACK"?"On track":i==="AT_RISK"?"At risk":i==="OFF_TRACK"?"Off track":i==="PAUSED"?"Paused":i==="DONE"?"Done":i,e_=async()=>{var i,c;if(Fc){if(!$e.title.trim()){alert("Key result title is required");return}if(Oo){await ia(Oo,Fc,{title:$e.title.trim(),description:((i=$e.description)==null?void 0:i.trim())||null,assignees:$e.assignees||[],startValue:Number($e.startValue),targetValue:Number($e.targetValue),status:$e.status||"ON_TRACK"}),Co(!1),Io(null),Hc(null),ns({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"});return}try{const u=await fetch(`${ne}/okrs/objectives/${Fc}/key-results`,{method:"POST",headers:se(),body:JSON.stringify({title:$e.title.trim(),description:((c=$e.description)==null?void 0:c.trim())||null,assignees:$e.assignees||[],startValue:Number($e.startValue),targetValue:Number($e.targetValue),currentValue:Number($e.startValue),status:$e.status||"ON_TRACK"})});if(!u.ok){const g=await u.json();throw new Error(g.error||"Failed to create key result")}const f=await u.json();Br(g=>g.map(y=>y.id===Fc?{...y,keyResults:[...y.keyResults,f],progress:y.keyResults.length?(y.keyResults.reduce((_,C)=>_+C.progress,0)+f.progress)/(y.keyResults.length+1):f.progress}:y)),Co(!1),Io(null),ns({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),Rn(null)}catch(u){alert(u.message),Rn(ra(u))}}},ia=async(i,c,u)=>{try{const f=await fetch(`${ne}/okrs/key-results/${i}`,{method:"PATCH",headers:se(),body:JSON.stringify(u)});if(!f.ok){const y=await f.json();throw new Error(y.error||"Failed to update key result")}const g=await f.json();Br(y=>y.map(_=>{if(_.id!==c)return _;const C=_.keyResults.map(z=>z.id===i?{...z,...g}:z),O=C.length?C.reduce((z,ie)=>z+ie.progress,0)/C.length:0;return{..._,keyResults:C,progress:O}})),Rn(null)}catch(f){alert(f.message),Rn(ra(f))}},t_=i=>{var u;const c=((u=i==null?void 0:i.toUpperCase)==null?void 0:u.call(i))||"ON_TRACK";return c==="AT_RISK"?"AT_RISK":c==="OFF_TRACK"?"OFF_TRACK":"ON_TRACK"},n_=i=>{if(i.length===0)return 0;const c=i.reduce((u,f)=>u+f.progress,0);return Math.round(c/i.length)},er=i=>i.status!=="DONE",hu=i=>{var y;if(!(i!=null&&i.dueDate)||i.status===V.DONE||i.status===V.ARCHIVED)return"none";const c=new Date(i.dueDate);if(Number.isNaN(c.getTime()))return"none";const u=new Date,f=((y=L==null?void 0:L.reminders)==null?void 0:y.dueSoonHours)??24,g=new Date(u.getTime()+f*60*60*1e3);return c<u?"overdue":c<=g?"due-soon":"none"},fu=i=>{const c=i.getFullYear(),u=String(i.getMonth()+1).padStart(2,"0"),f=String(i.getDate()).padStart(2,"0");return`${c}-${u}-${f}`},tr=(i,c,u,f)=>{const g=[];for(let y=u-1;y>=0;y-=1){const _=new Date(c);_.setDate(c.getDate()-y);const C=new Date(_);C.setDate(_.getDate()+1);const O=i.filter(z=>{const ie=new Date(z.updatedAt||z.createdAt||0).getTime();return!ie||ie<_.getTime()||ie>=C.getTime()?!1:f?f(z):!0}).length;g.push(O)}return g},Xt=m.useMemo(()=>$c.map(i=>{const c=(i.keyResults||[]).map(y=>({id:y.id,objectiveId:y.objectiveId,title:y.title,description:y.description??null,assignees:y.assignees??[],metricType:"NUMERIC",startValue:y.startValue,targetValue:y.targetValue,currentValue:y.currentValue,status:t_(y.status),progress:Math.round(y.progress??0),lastUpdatedAt:y.updatedAt||y.createdAt})),u=n_(c),f=i.sourceType;return{id:i.id,title:i.title,description:i.description??null,ownerId:i.ownerId??null,startDate:i.startDate??null,endDate:i.endDate??null,status:i.status,confidence:typeof i.confidence=="number"?i.confidence:0,progress:u,keyResults:c,readOnly:!!(f&&f!=="MANUAL")}}),[$c]),aa=m.useMemo(()=>j?An[j]||me||[]:[],[j,An,me]),pu=m.useMemo(()=>{if(!j)return me||[];const i=Uv[j]||[],c=An[j]||[];if(i.length===0&&c.length===0)return me||[];const u=[...i,...c],f=new Set;return u.filter(g=>!(g!=null&&g.id)||f.has(g.id)?!1:(f.add(g.id),!0))},[j,Uv,An,me]),os=m.useMemo(()=>new Map(pu.map(i=>[i.id,i])),[pu]),oa=m.useMemo(()=>{var Pw;const i=new Date,c=new Date;c.setDate(i.getDate()+7);const u=new Date(i);u.setHours(0,0,0,0);const f=aa.filter(te=>te&&te.id),g=te=>te?new Date(te):null,y=f.reduce((te,Te)=>{const li=Te.status||"UNKNOWN";return te[li]=(te[li]||0)+1,te},{}),_=y.DONE||0,C=tr(f,u,14),O=tr(f,u,14,te=>te.status==="DONE"),z=tr(f,u,14,te=>er(te)),ie=Xt.flatMap(te=>te.keyResults),ye=tr(ie,u,14),fe=C.slice(7),U=O.slice(7),J=z.slice(7),M=ye.slice(7),q=te=>te?new Date(te).getTime():0,ce=te=>te.reduce((Te,li)=>Te+li,0),Ee=(te,Te)=>{const li=ce(te),gp=ce(Te);return gp===0?li===0?0:100:Math.round((li-gp)/gp*100)},dt=ce(C),je=ce(O),Ie=ce(z),Zt=ce(ye),Ot=Ee(fe,C.slice(0,7)),en=f.filter(te=>{const Te=g(te.dueDate);return Te&&Te>=i&&Te<=c&&er(te)}).sort((te,Te)=>q(te.dueDate)-q(Te.dueDate)).slice(0,5),oi=f.filter(te=>{const Te=g(te.dueDate);return Te&&Te<i&&er(te)}).sort((te,Te)=>q(te.dueDate)-q(Te.dueDate)).slice(0,5),mp=[...f].sort((te,Te)=>q(Te.updatedAt)-q(te.updatedAt)).slice(0,5),bn=f.filter(te=>te.isFavorite).slice(0,5),ds=f.filter(er).slice(0,5),Q_=j?((Pw=Qn[j])==null?void 0:Pw.length)??Mt.length:Mt.length,X_=ie.length?Math.round(ie.reduce((te,Te)=>te+Te.progress,0)/ie.length):0,Y_=ie.filter(te=>te.status!=="ON_TRACK").length;return{totalTasks:f.length,openTasks:f.filter(er).length,dueSoonCount:f.filter(te=>{const Te=g(te.dueDate);return Te&&Te>=i&&Te<=c&&er(te)}).length,overdueCount:f.filter(te=>{const Te=g(te.dueDate);return Te&&Te<i&&er(te)}).length,favoriteCount:f.filter(te=>te.isFavorite).length,completionRate:f.length?Math.round(_/f.length*100):0,doneCount:_,statusCounts:y,boardCount:Q_,objectiveCount:Xt.length,keyResultCount:ie.length,atRiskKrs:Y_,averageKrProgress:X_,activitySeries:fe,completionSeries:U,openSeries:J,krSeries:M,activitySeries14:C,completionSeries14:O,openSeries14:z,krSeries14:ye,activityTotal14:dt,completionTotal14:je,openTotal14:Ie,krTotal14:Zt,activityChange:Ot,openChange:Ee(J,z.slice(0,7)),completionChange:Ee(U,O.slice(0,7)),okrChange:Ee(M,ye.slice(0,7)),activeTasks:ds,dueSoonTasks:en,overdueTasks:oi,recentTasks:mp,favoriteTasks:bn}},[aa,j,Qn,Mt.length,Xt]);m.useMemo(()=>aa.flatMap(c=>(c.activityLog||[]).map(f=>({id:f.id,taskId:c.id,tenantId:c.tenantId,boardId:c.boardId,title:c.title,message:f.message,actorId:f.actorId,timestamp:new Date(f.timestamp)}))).sort((c,u)=>u.timestamp.getTime()-c.timestamp.getTime()).slice(0,8),[aa]);const Zr=m.useMemo(()=>{const i=new Date,c=new Date(i);c.setHours(0,0,0,0);const u=aa.filter(g=>g&&g.id),f=Xt.flatMap(g=>g.keyResults);return{activity:tr(u,c,Mi),done:tr(u,c,Mi,g=>g.status==="DONE"),open:tr(u,c,Mi,g=>er(g)),kr:tr(f,c,Mi)}},[aa,Xt,Mi]);m.useMemo(()=>{const i=c=>c.reduce((u,f)=>u+f,0);return{activity:i(Zr.activity),done:i(Zr.done),open:i(Zr.open),kr:i(Zr.kr)}},[Zr]),m.useMemo(()=>{const i=Zr.activity.length;if(!i)return[];const c=new Date;return Array.from({length:i},(u,f)=>{const g=new Date(c);return g.setDate(c.getDate()-(i-1-f)),g.toLocaleDateString(void 0,{month:"short",day:"numeric"})})},[Zr.activity.length]),m.useMemo(()=>{const i=[],c=new Set,u=f=>{!f||c.has(f.id)||(c.add(f.id),i.push(f))};return oa.overdueTasks.forEach(u),oa.dueSoonTasks.forEach(u),i.length<5&&oa.activeTasks.forEach(u),i.slice(0,5)},[oa.overdueTasks,oa.dueSoonTasks,oa.activeTasks]);const Ct=m.useMemo(()=>{const i=new Date(Qi);i.setHours(0,0,0,0);const c=new Date(i.getFullYear(),i.getMonth(),1),u=(c.getDay()+6)%7,f=new Date(c);f.setDate(c.getDate()-u);const g=Array.from({length:42},(_,C)=>{const O=new Date(f);return O.setDate(f.getDate()+C),O}),y=new Date(g[g.length-1]);return y.setHours(23,59,59,999),{start:f,end:y,days:g}},[Qi]),ex=m.useMemo(()=>{const i=new Map;return py.forEach(c=>{const u=new Date(c.start),f=new Date(c.end),g=new Date(u.getFullYear(),u.getMonth(),u.getDate()),y=new Date(f.getFullYear(),f.getMonth(),f.getDate());c.allDay&&y.getTime()===f.getTime()&&y.setDate(y.getDate()-1);let _=0;for(;g<=y&&_<40;){const C=fu(g),O=i.get(C)||[];O.push(c),i.set(C,O),g.setDate(g.getDate()+1),_+=1}}),i.forEach(c=>{c.sort((u,f)=>new Date(u.start).getTime()-new Date(f.start).getTime())}),i},[py]),tx=m.useMemo(()=>fu(of),[of]),Lf=ex.get(tx)||[],s_=m.useMemo(()=>Qi.toLocaleDateString(void 0,{month:"long",year:"numeric"}),[Qi]),r_=m.useMemo(()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[]),i_=m.useMemo(()=>{try{return localStorage.getItem("kanbax-okr-legacy")==="1"}catch{return!1}},[]),nx=i=>{Kf(`/okr/objective/${i}`),hk(c=>[i,...c.filter(f=>f!==i)].slice(0,8))},re=m.useMemo(()=>Xt.find(i=>i.id===(es==null?void 0:es.objectiveId)),[Xt,es]),nr=(es==null?void 0:es.screen)||"library";m.useEffect(()=>{nr==="review"&&Qh(0)},[nr,es==null?void 0:es.objectiveId]),m.useEffect(()=>{l!=="calendar"||!I||!j||lu()},[l,I,j]),m.useEffect(()=>{l!=="calendar"||!I||!j||sl(Ct.start,Ct.end)},[l,I,j,Ct.start.getTime(),Ct.end.getTime()]),m.useEffect(()=>{if(l!=="calendar"||!I||!j)return;const i=()=>sl(Ct.start,Ct.end),c=window.setInterval(i,18e4),u=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",u),()=>{window.clearInterval(c),document.removeEventListener("visibilitychange",u)}},[l,I,j,Ct.start.getTime(),Ct.end.getTime()]),m.useMemo(()=>{const i=No.map(f=>Xt.find(g=>g.id===f)).filter(Boolean),c=ko.map(f=>Xt.find(g=>g.id===f)).filter(Boolean),u=Xt.filter(f=>!No.includes(f.id)&&!ko.includes(f.id)).sort((f,g)=>g.progress-f.progress).slice(0,5);return{pinned:i,recent:c,suggested:u}},[No,ko,Xt]);const la=m.useMemo(()=>re?[{title:"Relevance check",content:"Is this objective still aligned with the current quarter?"},{title:"KR validity check",content:"Do the metrics still represent success?"},{title:"Update KR values",content:re.readOnly?r.jsx("div",{className:"okr-empty",children:"This objective is read-only due to its source."}):r.jsx("div",{className:"okr-review-kr",children:re.keyResults.map(i=>r.jsxs("label",{children:[i.title,r.jsx("input",{type:"number",defaultValue:i.currentValue,onBlur:c=>ia(i.id,re.id,{currentValue:Number(c.target.value)})})]},i.id))})},{title:"Review summary",content:`Progress ${re.progress}%  ${re.keyResults.length} key results`}]:[],[re]);m.useEffect(()=>{I&&j&&xn()},[I,j]),m.useEffect(()=>{var u;if(le!==wl||!j)return;const i=(D==null?void 0:D.id)||((u=I==null?void 0:I.user)==null?void 0:u.id)||"";if(!i)return;const c=An[j];c&&$i(c.filter(f=>f.ownerId===i||(f.assignees||[]).includes(i)))},[le,j,D==null?void 0:D.id,(Xx=I==null?void 0:I.user)==null?void 0:Xx.id,An]),m.useEffect(()=>{try{localStorage.setItem("kanbax-okr-pinned",JSON.stringify(No))}catch{}},[No]),m.useEffect(()=>{try{localStorage.setItem("kanbax-okr-recent",JSON.stringify(ko))}catch{}},[ko]),m.useEffect(()=>{try{localStorage.setItem("kanbax-scope-windows",JSON.stringify(Ks))}catch{}},[Ks]),m.useEffect(()=>{try{localStorage.setItem(UN,JSON.stringify(Tc))}catch{}},[Tc]),m.useEffect(()=>{l==="okr"&&Hy()},[l,I,j,le]),m.useEffect(()=>{if(!j||!(I!=null&&I.access_token)||l!=="scope"&&!gn)return;let i=!1;return(async()=>{try{const u=await fetch(`${ne}/tasks?boardId=all`,{headers:se(!0,j)});if(!u.ok)return;const f=await u.json();i||fo(g=>({...g,[j]:f}))}catch{}})(),()=>{i=!0}},[l,gn,j,I==null?void 0:I.access_token]),m.useEffect(()=>{try{localStorage.setItem("kanbax-sidebar-collapsed",String(_t))}catch{}},[_t]),m.useEffect(()=>{_t&&pf(!1)},[_t]),m.useEffect(()=>{_t&&l!=="kanban"&&l!=="table"&&pf(!1)},[_t,l]),m.useEffect(()=>{Ic(null),Qv("")},[j]),m.useEffect(()=>{_t&&mf(!1)},[_t]),m.useEffect(()=>{_t&&l!=="okr"&&mf(!1)},[_t,l]),m.useEffect(()=>{const i=document.createElement("div");i.className="app-tooltip",i.setAttribute("role","tooltip"),i.style.opacity="0",i.style.visibility="hidden",document.body.appendChild(i);let c=null,u=null;const f=M=>(M.getAttribute("data-tooltip")||M.getAttribute("data-label")||M.getAttribute("title")||"").trim()||null,g=M=>{M.dataset.tooltipTitle!==void 0&&(M.setAttribute("title",M.dataset.tooltipTitle),delete M.dataset.tooltipTitle)},y=()=>{var oi;if(!c||!f(c))return;const q=c.getBoundingClientRect(),ce=i.getBoundingClientRect(),Ee=window.innerWidth,dt=window.innerHeight,je=8,Ie=(oi=document.querySelector(".dashboard"))==null?void 0:oi.classList.contains("sidebar-collapsed"),Zt=!!c.closest(".sidebar")&&!!Ie;let Ot,en;Zt?(en=q.right+je,Ot=q.top+q.height/2-ce.height/2,en+ce.width>Ee-je&&(en=q.left-je-ce.width)):(Ot=q.top-je-ce.height,en=q.left+q.width/2-ce.width/2,Ot<je&&(Ot=q.bottom+je)),en=Math.max(je,Math.min(en,Ee-je-ce.width)),Ot=Math.max(je,Math.min(Ot,dt-je-ce.height)),i.style.left=`${en}px`,i.style.top=`${Ot}px`},_=()=>{u&&cancelAnimationFrame(u),u=window.requestAnimationFrame(y)},C=M=>{var dt;const q=f(M);if(!q)return;const ce=(dt=document.querySelector(".dashboard"))==null?void 0:dt.classList.contains("sidebar-collapsed");M.closest(".sidebar")&&!ce||(c&&c!==M&&g(c),c=M,M.hasAttribute("title")&&(M.dataset.tooltipTitle=M.getAttribute("title")||"",M.removeAttribute("title")),i.textContent=q,i.style.opacity="1",i.style.visibility="visible",_())},O=()=>{c&&g(c),c=null,i.style.opacity="0",i.style.visibility="hidden"},z=M=>M instanceof HTMLElement?M.closest("[data-tooltip], [data-label], [title]"):null,ie=M=>{const q=z(M.target);q&&(c&&(q===c||c.contains(q))||C(q))},ye=M=>{if(!c)return;const q=M.relatedTarget;if(q&&c.contains(q))return;const ce=z(M.target);ce&&ce!==c||O()},fe=M=>{const q=z(M.target);q&&C(q)},U=()=>{O()},J=()=>{c&&_()};return document.addEventListener("pointerover",ie),document.addEventListener("pointerout",ye),document.addEventListener("focusin",fe),document.addEventListener("focusout",U),window.addEventListener("scroll",J,!0),window.addEventListener("resize",J),()=>{u&&cancelAnimationFrame(u),document.removeEventListener("pointerover",ie),document.removeEventListener("pointerout",ye),document.removeEventListener("focusin",fe),document.removeEventListener("focusout",U),window.removeEventListener("scroll",J,!0),window.removeEventListener("resize",J),i.remove()}},[]);const Pf=async()=>{var i,c,u,f,g;if(I!=null&&I.access_token){Ov(!1);try{const y=await fetch(`${ne}/me`,{headers:se(!1)});if(!y.ok)throw new Error("Failed to load profile");const _=await y.json();jh(_.user),gc(_.memberships||[]),bv(_.invites||[]);const C=new Set((_.invites||[]).map(U=>String(U.id))),O=(_.invites||[]).filter(U=>!Jf.current.has(U.id));Jf.current.size>0&&O.length>0&&O.forEach(U=>{var q,ce,Ee;const J=wt((q=U.tenant)==null?void 0:q.name)||U.tenantId,M=((ce=U.invitedBy)==null?void 0:ce.name)||((Ee=U.invitedBy)==null?void 0:Ee.email)||U.invitedByUserId||"Someone";Ws(dt=>[{id:`invite-${U.id}`,message:`${M} invited you to ${J}`,huddleName:J,timestamp:new Date(U.createdAt||Date.now()).toISOString(),read:!1,tenantId:U.tenantId},...dt])}),Jf.current=C;const z=(c=(i=_.user)==null?void 0:i.preferences)==null?void 0:c.defaultHuddleId,ie=j&&((u=_.memberships)==null?void 0:u.some(U=>U.tenantId===j)),ye=(f=_.memberships)==null?void 0:f.find(U=>U.tenantId===z),fe=(g=_.memberships)==null?void 0:g[0];!ie&&(ye!=null&&ye.tenantId||fe!=null&&fe.tenantId)&&Cs((ye==null?void 0:ye.tenantId)||(fe==null?void 0:fe.tenantId))}catch(y){co(y.message)}finally{Ov(!0)}}};m.useEffect(()=>{Pf()},[I]),m.useEffect(()=>{D&&L===null&&Me(xx(D))},[D,L]),m.useEffect(()=>{var i;if(oo&&j){fa(j);const c=yt.find(f=>f.tenantId===j),u=((i=c==null?void 0:c.tenant)==null?void 0:i.name)||"";Nv(u)}},[oo,j,yt]),m.useEffect(()=>{j&&(I!=null&&I.access_token)&&(dl(j),Tu(j,Cu(j)))},[j,yt,I==null?void 0:I.access_token]),m.useEffect(()=>{!j||!(I!=null&&I.access_token)||Ny(j,ks)},[j,I==null?void 0:I.access_token]),m.useEffect(()=>{if(!(!j||!(I!=null&&I.access_token))){if(Lo.current.skipNextSave&&Lo.current.tenantId===j){Lo.current={tenantId:j,skipNextSave:!1};return}ky(j,ks)}},[j,ks,I==null?void 0:I.access_token]);const Mf=m.useRef(null),$f=m.useRef(null),Bf=m.useRef({});m.useEffect(()=>{if(!j||!(I!=null&&I.access_token))return;const i=Oe.channel(`huddle-inbox-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"huddle_inbox_items",filter:`tenant_id=eq.${j}`},()=>{const z=qe.current;io(j,z.items,z.statuses)}).subscribe(),c=Oe.channel(`huddle-scopes-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"huddle_scopes",filter:`tenant_id=eq.${j}`},()=>{Tu(j,Cu(j))}).subscribe(),u=Oe.channel(`huddle-scope-members-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"huddle_scope_members",filter:`tenant_id=eq.${j}`},()=>{Tu(j,Cu(j))}).subscribe(),f=Oe.channel(`huddle-timeline-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"huddle_timeline_overrides",filter:`tenant_id=eq.${j}`},()=>{Ny(j,xy.current)}).subscribe(),g=Oe.channel(`huddle-scopes-broadcast-${j}`,{config:{broadcast:{ack:!0,self:!1}}}).on("broadcast",{event:"scope-update"},()=>{Tu(j,Cu(j))}).subscribe();Mf.current=g;const y=Oe.channel(`huddle-tasks-broadcast-${j}`,{config:{broadcast:{ack:!0,self:!1}}}).on("broadcast",{event:"task-update"},()=>{ou(),p_(j)}).subscribe();$f.current=y;const _=Oe.channel(`huddle-tasks-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"Task",filter:`tenantId=eq.${j}`},()=>{ou()}).subscribe(),C=Oe.channel(`huddle-tasks-lower-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"task",filter:`tenantId=eq.${j}`},()=>{ou()}).subscribe(),O=Oe.channel(`huddle-task-favorites-${j}`).on("postgres_changes",{event:"*",schema:"public",table:"huddle_task_favorites",filter:`tenant_id=eq.${j}`},()=>{ou()}).subscribe();return()=>{Oe.removeChannel(i),Oe.removeChannel(c),Oe.removeChannel(u),Oe.removeChannel(f),Oe.removeChannel(g),Oe.removeChannel(_),Oe.removeChannel(C),Oe.removeChannel(O),Oe.removeChannel(y),Mf.current=null,$f.current=null}},[j,I==null?void 0:I.access_token]),m.useEffect(()=>{be&&dl(be)},[be]),m.useEffect(()=>{ve&&dl(ve)},[ve]),m.useEffect(()=>{if(!be)return;Qy(be);const i=It(be);if(i.length===0)return;const c=new Set(i.map(u=>u.userId));Wr&&!c.has(Wr)&&Xc(null),Xs.length>0&&vf(Xs.filter(u=>c.has(u)))},[be,Oi]),m.useEffect(()=>{if(!be)return;const i=ll(be);i.length!==0&&(!qo||!i.some(c=>c.id===qo))&&Jo(i[0].id)},[be,qo,Qn,Mt]),m.useEffect(()=>{if(!ve)return;Qy(ve);const i=It(ve);if(i.length===0)return;const c=new Set(i.map(u=>u.userId));qr&&!c.has(qr)&&Zc(null),Zs.length>0&&bf(Zs.filter(u=>c.has(u)))},[ve,Oi]),m.useEffect(()=>{if(!ve)return;const i=ll(ve);!i||i.length===0||(!Gr||!i.some(c=>c.id===Gr))&&Yc(i[0].id)},[ve,Qn,Gr]),m.useEffect(()=>{zo&&Nf.current&&(Nf.current.innerHTML=yn.description||"")},[zo]),m.useEffect(()=>{Xo&&kf.current&&(kf.current.innerHTML=Qt.description||"")},[Xo]);const Q=yf?me.find(i=>i.id===yf)??null:null,sx=Q?me.filter(i=>(i.linkedTaskIds||[]).includes(Q.id)):[],mu=new Map(me.map(i=>[i.id,i])),ca=String((D==null?void 0:D.email)||((Yx=I==null?void 0:I.user)==null?void 0:Yx.email)||"U"),a_=ca.charAt(0).toUpperCase()||"U",rx=(L==null?void 0:L.avatarUrl)||(D==null?void 0:D.avatarUrl)||"",ix=i=>i?new Date(i).toISOString().slice(0,10):"",sr=le===ja,ax=le===sd,ox=le===wl,Uf=ax||ox,Qe=sr?{name:"Archived"}:ax?{name:"All tasks"}:ox?{name:"My tickets"}:Mt.find(i=>i.id===le)||Mr,ls=(i,c="push")=>{const u=new URLSearchParams(window.location.search);i?u.set("scope",i):u.delete("scope");const f=u.toString(),g=`${window.location.pathname}${f?`?${f}`:""}`;c==="replace"?window.history.replaceState({},"",g):window.history.pushState({},"",g)},ei=(i,c="push")=>{const u=new URLSearchParams(window.location.search);i?u.set("initiative",i):u.delete("initiative");const f=u.toString(),g=`${window.location.pathname}${f?`?${f}`:""}`;c==="replace"?window.history.replaceState({},"",g):window.history.pushState({},"",g)},o_=m.useMemo(()=>{const i=j&&Qn[j]||Mt,c=new Map;return(i||[]).forEach(u=>{u!=null&&u.id&&c.set(u.id,u.name||"Tasks")}),c.set(ja,"Archived"),c.has("default-board")||c.set("default-board","Main Tasks"),c},[j,Qn,Mt]),Ff=i=>i?o_.get(i)||i:"Tasks",lx=i=>i===V.TODO?"ToDo":i===V.IN_PROGRESS?"Doing":i===V.DONE?"Done":i===V.BACKLOG?"ToDo":String(i).replace(/_/g," "),cs=j||null,_e=m.useMemo(()=>{var f;if(!cs)return[];const i=Ks[cs]||[],c=(D==null?void 0:D.id)||((f=I==null?void 0:I.user)==null?void 0:f.id)||"",u=yt.some(g=>g.tenantId===cs&&(g.role==="OWNER"||g.role==="ADMIN"));return i.filter(g=>g.visibility!=="personal"||D!=null&&D.isSuperAdmin||u?!0:g.createdBy?g.createdBy===c:!1)},[cs,Ks,D==null?void 0:D.id,D==null?void 0:D.isSuperAdmin,(Zx=I==null?void 0:I.user)==null?void 0:Zx.id,yt]),P=m.useMemo(()=>gn&&_e.find(i=>i.id===gn)||null,[_e,gn]),ct=m.useMemo(()=>j?Tc[j]||[]:[],[j,Tc]),ti=m.useMemo(()=>new Map(ct.map(i=>[i.id,i])),[ct]),cx=m.useMemo(()=>[...ct].sort((i,c)=>i.status!==c.status?i.status==="ACTIVE"?-1:1:i.name.localeCompare(c.name)),[ct]),ua=m.useMemo(()=>ct.filter(i=>i.status===bs),[ct,bs]),Se=m.useMemo(()=>Ze&&ct.find(i=>i.id===Ze)||null,[ct,Ze]),Hf=m.useMemo(()=>{const i=new Map;return ct.forEach(c=>{const u=_e.filter(fe=>fe.initiativeId===c.id),f=u.length,g=u.filter(fe=>!!fe.completionStatus).length,y=Math.max(0,f-g),_=new Set;u.forEach(fe=>{fe.taskIds.forEach(U=>_.add(U))});let C=0,O=0,z=0;_.forEach(fe=>{const U=os.get(fe);U&&(C+=1,U.status===V.DONE?O+=1:U.status!==V.ARCHIVED&&(z+=1))});const ie=C?Math.round(O/C*100):0,ye=f?Math.round(g/f*100):0;i.set(c.id,{totalScopes:f,activeScopes:y,closedScopes:g,totalTasks:C,doneTasks:O,openTasks:z,taskCompletion:ie,scopeCompletion:ye})}),i},[ct,_e,os]),he=m.useMemo(()=>Ze&&Hf.get(Ze)||null,[Hf,Ze]),ux=m.useMemo(()=>Ze?_e.filter(i=>i.initiativeId===Ze):[],[_e,Ze]),dx=m.useMemo(()=>Ze?_e.filter(i=>i.initiativeId!==Ze&&!i.completionStatus):[],[_e,Ze]),gu=yt.some(i=>i.tenantId===j&&(i.role==="OWNER"||i.role==="ADMIN")),vu=!!(D!=null&&D.isSuperAdmin),zf=i=>{if(!i)return gu||vu?"ADMIN":"VIEWER";const c=_e.find(u=>u.id===i);return c!=null&&c.role?c.role:gu||vu?"ADMIN":"VIEWER"},Es=i=>{if(i){const u=_e.find(f=>f.id===i);if(u!=null&&u.completionStatus)return!1}const c=zf(i);return gu||vu||c==="ADMIN"||c==="MEMBER"},il=i=>{if(i){const u=_e.find(f=>f.id===i);if(u!=null&&u.completionStatus)return!1}const c=zf(i);return gu||vu||c==="ADMIN"};zf(P==null?void 0:P.id);const yu=il(P==null?void 0:P.id),xu=Es(P==null?void 0:P.id),wu=!!(P!=null&&P.completionStatus),l_=l==="scope"&&wu,hx=m.useMemo(()=>[V.BACKLOG,V.TODO,V.IN_PROGRESS,V.DONE],[]),fx=m.useMemo(()=>{if(!P)return[];const c=P.taskIds.map(u=>os.get(u)).filter(Boolean).filter(u=>!(Xn!=="ALL"&&u.priority!==Xn||Yn!=="ALL"&&u.status!==Yn));return hx.map(u=>({status:u,tasks:c.filter(f=>f.status===u)}))},[P,os,hx,Xn,Yn]),bu=m.useMemo(()=>fx.flatMap(i=>i.tasks),[fx]),px=m.useMemo(()=>{const i=new Set;return bu.forEach(c=>{(c.kinds||[]).forEach(u=>{const f=String(u||"").trim();f&&i.add(f)})}),Array.from(i).sort((c,u)=>c.localeCompare(u))},[bu]),da=m.useMemo(()=>$r==="completed"?_e.filter(i=>!!i.completionStatus):_e.filter(i=>!i.completionStatus),[$r,_e]),ju=m.useMemo(()=>{var c;if(!P)return[];const i=(D==null?void 0:D.id)||((c=I==null?void 0:I.user)==null?void 0:c.id)||"";return bu.filter(u=>{if(Hr&&!u.isFavorite||Xn!=="ALL"&&u.priority!==Xn||Bt==="list"&&Yn!=="ALL"&&u.status!==Yn)return!1;if(Jt.length>0){const y=(u.kinds||[]).map(C=>String(C));if(!Jt.some(C=>y.includes(C)))return!1}if(Ln!=="ALL"){const y=u.dueDate?new Date(u.dueDate):null;if(Ln==="MINE"&&(!i||!(u.ownerId===i||(u.assignees||[]).includes(i)))||Ln==="OVERDUE"&&(!y||u.status===V.DONE||u.status===V.ARCHIVED||y>=new Date))return!1;if(Ln==="WEEK"){if(!y)return!1;const _=new Date,C=new Date;if(C.setDate(_.getDate()+7),u.status===V.DONE||u.status===V.ARCHIVED||y<_||y>C)return!1}}const f=Ao.trim().toLowerCase();return f?[u.title,ai(u.description||""),u.kinds.join(" ")].join(" ").toLowerCase().includes(f):!0})},[P,bu,Hr,Xn,Yn,Jt,Ln,Ao,Bt,D==null?void 0:D.id,(ew=I==null?void 0:I.user)==null?void 0:ew.id]),al=m.useMemo(()=>P?P.taskIds.filter(i=>{const c=os.get(i);return c?c.status!==V.DONE&&c.status!==V.ARCHIVED:!1}):[],[P,os]),c_=m.useMemo(()=>[V.TODO,V.IN_PROGRESS,V.DONE].map(c=>({status:c,tasks:ju.filter(u=>c===V.TODO?u.status===V.TODO||u.status===V.BACKLOG:u.status===c)})),[ju]),Vf=m.useMemo(()=>{if(!P)return[];const i=new Set(P.taskIds);return pu.filter(c=>c.status!==V.ARCHIVED&&!i.has(c.id))},[P,pu]);m.useMemo(()=>{const i=Jv.trim().toLowerCase();return i?Vf.filter(c=>c.title.toLowerCase().includes(i)):Vf},[Vf,Jv]);const mx=i=>{const c=i.getDay(),u=(c===0?-6:1)-c,f=new Date(i);return f.setDate(i.getDate()+u),f.setHours(0,0,0,0),f},gx=(i,c)=>{if(i.length===0)return r.jsx("div",{className:"timeline-empty",children:c});const u=i.flatMap(U=>{const J=ks[U.id],M=U.createdAt?new Date(U.createdAt):null,q=J!=null&&J.date?new Date(J.date):null,ce=U.dueDate?new Date(U.dueDate):null,Ee=q||ce,dt=ce&&M?Math.max(1,Math.round((ce.getTime()-M.getTime())/864e5)+1):1,je=(J==null?void 0:J.durationDays)??dt,Zt=Ee?new Date(Ee.getTime()-(je-1)*864e5):M||Ee||new Date,Ot=Zt?new Date(Zt.getTime()+(je-1)*864e5):null;return[Zt,Ot].filter(Boolean)}),f=mx(new Date),g=u.length>0?new Date(Math.min(...u.map(U=>U.getTime()))):f,y=u.length>0?new Date(Math.max(...u.map(U=>U.getTime()))):f,C=mx(Mn==="auto"?g:new Date),O=Math.max(1,Math.ceil((y.getTime()-C.getTime())/864e5)+1),z=Mn==="auto"?Math.max(14,Math.min(31,O)):Number(Mn),ie=Array.from({length:z},(U,J)=>{const M=new Date(C);return M.setDate(C.getDate()+J),M}),ye=44,fe=U=>Math.max(0,Math.min(ie.length-1,Math.floor((U.getTime()-C.getTime())/864e5)));return r.jsx("div",{className:"timeline-view",children:r.jsx("div",{className:"timeline-grid",style:{"--timeline-col":`${ye}px`},children:r.jsxs("div",{className:"timeline-shell",children:[r.jsxs("div",{className:"timeline-left",children:[r.jsx("div",{className:"timeline-header-title",children:"Tasks"}),r.jsx("div",{className:"timeline-left-rows",children:i.map(U=>r.jsx("div",{className:"timeline-title",children:U.title},U.id))})]}),r.jsx("div",{className:"timeline-right",children:r.jsxs("div",{className:"timeline-scroll",ref:Po,children:[r.jsx("div",{className:"timeline-header-days",style:{"--timeline-days":ie.length},children:ie.map((U,J)=>{const q=U.getDate()===1||J===0?new Intl.DateTimeFormat("de-DE",{month:"long",year:"numeric"}).format(U):"",ce=new Intl.DateTimeFormat("de-DE",{weekday:"short"}).format(U),Ee=String(U.getDate()).padStart(2,"0");return r.jsxs("div",{className:"timeline-day",children:[r.jsx("div",{className:"timeline-day-month",children:q}),r.jsxs("div",{className:"timeline-day-row",children:[r.jsx("span",{className:"timeline-day-weekday",children:ce}),r.jsx("span",{className:"timeline-day-date",children:Ee})]})]},U.toISOString())})}),r.jsx("div",{className:"timeline-rows",style:{"--timeline-days":ie.length},children:i.map(U=>{const J=ks[U.id],M=U.createdAt?new Date(U.createdAt):new Date,q=J!=null&&J.date?new Date(J.date):null,ce=U.dueDate?new Date(U.dueDate):null,Ee=q||ce,dt=ce?Math.max(1,Math.round((ce.getTime()-M.getTime())/864e5)+1):1,je=(J==null?void 0:J.durationDays)??dt,Ie=new Date((Ee||M).getTime()-(je-1)*864e5),Zt=fe(Ie);let Ot=Math.max(1,je),en=Yi===U.id?is:0,oi=Zt;Yi===U.id&&(Bo==="resize-end"?(Ot=Math.max(1,je+is),en=0):Bo==="resize-start"&&(Ot=Math.max(1,je-is),oi=Zt+is,en=0));const mp={left:`calc(${oi+en} * var(--timeline-col))`,width:`calc(${Ot} * var(--timeline-col))`};return r.jsx("div",{className:"timeline-track",children:r.jsxs("div",{className:`timeline-bar priority-${U.priority.toLowerCase()}${Yi===U.id?" dragging":""}`,style:mp,onMouseDown:bn=>{var ds;U.sourceType&&U.sourceType!=="MANUAL"||(bn.preventDefault(),Zi(U.id),uf(bn.clientX),df(Ee||M),Fo(Ie),Ho(je),hf(((ds=Po.current)==null?void 0:ds.scrollLeft)||0),Vr(0),Mo(!1),$o(je),Uo("move"))},children:[r.jsx("div",{className:"timeline-resize-handle left",onMouseDown:bn=>{var ds;U.sourceType&&U.sourceType!=="MANUAL"||(bn.preventDefault(),bn.stopPropagation(),Zi(U.id),uf(bn.clientX),df(Ee||M),Fo(Ie),Ho(je),hf(((ds=Po.current)==null?void 0:ds.scrollLeft)||0),Vr(0),Mo(!1),$o(je),Uo("resize-start"))}}),r.jsx("div",{className:"timeline-resize-handle right",onMouseDown:bn=>{var ds;U.sourceType&&U.sourceType!=="MANUAL"||(bn.preventDefault(),bn.stopPropagation(),Zi(U.id),uf(bn.clientX),df(Ee||M),Fo(Ie),Ho(je),hf(((ds=Po.current)==null?void 0:ds.scrollLeft)||0),Vr(0),Mo(!1),$o(je),Uo("resize-end"))}})]})},U.id)})})]})})]})})})};m.useEffect(()=>{if(!j){Gs(null);return}if(da.length===0){Gs(null);return}(!gn||!da.some(i=>i.id===gn))&&Gs(da[0].id)},[j,da,gn]),m.useEffect(()=>{if(!j){Hi(null);return}if(ua.length===0){Hi(null);return}(!Ze||!ua.some(i=>i.id===Ze))&&Hi(ua[0].id)},[j,ua,Ze]),m.useEffect(()=>{Ic(null),Qv(""),jo(!1)},[gn]),m.useEffect(()=>{Dc("")},[Ze]),m.useEffect(()=>{if(!j||_e.length===0){$t("list");return}Et==="detail"&&!P&&$t("list")},[j,_e.length,P,Et]),m.useEffect(()=>{if(!j||ct.length===0){Dn("list");return}Zn==="detail"&&!Se&&Dn("list")},[j,ct.length,Se,Zn]),m.useEffect(()=>{if(!po||_e.length===0)return;const i=_e.find(c=>c.id===po);if(i){Gs(i.id),$t("detail");return}vn(null),ls(null,"replace"),$t("list")},[po,_e]),m.useEffect(()=>{if(!wo||ct.length===0)return;const i=ct.find(c=>c.id===wo);if(i){Hi(i.id),Dn("detail");return}ws(null),ei(null,"replace"),Dn("list")},[wo,ct]),m.useEffect(()=>{l!=="scope"&&po&&(vn(null),ls(null,"replace"))},[l,po]),m.useEffect(()=>{l!=="initiatives"&&wo&&(ws(null),ei(null,"replace"))},[l,wo]),m.useEffect(()=>{Et!=="detail"&&(mo(!1),go(!1))},[Et]),m.useEffect(()=>{!yo||!P||(Ss({name:P.name,description:P.description||"",startDate:P.startDate||"",endDate:P.endDate||"",visibility:P.visibility==="personal"?"personal":"shared",members:(P.members||[]).map(i=>({userId:i.userId,role:i.role}))}),Hh(""),zh("MEMBER"))},[yo,P]),m.useEffect(()=>{if(!P){Wh(""),Kh(""),Pc("");return}Wh(P.completionStatus||""),Kh(P.completionComment||""),Pc("")},[P]),m.useEffect(()=>{Ac||Uh(null)},[Ac]);const rr=i=>{cs&&Cc(c=>{const u=c[cs]||[],f=i(u);return Xf(cs,f),{...c,[cs]:f}})},u_=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`initiative-${Date.now()}-${Math.random().toString(16).slice(2)}`,ol=(i,c)=>{rk(u=>{const f=u[i]||[],g=c(f);return{...u,[i]:g}})},d_=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`scope-${Date.now()}-${Math.random().toString(16).slice(2)}`,vx=i=>i?new Date(i).toLocaleDateString():"",h_=(i,c)=>!i||!c?!1:new Date(c)<new Date(i),ni=i=>!i.startDate&&!i.endDate?"No dates set":`${vx(i.startDate)}  ${vx(i.endDate)}`,Wf=m.useMemo(()=>h_(et.startDate,et.endDate),[et.startDate,et.endDate]),f_=()=>{if(!P)return;const i=et.name.trim();i&&(Wf||(rr(c=>c.map(u=>u.id===P.id?{...u,name:i,description:et.description.trim()||null,startDate:et.startDate||null,endDate:et.endDate||null,visibility:et.visibility,members:et.members}:u)),xo(!1)))},p_=async i=>{try{if(!(I!=null&&I.access_token)||Bf.current[i])return;Bf.current[i]=!0;const c=await fetch(`${ne}/tasks?boardId=all`,{headers:se(!0,i)});if(!c.ok)return;const u=await c.json();fo(f=>({...f,[i]:u}))}catch{}finally{Bf.current[i]=!1}},m_=()=>{var g;if(!P||!il(P.id))return;if(!Vh){alert("Bitte Ziel erreicht auswhlen.");return}if(al.length>0&&!Gh){alert("Bitte einen Ziel-Scope fr offene Tasks auswhlen.");return}const i=new Date().toISOString(),c=(D==null?void 0:D.id)||((g=I==null?void 0:I.user)==null?void 0:g.id)||null,u=Gh,f=al;rr(y=>y.map(_=>{if(_.id===P.id){const C=_.taskIds.filter(O=>!f.includes(O));return{..._,taskIds:C,completionStatus:Vh,completionComment:ty.trim()||null,completedAt:_.completedAt||i,completedBy:c}}if(u&&_.id===u&&f.length>0){const C=_.taskIds.concat(f.filter(O=>!_.taskIds.includes(O)));return{..._,taskIds:C}}return _})),Pc(""),fn("Scope abgeschlossen"),Mc(!1)},g_=m.useMemo(()=>{const i=j&&Qn[j]||Mt,c=[],u=f=>{c.some(g=>g.id===f.id)||c.push(f)};return(Array.isArray(i)?i:[]).forEach(f=>{f!=null&&f.id&&u({id:f.id,name:f.name||"Tasks"})}),c},[j,Qn,Mt]),ll=i=>(i?Qn[i]||(i===j?Mt:[]):Mt)||[],si=i=>{var u;const c=ll(i);return i===j&&le&&le!==ja&&c.some(f=>f.id===le)?le:((u=c[0])==null?void 0:u.id)||"default-board"},v_=()=>{var c;ea({title:"",description:"",priority:(L==null?void 0:L.defaultPriority)||"MEDIUM",dueDate:""}),wk((L==null?void 0:L.defaultStatus)||V.BACKLOG),Vo([]),Ko([]),Go("");const i=j||((c=Ce[0])==null?void 0:c.tenantId)||null;Ry(i),Jo(si(i)),Xc((D==null?void 0:D.id)||null),vf([]),gf(!0)},wt=i=>i?i.toLowerCase()==="personal"?"Private Huddle":i:"Huddle",y_=i=>{let c=0;for(let u=0;u<i.length;u+=1)c=(c<<5)-c+i.charCodeAt(u),c|=0;return Math.abs(c)},$n=(i,c)=>{const u=`${i||""}:${c||""}`,f=y_(u)%360;return{solid:`hsl(${f} 70% 60%)`,soft:`hsla(${f}, 70%, 60%, 0.16)`,border:`hsla(${f}, 70%, 60%, 0.35)`,text:`hsl(${f} 70% 75%)`}},Yt=(i,c)=>{var f,g;if(!i||!c)return"Unassigned";const u=(Oi[i]||[]).find(y=>y.userId===c);return((f=u==null?void 0:u.user)==null?void 0:f.name)||((g=u==null?void 0:u.user)==null?void 0:g.email)||c},ri=(i,c)=>{var f,g,y;if(!i||!c)return{label:"Unassigned",avatarUrl:""};const u=(Oi[i]||[]).find(_=>_.userId===c);return{label:((f=u==null?void 0:u.user)==null?void 0:f.name)||((g=u==null?void 0:u.user)==null?void 0:g.email)||c,avatarUrl:((y=u==null?void 0:u.user)==null?void 0:y.avatarUrl)||""}},cl=i=>{var u,f;if(!i)return!1;const c=yt.find(g=>g.tenantId===i);return((f=(u=c==null?void 0:c.tenant)==null?void 0:u.name)==null?void 0:f.toLowerCase())==="personal"},It=i=>{var f,g;if(!i)return[];const c=Oi[i]||[];if(!cl(i))return c;const u=c.find(y=>y.userId===bt);return u?[u]:bt?[{userId:bt,role:"owner",user:{name:(D==null?void 0:D.name)||(D==null?void 0:D.email)||((f=I==null?void 0:I.user)==null?void 0:f.email)||"You",email:(D==null?void 0:D.email)||((g=I==null?void 0:I.user)==null?void 0:g.email)||"",avatarUrl:(D==null?void 0:D.avatarUrl)||""}}]:[]},yx=i=>{if(!i.startsWith("/okr"))return null;const c=i.split("/").filter(Boolean);return c.length===1||c[1]==="objectives"?{screen:"library"}:c[1]==="objective"&&c[2]?{screen:"objective",objectiveId:c[2]}:c[1]==="review"&&c[2]?{screen:"review",objectiveId:c[2]}:{screen:"library"}},Kf=i=>{window.history.pushState({},"",i),d("okr"),oy(yx(i))},xx=i=>{var u,f,g,y,_,C,O,z,ie,ye,fe,U,J,M,q,ce,Ee,dt,je,Ie,Zt;const c=(i==null?void 0:i.preferences)||{};return{name:(i==null?void 0:i.name)||"",avatarUrl:(i==null?void 0:i.avatarUrl)||"",timezone:c.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||"",locale:c.locale||navigator.language||"en",profileVisibility:c.profileVisibility||"huddle",defaultHuddleId:c.defaultHuddleId||j||"",defaultPriority:c.defaultPriority||"MEDIUM",defaultStatus:c.defaultStatus||"BACKLOG",notifications:{email:{assigned:((f=(u=c.notifications)==null?void 0:u.email)==null?void 0:f.assigned)??!0,mentions:((y=(g=c.notifications)==null?void 0:g.email)==null?void 0:y.mentions)??!0,due:((C=(_=c.notifications)==null?void 0:_.email)==null?void 0:C.due)??!0,invites:((z=(O=c.notifications)==null?void 0:O.email)==null?void 0:z.invites)??!0},inApp:{assigned:((ye=(ie=c.notifications)==null?void 0:ie.inApp)==null?void 0:ye.assigned)??!0,mentions:((U=(fe=c.notifications)==null?void 0:fe.inApp)==null?void 0:U.mentions)??!0,due:((M=(J=c.notifications)==null?void 0:J.inApp)==null?void 0:M.due)??!0,invites:((ce=(q=c.notifications)==null?void 0:q.inApp)==null?void 0:ce.invites)??!0}},workingHours:{start:((Ee=c.workingHours)==null?void 0:Ee.start)||"09:00",end:((dt=c.workingHours)==null?void 0:dt.end)||"17:00",days:((je=c.workingHours)==null?void 0:je.days)||["Mon","Tue","Wed","Thu","Fri"]},reminders:{dueSoonHours:((Ie=c.reminders)==null?void 0:Ie.dueSoonHours)??24,dailySummaryTime:((Zt=c.reminders)==null?void 0:Zt.dailySummaryTime)||"09:00"}}},ha=i=>{var g,y;const c=i.trim().split(/\s+/),u=((g=c[0])==null?void 0:g[0])||"",f=c.length>1&&((y=c[c.length-1])==null?void 0:y[0])||"";return(u+f).toUpperCase()||"U"},ut=(i,c,u="")=>r.jsx("div",{className:`avatar-stack ${u}`.trim(),children:c.map(f=>{const{label:g,avatarUrl:y}=ri(i,f);return r.jsx("span",{className:"avatar avatar-tooltip","data-label":g,"aria-label":g,title:g,children:y?r.jsx("img",{src:y,alt:g}):ha(g)},f)})}),wx=i=>{var c,u;return((u=(c=i==null?void 0:i.tenant)==null?void 0:c.name)==null?void 0:u.toLowerCase())==="personal"},{displayMemberships:Ce,activeMembership:Ts,activeHuddleName:ul,isPersonalActive:Gf,hasSharedHuddles:x_,activeHuddleAccent:QA}=m.useMemo(()=>{var y,_,C,O;const i=yt.filter(wx),c=yt.filter(z=>!wx(z)),u=i.find(z=>z.tenantId===j)||i[0],f=u?[u,...c]:c,g=yt.find(z=>z.tenantId===j)||u;return{displayMemberships:f,activeMembership:g,activeHuddleName:wt((y=g==null?void 0:g.tenant)==null?void 0:y.name),isPersonalActive:((C=(_=g==null?void 0:g.tenant)==null?void 0:_.name)==null?void 0:C.toLowerCase())==="personal",hasSharedHuddles:c.length>0,activeHuddleAccent:$n(j,(O=g==null?void 0:g.tenant)==null?void 0:O.name)}},[yt,j]),Su=(Ts==null?void 0:Ts.role)==="OWNER"||(Ts==null?void 0:Ts.role)==="ADMIN",bx=!!(D!=null&&D.isSuperAdmin);m.useEffect(()=>{if(!j)return;const i=Ks[j];if(i){if(So.current.skipNextSave&&So.current.tenantId===j){So.current={tenantId:j,skipNextSave:!1};return}Xf(j,i)}},[j,Ks]);const ii=m.useMemo(()=>j&&An[j]?An[j]||[]:me,[j,An,me]),w_=m.useMemo(()=>{const c=((L==null?void 0:L.name)||(D==null?void 0:D.name)||ca||"").trim().split(/\s+/)[0]||"there",u=new Date().getHours();return u<12?`Guten Morgen, ${c}`:u<18?`Guten Tag, ${c}`:`Guten Abend, ${c}`},[L==null?void 0:L.name,D==null?void 0:D.name,ca]),b_=m.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),ii.filter(u=>{if(!u.dueDate||u.status===V.DONE||u.status===V.ARCHIVED)return!1;const f=new Date(u.dueDate);return f>=i&&f<=c}).length},[ii]),Nu=m.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),ii.filter(u=>{if(!u.dueDate||u.status===V.DONE||u.status===V.ARCHIVED)return!1;const f=new Date(u.dueDate);return f>=i&&f<=c})},[ii]),ku=m.useMemo(()=>ii.filter(i=>i.isFavorite&&i.status!==V.ARCHIVED).slice(0,5).map(i=>({id:i.id,label:i.title,sublabel:Ff(i.boardId)})),[ii]),jx=m.useMemo(()=>{if(l==="settings")return[{label:"Settings"}];const c=[{label:ul||"Huddle",onClick:()=>d("dashboard")}];return l==="dashboard"&&c.push({label:"Dashboard",onClick:()=>d("dashboard")}),l==="calendar"&&c.push({label:"Calendar",onClick:()=>d("calendar")}),l==="scope"?(c.push({label:"Scope Window",onClick:()=>{d("scope"),$t("list"),vn(null),ls(null,"replace")}}),Et==="detail"&&P&&c.push({label:P.name}),c):l==="initiatives"?(c.push({label:"Initiatives",onClick:()=>{d("initiatives"),Dn("list"),ws(null),ei(null,"replace")}}),Zn==="detail"&&Se&&c.push({label:Se.name}),c):(l==="table"&&c.push({label:Qe!=null&&Qe.name?`Table  ${Qe.name}`:"Table",onClick:()=>d("table")}),l==="list"&&c.push({label:Qe!=null&&Qe.name?`Table  ${Qe.name}`:"Table",onClick:()=>d("table")}),l==="kanban"&&c.push({label:(Qe==null?void 0:Qe.name)||"Tasks",onClick:()=>d("kanban")}),c)},[l,ul,Qe==null?void 0:Qe.name,Et,P,Zn,Se]),qf=m.useRef({}),Sx=m.useRef(new Set),Jf=m.useRef(new Set),bt=(D==null?void 0:D.id)||((tw=I==null?void 0:I.user)==null?void 0:tw.id)||"",Qf=m.useMemo(()=>{var u;const i=String((D==null?void 0:D.email)||((u=I==null?void 0:I.user)==null?void 0:u.email)||"");return(j?Y.filter(f=>!f.tenantId||f.tenantId===j):Y).filter(f=>bt?f.creatorId?f.creatorId===bt:f.creatorLabel?f.creatorLabel===i:!1:!1)},[Y,j,bt,D==null?void 0:D.email,(nw=I==null?void 0:I.user)==null?void 0:nw.email]),Nx=m.useMemo(()=>{const i={eingang:0,spaeter:0,bearbeitet:0,archiv:0};return Qf.forEach(c=>{const u=R[c.id]||"eingang";i[u]+=1}),i},[Qf,R]),kx=((D==null?void 0:D.email)||"").toLowerCase(),_u=Ch.filter(i=>!i.read).length,j_=i=>{Ws(c=>c.map(u=>u.id===i.id?{...u,read:!0}:u)),!(!i.taskId||!i.tenantId)&&(i.tenantId!==j&&Cs(i.tenantId),Kr(i.taskId),Ys(!0),Rr(!1))};m.useEffect(()=>{Q!=null&&Q.tenantId&&dl(Q.tenantId)},[Q==null?void 0:Q.tenantId]),m.useEffect(()=>{Qo&&w("comments")},[Qo,yf]),m.useEffect(()=>{Array.from(new Set(me.map(c=>c.tenantId).filter(Boolean))).forEach(c=>dl(c))},[me]);const wn=i=>{if(i==="createLink"){const c=prompt("Link URL");c&&document.execCommand(i,!1,c);return}document.execCommand(i,!1)},ai=i=>i.replace(/<[^>]+>/g,""),_x=i=>{i.preventDefault();const c=i.clipboardData.getData("text/plain");if(document.queryCommandSupported("insertText")){document.execCommand("insertText",!1,c);return}const u=window.getSelection();!u||u.rangeCount===0||(u.deleteFromDocument(),u.getRangeAt(0).insertNode(document.createTextNode(c)),u.collapseToEnd())},Cs=i=>{jv(i);try{localStorage.setItem("kanbax-active-tenant",i)}catch{}},S_=async i=>{i.preventDefault(),Lv(!0),co(null),wc(null);try{if(Vs==="magic"){const{error:u}=await Oe.auth.signInWithOtp({email:xc,options:{emailRedirectTo:window.location.origin}});if(u)throw u;wc("Check your email for the magic link.");return}if(Vs==="signup"){const{error:u}=await Oe.auth.signUp({email:xc,password:Eh,options:{emailRedirectTo:window.location.origin}});if(u)throw u;wc("Account created. Check your email to confirm.");return}const{error:c}=await Oe.auth.signInWithPassword({email:xc,password:Eh});if(c)throw c}catch(c){co(c.message||"Authentication failed")}finally{Lv(!1)}},Ex=async i=>{co(null),wc(null);const{error:c}=await Oe.auth.signInWithOAuth({provider:i,options:{redirectTo:window.location.origin}});c&&co(c.message)},Eu=async()=>{await Oe.auth.signOut(),jh(null),gc([]),bv([]),jv(null);try{localStorage.removeItem("kanbax-active-tenant")}catch{}},Tx=async i=>{i.preventDefault(),Pt(null);try{const c=await fetch(`${ne}/teams`,{method:"POST",headers:se(!1),body:JSON.stringify({name:Sh})});if(!c.ok){const f=await c.json();throw new Error(f.error||"Failed to create huddle")}const u=await c.json();Nh(""),gc(f=>f.concat({...u.membership,tenant:u.tenant})),Cs(u.tenant.id)}catch(c){Pt(c.message)}},fa=async i=>{try{const c=await fetch(`${ne}/teams/${i}/members`,{headers:se(!0)});if(!c.ok)throw new Error("Failed to load members");const u=await c.json();WN(u)}catch(c){Pt(c.message)}},N_=async i=>{if(i.preventDefault(),!!j){Pt(null);try{const c=await fetch(`${ne}/teams/${j}/invites`,{method:"POST",headers:se(!0),body:JSON.stringify({email:Ev,role:Cv})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to invite member")}Tv(""),await fa(j)}catch(c){Pt(c.message)}}};async function Tu(i,c=[]){try{if(!(I!=null&&I.access_token)||Hs.current[i])return;Hs.current[i]=!0,So.current={tenantId:i,skipNextSave:!0};const u=await fetch(`${ne}/teams/${i}/scopes`,{headers:se(!0,i)});if(!u.ok)return;const f=await u.json(),g=new Map(c.map(_=>[_.id,_.initiativeId??null])),y=Array.isArray(f==null?void 0:f.scopes)?f.scopes.map(_=>({..._,visibility:_.visibility==="personal"?"personal":"shared",createdBy:_.createdBy||null,completionStatus:_.completionStatus||null,completionComment:_.completionComment||null,completedAt:_.completedAt||null,completedBy:_.completedBy||null,initiativeId:g.get(_.id)??_.initiativeId??null,role:_.role||"VIEWER",members:Array.isArray(_.members)?_.members.map(C=>({userId:C.userId,role:C.role==="ADMIN"||C.role==="MEMBER"?C.role:"VIEWER"})):[]})):[];if(y.length===0&&c.length>0&&(Su||bx)){await Xf(i,c),So.current={tenantId:i,skipNextSave:!0},Cc(_=>({..._,[i]:c}));return}Cc(_=>({..._,[i]:y}))}catch{}finally{Hs.current[i]=!1}}const Cu=i=>{const c=Ks[i]||[];if(c.length>0)return c;if(!yt||yt.length!==1)return[];const u=new Set(yt.map(g=>g.tenantId)),f=Object.entries(Ks).filter(([g])=>!u.has(g)).flatMap(([,g])=>g);return f.length>0&&Cc(g=>({...g,[i]:f})),f};async function Xf(i,c){var u;try{if(!(I!=null&&I.access_token))return;(await fetch(`${ne}/teams/${i}/scopes`,{method:"PUT",headers:se(!0,i),body:JSON.stringify({scopes:c.map(g=>({...g,visibility:g.visibility==="personal"?"personal":"shared",createdBy:g.createdBy||null,completionStatus:g.completionStatus||null,completionComment:g.completionComment||null,completedAt:g.completedAt||null,completedBy:g.completedBy||null,members:Array.isArray(g.members)?g.members:[]}))})})).ok&&await((u=Mf.current)==null?void 0:u.send({type:"broadcast",event:"scope-update",payload:{tenantId:i}}))}catch{}}const k_=async i=>{if(i.preventDefault(),!j)return;const c=Sv.trim();if(c){Pt(null),_v(!0);try{const u=await fetch(`${ne}/teams/${j}`,{method:"PATCH",headers:se(!0),body:JSON.stringify({name:c})});if(!u.ok){const g=await u.json();throw new Error(g.error||"Failed to rename huddle")}const f=await u.json();gc(g=>g.map(y=>y.tenantId===j?{...y,tenant:{...y.tenant||{},name:f.name}}:y)),fn("Huddle renamed")}catch(u){Pt(u.message)}finally{_v(!1)}}},dl=async i=>{if(!(!i||Oi[i]||!(I!=null&&I.access_token))&&!Ar.current[i]){Ar.current[i]=!0;try{const c=await fetch(`${ne}/teams/${i}/members`,{headers:se(!1)});if(!c.ok)throw new Error("Failed to load members");const u=await c.json();QN(f=>({...f,[i]:u}))}catch(c){Pt(c.message)}finally{Ar.current[i]=!1}}},Cx=async(i,c)=>{Pt(null);try{const u=await fetch(`${ne}/invites/${i.id}/${c}`,{method:"POST",headers:se(!1)});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to update invite")}c==="accept"&&i.tenantId&&Cs(i.tenantId),await Pf(),c==="accept"&&yc(!1)}catch(u){Pt(u.message)}},__=async()=>{if(L){Mv(!0),Th(null);try{const i=await fetch(`${ne}/me`,{method:"PATCH",headers:se(!1),body:JSON.stringify({name:L.name,avatarUrl:L.avatarUrl,preferences:{timezone:L.timezone,locale:L.locale,profileVisibility:L.profileVisibility,defaultHuddleId:L.defaultHuddleId||null,defaultPriority:L.defaultPriority,defaultStatus:L.defaultStatus,notifications:L.notifications,workingHours:L.workingHours,reminders:L.reminders}})});if(!i.ok){const u=await i.json();throw new Error(u.error||"Failed to save settings")}const c=await i.json();jh(c.user),Me(xx(c.user)),j&&(fa(j),io(j,Y,R)),fn("Settings saved")}catch(i){fn(i.message)}finally{Mv(!1)}}},E_=async()=>{if(!(D!=null&&D.email))return;Th(null);const{error:i}=await Oe.auth.resetPasswordForEmail(D.email,{redirectTo:window.location.origin});if(i){fn(i.message);return}fn("Password reset email sent.")},T_=async i=>{if(!i||i.length===0||!L)return;const c=i[0],u=new FileReader;u.onload=()=>{Me({...L,avatarUrl:String(u.result||"")})},u.readAsDataURL(c)},Ix=(i,c,u="text/plain")=>{const f=new Blob([c],{type:u}),g=URL.createObjectURL(f),y=document.createElement("a");y.href=g,y.download=i,y.click(),URL.revokeObjectURL(g)},C_=()=>{const i=JSON.stringify(me,null,2);Ix("kanbax-tasks.json",i,"application/json")},I_=()=>{const c=[["id","title","status","priority","dueDate","ownerId","assignees","huddleId"],...me.map(u=>[u.id,u.title.replace(/"/g,'""'),u.status,u.priority,u.dueDate?new Date(u.dueDate).toISOString():"",u.ownerId||"",(u.assignees||[]).join("|"),u.tenantId])].map(u=>u.map(f=>`"${f}"`).join(",")).join(`
`);Ix("kanbax-tasks.csv",c,"text/csv")},O_=async i=>{Th(null);try{const c=await fetch(`${ne}/teams/${i}/leave`,{method:"POST",headers:se(!1)});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to leave huddle")}await Pf(),j===i&&Cs(""),fn("Left huddle")}catch(c){fn(c.message)}};m.useEffect(()=>{if(!bc)return;const i=setTimeout(()=>fn(null),3e3);return()=>clearTimeout(i)},[bc]);const A_=i=>i.toLowerCase(),D_=(i,c,u)=>{const f=qf.current,g={...f};if(!Sx.current.has(i)){u.forEach(y=>{g[`${i}:${y.id}`]={status:y.status,ownerId:y.ownerId||null,assignees:y.assignees||[],updatedAt:y.updatedAt,commentIds:y.comments.map(_=>_.id)}}),Sx.current.add(i),qf.current=g;return}u.forEach(y=>{const _=`${i}:${y.id}`,C=f[_],O=y.activityLog&&y.activityLog.length>0?[...y.activityLog].sort((M,q)=>new Date(q.timestamp).getTime()-new Date(M.timestamp).getTime())[0]:null,z=(O==null?void 0:O.actorId)===bt;if(!C){z||Ws(M=>[{id:`task-new-${_}`,message:`New task created: ${y.title}`,huddleName:c,timestamp:new Date(y.createdAt).toISOString(),read:!1,taskId:y.id,tenantId:i},...M]),g[_]={status:y.status,ownerId:y.ownerId||null,assignees:y.assignees||[],updatedAt:y.updatedAt,commentIds:y.comments.map(M=>M.id)};return}C.status!==y.status&&!z&&Ws(M=>[{id:`task-status-${_}-${y.updatedAt}`,message:`Status changed: ${y.title}  ${y.status}`,huddleName:c,timestamp:new Date(y.updatedAt).toISOString(),read:!1,taskId:y.id,tenantId:i},...M]),C.ownerId!==y.ownerId&&y.ownerId&&!(y.ownerId===bt)&&!z&&Ws(q=>[{id:`task-owner-${_}-${y.updatedAt}`,message:`Owner changed: ${y.title}`,huddleName:c,timestamp:new Date(y.updatedAt).toISOString(),read:!1,taskId:y.id,tenantId:i},...q]);const ie=new Set(C.assignees||[]);new Set(y.assignees||[]);const ye=y.assignees.filter(M=>!ie.has(M));if(ye.length>0){const M=bt&&ye.includes(bt);z||Ws(q=>[{id:`task-assignees-${_}-${y.updatedAt}`,message:M?`You were added to ${y.title}`:`Assignees updated: ${y.title}`,huddleName:c,timestamp:new Date(y.updatedAt).toISOString(),read:!1,taskId:y.id,tenantId:i},...q])}const fe=new Set(C.commentIds||[]),U=y.comments.filter(M=>!fe.has(M.id)),J=U.some(M=>M.createdBy!==bt);if(U.length>0&&J){const M=U.some(q=>kx&&A_(q.text).includes(`@${kx}`));z||Ws(q=>[{id:`task-comment-${_}-${y.updatedAt}`,message:M?`You were mentioned in ${y.title}`:`New comment on ${y.title}`,huddleName:c,timestamp:new Date(y.updatedAt).toISOString(),read:!1,taskId:y.id,tenantId:i},...q])}g[_]={status:y.status,ownerId:y.ownerId||null,assignees:y.assignees||[],updatedAt:y.updatedAt,commentIds:y.comments.map(M=>M.id)}}),qf.current=g};m.useEffect(()=>{if(!(I!=null&&I.access_token)||Ce.length===0)return;let i=!1;const c=async()=>{var u;if(!Sc.current){Sc.current=!0;for(const f of Ce){const g=f.tenantId,y=wt((u=f.tenant)==null?void 0:u.name);try{const _=await fetch(`${ne}/tasks`,{headers:se(!0,g)});if(!_.ok)continue;const C=await _.json();i||(ho(O=>({...O,[g]:C})),D_(g,y,C))}catch{}}Sc.current=!1}};return c(),Ri.current&&clearInterval(Ri.current),Ri.current=window.setInterval(c,3e4),()=>{i=!0,Sc.current=!1,Ri.current&&(clearInterval(Ri.current),Ri.current=null)}},[I==null?void 0:I.access_token,Ce]);const R_=async(i,c)=>{if(j){Pt(null);try{const u=await fetch(`${ne}/teams/${j}/members/${i}`,{method:"PATCH",headers:se(!0),body:JSON.stringify({role:c})});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to update role")}await fa(j)}catch(u){Pt(u.message)}}},L_=async i=>{if(j){Pt(null);try{const c=await fetch(`${ne}/teams/${j}/members/${i}`,{method:"DELETE",headers:se(!0)});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to remove member")}await fa(j)}catch(c){Pt(c.message)}}},Yf=m.useMemo(()=>{if(sr)return["ALL",V.ARCHIVED];const i=new Set;return Uf||((Mr==null?void 0:Mr.columns)||[]).forEach(c=>{c!=null&&c.status&&i.add(String(c.status))}),i.size===0&&me.forEach(c=>{c.status&&c.status!==V.ARCHIVED&&i.add(c.status)}),["ALL",...Array.from(i)]},[Mr==null?void 0:Mr.columns,me,sr,Uf]),Iu=m.useMemo(()=>{const i=sr?me.filter(u=>u.status===V.ARCHIVED):me.filter(u=>u.status!==V.ARCHIVED),c=new Set;return i.forEach(u=>{(u.kinds||[]).forEach(f=>{const g=String(f||"").trim();g&&c.add(g)})}),Array.from(c).sort((u,f)=>u.localeCompare(f))},[me,sr]);m.useEffect(()=>{Do(i=>i.filter(c=>Iu.includes(c)))},[Iu]),m.useEffect(()=>{Ns!=="ALL"&&!Yf.includes(Ns)&&dy("ALL")},[Ns,Yf]),m.useEffect(()=>{l!=="table"&&Js&&Ro(!1)},[l,Js]),m.useEffect(()=>{Pn&&(l==="dashboard"||l==="scope")&&qi(!1)},[l,Pn]),m.useEffect(()=>{l==="dashboard"&&Pn&&qi(!1)},[l,Pn]);const Ox=Ao.trim().toLowerCase(),Ax=i=>{if(Hr&&!i.isFavorite||Gi!=="ALL"&&i.priority!==Gi||l==="table"&&Ns!=="ALL"&&i.status!==Ns)return!1;if(Jt.length>0){const u=(i.kinds||[]).map(g=>String(g));if(!Jt.some(g=>u.includes(g)))return!1}if(Ln!=="ALL"){const u=i.dueDate?new Date(i.dueDate):null;if(Ln==="MINE"&&(!bt||!(i.ownerId===bt||(i.assignees||[]).includes(bt)))||Ln==="OVERDUE"&&(!u||i.status===V.DONE||i.status===V.ARCHIVED||u>=new Date))return!1;if(Ln==="WEEK"){if(!u)return!1;const f=new Date,g=new Date;if(g.setDate(f.getDate()+7),i.status===V.DONE||i.status===V.ARCHIVED||u<f||u>g)return!1}}return Ox?[i.title,ai(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(Ox):!0},Dx=sr?me.filter(i=>i.status===V.ARCHIVED):me.filter(i=>i.status!==V.ARCHIVED),Zf=Dx.filter(Ax),Rx=sr?[{status:V.ARCHIVED,tasks:Zf}]:[V.TODO,V.IN_PROGRESS,V.DONE].map(i=>({status:i,tasks:Dx.filter(c=>i===V.TODO?c.status===V.TODO||c.status===V.BACKLOG:c.status===i)})),Lx=new Set(me.flatMap(i=>i.linkedTaskIds)),us=Ao.trim().toLowerCase(),P_=us?Object.entries(An).flatMap(([i,c])=>(c||[]).map(u=>({...u,tenantId:u.tenantId||i}))):[],ep=us?P_.filter(i=>[i.title,ai(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(us)):[],tp=us?Ce.filter(i=>{var u;return(wt((u=i.tenant)==null?void 0:u.name)||i.tenantId).toLowerCase().includes(us)}):[],np=us?Rx.filter(i=>String(i.status).toLowerCase().includes(us)):[],Px=Ce.length>0&&Ce.every(i=>!!An[i.tenantId]),Ou=(i,c,u)=>`${i||"unknown"}:${c||"unknown"}:${u}`,sp=(i,c,u)=>{if(!(!i||!c))try{localStorage.setItem(`kanbax-task-order:${i}:${c}`,JSON.stringify(u))}catch{}},rp=(i,c)=>{i==="task"&&(c.tenantId&&c.tenantId!==j?(jc({taskId:c.id,tenantId:c.tenantId}),Cs(c.tenantId)):(Kr(c.id),Ys(!0))),i==="huddle"&&(Cs(c.tenantId),d("kanban")),i==="column"&&d("kanban"),cy("")};m.useEffect(()=>{!uo||uo.tenantId!==j||!me.some(c=>c.id===uo.taskId)||(Kr(uo.taskId),Ys(!0),jc(null))},[uo,j,me]),m.useEffect(()=>{if(!us){Fv(!1);return}Fv(!1)},[us,I,Ce]),m.useEffect(()=>{if(!(!j||!le))try{const i=localStorage.getItem(`kanbax-task-order:${j}:${le}`);if(i){const c=JSON.parse(i);Ai(c)}else Ai({})}catch{Ai({})}},[j,le]),m.useEffect(()=>{if(!j||me.length===0)return;const i={...Bv};Array.from(new Set(me.map(u=>u.status))).forEach(u=>{const f=Ou(j,le,u),g=i[f]||[],y=me.filter(O=>O.status===u).map(O=>O.id),_=g.filter(O=>y.includes(O)),C=y.filter(O=>!_.includes(O));i[f]=_.concat(C)}),Ai(i),sp(j,le,i)},[j,le,me]),me.filter(i=>i.status!==V.ARCHIVED);const M_=async i=>{i.preventDefault();try{const c=qo||si(be),u=await fetch(`${ne}/commands/task/create`,{method:"POST",headers:se(!0,be),body:JSON.stringify({title:yn.title,description:yn.description,kinds:Wo,status:xk,priority:yn.priority,dueDate:yn.dueDate||void 0,attachments:Ay,ownerId:Wr??(D==null?void 0:D.id)??void 0,assignees:Xs,boardId:c,source:{type:"MANUAL",createdBy:"admin-user-1"}})});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to create task")}gf(!1),ea({title:"",description:"",priority:"MEDIUM",dueDate:""}),Vo([]),Ko([]),Go(""),Jo(null),Wo.length>0&&nu(f=>{const g=new Set(f);Wo.forEach(_=>g.add(_));const y=Array.from(g).sort((_,C)=>_.localeCompare(C));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(y))}catch{}return y}),xn()}catch(c){alert(c.message)}},Mx=(i,c)=>{$i(u=>u.map(f=>f.id===i?{...f,status:c}:f)),j&&(ho(u=>{const f=u[j];return f?{...u,[j]:f.map(g=>g.id===i?{...g,status:c}:g)}:u}),fo(u=>{const f=u[j];return f?{...u,[j]:f.map(g=>g.id===i?{...g,status:c}:g)}:u}))},Au=async(i,c)=>{var g;const u=me.find(y=>y.id===i),f=u==null?void 0:u.status;f&&f!==c&&Mx(i,c);try{const y=await fetch(`${ne}/commands/task/update-status`,{method:"POST",headers:se(),body:JSON.stringify({taskId:i,newStatus:c})});if(!y.ok){const _=await y.json();throw new Error(_.error||"Failed to update status")}j&&await((g=$f.current)==null?void 0:g.send({type:"broadcast",event:"task-update",payload:{tenantId:j,taskId:i}}))}catch(y){f&&f!==c&&Mx(i,f),alert(y.message)}},$_=async i=>{const c=i.status===V.ARCHIVED?V.BACKLOG:V.ARCHIVED;await Au(i.id,c)},B_=async i=>{if(confirm("Are you sure you want to delete this task?"))try{const c=await fetch(`${ne}/commands/task/delete`,{method:"POST",headers:se(),body:JSON.stringify({taskId:i})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to delete task")}Ys(!1),Kr(null),xn()}catch(c){alert(c.message)}},ip=i=>{Kr(i.id),Qr(i.checklist||[]),jf(""),Xr(""),sa(i.linkedTaskIds||[]),Yr(""),Ys(!0)},ap=i=>{zv||Date.now()-Wv.current<200||ip(i)},op=i=>{if(i.sourceType!=="MANUAL"||l==="scope"&&(P!=null&&P.completionStatus))return;wf(i.id),jk(i.tenantId),Ly(i.tenantId),Yc(i.boardId||si(i.tenantId)),Py(i.boardId||si(i.tenantId)),Zc(i.ownerId??null),bf(i.assignees??[]);const c=i.dueDate?new Date(i.dueDate).toISOString().split("T")[0]:"";Zo({title:i.title,description:i.description||"",priority:i.priority,dueDate:c}),su(i.kinds||[]),ru(""),Qr(i.checklist||[]),Xr(""),sa(i.linkedTaskIds||[]),Yr(""),i.kinds&&i.kinds.length>0&&nu(u=>{const f=new Set(u);i.kinds.forEach(y=>{y.trim().length>0&&f.add(y)});const g=Array.from(f).sort((y,_)=>y.localeCompare(_));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(g))}catch{}return g}),My(i.attachments||[]),ta([]),tu([]),xf(!0)},lp=()=>{gf(!1),Vo([]),Ko([]),Go(""),Jo(null)},Du=()=>{Ys(!1),Kr(null)},cp=()=>{xf(!1),wf(null),ta([]),tu([]),su([]),ru(""),Qr([]),Xr(""),sa([]),Yr("")},up=()=>{Co(!1),Io(null),Hc(null)},dp=()=>{Bc(!1),To(null)};m.useEffect(()=>{const i=c=>{if(c.key!=="Escape")return;let u=!1;na?(iu(null),u=!0):Xo?(cp(),u=!0):Qo?(Du(),u=!0):F?(W(!1),u=!0):In?(xs(!1),u=!0):zo?(lp(),u=!0):ef?(up(),u=!0):Zh?(Uc(!1),u=!0):Yh?(dp(),u=!0):yo?(xo(!1),u=!0):Ac?(vo(!1),u=!0):Xh?(Eo(!1),u=!0):kh?(yc(!1),u=!0):oo?(lo(!1),u=!0):Ih?(Rr(!1),u=!0):Pi?(Pr(!1),u=!0):Oh?(Jn(!1),u=!0):Ah?(Nc(!1),u=!0):Ph?(_c(!1),u=!0):Gv?(nk(!1),u=!0):Mh?(Ec(!1),u=!0):Li?(Lr(!1),u=!0):x?(k(null),u=!0):qv?(Ic(null),u=!0):Ui?(mo(!1),u=!0):Fi?(go(!1),u=!0):Ji?(Vc(!1),u=!0):Js?(Ro(!1),u=!0):Pn?(qi(!1),u=!0):ss?(lt(null),u=!0):Qs&&(Xi(!1),u=!0),u&&(c.preventDefault(),c.stopPropagation())};return window.addEventListener("keydown",i),document.addEventListener("mousedown",xv),()=>{window.removeEventListener("keydown",i),document.removeEventListener("mousedown",xv)}},[na,Xo,Qo,zo,ef,Zh,Yh,yo,Xh,kh,oo,Ih,Oh,Ah,Ph,Gv,Mh,qv,Ui,Fi,Ji,Js,In,Qs,x,de,vt,lp,Du,cp,up,dp]);const U_=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(u=>new Promise((f,g)=>{const y=new FileReader;y.onload=()=>f({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:u.name,size:u.size,type:u.type||"application/octet-stream",dataUrl:String(y.result||""),uploadedAt:new Date}),y.onerror=()=>g(new Error("Failed to read file")),y.readAsDataURL(u)}));try{const u=await Promise.all(c);Vo(f=>f.concat(u))}catch(u){alert(u.message||"Failed to attach file")}},F_=i=>{Vo(c=>c.filter(u=>u.id!==i))},$x=(i,c)=>{const u=i.trim();return u?(c(f=>f.some(y=>y.toLowerCase()===u.toLowerCase())?f:[...f,u]),!0):!1},Bx=(i,c,u)=>{const f=u?typeof u=="string"?new Date(u):u:void 0;ho(g=>{const y=g[i];return y?{...g,[i]:y.map(_=>_.id===c?{..._,dueDate:f}:_)}:g}),fo(g=>{const y=g[i];return y?{...g,[i]:y.map(_=>_.id===c?{..._,dueDate:f}:_)}:g}),$i(g=>g.map(y=>y.id===c?{...y,dueDate:f}:y))};m.useEffect(()=>{if(!Yi||!zr)return;const i=44,c=f=>{var C;const g=(((C=Po.current)==null?void 0:C.scrollLeft)||0)-by,y=f.clientX-wy+g,_=Math.round(y/i);Vr(_)},u=async()=>{const f=mu.get(Yi);if(!f||!zr){Zi(null),Vr(0);return}if(is!==0){let g=new Date(zr),y=ff;if(Kc)g=new Date(zr),g.setDate(g.getDate()+is);else{const O=jy||new Date(zr),z=Sy||ff;Bo==="resize-end"?(y=Math.max(1,z+is),g=new Date(O),g.setDate(g.getDate()+y-1)):Bo==="resize-start"?(y=Math.max(1,z-is),g=new Date(O),g.setDate(g.getDate()+z-1)):(g=new Date(zr),g.setDate(g.getDate()+is))}cf(O=>({...O,[f.id]:{date:g.toISOString(),isPoint:Kc,durationDays:Kc?void 0:y}}));const _=f.dueDate||null,C=g.toISOString();Bx(f.tenantId,f.id,C),requestAnimationFrame(()=>{Zi(null),Vr(0),Mo(!1),$o(1),Uo("move"),Fo(null),Ho(1)});try{const O=await fetch(`${ne}/commands/task/update-details`,{method:"POST",headers:se(!0,f.tenantId),body:JSON.stringify({taskId:f.id,title:f.title,description:f.description,dueDate:C})});if(!O.ok){let z="Failed to update task";try{const ie=await O.json();z=(ie==null?void 0:ie.error)||z}catch{}throw new Error(z)}}catch(O){Bx(f.tenantId,f.id,_),alert(O.message||"Failed to update task")}}else Zi(null),Vr(0),Mo(!1),$o(1),Uo("move"),Fo(null),Ho(1)};return window.addEventListener("mousemove",c),window.addEventListener("mouseup",u,{once:!0}),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u)}},[Yi,zr,wy,by,is,Kc,ff,Bo,jy,Sy,mu]);const Ux=()=>{$x(Dy,Ko)&&Go("")},Fx=()=>{$x($y,su)&&ru("")},Hx=(i,c)=>{(i.key==="Enter"||i.key===",")&&(i.preventDefault(),c==="new"?Ux():Fx())},zx=(i,c)=>{c(u=>u.filter(f=>f!==i))},ir=async i=>{if(!Q)return;const c=await fetch(`${ne}/commands/task/update-details`,{method:"POST",headers:se(!0,Q.tenantId),body:JSON.stringify({taskId:Q.id,title:Q.title,description:Q.description,...i})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to update task")}await xn()},H_=async()=>{const i=By.trim();if(!(!i||!Q))try{await ir({commentText:i}),jf("")}catch(c){alert(c.message)}},Vx=async()=>{const i=Sf.trim();if(!i||!Q)return;const c=[...Jr,{id:Math.random().toString(36).substring(2,15),text:i,done:!1}];Qr(c),Xr("");try{await ir({checklist:c})}catch(u){alert(u.message)}},Wx=async i=>{const c=Jr.map(u=>u.id===i?{...u,done:!u.done}:u);Qr(c);try{await ir({checklist:c})}catch(u){alert(u.message)}},Kx=async i=>{const c=Jr.filter(u=>u.id!==i);Qr(c);try{await ir({checklist:c})}catch(u){alert(u.message)}},Gx=async()=>{if(!nl||!Q)return;const i=as.includes(nl)?as:[...as,nl];sa(i),Yr("");try{await ir({linkedTaskIds:i})}catch(c){alert(c.message)}},qx=async i=>{const c=as.filter(u=>u!==i);sa(c);try{await ir({linkedTaskIds:c})}catch(u){alert(u.message)}},hp=async i=>{try{await fetch(`${ne}/commands/task/update-details`,{method:"POST",headers:se(!0,i.tenantId),body:JSON.stringify({taskId:i.id,title:i.title,description:i.description,isFavorite:!i.isFavorite})}),xn()}catch(c){alert(c.message)}},Jx=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(u=>new Promise((f,g)=>{const y=new FileReader;y.onload=()=>f({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:u.name,size:u.size,type:u.type||"application/octet-stream",dataUrl:String(y.result||""),uploadedAt:new Date}),y.onerror=()=>g(new Error("Failed to read file")),y.readAsDataURL(u)}));try{const u=await Promise.all(c);ta(f=>f.concat(u))}catch(u){alert(u.message||"Failed to attach file")}},z_=i=>{ta(c=>c.filter(u=>u.id!==i)),My(c=>(c.some(f=>f.id===i)&&tu(f=>f.concat(i)),c.filter(f=>f.id!==i)))},V_=async i=>{if(i.preventDefault(),!!Yo)try{const c=await fetch(`${ne}/commands/task/update-details`,{method:"POST",headers:se(!0,el),body:JSON.stringify({taskId:Yo,title:Qt.title,description:Qt.description,kinds:tl,priority:Qt.priority,dueDate:Qt.dueDate?Qt.dueDate:null,ownerId:qr||null,assignees:Zs,attachmentsToAdd:eu,attachmentsToRemove:Nk})});if(!c.ok){const f=await c.json();throw new Error(f.error||"Failed to update task")}if(ve&&el&&ve!==el){const f=await fetch(`${ne}/commands/task/assign-huddle`,{method:"POST",headers:se(!0,el),body:JSON.stringify({taskId:Yo,targetTenantId:ve})});if(!f.ok){const g=await f.json();throw new Error(g.error||"Failed to move task to huddle")}}const u=ve||el;if(Gr&&u&&Gr!==bk){const f=await fetch(`${ne}/commands/task/assign-board`,{method:"POST",headers:se(!0,u),body:JSON.stringify({taskId:Yo,boardId:Gr})});if(!f.ok){const g=await f.json();throw new Error(g.error||"Failed to move task to board")}}xf(!1),wf(null),Yc(null),Py(null),Ys(!1),Kr(null),ta([]),tu([]),Qr([]),Xr(""),sa([]),Yr(""),tl.length>0&&nu(f=>{const g=new Set(f);tl.forEach(_=>g.add(_));const y=Array.from(g).sort((_,C)=>_.localeCompare(C));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(y))}catch{}return y}),xn()}catch(c){alert(c.message)}},fp=(i,c)=>{Wv.current=Date.now(),i.dataTransfer.setData("text/plain",c),i.dataTransfer.effectAllowed="move",Hv(c),Vv(!0)},pa=()=>{Hv(null),Di.current=null,uu.current=null,Oc(null),setTimeout(()=>Vv(!1),200)},pp=i=>{document.querySelectorAll(".task-card.drag-over-card").forEach(c=>{c.classList.remove("drag-over-card")}),document.querySelectorAll(".kanban-column.drag-over").forEach(c=>{c.classList.remove("drag-over")}),pa()},W_=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over"),i.target===i.currentTarget&&(Di.current=null)},K_=i=>{i.currentTarget.classList.remove("drag-over")},G_=(i,c)=>{i.preventDefault(),i.currentTarget.classList.remove("drag-over");const u=i.dataTransfer.getData("text/plain")||pn||"";if(!u||!j)return;const f=me.find(C=>C.id===u),g=f==null?void 0:f.status,y=Ou(j,le,c),_=Di.current;if(Di.current=null,g&&g!==c&&Au(u,c),_!=null&&_.startsWith(`${c}:`)){const C=_.split(":")[1]||null;C&&Qx(j,le,c,u,C),pa();return}Ai(C=>{const O={...C},z=(O[y]||[]).filter(ie=>ie!==u);return O[y]=z.concat(u),sp(j,le,O),O}),pa()},Qx=(i,c,u,f,g)=>{const y=Ou(i,c,u);Ai(_=>{const C={..._},O=(C[y]||[]).filter(z=>z!==f);if(g){const z=O.indexOf(g);z===-1?O.push(f):O.splice(z,0,f)}else O.push(f);return C[y]=O,sp(i,c,C),C})},q_=(i,c,u)=>{if(i.preventDefault(),i.dataTransfer.dropEffect="move",!pn||pn===u||!j)return;const f=me.find(y=>y.id===pn);if(!f||f.status!==c)return;const g=`${c}:${u}`;Di.current!==g&&(Di.current=g,Qx(j,le,c,pn,u),i.currentTarget.classList.add("drag-over-card"))},J_=i=>{const c=i.currentTarget,u=i.relatedTarget;c.contains(u)||i.currentTarget.classList.remove("drag-over-card")};return I?KN?yt.length===0&&!Av?r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Create your first huddle"}),r.jsx("p",{children:"Set up a shared space and invite teammates."})]}),r.jsxs("form",{className:"auth-form",onSubmit:Tx,children:[r.jsxs("label",{children:["Huddle name",r.jsx("input",{type:"text",value:Sh,onChange:i=>Nh(i.target.value),placeholder:"Design Squad",required:!0})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create huddle"}),vc&&r.jsx("div",{className:"auth-error",children:vc})]}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>GN(!0),children:"Continue with private huddle"}),r.jsx("button",{className:"btn btn-ghost",onClick:Eu,children:"Sign out"})]})}):!j&&yt.length>0&&!Av?r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Select a huddle"}),r.jsx("p",{children:"Choose a space to continue."})]}),r.jsx("div",{className:"auth-form",children:r.jsxs("label",{children:["Huddle",r.jsxs("select",{value:j||"",onChange:i=>Cs(i.target.value),children:[r.jsx("option",{value:"",disabled:!0,children:"Select huddle"}),Ce.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})]})]})}),r.jsx("button",{className:"btn btn-ghost",onClick:Eu,children:"Sign out"})]})}):r.jsxs("div",{className:`dashboard${_t?" sidebar-collapsed":""}`,children:[r.jsx("datalist",{id:"kind-suggestions",children:kk.map(i=>r.jsx("option",{value:i},i))}),r.jsx("header",{className:"topbar",children:r.jsxs("div",{className:"topbar-inner",children:[r.jsxs("div",{className:"topbar-search",tabIndex:-1,children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"11",cy:"11",r:"7"}),r.jsx("path",{d:"M20 20l-3.5-3.5"})]}),r.jsx("input",{type:"search",placeholder:"Search tasks, huddles...",value:Ao,onChange:i=>cy(i.target.value)})]}),us&&r.jsxs("div",{className:"topbar-search-panel",children:[!Px&&r.jsx("div",{className:"empty-state",children:"Indexing huddles..."}),Px&&tp.length===0&&ep.length===0&&np.length===0&&r.jsx("div",{className:"empty-state",children:"No results."}),tp.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Huddles"}),tp.map(i=>{var c,u;return r.jsxs("button",{className:"search-item",onClick:()=>rp("huddle",i),children:[r.jsx("span",{className:"huddle-item-dot",style:{background:$n(i.tenantId,(c=i.tenant)==null?void 0:c.name).solid}}),wt((u=i.tenant)==null?void 0:u.name)||i.tenantId]},i.id)})]}),ep.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Tasks"}),ep.slice(0,6).map(i=>r.jsx("button",{className:"search-item",onClick:()=>rp("task",i),children:i.title},i.id))]}),np.length>0&&r.jsxs("div",{className:"search-section",children:[r.jsx("div",{className:"search-title",children:"Task columns"}),np.map(i=>r.jsx("button",{className:"search-item",onClick:()=>rp("column",i),children:i.status},i.status))]})]}),r.jsx("div",{className:"topbar-personal",children:r.jsxs("div",{className:"topbar-greeting",children:[r.jsx("span",{className:"topbar-greeting-title",children:w_}),r.jsx("div",{className:"topbar-greeting-meta",children:r.jsxs("div",{className:`focus-dropdown${Pi?" open":""}`,ref:Dh,children:[r.jsxs("button",{type:"button",className:"focus-dropdown-button",onClick:()=>{Pr(i=>!i),Lr(!1),Rr(!1),Jn(!1)},"aria-expanded":Pi,"aria-haspopup":"menu",children:["Heute fllig: ",b_]}),Pi&&r.jsx("div",{className:"quick-pins-panel focus-panel header-dropdown-panel",role:"menu",children:Nu.length===0?r.jsxs("div",{className:"quick-pin-empty",children:[r.jsx("span",{className:"quick-pin-empty-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 7h16"}),r.jsx("path",{d:"M6 7v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),r.jsx("path",{d:"M9 4h6"}),r.jsx("path",{d:"M9 11h6"}),r.jsx("path",{d:"M9 15h4"})]})}),r.jsx("span",{children:"Keine Tasks fllig"})]}):Nu.map(i=>r.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{d("kanban"),Vi(i.boardId||le||"default-board"),jc({taskId:i.id,tenantId:i.tenantId||j||""}),Pr(!1)},children:[r.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),r.jsx("span",{className:"quick-pin-label",children:i.title}),r.jsx("span",{className:"quick-pin-meta",children:Ff(i.boardId)})]},i.id))})]})})]})}),r.jsxs("div",{className:"topbar-actions",children:[ku.length>0&&r.jsxs("div",{className:`quick-pins quick-pins-icon${Li?" open":""}`,ref:Rh,children:[r.jsxs("button",{type:"button",className:"notif-button quick-pins-icon-button",onClick:()=>{Lr(i=>!i),Pr(!1),Rr(!1),Jn(!1)},"aria-expanded":Li,"aria-haspopup":"menu",title:"Favoriten","aria-label":"Favoriten ffnen",children:[r.jsx("span",{className:"quick-pins-icon-star",children:""}),ku.length>0&&r.jsx("span",{className:"notif-badge",children:ku.length})]}),Li&&r.jsx("div",{className:"quick-pins-panel header-dropdown-panel",role:"menu",children:ku.map(i=>r.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{const c=ii.find(u=>u.id===i.id);c&&(d("kanban"),Vi(c.boardId||le||"default-board"),jc({taskId:c.id,tenantId:c.tenantId||j||""}),Lr(!1))},children:[r.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),r.jsx("span",{className:"quick-pin-label",children:i.label}),i.sublabel&&r.jsx("span",{className:"quick-pin-meta",children:i.sublabel})]},i.id))})]}),r.jsxs("div",{className:"notif-dropdown",children:[r.jsxs("button",{className:"notif-button",onClick:()=>{Rr(i=>!i),Lr(!1),Pr(!1),Jn(!1)},"aria-label":"Notifications",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),r.jsx("path",{d:"M10 21a2 2 0 0 0 4 0"})]}),_u>0&&r.jsx("span",{className:"notif-badge",children:_u})]}),Ih&&r.jsxs("div",{className:"notif-panel header-dropdown-panel",children:[r.jsxs("div",{className:"notif-header",children:[r.jsx("div",{children:"Notifications"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Ws(i=>i.map(c=>({...c,read:!0}))),children:"Mark all read"})]}),r.jsxs("div",{className:"notif-list",children:[Ch.length===0&&r.jsx("div",{className:"empty-state",children:"No notifications yet."}),Ch.map(i=>r.jsxs("div",{className:`notif-item ${i.read?"read":""} ${i.taskId?"clickable":""}`,onClick:()=>i.taskId&&j_(i),children:[r.jsx("div",{className:"notif-title",children:i.message}),r.jsxs("div",{className:"notif-meta",children:[i.huddleName,"  ",new Date(i.timestamp).toLocaleString()]})]},i.id))]})]})]}),r.jsxs("div",{className:"user-menu",children:[r.jsx("button",{className:"user-menu-button",onClick:()=>{Jn(i=>!i),Rr(!1),Lr(!1),Pr(!1)},"aria-label":"User menu",children:rx?r.jsx("img",{src:rx,alt:"User avatar"}):r.jsx("span",{children:ha(ca)})}),Oh&&r.jsxs("div",{className:"user-menu-dropdown header-dropdown-panel",children:[r.jsxs("div",{className:"user-menu-header",children:[r.jsx("div",{className:"user-menu-name",children:(L==null?void 0:L.name)||ca}),r.jsx("div",{className:"user-menu-email",children:ca})]}),r.jsx("button",{className:"user-menu-item",onClick:()=>{d("dashboard"),Jn(!1)},children:"Home"}),r.jsx("button",{className:"user-menu-item",onClick:()=>{d("scope"),$t("list"),vn(null),ls(null,"replace"),Jn(!1)},children:"Scope"}),r.jsxs("button",{className:"user-menu-item",onClick:()=>{Rr(!0),Jn(!1)},children:["Notifications ",_u>0?`(${_u})`:""]}),r.jsx("button",{className:"user-menu-item",onClick:()=>{d("settings"),Jn(!1)},children:"Settings"}),r.jsx("button",{className:"user-menu-item danger",onClick:()=>{Jn(!1),Eu()},children:"Sign out"})]})]})]})]})}),r.jsxs("aside",{className:"sidebar",children:[r.jsx("div",{className:"sidebar-header",children:r.jsxs("div",{className:"sidebar-brand",children:[r.jsx("img",{className:"sidebar-logo",src:"/sqirch_logo.svg",alt:"sqirch"}),r.jsx("img",{className:"sidebar-logo-mark",src:"/sqirch_mark.svg",alt:"","aria-hidden":"true"})]})}),r.jsxs("div",{className:"sidebar-content",children:[r.jsxs("div",{className:"sidebar-huddle",children:[r.jsxs("button",{className:"sidebar-nav-item sidebar-huddle-toggle",onClick:()=>Nc(i=>!i),"data-tooltip":"Huddles","aria-label":"Select huddle",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("circle",{cx:"8",cy:"8",r:"3.2"}),r.jsx("circle",{cx:"16",cy:"8",r:"3.2"}),r.jsx("path",{d:"M3.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"}),r.jsx("path",{d:"M11.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"})]}),r.jsx("span",{className:"sidebar-huddle-initial",children:wt(((rw=(sw=Ce.find(i=>i.tenantId===j))==null?void 0:sw.tenant)==null?void 0:rw.name)||"H").charAt(0)}),r.jsx("span",{className:"sidebar-huddle-label",children:wt((aw=(iw=Ce.find(i=>i.tenantId===j))==null?void 0:iw.tenant)==null?void 0:aw.name)||"Huddle"})]}),Ah&&r.jsxs("div",{className:"sidebar-huddle-menu",children:[Ce.map(i=>{var u,f;const c=i.tenantId===j;return r.jsxs("button",{className:`sidebar-huddle-item ${c?"active":""}`,onClick:()=>{Cs(i.tenantId),Nc(!1)},children:[r.jsx("span",{className:"huddle-item-dot",style:{background:$n(i.tenantId,(u=i.tenant)==null?void 0:u.name).solid}}),r.jsx("span",{className:"sidebar-huddle-name",children:wt((f=i.tenant)==null?void 0:f.name)||i.tenantId})]},i.id)}),r.jsx("button",{className:"sidebar-huddle-item sidebar-huddle-settings",onClick:()=>{lo(!0),Nc(!1)},children:r.jsx("span",{className:"sidebar-huddle-name",children:"Huddle settings"})})]})]}),r.jsx("div",{className:"sidebar-team",children:r.jsxs("div",{className:"sidebar-nav",children:[r.jsxs("button",{className:`sidebar-nav-item ${l==="dashboard"?"active":""}`,onClick:()=>d("dashboard"),"data-tooltip":"Home",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("rect",{x:"3.5",y:"3.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"13.5",y:"3.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"3.5",y:"13.5",width:"7",height:"7",rx:"2"}),r.jsx("rect",{x:"13.5",y:"13.5",width:"7",height:"7",rx:"2"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Home"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="inbox"?"active":""}`,onClick:()=>d("inbox"),"data-tooltip":"Inbox",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 4h16v12H4z"}),r.jsx("path",{d:"M4 16h6l2 3h4l2-3h6"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Inbox"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="scope"?"active":""}`,onClick:Dk,"data-tooltip":"Scope",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),r.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),r.jsx("path",{d:"M12 4v3"}),r.jsx("path",{d:"M12 17v3"}),r.jsx("path",{d:"M4 12h3"}),r.jsx("path",{d:"M17 12h3"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Scope"})]}),r.jsxs("button",{className:`sidebar-nav-item ${l==="initiatives"?"active":""}`,onClick:Rk,"data-tooltip":"Initiatives",children:[r.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("path",{d:"M4 16l6-6 4 4 6-6"}),r.jsx("path",{d:"M4 20h16"})]})}),r.jsx("span",{className:"sidebar-nav-label",children:"Initiatives"})]})]})}),r.jsx("div",{className:"sidebar-footer",children:r.jsx("button",{className:"sidebar-toggle",onClick:()=>tk(i=>!i),"aria-label":_t?"Expand sidebar":"Collapse sidebar",title:_t?"Expand sidebar":"Collapse sidebar",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M6 12h12"}),r.jsx("path",{d:"M12 6l6 6-6 6"})]})})})]})]}),r.jsxs("div",{className:"content-shell",children:[r.jsxs("div",{className:"page-heading-wrap",children:[r.jsxs("div",{className:"page-breadcrumbs-row",children:[r.jsx("div",{className:"page-breadcrumbs",children:jx.map((i,c)=>r.jsxs("span",{className:"page-breadcrumb-item",children:[i.onClick?r.jsx("button",{type:"button",className:"page-breadcrumb-link",onClick:i.onClick,children:i.label}):r.jsx("span",{children:i.label}),c<jx.length-1&&r.jsx("span",{className:"page-breadcrumb-sep",children:"/"})]},`${i.label}-${c}`))}),(l==="kanban"||l==="table"||l==="timeline"||l==="scope"||l==="initiatives")&&r.jsxs("div",{className:"page-breadcrumb-actions",children:[(l==="kanban"||l==="table")&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>_c(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),Ph&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{_c(!1),Ok()},children:"+ Taskliste erstellen"}),g_.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===le?"active":""}`,onClick:()=>{_c(!1),Ak(i.id)},children:i.name},i.id))]})]}),l==="initiatives"&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>$h(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),sk&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:`board-switch-item ${Zn==="list"?"active":""}`,onClick:()=>{$h(!1),Dn("list"),ws(null),ei(null,"replace")},children:"Initiative list"}),ct.length===0?r.jsx("div",{className:"board-switch-empty",children:"No initiatives yet."}):ct.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===Ze?"active":""}`,onClick:()=>{$h(!1),Cf(i.id)},children:i.name},i.id))]})]}),l==="scope"&&r.jsxs("span",{className:"board-switch-inline",children:[r.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Ec(i=>!i),children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})}),Mh&&r.jsxs("div",{className:"board-switch-menu",children:[r.jsx("button",{type:"button",className:`board-switch-item ${Et==="list"?"active":""}`,onClick:()=>{Ec(!1),$t("list"),vn(null),ls(null,"replace")},children:"Scope list"}),_e.length===0?r.jsx("div",{className:"board-switch-empty",children:"No scope windows yet."}):_e.map(i=>r.jsx("button",{type:"button",className:`board-switch-item ${i.id===gn?"active":""}`,onClick:()=>{Ec(!1),cu(i.id)},children:i.name},i.id))]})]})]})]}),r.jsx("div",{className:`page-heading${l==="kanban"||l==="table"||l==="dashboard"||l==="initiatives"||l==="inbox"||l==="timeline"||l==="scope"?" page-heading-style":""}`,children:!(l==="okr"&&nr==="objective")&&r.jsxs("div",{className:"page-heading-row",children:[r.jsxs("div",{className:"page-heading-title",children:[r.jsxs("h1",{children:[l==="settings"?"Settings":l==="okr"?"Goals":l==="dashboard"?"Home":l==="calendar"?"Calendar":l==="inbox"?"Inbox":l==="initiatives"?Zn==="detail"&&Se?Se.name:"Initiatives":l==="scope"?Et==="detail"&&P?P.name:"Scope":(Qe==null?void 0:Qe.name)||ul||"Work",l==="scope"&&r.jsx("button",{type:"button",className:"icon-action scope-help","data-tooltip":"Ein Scope Window ist ein zeitlicher Rahmen, in dem bestimmte Tasks erledigt werden sollen.","aria-label":"Was ist ein Scope Window?",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M9.5 9a2.5 2.5 0 0 1 5 0c0 2-2 2-2 4"}),r.jsx("path",{d:"M12 17h.01"})]})})]}),l==="scope"&&Et==="detail"&&P&&r.jsxs("div",{className:"page-heading-meta scope-meta",children:[r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Zeitraum"}),r.jsx("span",{className:"scope-meta-value",children:ni(P)})]}),r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Sichtb."}),r.jsx("span",{className:"scope-meta-value",children:P.visibility==="personal"?"Personal":"Shared"})]}),r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Members"}),r.jsx("span",{className:"scope-meta-value",children:((ow=P.members)==null?void 0:ow.length)||0})]}),r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Rolle"}),r.jsx("span",{className:"scope-meta-value",children:P.role||"VIEWER"})]}),P.createdBy&&r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Owner"}),r.jsx("span",{className:"scope-meta-value",children:ri(j,P.createdBy).label})]}),P.completionStatus&&r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Abschluss"}),r.jsx("span",{className:"scope-meta-value",children:P.completionStatus==="YES"?"Ja":P.completionStatus==="PARTIAL"?"Teilweise":"Nein"})]}),P.completedAt&&r.jsxs("div",{className:"scope-meta-item",children:[r.jsx("span",{className:"scope-meta-label",children:"Abgeschlossen am"}),r.jsx("span",{className:"scope-meta-value",children:new Date(P.completedAt).toLocaleDateString()})]})]}),l==="initiatives"&&Zn==="detail"&&Se&&r.jsxs("div",{className:"page-heading-meta initiative-meta",children:[r.jsx("span",{className:"dashboard-badge",children:Se.status==="ACTIVE"?"Active":"Closed"}),r.jsx("span",{className:"page-heading-dot",children:""}),r.jsxs("span",{children:["Owner:"," ",Se.ownerId?Yt(j,Se.ownerId):"Unassigned"]}),Se.closedAt&&r.jsx("span",{className:"page-heading-dot",children:""}),Se.closedAt&&r.jsxs("span",{children:["Closed ",new Date(Se.closedAt).toLocaleDateString()]})]})]}),(l==="kanban"||l==="table"||l==="timeline"||l==="scope"&&Et==="detail"&&P||l==="scope"&&Et==="list")&&r.jsxs("div",{className:"page-heading-actions",children:[(l==="kanban"||l==="table"||l==="timeline")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"icon-action scope-toggle",onClick:()=>uk(i=>!i),"data-tooltip":"Tasks zu Scope zuteilen","aria-label":"Tasks zu Scope zuteilen","aria-pressed":Zv,children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"8"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M12 2v3"}),r.jsx("path",{d:"M12 19v3"}),r.jsx("path",{d:"M2 12h3"}),r.jsx("path",{d:"M19 12h3"})]})}),Su&&!sr&&!Uf&&r.jsx("button",{className:"icon-action settings",onClick:()=>Eo(!0),"data-tooltip":"Einstellungen zu Tasks","aria-label":"Einstellungen zu Tasks",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})}),r.jsx("button",{className:"icon-action create",disabled:!j,onClick:v_,"data-tooltip":"Task erstellen","aria-label":"Task erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),l==="scope"&&Et==="detail"&&P&&r.jsxs(r.Fragment,{children:[yu&&r.jsx("button",{className:"icon-action settings",onClick:()=>xo(!0),"data-tooltip":"Scope Window settings","aria-label":"Scope Window settings",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})}),yu&&r.jsx("button",{className:"icon-action",onClick:()=>Mc(!0),"data-tooltip":"Scope abschlieen","aria-label":"Scope abschlieen",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M5 12l5 5 9-9"})})})]})]}),l==="initiatives"&&Zn==="detail"&&Se&&r.jsx("div",{className:"page-heading-actions",children:r.jsx("button",{type:"button",className:"icon-action",onClick:()=>{js({name:Se.name,goal:Se.goal||"",description:Se.description||"",ownerId:Se.ownerId||""}),Rc(Se.id),zi(!0)},"data-tooltip":"Initiative bearbeiten","aria-label":"Initiative bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})})]})})]}),r.jsxs("main",{className:"main-content",children:[Uy&&r.jsx("div",{className:"loading-strip",children:"Syncing huddle"}),Gf&&!x_&&!qN&&r.jsxs("div",{className:"huddle-cta",children:[r.jsxs("div",{children:[r.jsx("div",{className:"huddle-cta-title",children:"Share work with a huddle"}),r.jsx("div",{className:"huddle-cta-text",children:"Create a shared huddle for your team while keeping your private tasks separate."})]}),r.jsxs("div",{className:"huddle-cta-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>lo(!0),children:"Create shared huddle"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>JN(!0),children:"Dismiss"})]})]}),ao.length>0&&r.jsxs("div",{className:"invite-banner",children:[r.jsxs("div",{children:[r.jsx("div",{className:"invite-title",children:"Huddle invitations"}),r.jsxs("div",{className:"invite-text",children:["You have ",ao.length," pending invitation",ao.length>1?"s":"","."]})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>yc(!0),children:"View invites"})]}),!j&&r.jsxs("div",{className:"team-warning",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"No huddle selected."})," Create or join a huddle to start managing tasks."]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>lo(!0),children:"Create huddle"})]}),l==="inbox"&&r.jsx("div",{className:"filter-bar inbox-filter-bar",children:r.jsx("div",{className:"view-switch inbox-view-switch",role:"tablist","aria-label":"Inbox view switcher",style:{"--active-index":["eingang","spaeter","bearbeitet","archiv"].indexOf(A),"--segment-count":4},children:[{key:"eingang",label:"Eingang",count:Nx.eingang},{key:"spaeter",label:"Spter",count:Nx.spaeter},{key:"bearbeitet",label:"Bearbeitet"},{key:"archiv",label:"Archiviert"}].map(i=>r.jsxs("button",{type:"button",className:`view-pill ${A===i.key?"active":""}`,onClick:()=>H(i.key),role:"tab","aria-selected":A===i.key,children:[r.jsx("span",{children:i.label}),"count"in i&&typeof i.count=="number"&&i.count>0&&r.jsx("span",{className:"view-pill-badge","aria-hidden":"true",children:i.count})]},i.key))})}),Uy?r.jsxs("div",{className:"content-loader",children:[r.jsx("div",{className:"content-loader-title",children:"Loading huddle"}),r.jsx("div",{className:"content-loader-text",children:"Fetching tasks and status."})]}):l==="calendar"?r.jsxs("div",{className:"calendar-view",children:[r.jsxs("div",{className:"calendar-header",children:[r.jsxs("div",{className:"calendar-header-left",children:[r.jsx("div",{className:"calendar-title",children:s_}),r.jsxs("div",{className:"calendar-nav",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Ck,children:"Today"}),r.jsx("button",{className:"icon-action",onClick:()=>zy(-1),"aria-label":"Previous month",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M15 6l-6 6 6 6"})})}),r.jsx("button",{className:"icon-action",onClick:()=>zy(1),"aria-label":"Next month",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M9 6l6 6-6 6"})})})]})]}),r.jsxs("div",{className:"calendar-imports",children:[r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:"Manual import (.ics)"}),r.jsx("div",{className:"calendar-import-meta",children:"Upload a calendar export. Re-upload to refresh."}),r.jsxs("div",{className:"calendar-import-form",children:[r.jsx("input",{type:"file",accept:".ics,text/calendar",onChange:i=>{var u;const c=((u=i.target.files)==null?void 0:u[0])||null;Ty(c)}},vk),r.jsx("input",{type:"text",placeholder:"Optional label",value:_y,onChange:i=>Ey(i.target.value)}),r.jsx("button",{className:"btn btn-primary btn-compact",onClick:_k,disabled:qc||!Gc,children:qc?"Importing":"Import"})]})]}),r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:"Subscribe via URL"}),r.jsx("div",{className:"calendar-import-meta",children:"Add a published ICS link. Auto-refreshes while open."}),r.jsxs("div",{className:"calendar-import-form",children:[r.jsx("input",{type:"url",placeholder:"https://outlook.office.com/calendar/...",value:Qc,onChange:i=>Oy(i.target.value)}),r.jsx("input",{type:"text",placeholder:"Optional label",value:Cy,onChange:i=>Iy(i.target.value)}),r.jsx("button",{className:"btn btn-primary btn-compact",onClick:Ek,disabled:qc||!Qc.trim(),children:qc?"Subscribing":"Subscribe"})]})]}),pk.map(i=>r.jsxs("div",{className:"calendar-import-card",children:[r.jsx("div",{className:"calendar-import-title",children:i.name}),r.jsxs("div",{className:"calendar-import-meta",children:[i.type==="url"?"URL subscription":"File import"," "," ",new Date(i.createdAt).toLocaleDateString()]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Tk(i.id),children:"Remove"})]},i.id))]})]}),vy&&r.jsx("div",{className:"calendar-error",children:vy}),r.jsxs("div",{className:"calendar-layout",children:[r.jsxs("div",{className:"calendar-grid",children:[r.jsx("div",{className:"calendar-weekdays",children:r_.map(i=>r.jsx("span",{children:i},i))}),r.jsx("div",{className:"calendar-days",children:Ct.days.map(i=>{const c=fu(i),u=ex.get(c)||[],f=i.getMonth()===Qi.getMonth(),g=c===fu(new Date),y=c===tx;return r.jsxs("button",{className:`calendar-day${f?"":" muted"}${g?" today":""}${y?" selected":""}`,onClick:()=>lf(i),children:[r.jsx("span",{className:"calendar-day-number",children:i.getDate()}),r.jsxs("span",{className:"calendar-day-events",children:[u.slice(0,3).map((_,C)=>r.jsx("span",{className:`calendar-event-dot ${_.provider}`},`${_.id}-${C}`)),u.length>3&&r.jsxs("span",{className:"calendar-event-more",children:["+",u.length-3]})]})]},c)})})]}),r.jsxs("div",{className:"calendar-agenda",children:[r.jsxs("div",{className:"calendar-agenda-header",children:[r.jsx("div",{className:"calendar-agenda-date",children:of.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),r.jsxs("div",{className:"calendar-agenda-meta",children:[Lf.length," events"]})]}),gk?r.jsx("div",{className:"calendar-loading",children:"Loading events"}):Lf.length===0?r.jsx("div",{className:"calendar-empty",children:"No events scheduled."}):r.jsx("div",{className:"calendar-agenda-list",children:Lf.map(i=>{const c=new Date(i.start),u=new Date(i.end),f=i.allDay?"All day":`${c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}  ${u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;return r.jsxs("div",{className:"calendar-agenda-item",children:[r.jsx("span",{className:`calendar-event-dot ${i.provider}`}),r.jsxs("div",{className:"calendar-agenda-info",children:[r.jsx("div",{className:"calendar-agenda-time",children:f}),r.jsx("div",{className:"calendar-agenda-title",children:i.title||"(No title)"}),i.location&&r.jsx("div",{className:"calendar-agenda-meta",children:i.location})]})]},`${i.provider}-${i.id}`)})})]})]})]}):l==="settings"?r.jsx("div",{className:"settings-panel",children:L?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:__,disabled:Pv,children:Pv?"Saving...":"Save settings"}),$v&&r.jsx("div",{className:"settings-message",children:$v})]}),r.jsxs("div",{className:"settings-grid",children:[r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Profile"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("div",{className:"settings-avatar",children:[L.avatarUrl?r.jsx("img",{src:L.avatarUrl,alt:"Avatar preview"}):r.jsx("div",{className:"settings-avatar-placeholder",children:ha(L.name||(D==null?void 0:D.email)||"U")}),r.jsxs("label",{className:"settings-upload",children:["Upload avatar",r.jsx("input",{type:"file",accept:"image/*",onChange:i=>T_(i.target.files)})]})]}),r.jsxs("label",{children:["Name",r.jsx("input",{type:"text",value:L.name,onChange:i=>Me({...L,name:i.target.value})})]}),r.jsxs("label",{children:["Avatar URL",r.jsx("input",{type:"text",value:L.avatarUrl,onChange:i=>Me({...L,avatarUrl:i.target.value})})]}),r.jsxs("label",{children:["Email",r.jsx("input",{type:"text",value:(D==null?void 0:D.email)||"",readOnly:!0})]}),r.jsxs("label",{children:["Profile visibility",r.jsxs("select",{value:L.profileVisibility,onChange:i=>Me({...L,profileVisibility:i.target.value}),children:[r.jsx("option",{value:"huddle",children:"Visible to huddles"}),r.jsx("option",{value:"private",children:"Private"})]})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Localization"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Timezone",r.jsx("input",{type:"text",value:L.timezone,onChange:i=>Me({...L,timezone:i.target.value})})]}),r.jsxs("label",{children:["Locale",r.jsx("input",{type:"text",value:L.locale,onChange:i=>Me({...L,locale:i.target.value})})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Defaults"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Default huddle",r.jsx("select",{value:L.defaultHuddleId||"",onChange:i=>Me({...L,defaultHuddleId:i.target.value}),children:Ce.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("label",{children:["Default priority",r.jsxs("select",{value:L.defaultPriority,onChange:i=>Me({...L,defaultPriority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("label",{children:["Default status",r.jsxs("select",{value:L.defaultStatus,onChange:i=>Me({...L,defaultStatus:i.target.value}),children:[r.jsx("option",{value:"BACKLOG",children:"Backlog"}),r.jsx("option",{value:"TODO",children:"Todo"}),r.jsx("option",{value:"IN_PROGRESS",children:"Doing"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Notifications"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsx("div",{className:"settings-subtitle",children:"Email"}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.email.assigned,onChange:i=>Me({...L,notifications:{...L.notifications,email:{...L.notifications.email,assigned:i.target.checked}}})}),"Task assigned"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.email.mentions,onChange:i=>Me({...L,notifications:{...L.notifications,email:{...L.notifications.email,mentions:i.target.checked}}})}),"Mentions"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.email.due,onChange:i=>Me({...L,notifications:{...L.notifications,email:{...L.notifications.email,due:i.target.checked}}})}),"Due date reminders"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.email.invites,onChange:i=>Me({...L,notifications:{...L.notifications,email:{...L.notifications.email,invites:i.target.checked}}})}),"Huddle invites"]}),r.jsx("div",{className:"settings-subtitle",children:"In-app"}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.inApp.assigned,onChange:i=>Me({...L,notifications:{...L.notifications,inApp:{...L.notifications.inApp,assigned:i.target.checked}}})}),"Task assigned"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.inApp.mentions,onChange:i=>Me({...L,notifications:{...L.notifications,inApp:{...L.notifications.inApp,mentions:i.target.checked}}})}),"Mentions"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.inApp.due,onChange:i=>Me({...L,notifications:{...L.notifications,inApp:{...L.notifications.inApp,due:i.target.checked}}})}),"Due date reminders"]}),r.jsxs("label",{className:"settings-toggle",children:[r.jsx("input",{type:"checkbox",checked:L.notifications.inApp.invites,onChange:i=>Me({...L,notifications:{...L.notifications,inApp:{...L.notifications.inApp,invites:i.target.checked}}})}),"Huddle invites"]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Working hours"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Start",r.jsx("input",{type:"time",value:L.workingHours.start,onChange:i=>Me({...L,workingHours:{...L.workingHours,start:i.target.value}})})]}),r.jsxs("label",{children:["End",r.jsx("input",{type:"time",value:L.workingHours.end,onChange:i=>Me({...L,workingHours:{...L.workingHours,end:i.target.value}})})]}),r.jsx("div",{className:"settings-subtitle",children:"Days"}),r.jsx("div",{className:"settings-days",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(i=>r.jsxs("label",{className:"settings-day",children:[r.jsx("input",{type:"checkbox",checked:L.workingHours.days.includes(i),onChange:c=>{const u=c.target.checked?L.workingHours.days.concat(i):L.workingHours.days.filter(f=>f!==i);Me({...L,workingHours:{...L.workingHours,days:u}})}}),i]},i))})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Reminders"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsxs("label",{children:["Due soon (hours)",r.jsx("input",{type:"number",min:1,value:L.reminders.dueSoonHours,onChange:i=>Me({...L,reminders:{...L.reminders,dueSoonHours:Number(i.target.value)}})})]}),r.jsxs("label",{children:["Daily summary",r.jsx("input",{type:"time",value:L.reminders.dailySummaryTime,onChange:i=>Me({...L,reminders:{...L.reminders,dailySummaryTime:i.target.value}})})]})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Huddles"})}),r.jsx("div",{className:"settings-card-body ui-card-body",children:r.jsx("div",{className:"template-list",children:Ce.map(i=>{var c,u;return r.jsxs("div",{className:"template-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId}),r.jsxs("div",{className:"member-meta",children:["Role: ",i.role]})]}),((u=i.tenant)==null?void 0:u.name)!=="Personal"&&r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>O_(i.tenantId),children:"Leave"})]},i.id)})})})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Security & Sessions"})}),r.jsxs("div",{className:"settings-card-body ui-card-body",children:[r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:E_,children:"Send password reset email"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Eu,children:"Sign out"})]})]}),r.jsxs("section",{className:"settings-card ui-card",children:[r.jsx("div",{className:"settings-card-header ui-card-header",children:r.jsx("div",{className:"settings-title",children:"Export"})}),r.jsx("div",{className:"settings-card-body ui-card-body",children:r.jsxs("div",{className:"settings-actions",children:[r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:C_,children:"Export JSON"}),r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:I_,children:"Export CSV"})]})})]})]})]}):r.jsx("div",{className:"empty-state",children:"Loading settings..."})}):l==="okr"?i_?r.jsxs("div",{className:"okr-panel",children:[r.jsxs("div",{className:"okr-create ui-card",children:[r.jsx("div",{className:"okr-card-title ui-card-header",children:"Create objective"}),r.jsxs("div",{className:"okr-card-body ui-card-body",children:[r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:Ur.title,onChange:i=>Fr(c=>({...c,title:i.target.value})),placeholder:"Ship a new onboarding"})]}),r.jsxs("label",{children:["Owner",r.jsxs("select",{value:Ur.ownerId,onChange:i=>Fr(c=>({...c,ownerId:i.target.value})),children:[r.jsx("option",{value:"",children:"Unassigned"}),It(j).map(i=>{var c,u;return r.jsx("option",{value:i.userId,children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:Ur.startDate,onChange:i=>Fr(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:Ur.endDate,onChange:i=>Fr(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:Ur.status,onChange:i=>Fr(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{value:Ur.description,onChange:i=>Fr(c=>({...c,description:i.target.value})),placeholder:"Short context for the objective",rows:3})]})]}),r.jsxs("div",{className:"okr-actions",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Hy,children:"Refresh"}),r.jsx("button",{className:"icon-action create",onClick:Ik,"data-tooltip":"Objective erstellen","aria-label":"Objective erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]})]})]}),ry&&r.jsxs("div",{className:"okr-error",children:["Error: ",ry]}),ny?r.jsx("div",{className:"empty-state",children:"Loading OKRs..."}):r.jsxs("div",{className:"okr-list",children:[$c.length===0&&r.jsx("div",{className:"empty-state",children:"No objectives yet."}),$c.map(i=>{const c=i.ownerId?Yt(j,i.ownerId):"Unassigned",u=iy.includes(i.id);return r.jsxs("div",{className:"okr-card ui-card",onClick:()=>Kf(`/okr/objective/${i.id}`),children:[r.jsxs("div",{className:"okr-header ui-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-description",children:i.description}),r.jsxs("div",{className:"okr-meta",children:[r.jsx("span",{children:i.status}),i.ownerId?r.jsx("div",{className:"okr-owner-stack",children:ut(j||"",[i.ownerId])}):r.jsxs("span",{className:"okr-owner-badge",children:["Owner: ",c]}),i.startDate&&r.jsx("span",{children:new Date(i.startDate).toLocaleDateString()}),i.endDate&&r.jsx("span",{children:new Date(i.endDate).toLocaleDateString()})]})]}),r.jsxs("div",{className:"okr-progress",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-label",children:[Math.round(i.progress),"%"]})]}),r.jsx("button",{className:`okr-chevron ${u?"expanded":""}`,type:"button",onClick:f=>{f.stopPropagation(),ay(g=>g.includes(i.id)?g.filter(y=>y!==i.id):[...g,i.id])},"aria-expanded":u,"aria-label":u?"Hide key results":"Show key results",children:r.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"4 8 10 14 16 8"})})})]}),u&&r.jsx("div",{className:"okr-card-body ui-card-body",children:r.jsx("div",{className:"okr-keyresults-expanded",children:i.keyResults.length===0?r.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(f=>r.jsx("div",{className:"okr-kr-expanded",children:r.jsxs("div",{className:"okr-kr-expanded-header",children:[r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:f.title}),f.description&&r.jsx("div",{className:"okr-kr-description",children:f.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(f.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(f.progress),"%"]})]})]}),r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(f.updatedAt||f.createdAt).toLocaleDateString()]})]})},f.id))})})]},i.id)})]})]}):r.jsxs("div",{className:"okr-shell",children:[Wi&&r.jsxs("div",{className:"okr-notice",children:[r.jsx("div",{className:"okr-notice-title",children:Wi.code==="permission"?"Blocked by permission":Wi.code==="policy"?"Blocked by policy":"Request blocked"}),r.jsx("div",{className:"okr-notice-text",children:Wi.safeReason}),Wi.correlationId&&r.jsxs("div",{className:"okr-notice-meta",children:["Ref: ",Wi.correlationId]})]}),ny&&r.jsx("div",{className:"okr-loading",children:"Syncing OKRs"}),nr==="objective"&&re&&r.jsxs("div",{className:"okr-focus",children:[r.jsxs("div",{className:"okr-focus-main",children:[r.jsxs("div",{className:"okr-focus-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-focus-title",children:re.title}),r.jsxs("div",{className:"okr-focus-meta",children:[r.jsx("span",{children:re.status}),r.jsxs("span",{className:"okr-owner-inline",children:[r.jsx("span",{className:"okr-owner-label",children:"Owner"}),re.ownerId?ut(j||"",[re.ownerId]):r.jsx("span",{className:"okr-owner-empty",children:""})]}),re.startDate&&r.jsx("span",{children:new Date(re.startDate).toLocaleDateString()})," ",re.endDate&&r.jsx("span",{children:new Date(re.endDate).toLocaleDateString()})]}),re.description&&r.jsx("div",{className:"okr-focus-description",children:re.description})]}),r.jsx("div",{className:"okr-focus-actions",children:(re.ownerId===(D==null?void 0:D.id)||Su)&&r.jsx("button",{className:"icon-action settings",onClick:()=>Jk(re),"data-tooltip":"Einstellungen zum Objective","aria-label":"Einstellungen zum Objective",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),r.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})})]}),r.jsxs("div",{className:"okr-focus-progress",children:[r.jsx("div",{className:"okr-progress-label",children:"Progress"}),r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${re.progress}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[re.progress,"% of ",re.keyResults.length," key results"]})]})]}),r.jsx("div",{className:"okr-focus-keyresults",children:r.jsxs("div",{className:"okr-focus-section",children:[r.jsx("div",{className:"okr-section-title",children:"Key results"}),r.jsxs("div",{className:"okr-section-toolbar",children:[r.jsx("div",{className:"filter-bar",children:r.jsxs("div",{className:"view-switch okr-view-switch okr-view-switch-three",role:"tablist","aria-label":"Key results view switcher",style:{"--active-index":ts==="list"?0:ts==="cards"?1:2,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${ts==="list"?"active":""}`,onClick:()=>Jh("list"),role:"tab","aria-selected":ts==="list",children:"Liste"}),r.jsx("button",{className:`view-pill ${ts==="cards"?"active":""}`,onClick:()=>Jh("cards"),role:"tab","aria-selected":ts==="cards",children:"Cards"}),r.jsx("button",{className:`view-pill ${ts==="table"?"active":""}`,onClick:()=>Jh("table"),role:"tab","aria-selected":ts==="table",children:"Table"})]})}),!re.readOnly&&r.jsx("button",{className:"icon-action create",onClick:()=>Zk(re.id),"data-tooltip":"Neuen Key result hinzufgen","aria-label":"Neuen Key result hinzufgen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","stroke-width":"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),ts==="table"?r.jsx("div",{className:"task-table-wrap okr-kr-table-wrap",children:r.jsxs("table",{className:"task-table okr-kr-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Key result"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Progress"}),r.jsx("th",{children:"Members"}),r.jsx("th",{children:"Updated"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:re.keyResults.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"okr-empty",children:"No key results yet."})}):re.keyResults.map(i=>r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsx("div",{className:"okr-kr-table-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-kr-table-desc",children:i.description})]}),r.jsx("td",{children:Rf===i.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>_s(null),"aria-haspopup":"listbox","aria-expanded":"true",children:Tt(i.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>r.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{ia(i.id,re.id,{status:c}),_s(null)},role:"option","aria-selected":i.status===c,children:Tt(c)},c))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>_s(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${Tt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${Tt(i.status)})`,children:Tt(i.status)})}),r.jsx("td",{children:r.jsxs("div",{className:"okr-kr-table-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),Yy===i.id?r.jsx("input",{type:"number",className:"okr-progress-input",value:Af,min:0,max:100,onChange:c=>Df(c.target.value),onBlur:()=>du(i,re.id),onKeyDown:c=>{c.key==="Enter"&&du(i,re.id),c.key==="Escape"&&rl(null)},autoFocus:!0}):r.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>Zy(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})}),r.jsx("td",{children:i.assignees&&i.assignees.length>0?r.jsx("div",{className:"okr-kr-assignees",children:ut(j||"",i.assignees)}):r.jsx("span",{className:"okr-empty",children:""})}),r.jsx("td",{className:"okr-kr-date",children:new Date(i.lastUpdatedAt).toLocaleDateString()}),r.jsx("td",{children:r.jsx("button",{className:"icon-action settings",onClick:()=>Of(i,re.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})})]},i.id))})]})}):r.jsxs("div",{className:`okr-kr-list ${ts==="cards"?"okr-kr-cards":""}`,children:[re.keyResults.length===0&&r.jsx("div",{className:"okr-empty",children:"No key results yet."}),re.keyResults.map(i=>r.jsxs("div",{className:"okr-kr-card ui-card",children:[r.jsx("div",{className:"okr-kr-card-header ui-card-header",children:r.jsxs("div",{className:"okr-kr-toprow",children:[r.jsxs("div",{className:"okr-kr-toprow-left",children:[Rf===i.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>_s(null),"aria-haspopup":"listbox","aria-expanded":"true",children:Tt(i.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>r.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{ia(i.id,re.id,{status:c}),_s(null)},role:"option","aria-selected":i.status===c,children:Tt(c)},c))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>_s(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${Tt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${Tt(i.status)})`,children:Tt(i.status)}),i.assignees&&i.assignees.length>0&&r.jsx("div",{className:"okr-kr-assignees",children:ut(j||"",i.assignees)})]}),r.jsxs("div",{className:"okr-kr-toprow-right",children:[r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(i.lastUpdatedAt).toLocaleDateString()]}),r.jsx("button",{className:"icon-action settings",onClick:()=>Of(i,re.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})}),r.jsx("div",{className:"okr-kr-card-body ui-card-body",children:r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:i.title}),i.description&&r.jsx("div",{className:"okr-kr-description",children:i.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),Yy===i.id?r.jsx("input",{type:"number",className:"okr-progress-input",value:Af,min:0,max:100,onChange:c=>Df(c.target.value),onBlur:()=>du(i,re.id),onKeyDown:c=>{c.key==="Enter"&&du(i,re.id),c.key==="Escape"&&rl(null)},autoFocus:!0}):r.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>Zy(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})]})})]},i.id))]})]})})]}),nr==="objective"&&!re&&r.jsx("div",{className:"okr-empty",children:"Select an objective from Pulse to focus."}),nr==="review"&&re&&r.jsxs("div",{className:"okr-review",children:[r.jsxs("div",{className:"okr-review-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"okr-review-title",children:"Strategic review"}),r.jsx("div",{className:"okr-review-subtitle",children:"6-minute guided check-in"})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>nx(re.id),children:"Back to focus"})]}),la.length>0&&r.jsxs("div",{className:"okr-review-steps",children:[r.jsxs("div",{className:"okr-review-step",children:[r.jsx("div",{className:"okr-step-title",children:(lw=la[_o])==null?void 0:lw.title}),r.jsx("div",{className:"okr-step-text",children:(cw=la[_o])==null?void 0:cw.content})]}),r.jsxs("div",{className:"okr-review-nav",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Qh(i=>Math.max(i-1,0)),disabled:_o===0,children:"Back"}),r.jsxs("div",{className:"okr-review-progress",children:["Step ",_o+1," / ",la.length]}),r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>Qh(i=>Math.min(i+1,la.length-1)),disabled:_o===la.length-1,children:"Next"})]})]})]}),nr==="review"&&!re&&r.jsx("div",{className:"okr-empty",children:"Select an objective to start a review."}),nr==="library"&&r.jsxs("div",{className:"okr-pulse",children:[r.jsxs("div",{className:"okr-pulse-toolbar",children:[r.jsx("div",{className:"filter-bar",children:r.jsxs("div",{className:"view-switch okr-view-switch",role:"tablist","aria-label":"Objectives view switcher",style:{"--active-index":qs==="list"?0:1},children:[r.jsx("button",{className:`view-pill ${qs==="list"?"active":""}`,onClick:()=>ly("list"),role:"tab","aria-selected":qs==="list",children:"Liste"}),r.jsx("button",{className:`view-pill ${qs==="cards"?"active":""}`,onClick:()=>ly("cards"),role:"tab","aria-selected":qs==="cards",children:"Cards"})]})}),r.jsx("div",{className:"okr-pulse-actions",children:r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Uc(!0),children:"+ Objective"})})]}),r.jsx("div",{className:"okr-pulse-section okr-pulse-objectives",children:Xt.length===0?r.jsx("div",{className:"okr-empty",children:"No objectives yet."}):r.jsx("div",{className:qs==="cards"?"okr-objective-grid":"task-list",children:Xt.map(i=>{const c=qs==="list"&&iy.includes(i.id),u=i.ownerId?Yt(j,i.ownerId):"Unassigned";return r.jsxs("div",{className:`okr-objective-item ${c?"expanded":""}`,children:[r.jsxs("div",{className:"task-row okr-objective-row",onClick:()=>nx(i.id),children:[r.jsxs("div",{className:"task-row-main",children:[r.jsx("div",{className:"task-row-title",children:r.jsx("span",{className:"okr-objective-title-text",children:i.title})}),i.description&&r.jsx("div",{className:"okr-objective-description",children:i.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(i.progress),"%"]})]}),r.jsxs("div",{className:"task-row-meta",children:[r.jsx("span",{className:"badge task-kind-badge",children:i.status}),r.jsxs("span",{className:"badge task-kind-badge",children:[i.keyResults.length," KRs"]}),i.ownerId?r.jsx("div",{className:"okr-owner-stack",children:ut(j||"",[i.ownerId])}):r.jsxs("span",{className:"badge task-kind-badge",children:["Owner: ",u]})]})]}),qs==="list"&&r.jsx("div",{className:"task-row-side",children:r.jsx("button",{className:`okr-chevron ${c?"expanded":""}`,type:"button",onClick:f=>{f.stopPropagation(),ay(g=>g.includes(i.id)?g.filter(y=>y!==i.id):[...g,i.id])},"aria-expanded":c,"aria-label":c?"Hide key results":"Show key results",children:r.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:r.jsx("polyline",{points:"4 8 10 14 16 8"})})})})]}),c&&r.jsx("div",{className:"okr-kr-inline",children:i.keyResults.length===0?r.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(f=>r.jsx("div",{className:"okr-kr-inline-row",children:r.jsxs("div",{className:"okr-kr-expanded-header okr-kr-detail-header",children:[r.jsxs("div",{className:"okr-kr-toprow",children:[r.jsxs("div",{className:"okr-kr-toprow-left",children:[Rf===f.id?r.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>_s(null),"aria-haspopup":"listbox","aria-expanded":"true",children:Tt(f.status)}),r.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(g=>r.jsx("button",{type:"button",className:`filter-option ${f.status===g?"active":""} filter-option-${g.toLowerCase()}`,onClick:()=>{ia(f.id,i.id,{status:g}),_s(null)},role:"option","aria-selected":f.status===g,children:Tt(g)},g))})]}):r.jsx("button",{type:"button",className:`okr-status-badge status-${f.status.toLowerCase()} tooltip-target`,onClick:()=>_s(f.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${Tt(f.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${Tt(f.status)})`,children:Tt(f.status)}),f.assignees&&f.assignees.length>0&&r.jsx("div",{className:"okr-kr-assignees",children:ut(j||"",f.assignees)})]}),r.jsxs("div",{className:"okr-kr-toprow-right",children:[r.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(f.lastUpdatedAt).toLocaleDateString()]}),r.jsx("button",{className:"icon-action settings",onClick:()=>Of(f,i.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]}),r.jsxs("div",{className:"okr-kr-expanded-main",children:[r.jsx("div",{className:"okr-kr-title",children:f.title}),f.description&&r.jsx("div",{className:"okr-kr-description",children:f.description}),r.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[r.jsx("div",{className:"okr-progress-bar",children:r.jsx("div",{className:"okr-progress-fill",style:{width:`${f.progress}%`}})}),r.jsxs("div",{className:"okr-progress-foot",children:[Math.round(f.progress),"%"]})]})]})]})},f.id))})]},i.id)})})})]}),Zh&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:Ki?"Objective bearbeiten":"Objective erstellen"}),r.jsx("div",{className:"panel-subtitle",children:"Create the objective details."})]}),r.jsx("button",{className:"panel-close",onClick:()=>Uc(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("label",{children:["Objective title",r.jsx("input",{type:"text",value:tt.title,onChange:i=>xt(c=>({...c,title:i.target.value})),placeholder:"Deliver a calmer onboarding experience"})]}),r.jsxs("label",{children:["Description",r.jsx("textarea",{value:tt.description,onChange:i=>xt(c=>({...c,description:i.target.value})),placeholder:"Short context for this objective",rows:3})]}),r.jsxs("label",{children:["Owner",r.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="objective-owner"?null:"objective-owner"),children:tt.ownerId?Yt(j,tt.ownerId):"Unassigned"}),ss==="objective-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${tt.ownerId?"":" active"}`,onClick:()=>{xt(i=>({...i,ownerId:""})),lt(null)},children:"Unassigned"}),It(j).map(i=>{var c,u;return r.jsx("button",{type:"button",className:`member-select-option${tt.ownerId===i.userId?" active":""}`,onClick:()=>{xt(f=>({...f,ownerId:i.userId})),lt(null)},children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Timeline"}),r.jsxs("div",{className:"objective-row",children:[r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:tt.startDate,onChange:i=>xt(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:tt.endDate,onChange:i=>xt(c=>({...c,endDate:i.target.value}))})]})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:tt.status,onChange:i=>xt(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Xy,children:Ki?"Save changes":"Create objective"})})})})]})})]}):l==="scope"?r.jsxs(r.Fragment,{children:[j&&Et==="detail"&&P&&r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":Bt==="board"?1:Bt==="timeline"?2:0,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${Bt==="list"?"active":""}`,onClick:()=>Bh("list"),role:"tab","aria-selected":Bt==="list",children:"List"}),r.jsx("button",{className:`view-pill ${Bt==="board"?"active":""}`,onClick:()=>Bh("board"),role:"tab","aria-selected":Bt==="board",children:"Board"}),r.jsx("button",{className:`view-pill ${Bt==="timeline"?"active":""}`,onClick:()=>Bh("timeline"),role:"tab","aria-selected":Bt==="timeline",children:"Timeline"})]}),r.jsxs("div",{className:"filter-actions",children:[r.jsx("div",{className:"filter-quick",children:[{key:"MINE",label:"My tasks"},{key:"OVERDUE",label:"Overdue"},{key:"WEEK",label:"This week"}].map(i=>r.jsx("button",{type:"button",className:`filter-quick-pill${Ln===i.key?" active":""}`,onClick:()=>hy(c=>c===i.key?"ALL":i.key),children:i.label},i.key))}),Bt==="timeline"&&r.jsxs("div",{className:"filter-dropdown",ref:Wc,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Xi(i=>!i),"aria-haspopup":"listbox","aria-expanded":Qs,children:Mn==="auto"?"Auto range":`${Mn} days`}),Qs&&r.jsx("div",{className:"filter-options",role:"listbox",children:[{value:"auto",label:"Auto range"},{value:14,label:"14 days"},{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days"}].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Mn===i.value?"active":""}`,onClick:()=>{yy(i.value),Xi(!1)},role:"option","aria-selected":Mn===i.value,children:i.label},i.value))})]}),r.jsxs("div",{className:"filter-dropdown",ref:sf,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>mo(i=>!i),"aria-haspopup":"listbox","aria-expanded":Ui,children:Xn==="ALL"?"All priorities":Xn}),Ui&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Xn===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{ak(i),mo(!1)},role:"option","aria-selected":Xn===i,children:i==="ALL"?"All priorities":i},i))})]}),Bt==="list"&&r.jsxs("div",{className:"filter-dropdown",ref:rf,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>go(i=>!i),"aria-haspopup":"listbox","aria-expanded":Fi,children:Yn==="ALL"?"All statuses":Yn}),Fi&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL",V.BACKLOG,V.TODO,V.IN_PROGRESS,V.DONE].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Yn===i?"active":""}`,onClick:()=>{ok(i),go(!1)},role:"option","aria-selected":Yn===i,children:i==="ALL"?"All statuses":i},i))})]}),r.jsxs("div",{className:"filter-dropdown",ref:zc,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>qi(i=>!i),"aria-haspopup":"listbox","aria-expanded":Pn,children:Jt.length>0?`Labels (${Jt.length})`:"All labels"}),Pn&&r.jsxs("div",{className:"filter-options filter-options-multi",role:"listbox",children:[px.length===0&&r.jsx("div",{className:"filter-empty",children:"No labels found"}),px.map(i=>{const c=Jt.includes(i);return r.jsxs("button",{type:"button",className:`filter-option ${c?"active":""}`,onClick:()=>{Do(u=>u.includes(i)?u.filter(f=>f!==i):u.concat(i))},role:"option","aria-selected":c,children:[r.jsx("span",{children:i}),c&&r.jsx("span",{className:"filter-option-check",children:""})]},i)}),Jt.length>0&&r.jsx("button",{type:"button",className:"filter-option filter-option-clear",onClick:()=>Do([]),children:"Clear selection"})]})]}),r.jsxs("label",{className:`filter-checkbox filter-favorites ${Hr?"active":""}`,"data-tooltip":"Nur Favoriten","aria-label":"Nur Favoriten",children:[r.jsx("input",{type:"checkbox",checked:Hr,onChange:i=>uy(i.target.checked)}),r.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),j&&!(Et==="detail"&&P)&&r.jsx("div",{className:"filter-bar",children:r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"Scope filter",style:{"--active-index":$r==="completed"?1:0,"--segment-count":2,alignSelf:"flex-start"},children:[r.jsx("button",{className:`view-pill ${$r==="current"?"active":""}`,onClick:()=>Xv("current"),role:"tab","aria-selected":$r==="current",children:"Aktuell"}),r.jsx("button",{className:`view-pill ${$r==="completed"?"active":""}`,onClick:()=>Xv("completed"),role:"tab","aria-selected":$r==="completed",children:"Beendet"})]})}),r.jsx("div",{className:"dashboard-panel",children:j?Et==="detail"&&P?r.jsx(r.Fragment,{children:Bt==="board"?r.jsx("div",{className:"kanban-board-wrap",children:r.jsx("div",{className:"kanban-board",children:c_.map(i=>r.jsxs("div",{className:"kanban-column",onDragOver:Gy,onDragLeave:qy,onDrop:c=>Jy(c,i.status),children:[r.jsxs("div",{className:"column-header",children:[r.jsx("span",{children:lx(i.status)}),r.jsx("span",{children:i.tasks.length})]}),r.jsx("div",{className:"column-content",children:i.tasks.map(c=>{const u=c.checklist.filter(J=>J.done).length,f=c.checklist.length,g=c.linkedTaskIds.length,y=f>0&&u===f,_=Lx.has(c.id),C=c.sourceType?c.sourceType==="MANUAL":!0,O=hu(c),z=O==="overdue"?"Overdue":O==="due-soon"?"Due soon":null,ie=c.dueDate?new Date(c.dueDate).toLocaleDateString():"",ye=O==="overdue"?" overdue":O==="due-soon"?" due-soon":"",fe=O==="overdue"?" task-card-overdue":O==="due-soon"?" task-card-due-soon":"",U={cursor:C?"grab":"default",userSelect:"none",WebkitUserDrag:C?"element":"auto",pointerEvents:"auto"};return r.jsx("div",{className:`task-card${C?" task-card-draggable":""}${pn===c.id?" dragging":""}${fe}`,style:U,draggable:C&&xu,onDragStart:J=>C&&xu?fp(J,c.id):J.preventDefault(),onDragEnd:pp,onDragOver:J=>Kk(J,i.status,c.id),onDragLeave:Gk,onDrop:J=>qk(J,i.status,c.id),onClick:()=>ap(c),children:r.jsxs("div",{className:"task-card-content",children:[r.jsxs("div",{className:"task-card-topbar",children:[r.jsxs("div",{className:`task-card-due${ye}`,children:[r.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M5 4v16"}),r.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),r.jsx("span",{className:"task-card-due-date",children:ie}),z&&r.jsx("span",{className:"task-card-due-badge",children:z})]}),r.jsx("span",{className:`badge badge-priority-${c.priority.toLowerCase()} tooltip-target`,"data-tooltip":`Priority: ${c.priority}`,children:c.priority})]}),r.jsxs("div",{className:"task-card-header",children:[r.jsxs("div",{className:"task-title-row",children:[_&&r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),c.title]}),r.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${c.isFavorite?" active":""}`,onClick:J=>{J.stopPropagation(),hp(c)},title:c.isFavorite?"Unfavorite":"Favorite","aria-label":c.isFavorite?"Unfavorite task":"Favorite task",children:c.isFavorite?"":""})]}),c.description&&r.jsx("div",{className:"task-card-description",children:ai(c.description)}),r.jsx("hr",{className:"card-divider"}),r.jsxs("div",{className:"task-card-footer",children:[r.jsx("div",{className:"task-card-kinds",children:c.kinds.map(J=>r.jsx("span",{className:"badge task-kind-badge",children:J},J))}),r.jsxs("div",{className:"task-card-people",children:[c.ownerId&&ut(c.tenantId,[c.ownerId]),c.assignees.length>0&&ut(c.tenantId,c.assignees.filter(J=>J!==c.ownerId))]}),r.jsxs("div",{className:"task-card-icons",children:[f>0&&r.jsxs("span",{className:y?"icon-badge checklist-complete":"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),r.jsx("path",{d:"M18 17l2 2 4-4"})]}),u,"/",f]}),c.comments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),c.comments.length]}),g>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),g]}),c.attachments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),c.attachments.length]})]})]})]})},c.id)})})]},i.status))})}):Bt==="timeline"?gx(ju,"No tasks to show on timeline."):r.jsx("div",{className:"task-table-wrap",children:r.jsxs("table",{className:"task-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Title"}),r.jsx("th",{children:"People"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Art"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Due"}),r.jsx("th",{children:"Source"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:ju.map(i=>{const c=hu(i),u=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,f=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",g=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"";return r.jsxs(ad.Fragment,{children:[r.jsxs("tr",{className:`task-table-row${g}`,onClick:()=>ip(i),children:[r.jsx("td",{children:i.title}),r.jsx("td",{children:r.jsxs("div",{className:"task-card-people",children:[i.ownerId&&ut(i.tenantId,[i.ownerId]),i.assignees.length>0&&ut(i.tenantId,i.assignees.filter(y=>y!==i.ownerId))]})}),r.jsx("td",{children:i.status}),r.jsx("td",{children:i.kinds.length>0?i.kinds.join(", "):""}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-priority-${i.priority.toLowerCase()}`,children:i.priority})}),r.jsx("td",{children:r.jsxs("div",{className:`task-table-due${g}`,children:[r.jsx("span",{className:"task-table-due-date",children:f}),u&&r.jsx("span",{className:"task-table-due-badge",children:u})]})}),r.jsx("td",{children:i.sourceIndicator||""}),r.jsx("td",{children:r.jsxs("div",{className:"table-actions",children:[i.sourceType==="MANUAL"&&!wu&&r.jsx("button",{className:"icon-action settings",onClick:y=>{y.stopPropagation(),op(i)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),r.jsx("button",{className:"icon-action",onClick:y=>{y.stopPropagation(),p(_=>_===i.id?null:i.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),h===i.id&&r.jsx("tr",{className:"task-table-details",children:r.jsx("td",{colSpan:8,children:r.jsxs("div",{className:"table-details-grid",children:[r.jsxs("div",{className:"table-details-span",children:[r.jsx("div",{className:"table-details-label",children:"Description"}),r.jsx("div",{className:"table-details-text",children:i.description?ai(i.description):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Members"}),r.jsx("div",{className:"table-details-text",children:i.assignees.length>0?i.assignees.map(y=>Yt(i.tenantId,y)).join(", "):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Checklist"}),r.jsx("div",{className:"table-details-text",children:i.checklist.length>0?`${i.checklist.filter(y=>y.done).length}/${i.checklist.length} done`:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Linked tasks"}),r.jsx("div",{className:"table-details-text",children:i.linkedTaskIds.length>0?i.linkedTaskIds.length:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Attachments"}),r.jsx("div",{className:"table-details-text",children:i.attachments.length>0?i.attachments.length:""})]})]})})})]},i.id)})})]})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:r.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[r.jsx("div",{className:"inbox-header-left",children:r.jsx("span",{children:"Scope Windows"})}),r.jsx("div",{className:"inbox-header-actions",children:r.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Scope erstellen","aria-label":"Scope erstellen",onClick:()=>vo(!0),children:r.jsx("span",{className:"btn-save-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:r.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:r.jsxs("div",{className:"inbox-layout scope-inbox-layout",children:[r.jsx("div",{className:"inbox-sidebar scope-inbox-sidebar",children:da.length===0?r.jsx("div",{className:"scope-empty",children:"Noch keine Scope Windows."}):da.map(i=>{var c;return r.jsxs("button",{type:"button",className:`inbox-sidebar-item scope-sidebar-item${gn===i.id?" active":""}`,onClick:()=>{Gs(i.id),$t("list"),vn(null),ls(null,"replace")},children:[r.jsx("div",{className:"inbox-avatar",children:ha(i.name)}),r.jsxs("div",{className:"inbox-sidebar-body",children:[r.jsx("div",{className:"inbox-sidebar-title",children:i.name}),r.jsxs("div",{className:"inbox-sidebar-meta",children:[r.jsx("div",{className:"inbox-sidebar-meta-date",children:ni(i)}),i.initiativeId&&ti.get(i.initiativeId)&&r.jsxs("div",{className:"inbox-sidebar-meta-date",children:["Initiative: ",(c=ti.get(i.initiativeId))==null?void 0:c.name]}),r.jsxs("div",{className:"inbox-sidebar-meta-date",children:[i.taskIds.length," tasks"]})]})]})]},i.id)})}),r.jsx("div",{className:"inbox-detail scope-detail",children:P?r.jsxs("div",{className:"scope-preview-card ui-card",children:[r.jsxs("div",{className:"ui-card-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"scope-preview-title",children:P.name}),r.jsxs("div",{className:"scope-preview-meta",children:[ni(P),"  ",P.taskIds.length," tasks"]}),P.initiativeId&&((uw=ti.get(P.initiativeId))==null?void 0:uw.status)==="ACTIVE"&&r.jsx("div",{className:"scope-preview-meta",children:r.jsxs("span",{className:"dashboard-badge",children:["Initiative: ",(dw=ti.get(P.initiativeId))==null?void 0:dw.name]})})]}),r.jsx("button",{type:"button",className:"icon-action scope-toggle inbox-action tooltip-target",onClick:()=>cu(P.id),"data-tooltip":"Zu den Scope-Details","aria-label":"Zu den Scope-Details",children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M9 6l6 6-6 6"})})})})]}),r.jsx("div",{className:"ui-card-body scope-mini-board-wrapper",children:r.jsx("div",{className:"scope-mini-board",children:(()=>{const i=P.taskIds.map(C=>os.get(C)).filter(C=>!!C),c=i.filter(C=>C.status===V.BACKLOG),u=i.filter(C=>C.status===V.TODO),f=i.filter(C=>C.status===V.IN_PROGRESS),g=i.filter(C=>C.status===V.DONE);return[{key:"todo",label:"ToDos",tasks:[...c,...u],status:V.TODO},{key:"doing",label:"Doing",tasks:f,status:V.IN_PROGRESS},{key:"done",label:"Done",tasks:g,status:V.DONE}].map(C=>r.jsxs("div",{className:"scope-mini-column",children:[r.jsx("div",{className:"scope-mini-column-title",children:C.label}),r.jsx("div",{className:"scope-mini-column-list",onDragOver:Gy,onDragLeave:qy,onDrop:O=>Jy(O,C.status),children:C.tasks.length===0?r.jsx("div",{className:"scope-mini-empty",children:"Keine Tasks"}):C.tasks.map(O=>r.jsxs("div",{className:"scope-mini-card",draggable:!0,onDragStart:z=>fp(z,O.id),onDragEnd:pp,children:[r.jsx("div",{className:"scope-mini-card-title",children:O.title}),r.jsxs("div",{className:"scope-mini-card-meta",children:[O.priority,O.dueDate?`  ${new Date(O.dueDate).toLocaleDateString()}`:""]})]},O.id))})]},C.key))})()})})]}):r.jsxs("div",{className:"scope-empty scope-empty-cta",children:[r.jsx("div",{className:"scope-empty-title",children:"Scope auswhlen"}),r.jsx("div",{className:"scope-empty-text",children:"Whle links ein Scope Window aus."})]})})]})})]})}):r.jsx("div",{className:"empty-state",children:"Select a huddle to build a scope window."})})]}):l==="dashboard"?r.jsx("div",{className:"dashboard-panel",children:j?r.jsxs("div",{className:"dashboard-visuals",children:[r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:"Scope"}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:_e.length===0?r.jsx("div",{className:"dashboard-empty",children:"No scope windows yet."}):_e.slice(0,5).map(i=>r.jsxs("button",{className:"dashboard-item",onClick:()=>cu(i.id),children:[r.jsx("div",{className:"dashboard-item-title",children:i.name}),r.jsxs("div",{className:"dashboard-item-meta",children:[ni(i),"  ",i.taskIds.length," tasks"]})]},i.id))})]}),r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:"My Focus"}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:Nu.length===0?r.jsx("div",{className:"dashboard-empty",children:"Nothing due today."}):Nu.slice(0,6).map(i=>r.jsxs("button",{className:"dashboard-item",onClick:()=>ap(i),children:[r.jsx("div",{className:"dashboard-item-title",children:i.title}),r.jsxs("div",{className:"dashboard-item-meta",children:[i.dueDate?new Date(i.dueDate).toLocaleDateString():"No due date",r.jsxs("span",{children:[" ",Ff(i.boardId)]})]})]},i.id))})]})]}):r.jsx("div",{className:"empty-state",children:"Select a huddle to see Home."})}):l==="inbox"?r.jsx("div",{className:"dashboard-panel",children:j?r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:r.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[(()=>{const i=B[A];return r.jsxs("div",{className:"inbox-header-left",children:[r.jsx("span",{children:i.label}),r.jsx("button",{type:"button",className:"info-icon tooltip-target","data-tooltip":i.tooltip,"aria-label":i.tooltip,children:"?"})]})})(),r.jsx("div",{className:"inbox-header-actions",children:r.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":t("inbox.tooltip.create","Erstellen"),"aria-label":t("inbox.tooltip.create","Erstellen"),onClick:()=>W(!0),children:r.jsx("span",{className:"btn-save-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:r.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:(()=>{const i=Qf.filter(u=>{const f=R[u.id]||"eingang";return A==="eingang"?f==="eingang":A==="spaeter"?f==="spaeter":A==="bearbeitet"?f==="bearbeitet":f==="archiv"}),c=i.find(u=>u.id===b)||i[0]||null;return r.jsxs("div",{className:"inbox-layout",children:[r.jsxs("div",{className:"inbox-sidebar",children:[i.length===0&&r.jsxs("div",{className:"dashboard-empty inbox-empty",children:[r.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),r.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]}),i.map(u=>{const f=u.kind||t("inbox.incoming","Incoming"),g=u.createdAt?new Date(u.createdAt).toLocaleDateString():"Just now",y=E===u.id,_=u.creatorLabel||f||u.title,C=ri(j,u.creatorId),O=C.avatarUrl||"",z=ha(C.label||_);return r.jsxs("button",{type:"button",className:`inbox-sidebar-item${(c==null?void 0:c.id)===u.id?" active":""}${y?" moved":""}`,onClick:()=>N(u.id),children:[r.jsx("div",{className:`inbox-avatar${O?" has-image":""} tooltip-target`,"aria-label":C.label||_,"data-tooltip":C.label||_,children:O?r.jsx("img",{src:O,alt:C.label||_}):z}),r.jsxs("div",{className:"inbox-sidebar-body",children:[r.jsx("div",{className:"inbox-sidebar-title",children:u.title}),r.jsxs("div",{className:"inbox-sidebar-meta",children:[r.jsx("span",{children:g}),u.priority&&r.jsx("span",{className:`badge badge-priority-${String(u.priority).toLowerCase()}`,children:u.priority})]})]})]},u.id)})]}),c?r.jsx("div",{className:"inbox-detail",children:r.jsxs("div",{className:"inbox-detail-body",children:[r.jsxs("div",{className:"inbox-detail-topbar",children:[r.jsxs("div",{className:"inbox-detail-user",children:[(()=>{const u=ri(j,c.creatorId),f=u.avatarUrl||"",g=u.label||c.creatorLabel||c.title;return r.jsx("div",{className:`inbox-avatar${f?" has-image":""} tooltip-target`,"aria-label":g,"data-tooltip":g,children:f?r.jsx("img",{src:f,alt:g}):ha(g)})})(),c.priority&&r.jsx("span",{className:`badge badge-priority-${String(c.priority).toLowerCase()}`,children:c.priority})]}),r.jsxs("div",{className:"inbox-detail-topbar-actions",children:[A==="eingang"&&r.jsxs("div",{className:"filter-dropdown inbox-scope-dropdown",ref:Or,children:[r.jsx("button",{type:"button",className:"icon-action scope-toggle inbox-action tooltip-target","data-tooltip":t("inbox.action.addScopeTooltip","Zum Scope hinzufgen"),"aria-label":t("inbox.action.addScope","Zum Scope hinzufgen"),onClick:()=>{k(u=>u===c.id?null:c.id)},children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),r.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),r.jsx("path",{d:"M12 4v3"}),r.jsx("path",{d:"M12 17v3"}),r.jsx("path",{d:"M4 12h3"}),r.jsx("path",{d:"M17 12h3"})]})})}),x===c.id&&r.jsx("div",{className:"filter-options",role:"listbox",children:_e.length===0?r.jsx("div",{className:"filter-empty",children:t("scope.empty.title","No scopes yet")}):_e.map(u=>r.jsxs("button",{type:"button",className:"filter-option",onClick:()=>HN(c,u.id),children:[r.jsx("span",{children:u.name}),r.jsx("span",{className:"filter-option-meta",children:ni(u)})]},u.id))})]}),A==="eingang"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.laterTooltip","Later"),"aria-label":t("inbox.action.later","Later"),onClick:()=>ro(c.id,"spaeter"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("circle",{cx:"12",cy:"12",r:"7"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})}),(A==="eingang"||A==="spaeter"||A==="bearbeitet")&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.archiveTooltip","Archive"),"aria-label":t("inbox.action.archive","Archive"),onClick:()=>ro(c.id,"archiv"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 7h16"}),r.jsx("path",{d:"M6 7v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),r.jsx("path",{d:"M9 11h6"})]})})}),A==="archiv"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.backTooltip","Back to inbox"),"aria-label":t("inbox.action.backToInbox","Zum Eingang"),onClick:()=>{ro(c.id,"eingang"),N(null)},children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M14 7l-5 5 5 5"}),r.jsx("path",{d:"M19 12H9"})]})})}),A==="spaeter"&&r.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.moveToInboxTooltip","Zurck in den Eingang"),"aria-label":t("inbox.action.moveToInbox","Zur Eingang"),onClick:()=>ro(c.id,"eingang"),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M9 12h8"}),r.jsx("path",{d:"M12 7l-5 5 5 5"})]})})}),(A==="eingang"||A==="spaeter")&&c&&r.jsx("button",{className:"icon-action inbox-action tooltip-target inbox-action-edit","data-tooltip":"Bearbeiten","aria-label":"Bearbeiten",onClick:()=>zN(c),children:r.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 20h4l10-10-4-4L4 16v4z"}),r.jsx("path",{d:"M14 6l4 4"})]})})})]})]}),r.jsxs("div",{className:"inbox-detail-meta",role:"list",children:[c.source&&r.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[r.jsxs("strong",{children:[t("inbox.field.source","Source"),":"]})," ",s(c.source)]}),c.suggestedAction&&r.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[r.jsxs("strong",{children:[t("inbox.field.action","Suggested action"),":"]})," ",a(c.suggestedAction)]})]}),r.jsxs("div",{className:"inbox-detail-header",children:[r.jsx("h3",{children:c.title}),r.jsx("span",{className:"inbox-detail-date",children:new Date(c.createdAt).toLocaleDateString()})]}),c.description&&r.jsx("p",{className:"inbox-detail-description",children:c.description})]})}):r.jsxs("div",{className:"inbox-empty-detail",children:[r.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),r.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]})]})})()})]}):r.jsx("div",{className:"empty-state",children:"Select a huddle to see Inbox."})}):l==="initiatives"?r.jsxs(r.Fragment,{children:[j&&Zn!=="detail"&&r.jsx("div",{className:"filter-bar",children:r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"Initiative filter",style:{"--active-index":bs==="CLOSED"?1:0,"--segment-count":2,alignSelf:"flex-start"},children:[r.jsx("button",{className:`view-pill ${bs==="ACTIVE"?"active":""}`,onClick:()=>bo("ACTIVE"),role:"tab","aria-selected":bs==="ACTIVE",children:"Aktuell"}),r.jsx("button",{className:`view-pill ${bs==="CLOSED"?"active":""}`,onClick:()=>bo("CLOSED"),role:"tab","aria-selected":bs==="CLOSED",children:"Beendet"})]})}),r.jsx("div",{className:"dashboard-panel initiatives-shell",children:j?Zn==="detail"&&Se?r.jsx("div",{className:"initiative-detail",children:r.jsx("div",{className:"scope-detail-body",children:r.jsxs("div",{className:"initiative-detail-grid",children:[r.jsxs("div",{className:"scope-section",children:[r.jsx("div",{className:"scope-section-title",children:"Goal / Outcome"}),r.jsx("div",{className:"scope-section-content",children:r.jsxs("div",{className:"table-details-grid",children:[r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Ziel"}),r.jsx("div",{className:"table-details-text",children:Se.goal||"Kein Ziel definiert."})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Description"}),r.jsx("div",{className:"table-details-text",children:Se.description||"No description yet."})]})]})})]}),r.jsxs("div",{className:"scope-section",children:[r.jsxs("div",{className:"scope-section-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},children:[r.jsx("span",{children:"Scopes in this initiative"}),r.jsxs("div",{className:"filter-dropdown",children:[r.jsx("button",{type:"button",className:"icon-action create",onClick:()=>Dc(i=>i===Se.id?"":Se.id),"aria-haspopup":"listbox","aria-expanded":Yv===Se.id,"data-tooltip":"Scope hinzufgen","aria-label":"Scope hinzufgen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})}),Yv===Se.id&&r.jsxs("div",{className:"filter-options",role:"listbox",children:[r.jsxs("button",{type:"button",className:"filter-option",onClick:()=>{Uh(Se.id),vo(!0),Dc("")},children:[r.jsx("span",{children:"Scope erstellen"}),r.jsx("span",{className:"filter-option-meta",children:"Neuen Scope anlegen"})]}),r.jsx("div",{className:"filter-option filter-option-clear","aria-hidden":"true",children:"Vorhandene Scopes"}),dx.length===0?r.jsx("div",{className:"filter-empty",children:"Keine Scopes zum Hinzufgen."}):dx.map(i=>r.jsxs("button",{type:"button",className:"filter-option",onClick:()=>{If(i.id,Se.id),Dc("")},children:[r.jsx("span",{children:i.name}),r.jsx("span",{className:"filter-option-meta",children:ni(i)})]},i.id))]})]})]}),r.jsx("div",{className:"scope-section-content",children:r.jsx("div",{className:"scope-section-list",children:ux.length===0?r.jsx("div",{className:"scope-empty",children:"No scopes linked yet."}):ux.map(i=>r.jsxs("button",{type:"button",className:"scope-section-item",onClick:()=>cu(i.id),children:[r.jsxs("div",{className:"scope-section-main",children:[r.jsx("div",{className:"scope-section-item-title",children:i.name}),r.jsxs("div",{className:"scope-section-item-meta",children:[r.jsx("span",{className:"scope-section-chip",children:ni(i)}),r.jsxs("span",{className:"scope-section-chip",children:[i.taskIds.length," tasks"]})]})]}),r.jsx("span",{className:`scope-section-status${i.completionStatus?" done":""}`,children:i.completionStatus?"Completed":"Active"})]},i.id))})})]}),r.jsxs("div",{className:"scope-section",children:[r.jsx("div",{className:"scope-section-title",children:"Progress"}),r.jsx("div",{className:"scope-section-content",children:r.jsxs("div",{className:"initiative-progress",children:[r.jsxs("div",{className:"initiative-progress-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"initiative-progress-label",children:"Task completion"}),r.jsxs("div",{className:"initiative-progress-value",children:[(he==null?void 0:he.doneTasks)??0," / ",(he==null?void 0:he.totalTasks)??0," done"]})]}),r.jsxs("div",{className:"initiative-progress-percent",children:[(he==null?void 0:he.taskCompletion)??0,"%"]})]}),r.jsx("div",{className:"initiative-progress-bar",children:r.jsx("span",{className:"initiative-progress-fill",style:{width:`${(he==null?void 0:he.taskCompletion)??0}%`}})}),r.jsxs("div",{className:"initiative-progress-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"initiative-progress-label",children:"Scope completion"}),r.jsxs("div",{className:"initiative-progress-value",children:[(he==null?void 0:he.closedScopes)??0," / ",(he==null?void 0:he.totalScopes)??0," closed"]})]}),r.jsxs("div",{className:"initiative-progress-percent",children:[(he==null?void 0:he.scopeCompletion)??0,"%"]})]}),r.jsx("div",{className:"initiative-progress-bar",children:r.jsx("span",{className:"initiative-progress-fill",style:{width:`${(he==null?void 0:he.scopeCompletion)??0}%`}})}),r.jsxs("div",{className:"initiative-progress-stats",children:[r.jsxs("div",{className:"initiative-progress-stat",children:[r.jsx("span",{children:"Total scopes"}),r.jsx("strong",{children:(he==null?void 0:he.totalScopes)??0})]}),r.jsxs("div",{className:"initiative-progress-stat",children:[r.jsx("span",{children:"Active scopes"}),r.jsx("strong",{children:(he==null?void 0:he.activeScopes)??0})]}),r.jsxs("div",{className:"initiative-progress-stat",children:[r.jsx("span",{children:"Open tasks"}),r.jsx("strong",{children:(he==null?void 0:he.openTasks)??0})]}),r.jsxs("div",{className:"initiative-progress-stat",children:[r.jsx("span",{children:"Done tasks"}),r.jsx("strong",{children:(he==null?void 0:he.doneTasks)??0})]})]})]})})]})]})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[r.jsx("div",{className:"dashboard-card-title ui-card-header",children:r.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[r.jsx("div",{className:"inbox-header-left",children:r.jsx("span",{children:"Initiatives"})}),r.jsx("div",{className:"inbox-header-actions",children:r.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Initiative erstellen","aria-label":"Initiative erstellen",onClick:()=>zi(!0),children:r.jsx("span",{className:"btn-save-icon",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:r.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),r.jsx("div",{className:"dashboard-card-content ui-card-body",children:ua.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"inbox-empty-title",children:"Keine Initiativen"}),r.jsx("div",{className:"inbox-empty-text",children:"Erstelle deine erste Initiative, um deine Scopes zu bndeln."})]}):r.jsx("div",{className:"scope-window-grid",children:ua.map(i=>{const c=Hf.get(i.id);return r.jsx("button",{type:"button",className:`scope-window-card${Ze===i.id?" active":""}`,onClick:()=>Cf(i.id),children:r.jsxs("div",{className:"ui-card-body scope-window-body",children:[r.jsxs("div",{className:"scope-window-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"scope-window-title",children:i.name}),r.jsx("div",{className:`scope-window-meta scope-window-meta-${i.status.toLowerCase()}`,children:i.status==="ACTIVE"?"Active":"Closed"})]}),r.jsxs("div",{className:"scope-detail-actions",children:[r.jsxs("span",{className:"dashboard-badge",children:[(c==null?void 0:c.totalScopes)??0," scopes"]}),r.jsxs("span",{className:"dashboard-badge",children:[(c==null?void 0:c.totalTasks)??0," tasks"]})]})]}),r.jsxs("div",{className:"scope-card-footer",children:[r.jsx("div",{className:"task-card-people",children:i.ownerId?ut(j,[i.ownerId]):null}),i.goal&&r.jsxs("span",{className:"scope-task-origin",children:[r.jsx("span",{children:"Ziel:"})," ",i.goal]})]}),r.jsxs("div",{className:"scope-window-health",children:[r.jsxs("div",{className:"scope-window-progress",children:[r.jsx("div",{className:"scope-window-progress-bar",children:r.jsx("span",{style:{width:`${(c==null?void 0:c.taskCompletion)??0}%`}})}),r.jsxs("div",{className:"scope-window-progress-label",children:[(c==null?void 0:c.taskCompletion)??0,"% tasks done"]})]}),r.jsxs("div",{className:"scope-window-health-row",children:[r.jsx("span",{children:"Open"}),r.jsx("span",{children:(c==null?void 0:c.openTasks)??0})]}),r.jsxs("div",{className:"scope-window-health-row",children:[r.jsx("span",{children:"Closed scopes"}),r.jsx("span",{children:(c==null?void 0:c.closedScopes)??0})]})]})]})},i.id)})})})]})}):r.jsx("div",{className:"empty-state",children:"Select a huddle to manage initiatives."})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"filter-bar",children:[r.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":l==="kanban"?1:l==="timeline"?2:0,"--segment-count":3},children:[r.jsx("button",{className:`view-pill ${l==="table"?"active":""}`,onClick:()=>d("table"),role:"tab","aria-selected":l==="table",children:"List"}),r.jsx("button",{className:`view-pill ${l==="kanban"?"active":""}`,onClick:()=>d("kanban"),role:"tab","aria-selected":l==="kanban",children:"Board"}),r.jsx("button",{className:`view-pill ${l==="timeline"?"active":""}`,onClick:()=>d("timeline"),role:"tab","aria-selected":l==="timeline",children:"Timeline"})]}),r.jsxs("div",{className:"filter-actions",children:[r.jsx("div",{className:"filter-quick",children:[{key:"MINE",label:"My tasks"},{key:"OVERDUE",label:"Overdue"},{key:"WEEK",label:"This week"}].map(i=>r.jsx("button",{type:"button",className:`filter-quick-pill${Ln===i.key?" active":""}`,onClick:()=>hy(c=>c===i.key?"ALL":i.key),children:i.label},i.key))}),l==="timeline"&&r.jsxs("div",{className:"filter-dropdown",ref:Wc,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Xi(i=>!i),"aria-haspopup":"listbox","aria-expanded":Qs,children:Mn==="auto"?"Auto range":`${Mn} days`}),Qs&&r.jsx("div",{className:"filter-options",role:"listbox",children:[{value:"auto",label:"Auto range"},{value:14,label:"14 days"},{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days"}].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Mn===i.value?"active":""}`,onClick:()=>{yy(i.value),Xi(!1)},role:"option","aria-selected":Mn===i.value,children:i.label},i.value))})]}),r.jsxs("div",{className:"filter-dropdown",ref:tf,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Vc(i=>!i),"aria-haspopup":"listbox","aria-expanded":Ji,children:Gi==="ALL"?"All priorities":Gi}),Ji&&r.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>r.jsx("button",{type:"button",className:`filter-option ${Gi===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{fk(i),Vc(!1)},role:"option","aria-selected":Gi===i,children:i==="ALL"?"All priorities":i},i))})]}),l==="table"&&r.jsxs("div",{className:"filter-dropdown",ref:nf,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>Ro(i=>!i),"aria-haspopup":"listbox","aria-expanded":Js,children:Ns==="ALL"?"All statuses":Ns}),Js&&r.jsx("div",{className:"filter-options",role:"listbox",children:Yf.map(i=>r.jsx("button",{type:"button",className:`filter-option ${Ns===i?"active":""}`,onClick:()=>{dy(i),Ro(!1)},role:"option","aria-selected":Ns===i,children:i==="ALL"?"All statuses":i},i))})]}),r.jsxs("div",{className:"filter-dropdown",ref:zc,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>qi(i=>!i),"aria-haspopup":"listbox","aria-expanded":Pn,children:Jt.length>0?`Labels (${Jt.length})`:"All labels"}),Pn&&r.jsxs("div",{className:"filter-options filter-options-multi",role:"listbox",children:[Iu.length===0&&r.jsx("div",{className:"filter-empty",children:"No labels found"}),Iu.map(i=>{const c=Jt.includes(i);return r.jsxs("button",{type:"button",className:`filter-option ${c?"active":""}`,onClick:()=>{Do(u=>u.includes(i)?u.filter(f=>f!==i):u.concat(i))},role:"option","aria-selected":c,children:[r.jsx("span",{children:i}),c&&r.jsx("span",{className:"filter-option-check",children:""})]},i)}),Jt.length>0&&r.jsx("button",{type:"button",className:"filter-option filter-option-clear",onClick:()=>Do([]),children:"Clear selection"})]})]}),r.jsxs("label",{className:`filter-checkbox filter-favorites ${Hr?"active":""}`,"data-tooltip":"Nur Favoriten","aria-label":"Nur Favoriten",children:[r.jsx("input",{type:"checkbox",checked:Hr,onChange:i=>uy(i.target.checked)}),r.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),Fy&&r.jsxs("div",{style:{color:"#f87171",marginBottom:"1rem"},children:["Error: ",Fy]}),l==="kanban"?r.jsxs("div",{className:"kanban-board-wrap",children:[j&&Zv&&r.jsxs("div",{className:`scope-drop-row${zv?" dragging":""}`,children:[r.jsxs("div",{className:"scope-drop-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"scope-drop-title",children:"Scope Window"}),r.jsx("div",{className:"scope-drop-subtitle",children:"Drag tasks here to add them to a scope window."})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>{d("scope"),$t("list"),vn(null),ls(null,"replace")},children:"Open"})]}),_e.length===0?r.jsx("div",{className:"scope-drop-empty",children:"No scope windows yet."}):r.jsx("div",{className:"scope-drop-list",children:_e.map(i=>r.jsxs("div",{className:`scope-drop-item${ik===i.id?" over":""}`,onDragOver:c=>Hk(c,i.id),onDragLeave:c=>zk(c,i.id),onDrop:c=>Vk(c,i.id),children:[r.jsx("div",{className:"scope-drop-name",children:i.name}),r.jsxs("div",{className:"scope-drop-meta",children:[i.taskIds.length," tasks"]})]},i.id))})]}),r.jsx("div",{className:"kanban-board",children:Rx.map(i=>{const c=i.tasks.filter(Ax),u=Ou(j,le,i.status),f=Bv[u]||[],g=new Map(c.map(O=>[O.id,O])),y=f.map(O=>g.get(O)).filter(Boolean),_=c.filter(O=>!f.includes(O.id)),C=y.concat(_);return r.jsxs("div",{className:"kanban-column",onDragOver:W_,onDragLeave:K_,onDrop:O=>G_(O,i.status),children:[r.jsxs("div",{className:"column-header",children:[r.jsx("span",{children:lx(i.status)}),r.jsx("span",{children:C.length})]}),r.jsx("div",{className:"column-content",children:C.map(O=>{const z=O.checklist.filter(Ie=>Ie.done).length,ie=O.checklist.length,ye=O.linkedTaskIds.length,fe=ie>0&&z===ie,U=Lx.has(O.id),J=O.sourceType?O.sourceType==="MANUAL":!0,M=hu(O),q=M==="overdue"?"Overdue":M==="due-soon"?"Due soon":null,ce=O.dueDate?new Date(O.dueDate).toLocaleDateString():"",Ee=M==="overdue"?" overdue":M==="due-soon"?" due-soon":"",dt=M==="overdue"?" task-card-overdue":M==="due-soon"?" task-card-due-soon":"",je={cursor:J?"grab":"default",userSelect:"none",WebkitUserDrag:J?"element":"auto",pointerEvents:"auto"};return r.jsx(ad.Fragment,{children:r.jsx("div",{className:`task-card${J?" task-card-draggable":""}${pn===O.id?" dragging":""}${dt}`,style:je,draggable:J&&xu,onDragStart:Ie=>J&&xu?fp(Ie,O.id):Ie.preventDefault(),onDragEnd:pp,onDragOver:Ie=>q_(Ie,i.status,O.id),onDragLeave:J_,onClick:()=>ap(O),children:r.jsxs("div",{className:"task-card-content",children:[r.jsxs("div",{className:"task-card-topbar",children:[r.jsxs("div",{className:`task-card-due${Ee}`,children:[r.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M5 4v16"}),r.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),r.jsx("span",{className:"task-card-due-date",children:ce}),q&&r.jsx("span",{className:"task-card-due-badge",children:q})]}),r.jsx("span",{className:`badge badge-priority-${O.priority.toLowerCase()} tooltip-target`,"data-tooltip":`Priority: ${O.priority}`,children:O.priority})]}),r.jsxs("div",{className:"task-card-header",children:[r.jsxs("div",{className:"task-title-row",children:[U&&r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),O.title]}),r.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${O.isFavorite?" active":""}`,onClick:Ie=>{Ie.stopPropagation(),hp(O)},title:O.isFavorite?"Unfavorite":"Favorite","aria-label":O.isFavorite?"Unfavorite task":"Favorite task",children:O.isFavorite?"":""})]}),O.description&&r.jsx("div",{className:"task-card-description",children:ai(O.description)}),r.jsx("hr",{className:"card-divider"}),r.jsxs("div",{className:"task-card-footer",children:[r.jsx("div",{className:"task-card-kinds",children:O.kinds.map(Ie=>r.jsx("span",{className:"badge task-kind-badge",children:Ie},Ie))}),r.jsxs("div",{className:"task-card-people",children:[O.ownerId&&ut(O.tenantId,[O.ownerId]),O.assignees.length>0&&ut(O.tenantId,O.assignees.filter(Ie=>Ie!==O.ownerId))]}),r.jsxs("div",{className:"task-card-icons",children:[ie>0&&r.jsxs("span",{className:fe?"icon-badge checklist-complete":"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),r.jsx("path",{d:"M18 17l2 2 4-4"})]}),z,"/",ie]}),O.comments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),O.comments.length]}),ye>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),ye]}),O.attachments.length>0&&r.jsxs("span",{className:"icon-badge",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:r.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),O.attachments.length]})]})]})]})})},O.id)})})]},i.status)})})]}):l==="timeline"?gx(Zf,"No tasks to show on timeline."):l==="table"?r.jsx("div",{className:"task-table-wrap",children:r.jsxs("table",{className:"task-table",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Title"}),r.jsx("th",{children:"People"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Art"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Due"}),r.jsx("th",{children:"Source"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:Zf.map(i=>{const c=hu(i),u=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,f=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",g=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"";return r.jsxs(ad.Fragment,{children:[r.jsxs("tr",{className:`task-table-row${g}`,onClick:()=>ip(i),children:[r.jsx("td",{children:i.title}),r.jsx("td",{children:r.jsxs("div",{className:"task-card-people",children:[i.ownerId&&ut(i.tenantId,[i.ownerId]),i.assignees.length>0&&ut(i.tenantId,i.assignees.filter(y=>y!==i.ownerId))]})}),r.jsx("td",{children:i.status}),r.jsx("td",{children:i.kinds.length>0?i.kinds.join(", "):""}),r.jsx("td",{children:r.jsx("span",{className:`badge badge-priority-${i.priority.toLowerCase()}`,children:i.priority})}),r.jsx("td",{children:r.jsxs("div",{className:`task-table-due${g}`,children:[r.jsx("span",{className:"task-table-due-date",children:f}),u&&r.jsx("span",{className:"task-table-due-badge",children:u})]})}),r.jsx("td",{children:i.sourceIndicator}),r.jsx("td",{children:r.jsxs("div",{className:"table-actions",children:[i.sourceType==="MANUAL"&&r.jsx("button",{className:"icon-action settings",onClick:y=>{y.stopPropagation(),op(i)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),r.jsx("button",{className:"icon-action",onClick:y=>{y.stopPropagation(),p(_=>_===i.id?null:i.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:r.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),h===i.id&&r.jsx("tr",{className:"task-table-details",children:r.jsx("td",{colSpan:8,children:r.jsxs("div",{className:"table-details-grid",children:[r.jsxs("div",{className:"table-details-span",children:[r.jsx("div",{className:"table-details-label",children:"Description"}),r.jsx("div",{className:"table-details-text",children:i.description?ai(i.description):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Members"}),r.jsx("div",{className:"table-details-text",children:i.assignees.length>0?i.assignees.map(y=>Yt(i.tenantId,y)).join(", "):""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Checklist"}),r.jsx("div",{className:"table-details-text",children:i.checklist.length>0?`${i.checklist.filter(y=>y.done).length}/${i.checklist.length} done`:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Linked tasks"}),r.jsx("div",{className:"table-details-text",children:i.linkedTaskIds.length>0?i.linkedTaskIds.length:""})]}),r.jsxs("div",{children:[r.jsx("div",{className:"table-details-label",children:"Attachments"}),r.jsx("div",{className:"table-details-text",children:i.attachments.length>0?i.attachments.length:""})]})]})})})]},i.id)})})]})}):r.jsx("div",{className:"empty-state",children:"No tasks to display."})]}),bc&&r.jsx("div",{className:"toast",children:bc}),Ac&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Create scope window"}),r.jsx("div",{className:"panel-subtitle",children:"Bundle tasks into a focused sprint scope."})]}),r.jsx("button",{className:"panel-close",onClick:()=>vo(!1),"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsx("div",{className:"scope-create-grid",children:r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",placeholder:"e.g. Sprint 12",value:mn.name,onChange:i=>Bi(c=>({...c,name:i.target.value}))})]})}),r.jsxs("div",{className:"scope-create-grid",children:[r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:mn.startDate,onChange:i=>Bi(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:mn.endDate,onChange:i=>Bi(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{children:["Visibility",r.jsxs("select",{value:mn.visibility,onChange:i=>Bi(c=>({...c,visibility:i.target.value==="personal"?"personal":"shared"})),children:[r.jsx("option",{value:"shared",children:"Shared"}),r.jsx("option",{value:"personal",children:"Personal"})]})]}),r.jsxs("label",{className:"scope-create-span",children:["Notes",r.jsx("textarea",{rows:2,placeholder:"Optional note for this scope window.",value:mn.description,onChange:i=>Bi(c=>({...c,description:i.target.value}))})]})]})]})}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-save btn-compact",onClick:Lk,disabled:!mn.name.trim()||!cs,"aria-label":"Create scope window",children:r.jsx("span",{className:"btn-save-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 4h12l4 4v12H4z"}),r.jsx("path",{d:"M7 4v6h8V4"}),r.jsx("path",{d:"M7 14h10v6H7z"})]})})})})})})]})}),lk&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:qt?"Edit initiative":"Create initiative"}),r.jsx("div",{className:"panel-subtitle",children:qt?"Update goal, owner, and description.":"Define the WHY for upcoming scopes."})]}),r.jsx("button",{className:"panel-close",onClick:()=>{zi(!1),Rc(null),js({name:"",goal:"",description:"",ownerId:""})},"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsx("div",{className:"scope-create-grid",children:r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",placeholder:"e.g. Accelerate onboarding",value:Gt.name,onChange:i=>js(c=>({...c,name:i.target.value}))})]})}),r.jsxs("div",{className:"scope-create-grid",children:[r.jsxs("label",{children:["Ziel",r.jsx("input",{type:"text",placeholder:"e.g. Improve activation rate",value:Gt.goal,onChange:i=>js(c=>({...c,goal:i.target.value}))})]}),r.jsxs("label",{children:["Owner",r.jsxs("select",{value:Gt.ownerId,onChange:i=>js(c=>({...c,ownerId:i.target.value})),children:[r.jsx("option",{value:"",children:"Unassigned"}),It(j).map(i=>{var c,u;return r.jsx("option",{value:i.userId,children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]})]}),r.jsx("div",{className:"scope-create-grid",children:r.jsxs("label",{className:"scope-create-span",children:["Description",r.jsx("textarea",{rows:3,placeholder:"Optional outcome description.",value:Gt.description,onChange:i=>js(c=>({...c,description:i.target.value}))})]})})]}),qt&&r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Status"}),r.jsx("div",{className:"panel-text",children:((hw=ti.get(qt))==null?void 0:hw.status)==="ACTIVE"?"Initiative is active.":"Initiative is closed."}),r.jsx("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap"},children:((fw=ti.get(qt))==null?void 0:fw.status)==="ACTIVE"?r.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:()=>$k(qt),children:"Close Initiative"}):r.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:()=>Bk(qt),children:"Reopen Initiative"})})]}),qt&&r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this initiative and unlink its scopes."}),r.jsx("button",{type:"button",className:"btn btn-delete btn-compact",onClick:()=>{Uk(qt),zi(!1),Rc(null),js({name:"",goal:"",description:"",ownerId:""})},children:"Delete Initiative"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-save btn-compact",onClick:qt?Mk:Pk,disabled:!Gt.name.trim(),"aria-label":qt?"Save changes":"Create initiative",children:r.jsx("span",{className:"btn-save-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 4h12l4 4v12H4z"}),r.jsx("path",{d:"M7 4v6h8V4"}),r.jsx("path",{d:"M7 14h10v6H7z"})]})})})})})})]})})]})]}),Xh&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Task settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage this task list"})]}),r.jsx("button",{className:"panel-close",onClick:()=>Eo(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Tasks"}),r.jsx("div",{className:"member-name",children:(Qe==null?void 0:Qe.name)||le||"Tasks"}),r.jsxs("div",{className:"member-meta",children:["Role: ",(Ts==null?void 0:Ts.role)||"Member"]})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this task list and all tasks, objectives, and key results."}),r.jsx("button",{className:"btn btn-delete btn-compact",onClick:Yk,children:"Delete task list"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Eo(!1),children:"Close"})})})})]})}),yo&&P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Scope window settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage this scope window"})]}),r.jsx("button",{className:"panel-close",onClick:()=>xo(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Scope window"}),r.jsxs("div",{className:"scope-create-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:et.name,onChange:i=>Ss(c=>({...c,name:i.target.value}))})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:et.startDate,onChange:i=>Ss(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:et.endDate,onChange:i=>Ss(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{className:"scope-create-span",children:["Notes",r.jsx("textarea",{rows:3,value:et.description,onChange:i=>Ss(c=>({...c,description:i.target.value}))})]})]}),Wf&&r.jsx("div",{className:"form-error",children:"End date must be after start date."}),r.jsxs("div",{className:"member-meta",children:["Huddle: ",ul||""]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Visibility"}),r.jsx("div",{className:"member-meta",children:r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.jsxs("select",{value:et.visibility,onChange:i=>Ss(c=>({...c,visibility:i.target.value==="personal"?"personal":"shared"})),children:[r.jsx("option",{value:"shared",children:"Shared"}),r.jsx("option",{value:"personal",children:"Personal"})]})})})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Initiative"}),r.jsx("div",{className:"member-meta",ref:af,style:{position:"relative"},children:r.jsxs("div",{className:"filter-dropdown",children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{!yu||wu||jo(i=>!i)},"aria-haspopup":"listbox","aria-expanded":Fh,disabled:!yu||wu,children:P.initiativeId?((pw=ti.get(P.initiativeId))==null?void 0:pw.name)||"Initiative":"Keine"}),Fh&&r.jsxs("div",{className:"filter-options",role:"listbox",children:[r.jsx("button",{type:"button",className:`filter-option${P.initiativeId?"":" active"}`,onClick:()=>{If(P.id,null),jo(!1)},children:"Keine"}),cx.length===0?r.jsx("div",{className:"filter-empty",children:"Noch keine Initiativen."}):cx.map(i=>r.jsxs("button",{type:"button",className:`filter-option${P.initiativeId===i.id?" active":""}`,onClick:()=>{If(P.id,i.id),jo(!1)},children:[r.jsx("span",{children:i.name}),r.jsx("span",{className:"filter-option-meta",children:i.status==="ACTIVE"?"Aktiv":"Beendet"})]},i.id))]})]})})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Members"}),r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[r.jsxs("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[r.jsxs("select",{value:Lc,onChange:i=>Hh(i.target.value),children:[r.jsx("option",{value:"",children:"Select member"}),It(j).filter(i=>!et.members.some(c=>c.userId===i.userId)).map(i=>{var c,u;return r.jsx("option",{value:i.userId,children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]}),r.jsxs("select",{value:ey,onChange:i=>zh(i.target.value==="ADMIN"?"ADMIN":i.target.value==="MEMBER"?"MEMBER":"VIEWER"),children:[r.jsx("option",{value:"ADMIN",children:"Admin"}),r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"VIEWER",children:"Viewer"})]}),r.jsx("button",{className:"btn btn-secondary btn-compact",type:"button",disabled:!Lc,onClick:()=>{Lc&&(Ss(i=>({...i,members:i.members.concat({userId:Lc,role:ey})})),Hh(""),zh("MEMBER"))},children:"Add"})]}),et.members.length===0?r.jsx("div",{className:"member-meta",children:"No members yet."}):r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:et.members.map(i=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.5rem",alignItems:"center"},children:[r.jsx("span",{className:"member-meta",children:Yt(j,i.userId)}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsxs("select",{value:i.role,onChange:c=>Ss(u=>({...u,members:u.members.map(f=>f.userId===i.userId?{...f,role:c.target.value==="ADMIN"?"ADMIN":c.target.value==="MEMBER"?"MEMBER":"VIEWER"}:f)})),children:[r.jsx("option",{value:"ADMIN",children:"Admin"}),r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"VIEWER",children:"Viewer"})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",type:"button",onClick:()=>Ss(c=>({...c,members:c.members.filter(u=>u.userId!==i.userId)})),children:"Remove"})]})]},i.userId))})]})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this scope window and remove its task links."}),r.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Fk(P.id),xo(!1)},children:"Delete scope window"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-save btn-compact",onClick:f_,disabled:!et.name.trim()||Wf,"aria-label":"Save changes",children:r.jsx("span",{className:"btn-save-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 4h12l4 4v12H4z"}),r.jsx("path",{d:"M7 4v6h8V4"}),r.jsx("path",{d:"M7 14h10v6H7z"})]})})})})})})]})}),dk&&P&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Scope abschlieen"}),r.jsx("div",{className:"panel-subtitle",children:"Ergebnis festhalten und offene Tasks verschieben."})]}),r.jsx("button",{className:"panel-close",onClick:()=>Mc(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Ziel"}),r.jsxs("div",{className:"scope-close-grid",children:[r.jsxs("label",{className:"scope-close-field",children:[r.jsx("span",{children:"Ziel erreicht?"}),r.jsxs("select",{value:Vh,onChange:i=>Wh(i.target.value),children:[r.jsx("option",{value:"",children:"Auswhlen"}),r.jsx("option",{value:"YES",children:"Ja"}),r.jsx("option",{value:"PARTIAL",children:"Teilweise"}),r.jsx("option",{value:"NO",children:"Nein"})]})]}),r.jsxs("label",{className:"scope-close-field scope-close-field-span",children:[r.jsx("span",{children:"Kommentar (optional)"}),r.jsx("textarea",{rows:3,value:ty,onChange:i=>Kh(i.target.value),placeholder:"Kurze Einordnung zum Ergebnis"})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Offene Tasks"}),r.jsxs("div",{className:"scope-close-row",children:[r.jsxs("div",{className:"scope-close-open",children:[r.jsx("span",{children:"Offene Tasks"}),r.jsx("strong",{children:al.length})]}),r.jsxs("label",{className:"scope-close-field",children:[r.jsx("span",{children:"Verschieben nach"}),r.jsxs("select",{value:Gh,onChange:i=>Pc(i.target.value),disabled:al.length===0,children:[r.jsx("option",{value:"",children:al.length===0?"Keine offenen Tasks":"Scope auswhlen"}),_e.filter(i=>i.id!==P.id).map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))]})]})]})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsxs("div",{className:"panel-actions-right",children:[r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Mc(!1),children:"Close"}),r.jsx("button",{className:"btn btn-primary btn-compact",onClick:m_,disabled:!il(P.id),children:"Abschlieen"})]})})})]})}),ef&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:Oo?"KR bearbeiten":"KR erstellen"}),r.jsx("div",{className:"panel-subtitle",children:Oo?"Update the metric and target.":"Define the metric and target."})]}),r.jsx("button",{className:"panel-close",onClick:up,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",placeholder:"e.g. Improve activation rate",value:$e.title,onChange:i=>ns(c=>({...c,title:i.target.value}))})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{placeholder:"What does this key result capture?",value:$e.description,onChange:i=>ns(c=>({...c,description:i.target.value})),rows:3})]}),r.jsxs("label",{children:["Start",r.jsx("input",{type:"number",placeholder:"0",value:$e.startValue,onChange:i=>ns(c=>({...c,startValue:i.target.value}))})]}),r.jsxs("label",{children:["Target",r.jsx("input",{type:"number",placeholder:"100",value:$e.targetValue,onChange:i=>ns(c=>({...c,targetValue:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:$e.status,onChange:i=>ns(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ON_TRACK",children:"On track"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"OFF_TRACK",children:"Off track"})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"kr-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="kr-assignees"?null:"kr-assignees"),children:$e.assignees.length>0?$e.assignees.map(i=>Yt(j,i)).join(", "):"Select members"}),ss==="kr-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[It(j).map(i=>{var u,f;const c=$e.assignees.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const g=c?$e.assignees.filter(y=>y!==i.userId):$e.assignees.concat(i.userId);ns(y=>({...y,assignees:g}))},children:((u=i.user)==null?void 0:u.name)||((f=i.user)==null?void 0:f.email)||i.userId},i.userId)}),It(j).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-primary btn-compact",onClick:e_,children:Oo?"Save changes":"Create key result"})})})})]})}),Yh&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content settings-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Objective settings"}),r.jsx("div",{className:"panel-subtitle",children:"Edit or delete this objective"})]}),r.jsx("button",{className:"panel-close",onClick:dp,"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Details"}),r.jsxs("div",{className:"okr-grid",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:tt.title,onChange:i=>xt(c=>({...c,title:i.target.value}))})]}),r.jsxs("label",{className:"okr-grid-full",children:["Description",r.jsx("textarea",{value:tt.description,onChange:i=>xt(c=>({...c,description:i.target.value})),rows:3})]}),r.jsxs("label",{children:["Owner",r.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner-settings",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="objective-owner-settings"?null:"objective-owner-settings"),children:tt.ownerId?Yt(j,tt.ownerId):"Unassigned"}),ss==="objective-owner-settings"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${tt.ownerId?"":" active"}`,onClick:()=>{xt(i=>({...i,ownerId:""})),lt(null)},children:"Unassigned"}),It(j).map(i=>{var c,u;return r.jsx("button",{type:"button",className:`member-select-option${tt.ownerId===i.userId?" active":""}`,onClick:()=>{xt(f=>({...f,ownerId:i.userId})),lt(null)},children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]})]}),r.jsxs("label",{children:["Start date",r.jsx("input",{type:"date",value:tt.startDate,onChange:i=>xt(c=>({...c,startDate:i.target.value}))})]}),r.jsxs("label",{children:["End date",r.jsx("input",{type:"date",value:tt.endDate,onChange:i=>xt(c=>({...c,endDate:i.target.value}))})]}),r.jsxs("label",{children:["Status",r.jsxs("select",{value:tt.status,onChange:i=>xt(c=>({...c,status:i.target.value})),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"AT_RISK",children:"At risk"}),r.jsx("option",{value:"PAUSED",children:"Paused"}),r.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Key results"}),(mw=re==null?void 0:re.keyResults)!=null&&mw.length?r.jsx("div",{className:"template-list",children:re.keyResults.map(i=>r.jsxs("div",{className:"template-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:i.title}),r.jsxs("div",{className:"member-meta",children:[i.currentValue," / ",i.targetValue]})]}),r.jsx("button",{className:"icon-action delete",onClick:()=>Xk(i.id,re.id),"data-tooltip":"KR lschen","aria-label":"KR lschen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M6 6l12 12"}),r.jsx("path",{d:"M18 6L6 18"})]})})]},i.id))}):r.jsx("div",{className:"empty-state",children:"No key results yet."})]}),r.jsxs("div",{className:"panel-section panel-danger",children:[r.jsxs("div",{className:"panel-danger-row",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[r.jsx("path",{d:"M12 3l9 16H3l9-16z"}),r.jsx("path",{d:"M12 9v4"}),r.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),r.jsx("div",{className:"section-title",children:"Danger zone"}),r.jsx("div",{className:"panel-text",children:"Delete this objective and its key results."}),Ki&&r.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Qk(Ki),Bc(!1),To(null)},children:"Delete objective"})]})]}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>{Xy(),Bc(!1),To(null)},children:"Save changes"})})})})]})}),oo&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content team-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Huddle settings"}),r.jsx("div",{className:"panel-subtitle",children:"Manage huddles and members"})]}),r.jsx("button",{className:"panel-close",onClick:()=>lo(!1),"aria-label":"Close",children:""})]}),r.jsxs("div",{className:"panel-body",children:[r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Active huddle"}),r.jsxs("div",{className:"team-active-row",children:[r.jsx("div",{className:"team-name",children:ul||j}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>j&&fa(j),children:"Refresh members"})]})]}),(Su||bx)&&r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Rename huddle"}),Gf?r.jsx("div",{className:"empty-state",children:"Private huddles cannot be renamed."}):r.jsxs("form",{className:"inline-form",onSubmit:k_,children:[r.jsx("input",{type:"text",placeholder:"Huddle name",value:Sv,onChange:i=>Nv(i.target.value),required:!0}),r.jsx("button",{className:"btn btn-primary",type:"submit",disabled:kv,children:kv?"Saving...":"Save"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Create a new huddle"}),r.jsxs("form",{className:"inline-form",onSubmit:Tx,children:[r.jsx("input",{type:"text",placeholder:"Huddle name",value:Sh,onChange:i=>Nh(i.target.value),required:!0}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Invite to huddle"}),Gf?r.jsx("div",{className:"empty-state",children:"Private huddles are personal and cannot have members."}):r.jsxs("form",{className:"inline-form",onSubmit:N_,children:[r.jsx("input",{type:"email",placeholder:"email@company.com",value:Ev,onChange:i=>Tv(i.target.value),required:!0}),r.jsxs("select",{value:Cv,onChange:i=>VN(i.target.value),children:[r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",children:"Invite"})]})]}),r.jsxs("div",{className:"panel-section",children:[r.jsx("div",{className:"section-title",children:"Huddle members"}),r.jsxs("div",{className:"member-list",children:[Iv.map(i=>{var u,f,g;const c=i.userId===(D==null?void 0:D.id);return r.jsxs("div",{className:"member-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:((u=i.user)==null?void 0:u.name)||((f=i.user)==null?void 0:f.email)}),r.jsx("div",{className:"member-meta",children:(g=i.user)==null?void 0:g.email})]}),r.jsxs("div",{className:"member-actions",children:[r.jsxs("select",{value:i.role,onChange:y=>R_(i.id,y.target.value),disabled:c,children:[r.jsx("option",{value:"MEMBER",children:"Member"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>L_(i.id),disabled:c,children:"Remove"})]})]},i.id)}),Iv.length===0&&r.jsx("div",{className:"empty-state",children:"No members yet."})]})]}),vc&&r.jsx("div",{className:"auth-error",children:vc})]})]})}),kh&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content team-modal",children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Huddle invites"}),r.jsx("div",{className:"panel-subtitle",children:"Accept or decline invitations"})]}),r.jsx("button",{className:"panel-close",onClick:()=>yc(!1),"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:ao.length>0?r.jsx("div",{className:"invite-list",children:ao.map(i=>{var c,u,f;return r.jsxs("div",{className:"invite-row",children:[r.jsxs("div",{children:[r.jsx("div",{className:"member-name",children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId}),r.jsxs("div",{className:"member-meta",children:["Invited by ",((u=i.invitedBy)==null?void 0:u.name)||((f=i.invitedBy)==null?void 0:f.email)||i.invitedByUserId,"  ",new Date(i.createdAt).toLocaleString()]})]}),r.jsxs("div",{className:"invite-actions",children:[r.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Cx(i,"accept"),children:"Accept"}),r.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Cx(i,"decline"),children:"Decline"})]})]},i.id)})}):r.jsx("div",{className:"empty-state",children:"No pending invites."})})]})}),zo&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"modal-header-row",children:[r.jsx("h2",{style:{marginBottom:0},children:"Create New Task"}),r.jsx("button",{className:"panel-close",onClick:lp,"aria-label":"Close",children:""})]}),be&&r.jsxs("div",{className:"huddle-inline",children:[r.jsx("span",{children:"Creating in"}),r.jsxs("span",{className:"huddle-chip",style:{background:$n(be,(vw=(gw=Ce.find(i=>i.tenantId===be))==null?void 0:gw.tenant)==null?void 0:vw.name).soft,borderColor:$n(be,(xw=(yw=Ce.find(i=>i.tenantId===be))==null?void 0:yw.tenant)==null?void 0:xw.name).border,color:$n(be,(bw=(ww=Ce.find(i=>i.tenantId===be))==null?void 0:ww.tenant)==null?void 0:bw.name).text},children:[r.jsx("span",{className:"huddle-dot",style:{background:$n(be,(Sw=(jw=Ce.find(i=>i.tenantId===be))==null?void 0:jw.tenant)==null?void 0:Sw.name).solid}}),wt((kw=(Nw=Ce.find(i=>i.tenantId===be))==null?void 0:Nw.tenant)==null?void 0:kw.name)]})]})]}),r.jsxs("form",{onSubmit:M_,children:[r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title"}),r.jsx("input",{type:"text",required:!0,value:yn.title,onChange:i=>ea({...yn,title:i.target.value}),placeholder:"What needs to be done?"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Huddle"}),r.jsx("select",{value:be||"",onChange:i=>Ry(i.target.value),children:Ce.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Tasks"}),r.jsx("select",{value:qo||"",onChange:i=>Jo(i.target.value),children:ll(be).map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))})]}),!cl(be)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Owner"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="new-task-owner"?null:"new-task-owner"),children:Wr?Yt(be,Wr):"Unassigned"}),ss==="new-task-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${Wr?"":" active"}`,onClick:()=>{Xc(null),lt(null)},children:"Unassigned"}),It(be).map(i=>{var c,u;return r.jsx("button",{type:"button",className:`member-select-option${Wr===i.userId?" active":""}`,onClick:()=>{Xc(i.userId),lt(null)},children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]})]}),!cl(be)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="new-task-assignees"?null:"new-task-assignees"),children:Xs.length>0?Xs.map(i=>Yt(be,i)).join(", "):"Select members"}),ss==="new-task-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[It(be).map(i=>{var u,f;const c=Xs.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const g=c?Xs.filter(y=>y!==i.userId):Xs.concat(i.userId);vf(g)},children:((u=i.user)==null?void 0:u.name)||((f=i.user)==null?void 0:f.email)||i.userId},i.userId)}),It(be).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsxs("div",{className:"rich-editor",children:[r.jsxs("div",{className:"rich-toolbar",children:[r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("bold"),children:"B"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("italic"),children:"I"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("underline"),children:"U"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("insertUnorderedList"),children:" List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("insertOrderedList"),children:"1. List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("createLink"),children:"Link"})]}),r.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:Nf,onInput:i=>ea({...yn,description:i.currentTarget.innerHTML}),onPaste:_x,"data-placeholder":"Optional details..."})]})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Art"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"text",value:Dy,onChange:i=>Go(i.target.value),onKeyDown:i=>Hx(i,"new"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Ux,children:"Add"})]}),Wo.length>0&&r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Wo.map(i=>r.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>zx(i,Ko),children:""})]},i))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Priority"}),r.jsxs("select",{value:yn.priority,onChange:i=>ea({...yn,priority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Deadline"}),r.jsx("input",{type:"date",value:yn.dueDate,onChange:i=>ea({...yn,dueDate:i.target.value})})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Files"}),r.jsx("input",{type:"file",multiple:!0,onChange:i=>U_(i.target.files)}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:Ay.map(i=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>F_(i.id),children:"Remove"})]},i.id))})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Checklist"}),r.jsxs("div",{className:"checklist-input-row",children:[r.jsx("input",{className:"checklist-input",type:"text",value:Sf,onChange:i=>Xr(i.target.value),placeholder:"Add checklist item"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:Vx,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"checklist-list",children:Jr.length>0?Jr.map(i=>r.jsxs("label",{className:"checklist-item",children:[r.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>Wx(i.id)}),r.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>Kx(i.id),children:"Remove"})]},i.id)):r.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),r.jsxs("div",{className:"link-row",children:[r.jsxs("select",{className:"link-select",value:nl,onChange:i=>Yr(i.target.value),children:[r.jsx("option",{value:"",children:"Select task to link"}),me.filter(i=>i.id!==Yo&&!as.includes(i.id)).map(i=>r.jsx("option",{value:i.id,children:i.title},i.id))]}),r.jsx("button",{type:"button",className:"icon-action create",onClick:Gx,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"link-list",children:as.length>0?as.map(i=>{var c;return r.jsxs("div",{className:"link-chip",children:[r.jsx("span",{className:"link-title",children:((c=mu.get(i))==null?void 0:c.title)??i}),r.jsx("button",{type:"button",className:"link-remove",onClick:()=>qx(i),children:""})]},i)}):r.jsx("div",{className:"link-empty",children:"No linked tasks."})})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:r.jsx("button",{type:"submit",className:"btn btn-save","aria-label":"Speichern",children:r.jsx("span",{className:"btn-save-icon","aria-hidden":"true",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M4 4h12l4 4v12H4z"}),r.jsx("path",{d:"M7 4v6h8V4"}),r.jsx("path",{d:"M7 14h10v6H7z"})]})})})})})]})]})}),F&&r.jsx("div",{className:"modal-overlay",onClick:()=>{W(!1),mc(null)},children:r.jsxs("div",{className:"modal-content settings-modal",onClick:i=>i.stopPropagation(),style:{maxWidth:"560px",padding:0},children:[r.jsxs("div",{className:"panel-header",children:[r.jsxs("div",{children:[r.jsx("div",{className:"panel-title",children:"Capture inbox item"}),r.jsx("div",{className:"panel-subtitle",children:"Add incoming work before sorting."})]}),r.jsx("button",{className:"panel-close",onClick:()=>{W(!1),mc(null)},"aria-label":"Close",children:""})]}),r.jsx("div",{className:"panel-body",children:r.jsxs("div",{className:"panel-section",children:[r.jsxs("label",{children:["Title",r.jsx("input",{type:"text",value:We.title,onChange:i=>Dr(c=>({...c,title:i.target.value})),placeholder:"New incoming item"})]}),r.jsxs("label",{children:[t("inbox.field.description","Beschreibung"),r.jsx("textarea",{rows:2,value:We.description,placeholder:t("inbox.field.descriptionPlaceholder","Kurz beschreiben, worum es geht"),onChange:i=>Dr(c=>({...c,description:i.target.value}))})]}),r.jsxs("div",{className:"inbox-dropdown-row",children:[r.jsxs("label",{children:[t("inbox.field.source","Source"),r.jsxs("div",{className:"filter-dropdown",ref:so,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{oe(i=>!i),Cn(!1),xs(!1)},"aria-expanded":de,children:We.source?s(We.source):t("inbox.field.selectSource","Select source")}),de&&r.jsx("div",{className:"filter-options",role:"listbox",children:O0.map(i=>r.jsx("button",{type:"button",className:`filter-option ${We.source===i.value?"active":""}`,onClick:()=>{Dr(c=>({...c,source:i.value})),oe(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]}),r.jsxs("label",{children:[t("inbox.field.action","Suggested action"),r.jsxs("div",{className:"filter-dropdown",ref:Ir,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{Cn(i=>!i),oe(!1),xs(!1)},"aria-expanded":vt,children:We.suggestedAction?a(We.suggestedAction):t("inbox.field.selectAction","Select action")}),vt&&r.jsx("div",{className:"filter-options",role:"listbox",children:A0.map(i=>r.jsx("button",{type:"button",className:`filter-option ${We.suggestedAction===i.value?"active":""}`,onClick:()=>{Dr(c=>({...c,suggestedAction:i.value})),Cn(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]}),r.jsxs("label",{children:[t("task.field.priority","Priority"),r.jsxs("div",{className:"filter-dropdown",ref:K,children:[r.jsx("button",{type:"button",className:"filter-select",onClick:()=>{Cn(!1),oe(!1),xs(i=>!i)},"aria-expanded":In,children:We.priority?o(We.priority):t("task.field.selectPriority","Priority whlen")}),In&&r.jsx("div",{className:"filter-options",role:"listbox",children:D0.map(i=>r.jsx("button",{type:"button",className:`filter-option ${We.priority===i.value?"active":""}`,onClick:()=>{Dr(c=>({...c,priority:i.value})),xs(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]})]})]})}),r.jsx("div",{className:"panel-footer",children:r.jsx("div",{className:"panel-actions",children:r.jsx("div",{className:"panel-actions-right",children:r.jsx("button",{className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Speichern","aria-label":"Speichern",onClick:()=>{var u;if(!We.title.trim())return;const i=new Date().toISOString(),c=ri(j,bt||((u=I==null?void 0:I.user)==null?void 0:u.id)||void 0);zs(yv?f=>f.map(g=>g.id===yv?{...g,title:We.title.trim(),source:We.source||void 0,suggestedAction:We.suggestedAction||void 0,description:We.description.trim()||void 0,priority:We.priority||"MEDIUM"}:g):f=>{var g;return[{id:`inbox-${i}-${Math.random().toString(36).slice(2,7)}`,title:We.title.trim(),source:We.source||void 0,suggestedAction:We.suggestedAction||void 0,description:We.description.trim()||void 0,priority:We.priority||"MEDIUM",createdAt:i,kind:"Incoming",creatorLabel:c.label,creatorAvatarUrl:void 0,creatorId:bt||((g=I==null?void 0:I.user)==null?void 0:g.id)||void 0,tenantId:j||null},...f]}),Dr({title:"",source:"",suggestedAction:"",description:"",priority:"MEDIUM"}),W(!1),mc(null)},children:r.jsx("span",{className:"btn-save-icon",children:ae})})})})})]})}),Qo&&Q&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"detail-header-top",children:[r.jsxs("div",{className:"detail-meta",children:["Created ",new Date(Q.createdAt).toLocaleDateString()]}),r.jsxs("div",{className:"detail-actions",children:[r.jsx("button",{className:"panel-close",onClick:Du,"aria-label":"Close",children:""}),r.jsx("button",{className:Q.isFavorite?"icon-btn favorite-icon active":"icon-btn favorite-icon",onClick:()=>hp(Q),title:Q.isFavorite?"Unfavorite":"Favorite","aria-label":Q.isFavorite?"Unfavorite task":"Favorite task",children:Q.isFavorite?"":""}),Q.sourceType==="MANUAL"&&!l_&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"icon-btn",onClick:()=>$_(Q),title:Q.status===V.ARCHIVED?"Restore":"Archive","aria-label":Q.status===V.ARCHIVED?"Restore task":"Archive task",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M3 7h18"}),r.jsx("path",{d:"M5 7l1 13h12l1-13"}),r.jsx("path",{d:"M9 11h6"})]})}),r.jsx("button",{className:"icon-btn",onClick:()=>{Ys(!1),op(Q)},title:"Edit","aria-label":"Edit task",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})]}),r.jsx("div",{className:"detail-title",children:Q.title}),r.jsxs("div",{className:"detail-chips",children:[Q.kinds.map(i=>r.jsx("span",{className:"chip chip-muted",children:i},i)),r.jsx("span",{className:`chip chip-priority priority-${Q.priority.toLowerCase()}`,children:Q.priority})]})]}),r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Overview"}),r.jsxs("div",{className:"detail-rows",children:[r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M5 12h14"}),r.jsx("path",{d:"M12 5l7 7-7 7"})]}),"Status"]}),r.jsx("span",{className:"detail-value",children:Q.status})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),r.jsx("path",{d:"M8 3v4M16 3v4M3 11h18"})]}),"Due date"]}),r.jsx("span",{className:"detail-value",children:Q.dueDate?new Date(Q.dueDate).toLocaleDateString():""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"}),r.jsx("circle",{cx:"12",cy:"8",r:"4"})]}),"Owner"]}),r.jsx("span",{className:"detail-value",children:Q.ownerId?ut(Q.tenantId,[Q.ownerId],"avatar-stack-lg"):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("circle",{cx:"9",cy:"8",r:"3"}),r.jsx("circle",{cx:"17",cy:"9",r:"2.5"}),r.jsx("path",{d:"M3 21a6 6 0 0 1 12 0"}),r.jsx("path",{d:"M14.5 21a4.5 4.5 0 0 1 7.5 0"})]}),"Assignees"]}),r.jsx("span",{className:"detail-value",children:Q.assignees.length>0?ut(Q.tenantId,Q.assignees,"avatar-stack-lg"):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:r.jsx("path",{d:"M20 12l-8 8-8-8 8-8 8 8z"})}),"Labels"]}),r.jsx("span",{className:"detail-value detail-value-wrap",children:Q.kinds.length>0?Q.kinds.map(i=>r.jsx("span",{className:"chip chip-muted",children:i},i)):""})]}),r.jsxs("div",{className:"detail-row",children:[r.jsxs("span",{className:"detail-label",children:[r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[r.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),r.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),"Linked in"]}),r.jsx("span",{className:"detail-value",children:sx.length>0?sx.map(i=>i.title).join(", "):""})]})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Description"}),r.jsx("div",{className:"detail-description-box",children:r.jsx("div",{className:"detail-description rich-display",dir:"ltr",dangerouslySetInnerHTML:{__html:Q.description||"No description provided."}})})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),r.jsxs("div",{className:"link-row",children:[r.jsxs("select",{className:"link-select",value:nl,onChange:i=>Yr(i.target.value),children:[r.jsx("option",{value:"",children:"Select task to link"}),me.filter(i=>i.id!==Q.id&&!as.includes(i.id)).map(i=>r.jsx("option",{value:i.id,children:i.title},i.id))]}),r.jsx("button",{type:"button",className:"icon-action create",onClick:Gx,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"link-list",children:as.length>0?as.map(i=>{var c;return r.jsxs("div",{className:"link-chip",children:[r.jsx("span",{className:"link-title",children:((c=mu.get(i))==null?void 0:c.title)??i}),r.jsx("button",{type:"button",className:"link-remove",onClick:()=>qx(i),children:""})]},i)}):r.jsx("div",{className:"link-empty",children:"No linked tasks."})})]}),r.jsxs("div",{className:"checklist-panel",children:[r.jsx("div",{className:"section-title",children:"Checklist"}),r.jsxs("div",{className:"checklist-input-row",children:[r.jsx("input",{className:"checklist-input",type:"text",value:Sf,onChange:i=>Xr(i.target.value),placeholder:"Add checklist item"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:Vx,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"checklist-list",children:Jr.length>0?Jr.map(i=>r.jsxs("label",{className:"checklist-item",children:[r.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>Wx(i.id)}),r.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>Kx(i.id),children:"Remove"})]},i.id)):r.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),r.jsxs("div",{className:"detail-tabs",style:{"--active-index":v==="comments"?0:v==="attachments"?1:2},children:[r.jsx("button",{className:`detail-tab ${v==="comments"?"active":""}`,onClick:()=>w("comments"),children:"Comments"}),r.jsx("button",{className:`detail-tab ${v==="attachments"?"active":""}`,onClick:()=>w("attachments"),children:"Attachments"}),r.jsx("button",{className:`detail-tab ${v==="activity"?"active":""}`,onClick:()=>w("activity"),children:"Activity"})]}),v==="comments"&&r.jsxs("div",{className:"comments-panel",children:[r.jsx("div",{className:"section-title",children:"Comments"}),r.jsxs("div",{className:"comment-input-row",children:[r.jsx("div",{className:"comment-avatar",children:a_}),r.jsx("input",{className:"comment-input",type:"text",value:By,onChange:i=>jf(i.target.value),placeholder:"Write a comment"}),r.jsx("button",{type:"button",className:"icon-action create",onClick:H_,"data-tooltip":"Kommentar erstellen","aria-label":"Kommentar erstellen",children:r.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]}),r.jsx("div",{className:"comment-list",children:Q.comments&&Q.comments.length>0?Q.comments.map(i=>{const c=ri(Q.tenantId,i.createdBy);return r.jsxs("div",{className:"comment-card",children:[c.avatarUrl?r.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):r.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),r.jsxs("div",{className:"comment-body",children:[r.jsxs("div",{className:"comment-meta",children:[r.jsx("span",{className:"comment-author",children:c.label}),r.jsx("span",{className:"comment-time",children:new Date(i.createdAt).toLocaleString()})]}),r.jsx("div",{className:"comment-text",children:i.text})]})]},i.id)}):r.jsx("div",{className:"comment-empty",children:"No comments yet."})})]}),v==="attachments"&&r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Attachments"}),r.jsxs("div",{className:"link-row",children:[r.jsx("input",{className:"link-select",type:"file",multiple:!0,onChange:i=>Jx(i.target.files)}),r.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:async()=>{if(!(!Q||eu.length===0))try{await ir({attachmentsToAdd:eu}),ta([])}catch(i){alert(i.message)}},children:"Upload"})]}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:Q.attachments&&Q.attachments.length>0?Q.attachments.map(i=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),r.jsx("button",{type:"button",className:"delete-btn",onClick:()=>ir({attachmentsToRemove:[i.id]}),children:"Remove"})]})]}),i.type.startsWith("image/")&&r.jsx("img",{src:i.dataUrl,alt:i.name,style:{width:"160px",height:"110px",objectFit:"cover",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},className:"attachment-thumb",onClick:()=>iu({src:i.dataUrl,name:i.name})})]},i.id)):r.jsx("div",{style:{color:"var(--text-secondary)"},children:"No attachments."})})]}),v==="activity"&&r.jsxs("div",{className:"detail-section",children:[r.jsx("div",{className:"detail-section-title",children:"Activity"}),r.jsx("div",{className:"activity-list",children:Q.activityLog&&Q.activityLog.length>0?[...Q.activityLog].sort((i,c)=>new Date(c.timestamp).getTime()-new Date(i.timestamp).getTime()).map(i=>{const c=ri(Q.tenantId,i.actorId);return r.jsxs("div",{className:"activity-item",children:[c.avatarUrl?r.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):r.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),r.jsxs("div",{className:"activity-body",children:[r.jsx("div",{className:"activity-text",children:i.message}),r.jsxs("div",{className:"activity-meta",children:[c.label,"  ",new Date(i.timestamp).toLocaleString()]})]})]},i.id)}):r.jsx("div",{className:"activity-empty",children:"No activity yet."})})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Q.sourceType==="MANUAL"&&r.jsx("button",{className:"btn btn-secondary btn-delete",onClick:()=>B_(Q.id),children:"Lschen"}),r.jsx("button",{className:"btn btn-secondary",onClick:Du,children:"Speichern"})]})})]})}),na&&r.jsx("div",{className:"image-overlay",onClick:()=>iu(null),children:r.jsxs("div",{className:"image-overlay-content",onClick:i=>i.stopPropagation(),children:[r.jsx("button",{className:"image-overlay-close",onClick:()=>iu(null),children:""}),r.jsx("img",{src:na.src,alt:na.name}),r.jsx("div",{className:"image-overlay-caption",children:na.name})]})}),Xo&&r.jsx("div",{className:"modal-overlay",children:r.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[r.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[r.jsxs("div",{className:"modal-header-row",children:[r.jsx("h2",{style:{marginBottom:0},children:"Edit Task"}),r.jsx("button",{className:"panel-close",onClick:cp,"aria-label":"Close",children:""})]}),ve&&r.jsxs("div",{className:"huddle-inline",children:[r.jsx("span",{children:"Editing in"}),r.jsxs("span",{className:"huddle-chip",style:{background:$n(ve,(Ew=(_w=Ce.find(i=>i.tenantId===ve))==null?void 0:_w.tenant)==null?void 0:Ew.name).soft,borderColor:$n(ve,(Cw=(Tw=Ce.find(i=>i.tenantId===ve))==null?void 0:Tw.tenant)==null?void 0:Cw.name).border,color:$n(ve,(Ow=(Iw=Ce.find(i=>i.tenantId===ve))==null?void 0:Iw.tenant)==null?void 0:Ow.name).text},children:[r.jsx("span",{className:"huddle-dot",style:{background:$n(ve,(Dw=(Aw=Ce.find(i=>i.tenantId===ve))==null?void 0:Aw.tenant)==null?void 0:Dw.name).solid}}),wt((Lw=(Rw=Ce.find(i=>i.tenantId===ve))==null?void 0:Rw.tenant)==null?void 0:Lw.name)]})]})]}),r.jsxs("form",{onSubmit:V_,children:[r.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Title"}),r.jsx("input",{type:"text",required:!0,value:Qt.title,onChange:i=>Zo({...Qt,title:i.target.value}),placeholder:"What needs to be done?"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Huddle"}),r.jsx("select",{value:ve||"",onChange:i=>Ly(i.target.value),children:Ce.map(i=>{var c;return r.jsx("option",{value:i.tenantId,children:wt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Tasks"}),r.jsx("select",{value:Gr||"",onChange:i=>Yc(i.target.value),children:ll(ve||j).map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))})]}),!cl(ve)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Owner"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-owner",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="edit-task-owner"?null:"edit-task-owner"),children:qr?Yt(ve,qr):"Unassigned"}),ss==="edit-task-owner"&&r.jsxs("div",{className:"member-select-dropdown",children:[r.jsx("button",{type:"button",className:`member-select-option${qr?"":" active"}`,onClick:()=>{Zc(null),lt(null)},children:"Unassigned"}),It(ve).map(i=>{var c,u;return r.jsx("button",{type:"button",className:`member-select-option${qr===i.userId?" active":""}`,onClick:()=>{Zc(i.userId),lt(null)},children:((c=i.user)==null?void 0:c.name)||((u=i.user)==null?void 0:u.email)||i.userId},i.userId)})]})]})]}),!cl(ve)&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Members"}),r.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-assignees",children:[r.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>lt(i=>i==="edit-task-assignees"?null:"edit-task-assignees"),children:Zs.length>0?Zs.map(i=>Yt(ve,i)).join(", "):"Select members"}),ss==="edit-task-assignees"&&r.jsxs("div",{className:"member-select-dropdown",children:[It(ve).map(i=>{var u,f;const c=Zs.includes(i.userId);return r.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const g=c?Zs.filter(y=>y!==i.userId):Zs.concat(i.userId);bf(g)},children:((u=i.user)==null?void 0:u.name)||((f=i.user)==null?void 0:f.email)||i.userId},i.userId)}),It(ve).length===0&&r.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description"}),r.jsxs("div",{className:"rich-editor",children:[r.jsxs("div",{className:"rich-toolbar",children:[r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("bold"),children:"B"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("italic"),children:"I"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("underline"),children:"U"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("insertUnorderedList"),children:" List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("insertOrderedList"),children:"1. List"}),r.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>wn("createLink"),children:"Link"})]}),r.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:kf,onInput:i=>Zo({...Qt,description:i.currentTarget.innerHTML}),onPaste:_x,"data-placeholder":"Optional details..."})]})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Art"}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[r.jsx("input",{type:"text",value:$y,onChange:i=>ru(i.target.value),onKeyDown:i=>Hx(i,"edit"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),r.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Fx,children:"Add"})]}),tl.length>0&&r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:tl.map(i=>r.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>zx(i,su),children:""})]},i))})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Priority"}),r.jsxs("select",{value:Qt.priority,onChange:i=>Zo({...Qt,priority:i.target.value}),children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"MEDIUM",children:"Medium"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Deadline"}),r.jsx("input",{type:"date",value:Qt.dueDate,onChange:i=>Zo({...Qt,dueDate:i.target.value})})]})]}),r.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[r.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Files"}),r.jsx("input",{type:"file",multiple:!0,onChange:i=>Jx(i.target.files)}),r.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[...Sk,...eu].map(i=>r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),r.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[r.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),r.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>z_(i.id),children:"Remove"})]})]},i.id))})]})]})]}),r.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:r.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})})})]})]})})]}):r.jsx("div",{style:{padding:"2rem"},children:"SQOPUS wird geladen ..."}):r.jsx("div",{className:"auth-screen",children:r.jsxs("div",{className:"auth-card",children:[r.jsxs("div",{className:"auth-header",children:[r.jsx("h1",{children:"Kanbax"}),r.jsx("p",{children:"Sign in to manage your tasks, huddles, and work."})]}),r.jsxs("div",{className:"auth-tabs",children:[r.jsx("button",{className:Vs==="login"?"auth-tab active":"auth-tab",onClick:()=>_h("login"),children:"Login"}),r.jsx("button",{className:Vs==="signup"?"auth-tab active":"auth-tab",onClick:()=>_h("signup"),children:"Sign up"}),r.jsx("button",{className:Vs==="magic"?"auth-tab active":"auth-tab",onClick:()=>_h("magic"),children:"Magic link"})]}),r.jsxs("form",{className:"auth-form",onSubmit:S_,children:[r.jsxs("label",{children:["Email",r.jsx("input",{type:"email",value:xc,onChange:i=>XN(i.target.value),placeholder:"you@company.com",required:!0})]}),Vs!=="magic"&&r.jsxs("label",{children:["Password",r.jsx("input",{type:"password",value:Eh,onChange:i=>YN(i.target.value),placeholder:"",required:!0})]}),r.jsx("button",{className:"btn btn-primary",type:"submit",disabled:ZN,children:Vs==="signup"?"Create account":Vs==="magic"?"Send magic link":"Sign in"}),Dv&&r.jsx("div",{className:"auth-message",children:Dv}),Rv&&r.jsx("div",{className:"auth-error",children:Rv})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or"})}),r.jsxs("div",{className:"auth-oauth",children:[r.jsx("button",{className:"btn btn-secondary",onClick:()=>Ex("google"),children:"Continue with Google"}),r.jsx("button",{className:"btn btn-secondary",onClick:()=>Ex("github"),children:"Continue with GitHub"})]})]})})},BA={de:{"inbox.title":"Inbox","inbox.incoming":"Eingang","inbox.empty.title":"Inbox Zero","inbox.empty.text":"Keine ungeplanten Aufgaben gerade.","inbox.intro.line1":"Incoming  Entscheiden  Einordnen.","inbox.intro.line2":"Keine Task-Management-Hlle.","inbox.tooltip.info":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.action.addScope":"Zum Scope hinzufgen","inbox.action.later":"Spter","inbox.action.archive":"Archivieren","inbox.action.addScopeTooltip":"Zum Scope hinzufgen","inbox.action.laterTooltip":"Spter bearbeiten","inbox.action.archiveTooltip":"Archivieren","inbox.action.backTooltip":"Zurck zum Eingang","inbox.action.backToInbox":"Zum Eingang","inbox.action.moveToInbox":"Zum Eingang","inbox.action.moveToInboxTooltip":"Zurck in den Eingang","inbox.meta.owner":"Owner","inbox.action.moved":"In Scope verschoben ","inbox.view.incoming":"Eingang","inbox.view.later":"Spter","inbox.view.review":"Bearbeitet","inbox.view.archived":"Archiviert","inbox.tooltip.incoming":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.tooltip.worked":"Wurde bereist verarbeitet","inbox.tooltip.review":"Zur spteren berprfung","inbox.tooltip.archived":"Archivierte Items","inbox.capture.title":"Inbox Item erfassen","inbox.capture.subtitle":"Fge eingehende Arbeit hinzu, bevor du sortierst.","inbox.field.title":"Titel","inbox.field.source":"Quelle","inbox.field.action":"Vorgeschlagene Aktion","inbox.field.selectSource":"Quelle whlen","inbox.field.selectAction":"Aktion whlen","inbox.field.description":"Beschreibung","inbox.field.descriptionPlaceholder":"Kurz beschreiben, worum es geht","inbox.tooltip.create":"Inbox Item erstellen","inbox.tooltip.save":"Speichern","inbox.source.email":"Email","inbox.source.meeting":"Meeting-Notiz","inbox.source.request":"Request","inbox.source.idea":"Idee","inbox.source.external":"Externe Anfrage","inbox.action.thisWeek":"Diese Woche","inbox.action.nextWeek":"Nchste Woche","priority.high":"Hoch","priority.medium":"Mittel","priority.low":"Niedrig","priority.critical":"Kritisch","task.field.priority":"Prioritt"}},hg="de",UA=m.createContext({locale:hg,setLocale:()=>null}),FA=({children:e})=>{const[t,n]=m.useState(hg),s=m.useMemo(()=>BA[t],[t]);return r.jsx(UA.Provider,{value:{locale:t,setLocale:n},children:r.jsx(Zm,{locale:t,messages:s,defaultLocale:hg,children:e})})};nm.createRoot(document.getElementById("root")).render(r.jsx(ad.StrictMode,{children:r.jsx(FA,{children:r.jsx($A,{})})}));
