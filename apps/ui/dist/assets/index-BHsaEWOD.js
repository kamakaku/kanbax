var rS=Object.defineProperty;var sS=(e,t,n)=>t in e?rS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ue=(e,t,n)=>sS(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function iS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yw={exports:{}},xu={},Zw={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),aS=Symbol.for("react.portal"),oS=Symbol.for("react.fragment"),lS=Symbol.for("react.strict_mode"),cS=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),dS=Symbol.for("react.context"),hS=Symbol.for("react.forward_ref"),fS=Symbol.for("react.suspense"),pS=Symbol.for("react.memo"),mS=Symbol.for("react.lazy"),ty=Symbol.iterator;function gS(e){return e===null||typeof e!="object"?null:(e=ty&&e[ty]||e["@@iterator"],typeof e=="function"?e:null)}var ex={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tx=Object.assign,nx={};function ua(e,t,n){this.props=e,this.context=t,this.refs=nx,this.updater=n||ex}ua.prototype.isReactComponent={};ua.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ua.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rx(){}rx.prototype=ua.prototype;function mp(e,t,n){this.props=e,this.context=t,this.refs=nx,this.updater=n||ex}var gp=mp.prototype=new rx;gp.constructor=mp;tx(gp,ua.prototype);gp.isPureReactComponent=!0;var ny=Array.isArray,sx=Object.prototype.hasOwnProperty,vp={current:null},ix={key:!0,ref:!0,__self:!0,__source:!0};function ax(e,t,n){var r,a={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)sx.call(t,r)&&!ix.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){for(var d=Array(u),f=0;f<u;f++)d[f]=arguments[f+2];a.children=d}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)a[r]===void 0&&(a[r]=u[r]);return{$$typeof:sl,type:e,key:o,ref:l,props:a,_owner:vp.current}}function vS(e,t){return{$$typeof:sl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yp(e){return typeof e=="object"&&e!==null&&e.$$typeof===sl}function yS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ry=/\/+/g;function wh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yS(""+e.key):t.toString(36)}function Oc(e,t,n,r,a){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case sl:case aS:l=!0}}if(l)return l=e,a=a(l),e=r===""?"."+wh(l,0):r,ny(a)?(n="",e!=null&&(n=e.replace(ry,"$&/")+"/"),Oc(a,t,n,"",function(f){return f})):a!=null&&(yp(a)&&(a=vS(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(ry,"$&/")+"/")+e)),t.push(a)),1;if(l=0,r=r===""?".":r+":",ny(e))for(var u=0;u<e.length;u++){o=e[u];var d=r+wh(o,u);l+=Oc(o,t,n,d,a)}else if(d=gS(e),typeof d=="function")for(e=d.call(e),u=0;!(o=e.next()).done;)o=o.value,d=r+wh(o,u++),l+=Oc(o,t,n,d,a);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function cc(e,t,n){if(e==null)return e;var r=[],a=0;return Oc(e,r,"","",function(o){return t.call(n,o,a++)}),r}function wS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},Rc={transition:null},xS={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Rc,ReactCurrentOwner:vp};function ox(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:cc,forEach:function(e,t,n){cc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return cc(e,function(){t++}),t},toArray:function(e){return cc(e,function(t){return t})||[]},only:function(e){if(!yp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=ua;oe.Fragment=oS;oe.Profiler=cS;oe.PureComponent=mp;oe.StrictMode=lS;oe.Suspense=fS;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xS;oe.act=ox;oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=tx({},e.props),a=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=vp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)sx.call(t,d)&&!ix.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var f=0;f<d;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:sl,type:e.type,key:a,ref:o,props:r,_owner:l}};oe.createContext=function(e){return e={$$typeof:dS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uS,_context:e},e.Consumer=e};oe.createElement=ax;oe.createFactory=function(e){var t=ax.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:hS,render:e}};oe.isValidElement=yp;oe.lazy=function(e){return{$$typeof:mS,_payload:{_status:-1,_result:e},_init:wS}};oe.memo=function(e,t){return{$$typeof:pS,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=Rc.transition;Rc.transition={};try{e()}finally{Rc.transition=t}};oe.unstable_act=ox;oe.useCallback=function(e,t){return bt.current.useCallback(e,t)};oe.useContext=function(e){return bt.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};oe.useEffect=function(e,t){return bt.current.useEffect(e,t)};oe.useId=function(){return bt.current.useId()};oe.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return bt.current.useMemo(e,t)};oe.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)};oe.useRef=function(e){return bt.current.useRef(e)};oe.useState=function(e){return bt.current.useState(e)};oe.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return bt.current.useTransition()};oe.version="18.3.1";Zw.exports=oe;var g=Zw.exports;const rf=iS(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=g,jS=Symbol.for("react.element"),kS=Symbol.for("react.fragment"),SS=Object.prototype.hasOwnProperty,NS=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_S={key:!0,ref:!0,__self:!0,__source:!0};function lx(e,t,n){var r,a={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)SS.call(t,r)&&!_S.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:jS,type:e,key:o,ref:l,props:a,_owner:NS.current}}xu.Fragment=kS;xu.jsx=lx;xu.jsxs=lx;Yw.exports=xu;var s=Yw.exports,sf={},cx={exports:{}},Gt={},ux={exports:{}},dx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,ee){var q=B.length;B.push(ee);e:for(;0<q;){var xe=q-1>>>1,Be=B[xe];if(0<a(Be,ee))B[xe]=ee,B[q]=Be,q=xe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ee=B[0],q=B.pop();if(q!==ee){B[0]=q;e:for(var xe=0,Be=B.length,V=Be>>>1;xe<V;){var _n=2*(xe+1)-1,$=B[_n],un=_n+1,Qt=B[un];if(0>a($,q))un<Be&&0>a(Qt,$)?(B[xe]=Qt,B[un]=q,xe=un):(B[xe]=$,B[_n]=q,xe=_n);else if(un<Be&&0>a(Qt,q))B[xe]=Qt,B[un]=q,xe=un;else break e}}return ee}function a(B,ee){var q=B.sortIndex-ee.sortIndex;return q!==0?q:B.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,y=null,v=3,S=!1,N=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(B){for(var ee=n(f);ee!==null;){if(ee.callback===null)r(f);else if(ee.startTime<=B)r(f),ee.sortIndex=ee.expirationTime,t(d,ee);else break;ee=n(f)}}function C(B){if(_=!1,j(B),!N)if(n(d)!==null)N=!0,pa(M);else{var ee=n(f);ee!==null&&Ws(C,ee.startTime-B)}}function M(B,ee){N=!1,_&&(_=!1,k(U),U=-1),S=!0;var q=v;try{for(j(ee),y=n(d);y!==null&&(!(y.expirationTime>ee)||B&&!ct());){var xe=y.callback;if(typeof xe=="function"){y.callback=null,v=y.priorityLevel;var Be=xe(y.expirationTime<=ee);ee=e.unstable_now(),typeof Be=="function"?y.callback=Be:y===n(d)&&r(d),j(ee)}else r(d);y=n(d)}if(y!==null)var V=!0;else{var _n=n(f);_n!==null&&Ws(C,_n.startTime-ee),V=!1}return V}finally{y=null,v=q,S=!1}}var D=!1,L=null,U=-1,le=5,ne=-1;function ct(){return!(e.unstable_now()-ne<le)}function qn(){if(L!==null){var B=e.unstable_now();ne=B;var ee=!0;try{ee=L(!0,B)}finally{ee?Jn():(D=!1,L=null)}}else D=!1}var Jn;if(typeof w=="function")Jn=function(){w(qn)};else if(typeof MessageChannel<"u"){var fl=new MessageChannel,ss=fl.port2;fl.port1.onmessage=qn,Jn=function(){ss.postMessage(null)}}else Jn=function(){A(qn,0)};function pa(B){L=B,D||(D=!0,Jn())}function Ws(B,ee){U=A(function(){B(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){N||S||(N=!0,pa(M))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(B){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var q=v;v=ee;try{return B()}finally{v=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=v;v=B;try{return ee()}finally{v=q}},e.unstable_scheduleCallback=function(B,ee,q){var xe=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?xe+q:xe):q=xe,B){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=q+Be,B={id:m++,callback:ee,priorityLevel:B,startTime:q,expirationTime:Be,sortIndex:-1},q>xe?(B.sortIndex=q,t(f,B),n(d)===null&&B===n(f)&&(_?(k(U),U=-1):_=!0,Ws(C,q-xe))):(B.sortIndex=Be,t(d,B),N||S||(N=!0,pa(M))),B},e.unstable_shouldYield=ct,e.unstable_wrapCallback=function(B){var ee=v;return function(){var q=v;v=ee;try{return B.apply(this,arguments)}finally{v=q}}}})(dx);ux.exports=dx;var ES=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=g,Kt=ES;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hx=new Set,Po={};function Fs(e,t){ra(e,t),ra(e+"Capture",t)}function ra(e,t){for(Po[e]=t,e=0;e<t.length;e++)hx.add(t[e])}var hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,CS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sy={},iy={};function IS(e){return af.call(iy,e)?!0:af.call(sy,e)?!1:CS.test(e)?iy[e]=!0:(sy[e]=!0,!1)}function AS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OS(e,t,n,r){if(t===null||typeof t>"u"||AS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function jt(e,t,n,r,a,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new jt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new jt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new jt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new jt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new jt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new jt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new jt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new jt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new jt(e,5,!1,e.toLowerCase(),null,!1,!1)});var wp=/[\-:]([a-z])/g;function xp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wp,xp);lt[t]=new jt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wp,xp);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wp,xp);lt[t]=new jt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new jt(e,1,!1,e.toLowerCase(),null,!0,!0)});function bp(e,t,n,r){var a=lt.hasOwnProperty(t)?lt[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OS(t,n,a,r)&&(n=null),r||a===null?IS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gr=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uc=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),$i=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),fx=Symbol.for("react.provider"),px=Symbol.for("react.context"),kp=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),cf=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),mx=Symbol.for("react.offscreen"),ay=Symbol.iterator;function uo(e){return e===null||typeof e!="object"?null:(e=ay&&e[ay]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,xh;function wo(e){if(xh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);xh=t&&t[1]||""}return`
`+xh+e}var bh=!1;function jh(e,t){if(!e||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var a=f.stack.split(`
`),o=r.stack.split(`
`),l=a.length-1,u=o.length-1;1<=l&&0<=u&&a[l]!==o[u];)u--;for(;1<=l&&0<=u;l--,u--)if(a[l]!==o[u]){if(l!==1||u!==1)do if(l--,u--,0>u||a[l]!==o[u]){var d=`
`+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=u);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wo(e):""}function RS(e){switch(e.tag){case 5:return wo(e.type);case 16:return wo("Lazy");case 13:return wo("Suspense");case 19:return wo("SuspenseList");case 0:case 2:case 15:return e=jh(e.type,!1),e;case 11:return e=jh(e.type.render,!1),e;case 1:return e=jh(e.type,!0),e;default:return""}}function uf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $i:return"Fragment";case Mi:return"Portal";case of:return"Profiler";case jp:return"StrictMode";case lf:return"Suspense";case cf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case px:return(e.displayName||"Context")+".Consumer";case fx:return(e._context.displayName||"Context")+".Provider";case kp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sp:return t=e.displayName||null,t!==null?t:uf(e.type)||"Memo";case Pr:t=e._payload,e=e._init;try{return uf(e(t))}catch{}}return null}function DS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uf(t);case 8:return t===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PS(e){var t=gx(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dc(e){e._valueTracker||(e._valueTracker=PS(e))}function vx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=gx(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Wc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function df(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function oy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Xr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yx(e,t){t=t.checked,t!=null&&bp(e,"checked",t,!1)}function hf(e,t){yx(e,t);var n=Xr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ff(e,t.type,n):t.hasOwnProperty("defaultValue")&&ff(e,t.type,Xr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ly(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ff(e,t,n){(t!=="number"||Wc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xo=Array.isArray;function Qi(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Xr(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function pf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(P(92));if(xo(n)){if(1<n.length)throw Error(P(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xr(n)}}function wx(e,t){var n=Xr(t.value),r=Xr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function uy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hc,bx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hc=hc||document.createElement("div"),hc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LS=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(e){LS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),So[t]=So[e]})});function jx(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||So.hasOwnProperty(e)&&So[e]?(""+t).trim():t+"px"}function kx(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=jx(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var MS=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gf(e,t){if(t){if(MS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function vf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Np(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wf=null,Xi=null,Yi=null;function dy(e){if(e=ol(e)){if(typeof wf!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Nu(t),wf(e.stateNode,e.type,t))}}function Sx(e){Xi?Yi?Yi.push(e):Yi=[e]:Xi=e}function Nx(){if(Xi){var e=Xi,t=Yi;if(Yi=Xi=null,dy(e),t)for(e=0;e<t.length;e++)dy(t[e])}}function _x(e,t){return e(t)}function Ex(){}var kh=!1;function Tx(e,t,n){if(kh)return e(t,n);kh=!0;try{return _x(e,t,n)}finally{kh=!1,(Xi!==null||Yi!==null)&&(Ex(),Nx())}}function Mo(e,t){var n=e.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(P(231,t,typeof n));return n}var xf=!1;if(hr)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){xf=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{xf=!1}function $S(e,t,n,r,a,o,l,u,d){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(m){this.onError(m)}}var No=!1,Kc=null,Gc=!1,bf=null,US={onError:function(e){No=!0,Kc=e}};function BS(e,t,n,r,a,o,l,u,d){No=!1,Kc=null,$S.apply(US,arguments)}function HS(e,t,n,r,a,o,l,u,d){if(BS.apply(this,arguments),No){if(No){var f=Kc;No=!1,Kc=null}else throw Error(P(198));Gc||(Gc=!0,bf=f)}}function zs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Cx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hy(e){if(zs(e)!==e)throw Error(P(188))}function FS(e){var t=e.alternate;if(!t){if(t=zs(e),t===null)throw Error(P(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var o=a.alternate;if(o===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return hy(a),e;if(o===r)return hy(a),t;o=o.sibling}throw Error(P(188))}if(n.return!==r.return)n=a,r=o;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?e:t}function Ix(e){return e=FS(e),e!==null?Ax(e):null}function Ax(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ax(e);if(t!==null)return t;e=e.sibling}return null}var Ox=Kt.unstable_scheduleCallback,fy=Kt.unstable_cancelCallback,zS=Kt.unstable_shouldYield,VS=Kt.unstable_requestPaint,Fe=Kt.unstable_now,WS=Kt.unstable_getCurrentPriorityLevel,_p=Kt.unstable_ImmediatePriority,Rx=Kt.unstable_UserBlockingPriority,qc=Kt.unstable_NormalPriority,KS=Kt.unstable_LowPriority,Dx=Kt.unstable_IdlePriority,bu=null,Kn=null;function GS(e){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(bu,e,void 0,(e.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:QS,qS=Math.log,JS=Math.LN2;function QS(e){return e>>>=0,e===0?32:31-(qS(e)/JS|0)|0}var fc=64,pc=4194304;function bo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Jc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~a;u!==0?r=bo(u):(o&=l,o!==0&&(r=bo(o)))}else l=n&~a,l!==0?r=bo(l):o!==0&&(r=bo(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,o=t&-t,a>=o||a===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-kn(t),a=1<<n,r|=e[n],t&=~a;return r}function XS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YS(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-kn(o),u=1<<l,d=a[l];d===-1?(!(u&n)||u&r)&&(a[l]=XS(u,t)):d<=t&&(e.expiredLanes|=u),o&=~u}}function jf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Px(){var e=fc;return fc<<=1,!(fc&4194240)&&(fc=64),e}function Sh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function il(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kn(t),e[t]=n}function ZS(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-kn(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}function Ep(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var ye=0;function Lx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Mx,Tp,$x,Ux,Bx,kf=!1,mc=[],zr=null,Vr=null,Wr=null,$o=new Map,Uo=new Map,$r=[],eN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function py(e,t){switch(e){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":$o.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(t.pointerId)}}function fo(e,t,n,r,a,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},t!==null&&(t=ol(t),t!==null&&Tp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tN(e,t,n,r,a){switch(t){case"focusin":return zr=fo(zr,e,t,n,r,a),!0;case"dragenter":return Vr=fo(Vr,e,t,n,r,a),!0;case"mouseover":return Wr=fo(Wr,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return $o.set(o,fo($o.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Uo.set(o,fo(Uo.get(o)||null,e,t,n,r,a)),!0}return!1}function Hx(e){var t=As(e.target);if(t!==null){var n=zs(t);if(n!==null){if(t=n.tag,t===13){if(t=Cx(n),t!==null){e.blockedOn=t,Bx(e.priority,function(){$x(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Sf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return t=ol(n),t!==null&&Tp(t),e.blockedOn=n,!1;t.shift()}return!0}function my(e,t,n){Dc(e)&&n.delete(t)}function nN(){kf=!1,zr!==null&&Dc(zr)&&(zr=null),Vr!==null&&Dc(Vr)&&(Vr=null),Wr!==null&&Dc(Wr)&&(Wr=null),$o.forEach(my),Uo.forEach(my)}function po(e,t){e.blockedOn===t&&(e.blockedOn=null,kf||(kf=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,nN)))}function Bo(e){function t(a){return po(a,e)}if(0<mc.length){po(mc[0],e);for(var n=1;n<mc.length;n++){var r=mc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zr!==null&&po(zr,e),Vr!==null&&po(Vr,e),Wr!==null&&po(Wr,e),$o.forEach(t),Uo.forEach(t),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)Hx(n),n.blockedOn===null&&$r.shift()}var Zi=gr.ReactCurrentBatchConfig,Qc=!0;function rN(e,t,n,r){var a=ye,o=Zi.transition;Zi.transition=null;try{ye=1,Cp(e,t,n,r)}finally{ye=a,Zi.transition=o}}function sN(e,t,n,r){var a=ye,o=Zi.transition;Zi.transition=null;try{ye=4,Cp(e,t,n,r)}finally{ye=a,Zi.transition=o}}function Cp(e,t,n,r){if(Qc){var a=Sf(e,t,n,r);if(a===null)Dh(e,t,r,Xc,n),py(e,r);else if(tN(a,e,t,n,r))r.stopPropagation();else if(py(e,r),t&4&&-1<eN.indexOf(e)){for(;a!==null;){var o=ol(a);if(o!==null&&Mx(o),o=Sf(e,t,n,r),o===null&&Dh(e,t,r,Xc,n),o===a)break;a=o}a!==null&&r.stopPropagation()}else Dh(e,t,r,null,n)}}var Xc=null;function Sf(e,t,n,r){if(Xc=null,e=Np(r),e=As(e),e!==null)if(t=zs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Cx(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xc=e,null}function Fx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WS()){case _p:return 1;case Rx:return 4;case qc:case KS:return 16;case Dx:return 536870912;default:return 16}default:return 16}}var Hr=null,Ip=null,Pc=null;function zx(){if(Pc)return Pc;var e,t=Ip,n=t.length,r,a="value"in Hr?Hr.value:Hr.textContent,o=a.length;for(e=0;e<n&&t[e]===a[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===a[o-r];r++);return Pc=a.slice(e,1<r?1-r:void 0)}function Lc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gc(){return!0}function gy(){return!1}function qt(e){function t(n,r,a,o,l){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gc:gy,this.isPropagationStopped=gy,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gc)},persist:function(){},isPersistent:gc}),t}var da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ap=qt(da),al=Me({},da,{view:0,detail:0}),iN=qt(al),Nh,_h,mo,ju=Me({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Op,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mo&&(mo&&e.type==="mousemove"?(Nh=e.screenX-mo.screenX,_h=e.screenY-mo.screenY):_h=Nh=0,mo=e),Nh)},movementY:function(e){return"movementY"in e?e.movementY:_h}}),vy=qt(ju),aN=Me({},ju,{dataTransfer:0}),oN=qt(aN),lN=Me({},al,{relatedTarget:0}),Eh=qt(lN),cN=Me({},da,{animationName:0,elapsedTime:0,pseudoElement:0}),uN=qt(cN),dN=Me({},da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hN=qt(dN),fN=Me({},da,{data:0}),yy=qt(fN),pN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gN[e])?!!t[e]:!1}function Op(){return vN}var yN=Me({},al,{key:function(e){if(e.key){var t=pN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Op,charCode:function(e){return e.type==="keypress"?Lc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wN=qt(yN),xN=Me({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=qt(xN),bN=Me({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Op}),jN=qt(bN),kN=Me({},da,{propertyName:0,elapsedTime:0,pseudoElement:0}),SN=qt(kN),NN=Me({},ju,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_N=qt(NN),EN=[9,13,27,32],Rp=hr&&"CompositionEvent"in window,_o=null;hr&&"documentMode"in document&&(_o=document.documentMode);var TN=hr&&"TextEvent"in window&&!_o,Vx=hr&&(!Rp||_o&&8<_o&&11>=_o),xy=" ",by=!1;function Wx(e,t){switch(e){case"keyup":return EN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ui=!1;function CN(e,t){switch(e){case"compositionend":return Kx(t);case"keypress":return t.which!==32?null:(by=!0,xy);case"textInput":return e=t.data,e===xy&&by?null:e;default:return null}}function IN(e,t){if(Ui)return e==="compositionend"||!Rp&&Wx(e,t)?(e=zx(),Pc=Ip=Hr=null,Ui=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vx&&t.locale!=="ko"?null:t.data;default:return null}}var AN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AN[e.type]:t==="textarea"}function Gx(e,t,n,r){Sx(r),t=Yc(t,"onChange"),0<t.length&&(n=new Ap("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Eo=null,Ho=null;function ON(e){sb(e,0)}function ku(e){var t=Fi(e);if(vx(t))return e}function RN(e,t){if(e==="change")return t}var qx=!1;if(hr){var Th;if(hr){var Ch="oninput"in document;if(!Ch){var ky=document.createElement("div");ky.setAttribute("oninput","return;"),Ch=typeof ky.oninput=="function"}Th=Ch}else Th=!1;qx=Th&&(!document.documentMode||9<document.documentMode)}function Sy(){Eo&&(Eo.detachEvent("onpropertychange",Jx),Ho=Eo=null)}function Jx(e){if(e.propertyName==="value"&&ku(Ho)){var t=[];Gx(t,Ho,e,Np(e)),Tx(ON,t)}}function DN(e,t,n){e==="focusin"?(Sy(),Eo=t,Ho=n,Eo.attachEvent("onpropertychange",Jx)):e==="focusout"&&Sy()}function PN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ku(Ho)}function LN(e,t){if(e==="click")return ku(t)}function MN(e,t){if(e==="input"||e==="change")return ku(t)}function $N(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nn=typeof Object.is=="function"?Object.is:$N;function Fo(e,t){if(Nn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!af.call(t,a)||!Nn(e[a],t[a]))return!1}return!0}function Ny(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _y(e,t){var n=Ny(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function Qx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xx(){for(var e=window,t=Wc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wc(e.document)}return t}function Dp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function UN(e){var t=Xx(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Qx(n.ownerDocument.documentElement,n)){if(r!==null&&Dp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=r.end===void 0?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=_y(n,o);var l=_y(n,r);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BN=hr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Nf=null,To=null,_f=!1;function Ey(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_f||Bi==null||Bi!==Wc(r)||(r=Bi,"selectionStart"in r&&Dp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),To&&Fo(To,r)||(To=r,r=Yc(Nf,"onSelect"),0<r.length&&(t=new Ap("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Bi)))}function vc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hi={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},Ih={},Yx={};hr&&(Yx=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Su(e){if(Ih[e])return Ih[e];if(!Hi[e])return e;var t=Hi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yx)return Ih[e]=t[n];return e}var Zx=Su("animationend"),eb=Su("animationiteration"),tb=Su("animationstart"),nb=Su("transitionend"),rb=new Map,Ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(e,t){rb.set(e,t),Fs(t,[e])}for(var Ah=0;Ah<Ty.length;Ah++){var Oh=Ty[Ah],HN=Oh.toLowerCase(),FN=Oh[0].toUpperCase()+Oh.slice(1);Zr(HN,"on"+FN)}Zr(Zx,"onAnimationEnd");Zr(eb,"onAnimationIteration");Zr(tb,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(nb,"onTransitionEnd");ra("onMouseEnter",["mouseout","mouseover"]);ra("onMouseLeave",["mouseout","mouseover"]);ra("onPointerEnter",["pointerout","pointerover"]);ra("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zN=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Cy(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,HS(r,t,void 0,e),e.currentTarget=null}function sb(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],d=u.instance,f=u.currentTarget;if(u=u.listener,d!==o&&a.isPropagationStopped())break e;Cy(a,u,f),o=d}else for(l=0;l<r.length;l++){if(u=r[l],d=u.instance,f=u.currentTarget,u=u.listener,d!==o&&a.isPropagationStopped())break e;Cy(a,u,f),o=d}}}if(Gc)throw e=bf,Gc=!1,bf=null,e}function _e(e,t){var n=t[Af];n===void 0&&(n=t[Af]=new Set);var r=e+"__bubble";n.has(r)||(ib(t,e,2,!1),n.add(r))}function Rh(e,t,n){var r=0;t&&(r|=4),ib(n,e,r,t)}var yc="_reactListening"+Math.random().toString(36).slice(2);function zo(e){if(!e[yc]){e[yc]=!0,hx.forEach(function(n){n!=="selectionchange"&&(zN.has(n)||Rh(n,!1,e),Rh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yc]||(t[yc]=!0,Rh("selectionchange",!1,t))}}function ib(e,t,n,r){switch(Fx(t)){case 1:var a=rN;break;case 4:a=sN;break;default:a=Cp}n=a.bind(null,t,n,e),a=void 0,!xf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Dh(e,t,n,r,a){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;l=l.return}for(;u!==null;){if(l=As(u),l===null)return;if(d=l.tag,d===5||d===6){r=o=l;continue e}u=u.parentNode}}r=r.return}Tx(function(){var f=o,m=Np(n),y=[];e:{var v=rb.get(e);if(v!==void 0){var S=Ap,N=e;switch(e){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":S=wN;break;case"focusin":N="focus",S=Eh;break;case"focusout":N="blur",S=Eh;break;case"beforeblur":case"afterblur":S=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=oN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=jN;break;case Zx:case eb:case tb:S=uN;break;case nb:S=SN;break;case"scroll":S=iN;break;case"wheel":S=_N;break;case"copy":case"cut":case"paste":S=hN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=wy}var _=(t&4)!==0,A=!_&&e==="scroll",k=_?v!==null?v+"Capture":null:v;_=[];for(var w=f,j;w!==null;){j=w;var C=j.stateNode;if(j.tag===5&&C!==null&&(j=C,k!==null&&(C=Mo(w,k),C!=null&&_.push(Vo(w,C,j)))),A)break;w=w.return}0<_.length&&(v=new S(v,N,null,n,m),y.push({event:v,listeners:_}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&n!==yf&&(N=n.relatedTarget||n.fromElement)&&(As(N)||N[fr]))break e;if((S||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,S?(N=n.relatedTarget||n.toElement,S=f,N=N?As(N):null,N!==null&&(A=zs(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(S=null,N=f),S!==N)){if(_=vy,C="onMouseLeave",k="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(_=wy,C="onPointerLeave",k="onPointerEnter",w="pointer"),A=S==null?v:Fi(S),j=N==null?v:Fi(N),v=new _(C,w+"leave",S,n,m),v.target=A,v.relatedTarget=j,C=null,As(m)===f&&(_=new _(k,w+"enter",N,n,m),_.target=j,_.relatedTarget=A,C=_),A=C,S&&N)t:{for(_=S,k=N,w=0,j=_;j;j=Ei(j))w++;for(j=0,C=k;C;C=Ei(C))j++;for(;0<w-j;)_=Ei(_),w--;for(;0<j-w;)k=Ei(k),j--;for(;w--;){if(_===k||k!==null&&_===k.alternate)break t;_=Ei(_),k=Ei(k)}_=null}else _=null;S!==null&&Iy(y,v,S,_,!1),N!==null&&A!==null&&Iy(y,A,N,_,!0)}}e:{if(v=f?Fi(f):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var M=RN;else if(jy(v))if(qx)M=MN;else{M=PN;var D=DN}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(M=LN);if(M&&(M=M(e,f))){Gx(y,M,n,m);break e}D&&D(e,v,f),e==="focusout"&&(D=v._wrapperState)&&D.controlled&&v.type==="number"&&ff(v,"number",v.value)}switch(D=f?Fi(f):window,e){case"focusin":(jy(D)||D.contentEditable==="true")&&(Bi=D,Nf=f,To=null);break;case"focusout":To=Nf=Bi=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,Ey(y,n,m);break;case"selectionchange":if(BN)break;case"keydown":case"keyup":Ey(y,n,m)}var L;if(Rp)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Ui?Wx(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(Vx&&n.locale!=="ko"&&(Ui||U!=="onCompositionStart"?U==="onCompositionEnd"&&Ui&&(L=zx()):(Hr=m,Ip="value"in Hr?Hr.value:Hr.textContent,Ui=!0)),D=Yc(f,U),0<D.length&&(U=new yy(U,e,null,n,m),y.push({event:U,listeners:D}),L?U.data=L:(L=Kx(n),L!==null&&(U.data=L)))),(L=TN?CN(e,n):IN(e,n))&&(f=Yc(f,"onBeforeInput"),0<f.length&&(m=new yy("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:f}),m.data=L))}sb(y,t)})}function Vo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yc(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Mo(e,n),o!=null&&r.unshift(Vo(e,o,a)),o=Mo(e,t),o!=null&&r.push(Vo(e,o,a))),e=e.return}return r}function Ei(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iy(e,t,n,r,a){for(var o=t._reactName,l=[];n!==null&&n!==r;){var u=n,d=u.alternate,f=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&f!==null&&(u=f,a?(d=Mo(n,o),d!=null&&l.unshift(Vo(n,d,u))):a||(d=Mo(n,o),d!=null&&l.push(Vo(n,d,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var VN=/\r\n?/g,WN=/\u0000|\uFFFD/g;function Ay(e){return(typeof e=="string"?e:""+e).replace(VN,`
`).replace(WN,"")}function wc(e,t,n){if(t=Ay(t),Ay(e)!==t&&n)throw Error(P(425))}function Zc(){}var Ef=null,Tf=null;function Cf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,KN=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,GN=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(e){return Oy.resolve(null).then(e).catch(qN)}:If;function qN(e){setTimeout(function(){throw e})}function Ph(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Bo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Bo(t)}function Kr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ry(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ha=Math.random().toString(36).slice(2),Wn="__reactFiber$"+ha,Wo="__reactProps$"+ha,fr="__reactContainer$"+ha,Af="__reactEvents$"+ha,JN="__reactListeners$"+ha,QN="__reactHandles$"+ha;function As(e){var t=e[Wn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[Wn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ry(e);e!==null;){if(n=e[Wn])return n;e=Ry(e)}return t}e=n,n=e.parentNode}return null}function ol(e){return e=e[Wn]||e[fr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Nu(e){return e[Wo]||null}var Of=[],zi=-1;function es(e){return{current:e}}function Ee(e){0>zi||(e.current=Of[zi],Of[zi]=null,zi--)}function Ne(e,t){zi++,Of[zi]=e.current,e.current=t}var Yr={},mt=es(Yr),It=es(!1),Ms=Yr;function sa(e,t){var n=e.type.contextTypes;if(!n)return Yr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in n)a[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function At(e){return e=e.childContextTypes,e!=null}function eu(){Ee(It),Ee(mt)}function Dy(e,t,n){if(mt.current!==Yr)throw Error(P(168));Ne(mt,t),Ne(It,n)}function ab(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(P(108,DS(e)||"Unknown",a));return Me({},n,r)}function tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yr,Ms=mt.current,Ne(mt,e),Ne(It,It.current),!0}function Py(e,t,n){var r=e.stateNode;if(!r)throw Error(P(169));n?(e=ab(e,t,Ms),r.__reactInternalMemoizedMergedChildContext=e,Ee(It),Ee(mt),Ne(mt,e)):Ee(It),Ne(It,n)}var lr=null,_u=!1,Lh=!1;function ob(e){lr===null?lr=[e]:lr.push(e)}function XN(e){_u=!0,ob(e)}function ts(){if(!Lh&&lr!==null){Lh=!0;var e=0,t=ye;try{var n=lr;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}lr=null,_u=!1}catch(a){throw lr!==null&&(lr=lr.slice(e+1)),Ox(_p,ts),a}finally{ye=t,Lh=!1}}return null}var Vi=[],Wi=0,nu=null,ru=0,nn=[],rn=0,$s=null,cr=1,ur="";function _s(e,t){Vi[Wi++]=ru,Vi[Wi++]=nu,nu=e,ru=t}function lb(e,t,n){nn[rn++]=cr,nn[rn++]=ur,nn[rn++]=$s,$s=e;var r=cr;e=ur;var a=32-kn(r)-1;r&=~(1<<a),n+=1;var o=32-kn(t)+a;if(30<o){var l=a-a%5;o=(r&(1<<l)-1).toString(32),r>>=l,a-=l,cr=1<<32-kn(t)+a|n<<a|r,ur=o+e}else cr=1<<o|n<<a|r,ur=e}function Pp(e){e.return!==null&&(_s(e,1),lb(e,1,0))}function Lp(e){for(;e===nu;)nu=Vi[--Wi],Vi[Wi]=null,ru=Vi[--Wi],Vi[Wi]=null;for(;e===$s;)$s=nn[--rn],nn[rn]=null,ur=nn[--rn],nn[rn]=null,cr=nn[--rn],nn[rn]=null}var Wt=null,Vt=null,Ie=!1,jn=null;function cb(e,t){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ly(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Vt=Kr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Vt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$s!==null?{id:cr,overflow:ur}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wt=e,Vt=null,!0):!1;default:return!1}}function Rf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Df(e){if(Ie){var t=Vt;if(t){var n=t;if(!Ly(e,t)){if(Rf(e))throw Error(P(418));t=Kr(n.nextSibling);var r=Wt;t&&Ly(e,t)?cb(r,n):(e.flags=e.flags&-4097|2,Ie=!1,Wt=e)}}else{if(Rf(e))throw Error(P(418));e.flags=e.flags&-4097|2,Ie=!1,Wt=e}}}function My(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function xc(e){if(e!==Wt)return!1;if(!Ie)return My(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cf(e.type,e.memoizedProps)),t&&(t=Vt)){if(Rf(e))throw ub(),Error(P(418));for(;t;)cb(e,t),t=Kr(t.nextSibling)}if(My(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vt=Kr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vt=null}}else Vt=Wt?Kr(e.stateNode.nextSibling):null;return!0}function ub(){for(var e=Vt;e;)e=Kr(e.nextSibling)}function ia(){Vt=Wt=null,Ie=!1}function Mp(e){jn===null?jn=[e]:jn.push(e)}var YN=gr.ReactCurrentBatchConfig;function go(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,e));var a=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var u=a.refs;l===null?delete u[o]:u[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,e))}return e}function bc(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $y(e){var t=e._init;return t(e._payload)}function db(e){function t(k,w){if(e){var j=k.deletions;j===null?(k.deletions=[w],k.flags|=16):j.push(w)}}function n(k,w){if(!e)return null;for(;w!==null;)t(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function a(k,w){return k=Qr(k,w),k.index=0,k.sibling=null,k}function o(k,w,j){return k.index=j,e?(j=k.alternate,j!==null?(j=j.index,j<w?(k.flags|=2,w):j):(k.flags|=2,w)):(k.flags|=1048576,w)}function l(k){return e&&k.alternate===null&&(k.flags|=2),k}function u(k,w,j,C){return w===null||w.tag!==6?(w=zh(j,k.mode,C),w.return=k,w):(w=a(w,j),w.return=k,w)}function d(k,w,j,C){var M=j.type;return M===$i?m(k,w,j.props.children,C,j.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pr&&$y(M)===w.type)?(C=a(w,j.props),C.ref=go(k,w,j),C.return=k,C):(C=zc(j.type,j.key,j.props,null,k.mode,C),C.ref=go(k,w,j),C.return=k,C)}function f(k,w,j,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=Vh(j,k.mode,C),w.return=k,w):(w=a(w,j.children||[]),w.return=k,w)}function m(k,w,j,C,M){return w===null||w.tag!==7?(w=Ls(j,k.mode,C,M),w.return=k,w):(w=a(w,j),w.return=k,w)}function y(k,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=zh(""+w,k.mode,j),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uc:return j=zc(w.type,w.key,w.props,null,k.mode,j),j.ref=go(k,null,w),j.return=k,j;case Mi:return w=Vh(w,k.mode,j),w.return=k,w;case Pr:var C=w._init;return y(k,C(w._payload),j)}if(xo(w)||uo(w))return w=Ls(w,k.mode,j,null),w.return=k,w;bc(k,w)}return null}function v(k,w,j,C){var M=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return M!==null?null:u(k,w,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case uc:return j.key===M?d(k,w,j,C):null;case Mi:return j.key===M?f(k,w,j,C):null;case Pr:return M=j._init,v(k,w,M(j._payload),C)}if(xo(j)||uo(j))return M!==null?null:m(k,w,j,C,null);bc(k,j)}return null}function S(k,w,j,C,M){if(typeof C=="string"&&C!==""||typeof C=="number")return k=k.get(j)||null,u(w,k,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case uc:return k=k.get(C.key===null?j:C.key)||null,d(w,k,C,M);case Mi:return k=k.get(C.key===null?j:C.key)||null,f(w,k,C,M);case Pr:var D=C._init;return S(k,w,j,D(C._payload),M)}if(xo(C)||uo(C))return k=k.get(j)||null,m(w,k,C,M,null);bc(w,C)}return null}function N(k,w,j,C){for(var M=null,D=null,L=w,U=w=0,le=null;L!==null&&U<j.length;U++){L.index>U?(le=L,L=null):le=L.sibling;var ne=v(k,L,j[U],C);if(ne===null){L===null&&(L=le);break}e&&L&&ne.alternate===null&&t(k,L),w=o(ne,w,U),D===null?M=ne:D.sibling=ne,D=ne,L=le}if(U===j.length)return n(k,L),Ie&&_s(k,U),M;if(L===null){for(;U<j.length;U++)L=y(k,j[U],C),L!==null&&(w=o(L,w,U),D===null?M=L:D.sibling=L,D=L);return Ie&&_s(k,U),M}for(L=r(k,L);U<j.length;U++)le=S(L,k,U,j[U],C),le!==null&&(e&&le.alternate!==null&&L.delete(le.key===null?U:le.key),w=o(le,w,U),D===null?M=le:D.sibling=le,D=le);return e&&L.forEach(function(ct){return t(k,ct)}),Ie&&_s(k,U),M}function _(k,w,j,C){var M=uo(j);if(typeof M!="function")throw Error(P(150));if(j=M.call(j),j==null)throw Error(P(151));for(var D=M=null,L=w,U=w=0,le=null,ne=j.next();L!==null&&!ne.done;U++,ne=j.next()){L.index>U?(le=L,L=null):le=L.sibling;var ct=v(k,L,ne.value,C);if(ct===null){L===null&&(L=le);break}e&&L&&ct.alternate===null&&t(k,L),w=o(ct,w,U),D===null?M=ct:D.sibling=ct,D=ct,L=le}if(ne.done)return n(k,L),Ie&&_s(k,U),M;if(L===null){for(;!ne.done;U++,ne=j.next())ne=y(k,ne.value,C),ne!==null&&(w=o(ne,w,U),D===null?M=ne:D.sibling=ne,D=ne);return Ie&&_s(k,U),M}for(L=r(k,L);!ne.done;U++,ne=j.next())ne=S(L,k,U,ne.value,C),ne!==null&&(e&&ne.alternate!==null&&L.delete(ne.key===null?U:ne.key),w=o(ne,w,U),D===null?M=ne:D.sibling=ne,D=ne);return e&&L.forEach(function(qn){return t(k,qn)}),Ie&&_s(k,U),M}function A(k,w,j,C){if(typeof j=="object"&&j!==null&&j.type===$i&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case uc:e:{for(var M=j.key,D=w;D!==null;){if(D.key===M){if(M=j.type,M===$i){if(D.tag===7){n(k,D.sibling),w=a(D,j.props.children),w.return=k,k=w;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Pr&&$y(M)===D.type){n(k,D.sibling),w=a(D,j.props),w.ref=go(k,D,j),w.return=k,k=w;break e}n(k,D);break}else t(k,D);D=D.sibling}j.type===$i?(w=Ls(j.props.children,k.mode,C,j.key),w.return=k,k=w):(C=zc(j.type,j.key,j.props,null,k.mode,C),C.ref=go(k,w,j),C.return=k,k=C)}return l(k);case Mi:e:{for(D=j.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(k,w.sibling),w=a(w,j.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else t(k,w);w=w.sibling}w=Vh(j,k.mode,C),w.return=k,k=w}return l(k);case Pr:return D=j._init,A(k,w,D(j._payload),C)}if(xo(j))return N(k,w,j,C);if(uo(j))return _(k,w,j,C);bc(k,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(k,w.sibling),w=a(w,j),w.return=k,k=w):(n(k,w),w=zh(j,k.mode,C),w.return=k,k=w),l(k)):n(k,w)}return A}var aa=db(!0),hb=db(!1),su=es(null),iu=null,Ki=null,$p=null;function Up(){$p=Ki=iu=null}function Bp(e){var t=su.current;Ee(su),e._currentValue=t}function Pf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ea(e,t){iu=e,$p=Ki=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function on(e){var t=e._currentValue;if($p!==e)if(e={context:e,memoizedValue:t,next:null},Ki===null){if(iu===null)throw Error(P(308));Ki=e,iu.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var Os=null;function Hp(e){Os===null?Os=[e]:Os.push(e)}function fb(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,Hp(t)):(n.next=a.next,a.next=n),t.interleaved=n,pr(e,r)}function pr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Lr=!1;function Fp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,pr(e,n)}return a=r.interleaved,a===null?(t.next=t,Hp(r)):(t.next=a.next,a.next=t),r.interleaved=t,pr(e,n)}function Mc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ep(e,n)}}function Uy(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?a=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?a=o=t:o=o.next=t}else a=o=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function au(e,t,n,r){var a=e.updateQueue;Lr=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var d=u,f=d.next;d.next=null,l===null?o=f:l.next=f,l=d;var m=e.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==l&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=d))}if(o!==null){var y=a.baseState;l=0,m=f=d=null,u=o;do{var v=u.lane,S=u.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:S,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,_=u;switch(v=t,S=n,_.tag){case 1:if(N=_.payload,typeof N=="function"){y=N.call(S,y,v);break e}y=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=_.payload,v=typeof N=="function"?N.call(S,y,v):N,v==null)break e;y=Me({},y,v);break e;case 2:Lr=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[u]:v.push(u))}else S={eventTime:S,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=S,d=y):m=m.next=S,l|=v;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;v=u,u=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(m===null&&(d=y),a.baseState=d,a.firstBaseUpdate=f,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else o===null&&(a.shared.lanes=0);Bs|=l,e.lanes=l,e.memoizedState=y}}function By(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(P(191,a));a.call(r)}}}var ll={},Gn=es(ll),Ko=es(ll),Go=es(ll);function Rs(e){if(e===ll)throw Error(P(174));return e}function zp(e,t){switch(Ne(Go,t),Ne(Ko,e),Ne(Gn,ll),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mf(t,e)}Ee(Gn),Ne(Gn,t)}function oa(){Ee(Gn),Ee(Ko),Ee(Go)}function mb(e){Rs(Go.current);var t=Rs(Gn.current),n=mf(t,e.type);t!==n&&(Ne(Ko,e),Ne(Gn,n))}function Vp(e){Ko.current===e&&(Ee(Gn),Ee(Ko))}var Pe=es(0);function ou(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Mh=[];function Wp(){for(var e=0;e<Mh.length;e++)Mh[e]._workInProgressVersionPrimary=null;Mh.length=0}var $c=gr.ReactCurrentDispatcher,$h=gr.ReactCurrentBatchConfig,Us=0,Le=null,Qe=null,Ye=null,lu=!1,Co=!1,qo=0,ZN=0;function ht(){throw Error(P(321))}function Kp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nn(e[n],t[n]))return!1;return!0}function Gp(e,t,n,r,a,o){if(Us=o,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$c.current=e===null||e.memoizedState===null?r_:s_,e=n(r,a),Co){o=0;do{if(Co=!1,qo=0,25<=o)throw Error(P(301));o+=1,Ye=Qe=null,t.updateQueue=null,$c.current=i_,e=n(r,a)}while(Co)}if($c.current=cu,t=Qe!==null&&Qe.next!==null,Us=0,Ye=Qe=Le=null,lu=!1,t)throw Error(P(300));return e}function qp(){var e=qo!==0;return qo=0,e}function Fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Le.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function ln(){if(Qe===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=Ye===null?Le.memoizedState:Ye.next;if(t!==null)Ye=t,Qe=e;else{if(e===null)throw Error(P(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Ye===null?Le.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Jo(e,t){return typeof t=="function"?t(e):t}function Uh(e){var t=ln(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=Qe,a=r.baseQueue,o=n.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}r.baseQueue=a=o,n.pending=null}if(a!==null){o=a.next,r=r.baseState;var u=l=null,d=null,f=o;do{var m=f.lane;if((Us&m)===m)d!==null&&(d=d.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var y={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};d===null?(u=d=y,l=r):d=d.next=y,Le.lanes|=m,Bs|=m}f=f.next}while(f!==null&&f!==o);d===null?l=r:d.next=u,Nn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do o=a.lane,Le.lanes|=o,Bs|=o,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bh(e){var t=ln(),n=t.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var l=a=a.next;do o=e(o,l.action),l=l.next;while(l!==a);Nn(o,t.memoizedState)||(Ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function gb(){}function vb(e,t){var n=Le,r=ln(),a=t(),o=!Nn(r.memoizedState,a);if(o&&(r.memoizedState=a,Ct=!0),r=r.queue,Jp(xb.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Qo(9,wb.bind(null,n,r,a,t),void 0,null),Ze===null)throw Error(P(349));Us&30||yb(n,t,a)}return a}function yb(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wb(e,t,n,r){t.value=n,t.getSnapshot=r,bb(t)&&jb(e)}function xb(e,t,n){return n(function(){bb(t)&&jb(e)})}function bb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nn(e,n)}catch{return!0}}function jb(e){var t=pr(e,1);t!==null&&Sn(t,e,1,-1)}function Hy(e){var t=Fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:e},t.queue=e,e=e.dispatch=n_.bind(null,Le,e),[t.memoizedState,e]}function Qo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function kb(){return ln().memoizedState}function Uc(e,t,n,r){var a=Fn();Le.flags|=e,a.memoizedState=Qo(1|t,n,void 0,r===void 0?null:r)}function Eu(e,t,n,r){var a=ln();r=r===void 0?null:r;var o=void 0;if(Qe!==null){var l=Qe.memoizedState;if(o=l.destroy,r!==null&&Kp(r,l.deps)){a.memoizedState=Qo(t,n,o,r);return}}Le.flags|=e,a.memoizedState=Qo(1|t,n,o,r)}function Fy(e,t){return Uc(8390656,8,e,t)}function Jp(e,t){return Eu(2048,8,e,t)}function Sb(e,t){return Eu(4,2,e,t)}function Nb(e,t){return Eu(4,4,e,t)}function _b(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Eb(e,t,n){return n=n!=null?n.concat([e]):null,Eu(4,4,_b.bind(null,t,e),n)}function Qp(){}function Tb(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Kp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Cb(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Kp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ib(e,t,n){return Us&21?(Nn(n,t)||(n=Px(),Le.lanes|=n,Bs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function e_(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=$h.transition;$h.transition={};try{e(!1),t()}finally{ye=n,$h.transition=r}}function Ab(){return ln().memoizedState}function t_(e,t,n){var r=Jr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ob(e))Rb(t,n);else if(n=fb(e,t,n,r),n!==null){var a=xt();Sn(n,e,r,a),Db(n,t,r)}}function n_(e,t,n){var r=Jr(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ob(e))Rb(t,a);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,u=o(l,n);if(a.hasEagerState=!0,a.eagerState=u,Nn(u,l)){var d=t.interleaved;d===null?(a.next=a,Hp(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}n=fb(e,t,a,r),n!==null&&(a=xt(),Sn(n,e,r,a),Db(n,t,r))}}function Ob(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Rb(e,t){Co=lu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Db(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ep(e,n)}}var cu={readContext:on,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},r_={readContext:on,useCallback:function(e,t){return Fn().memoizedState=[e,t===void 0?null:t],e},useContext:on,useEffect:Fy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Uc(4194308,4,_b.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uc(4,2,e,t)},useMemo:function(e,t){var n=Fn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=t_.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=Fn();return e={current:e},t.memoizedState=e},useState:Hy,useDebugValue:Qp,useDeferredValue:function(e){return Fn().memoizedState=e},useTransition:function(){var e=Hy(!1),t=e[0];return e=e_.bind(null,e[1]),Fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,a=Fn();if(Ie){if(n===void 0)throw Error(P(407));n=n()}else{if(n=t(),Ze===null)throw Error(P(349));Us&30||yb(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Fy(xb.bind(null,r,o,e),[e]),r.flags|=2048,Qo(9,wb.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Fn(),t=Ze.identifierPrefix;if(Ie){var n=ur,r=cr;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ZN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},s_={readContext:on,useCallback:Tb,useContext:on,useEffect:Jp,useImperativeHandle:Eb,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Cb,useReducer:Uh,useRef:kb,useState:function(){return Uh(Jo)},useDebugValue:Qp,useDeferredValue:function(e){var t=ln();return Ib(t,Qe.memoizedState,e)},useTransition:function(){var e=Uh(Jo)[0],t=ln().memoizedState;return[e,t]},useMutableSource:gb,useSyncExternalStore:vb,useId:Ab,unstable_isNewReconciler:!1},i_={readContext:on,useCallback:Tb,useContext:on,useEffect:Jp,useImperativeHandle:Eb,useInsertionEffect:Sb,useLayoutEffect:Nb,useMemo:Cb,useReducer:Bh,useRef:kb,useState:function(){return Bh(Jo)},useDebugValue:Qp,useDeferredValue:function(e){var t=ln();return Qe===null?t.memoizedState=e:Ib(t,Qe.memoizedState,e)},useTransition:function(){var e=Bh(Jo)[0],t=ln().memoizedState;return[e,t]},useMutableSource:gb,useSyncExternalStore:vb,useId:Ab,unstable_isNewReconciler:!1};function yn(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Lf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tu={isMounted:function(e){return(e=e._reactInternals)?zs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),a=Jr(e),o=dr(r,a);o.payload=t,n!=null&&(o.callback=n),t=Gr(e,o,a),t!==null&&(Sn(t,e,a,r),Mc(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),a=Jr(e),o=dr(r,a);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Gr(e,o,a),t!==null&&(Sn(t,e,a,r),Mc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=Jr(e),a=dr(n,r);a.tag=2,t!=null&&(a.callback=t),t=Gr(e,a,r),t!==null&&(Sn(t,e,r,n),Mc(t,e,r))}};function zy(e,t,n,r,a,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!Fo(n,r)||!Fo(a,o):!0}function Pb(e,t,n){var r=!1,a=Yr,o=t.contextType;return typeof o=="object"&&o!==null?o=on(o):(a=At(t)?Ms:mt.current,r=t.contextTypes,o=(r=r!=null)?sa(e,a):Yr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Vy(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Tu.enqueueReplaceState(t,t.state,null)}function Mf(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Fp(e);var o=t.contextType;typeof o=="object"&&o!==null?a.context=on(o):(o=At(t)?Ms:mt.current,a.context=sa(e,o)),a.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Lf(e,t,o,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Tu.enqueueReplaceState(a,a.state,null),au(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do n+=RS(r),r=r.return;while(r);var a=n}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:a,digest:null}}function Hh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $f(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var a_=typeof WeakMap=="function"?WeakMap:Map;function Lb(e,t,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){du||(du=!0,qf=r),$f(e,t)},n}function Mb(e,t,n){n=dr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){$f(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$f(e,t),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Wy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new a_;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=x_.bind(null,e,t,n),t.then(e,e))}function Ky(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gy(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dr(-1,1),t.tag=2,Gr(n,t,1))),n.lanes|=1),e)}var o_=gr.ReactCurrentOwner,Ct=!1;function wt(e,t,n,r){t.child=e===null?hb(t,null,n,r):aa(t,e.child,n,r)}function qy(e,t,n,r,a){n=n.render;var o=t.ref;return ea(t,a),r=Gp(e,t,n,r,o,a),n=qp(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mr(e,t,a)):(Ie&&n&&Pp(t),t.flags|=1,wt(e,t,r,a),t.child)}function Jy(e,t,n,r,a){if(e===null){var o=n.type;return typeof o=="function"&&!sm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,$b(e,t,o,r,a)):(e=zc(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&a)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Fo,n(l,r)&&e.ref===t.ref)return mr(e,t,a)}return t.flags|=1,e=Qr(o,r),e.ref=t.ref,e.return=t,t.child=e}function $b(e,t,n,r,a){if(e!==null){var o=e.memoizedProps;if(Fo(o,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=o,(e.lanes&a)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,mr(e,t,a)}return Uf(e,t,n,r,a)}function Ub(e,t,n){var r=t.pendingProps,a=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(qi,Ht),Ht|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(qi,Ht),Ht|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(qi,Ht),Ht|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ne(qi,Ht),Ht|=r;return wt(e,t,a,n),t.child}function Bb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Uf(e,t,n,r,a){var o=At(n)?Ms:mt.current;return o=sa(t,o),ea(t,a),n=Gp(e,t,n,r,o,a),r=qp(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,mr(e,t,a)):(Ie&&r&&Pp(t),t.flags|=1,wt(e,t,n,a),t.child)}function Qy(e,t,n,r,a){if(At(n)){var o=!0;tu(t)}else o=!1;if(ea(t,a),t.stateNode===null)Bc(e,t),Pb(t,n,r),Mf(t,n,r,a),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=on(f):(f=At(n)?Ms:mt.current,f=sa(t,f));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";y||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||d!==f)&&Vy(t,l,r,f),Lr=!1;var v=t.memoizedState;l.state=v,au(t,r,l,a),d=t.memoizedState,u!==r||v!==d||It.current||Lr?(typeof m=="function"&&(Lf(t,n,m,r),d=t.memoizedState),(u=Lr||zy(t,n,u,r,v,d,f))?(y||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=f,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,pb(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:yn(t.type,u),l.props=f,y=t.pendingProps,v=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=on(d):(d=At(n)?Ms:mt.current,d=sa(t,d));var S=n.getDerivedStateFromProps;(m=typeof S=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==y||v!==d)&&Vy(t,l,r,d),Lr=!1,v=t.memoizedState,l.state=v,au(t,r,l,a);var N=t.memoizedState;u!==y||v!==N||It.current||Lr?(typeof S=="function"&&(Lf(t,n,S,r),N=t.memoizedState),(f=Lr||zy(t,n,f,r,v,N,d)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,N,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,N,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=N),l.props=r,l.state=N,l.context=d,r=f):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return Bf(e,t,n,r,o,a)}function Bf(e,t,n,r,a,o){Bb(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return a&&Py(t,n,!1),mr(e,t,o);r=t.stateNode,o_.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=aa(t,e.child,null,o),t.child=aa(t,null,u,o)):wt(e,t,u,o),t.memoizedState=r.state,a&&Py(t,n,!0),t.child}function Hb(e){var t=e.stateNode;t.pendingContext?Dy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dy(e,t.context,!1),zp(e,t.containerInfo)}function Xy(e,t,n,r,a){return ia(),Mp(a),t.flags|=256,wt(e,t,n,r),t.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Ff(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fb(e,t,n){var r=t.pendingProps,a=Pe.current,o=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ne(Pe,a&1),e===null)return Df(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Au(l,r,0,null),e=Ls(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ff(n),t.memoizedState=Hf,e):Xp(t,l));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return l_(e,t,l,r,u,a,n);if(o){o=r.fallback,l=t.mode,a=e.child,u=a.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Qr(a,d),r.subtreeFlags=a.subtreeFlags&14680064),u!==null?o=Qr(u,o):(o=Ls(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Ff(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Hf,r}return o=e.child,e=o.sibling,r=Qr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Xp(e,t){return t=Au({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jc(e,t,n,r){return r!==null&&Mp(r),aa(t,e.child,null,n),e=Xp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function l_(e,t,n,r,a,o,l){if(n)return t.flags&256?(t.flags&=-257,r=Hh(Error(P(422))),jc(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Au({mode:"visible",children:r.children},a,0,null),o=Ls(o,a,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&aa(t,e.child,null,l),t.child.memoizedState=Ff(l),t.memoizedState=Hf,o);if(!(t.mode&1))return jc(e,t,l,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(P(419)),r=Hh(o,r,void 0),jc(e,t,l,r)}if(u=(l&e.childLanes)!==0,Ct||u){if(r=Ze,r!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,pr(e,a),Sn(r,e,a,-1))}return rm(),r=Hh(Error(P(421))),jc(e,t,l,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=b_.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,Vt=Kr(a.nextSibling),Wt=t,Ie=!0,jn=null,e!==null&&(nn[rn++]=cr,nn[rn++]=ur,nn[rn++]=$s,cr=e.id,ur=e.overflow,$s=t),t=Xp(t,r.children),t.flags|=4096,t)}function Yy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pf(e.return,t,n)}function Fh(e,t,n,r,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function zb(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(wt(e,t,r.children,n),r=Pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yy(e,n,t);else if(e.tag===19)Yy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Pe,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&ou(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Fh(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&ou(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Fh(t,!0,n,null,o);break;case"together":Fh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Bs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,n=Qr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function c_(e,t,n){switch(t.tag){case 3:Hb(t),ia();break;case 5:mb(t);break;case 1:At(t.type)&&tu(t);break;case 4:zp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ne(su,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Pe,Pe.current&1),t.flags|=128,null):n&t.child.childLanes?Fb(e,t,n):(Ne(Pe,Pe.current&1),e=mr(e,t,n),e!==null?e.sibling:null);Ne(Pe,Pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zb(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ne(Pe,Pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Ub(e,t,n)}return mr(e,t,n)}var Vb,zf,Wb,Kb;Vb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zf=function(){};Wb=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Rs(Gn.current);var o=null;switch(n){case"input":a=df(e,a),r=df(e,r),o=[];break;case"select":a=Me({},a,{value:void 0}),r=Me({},r,{value:void 0}),o=[];break;case"textarea":a=pf(e,a),r=pf(e,r),o=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zc)}gf(n,r);var l;n=null;for(f in a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&a[f]!=null)if(f==="style"){var u=a[f];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Po.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var d=r[f];if(u=a!=null?a[f]:void 0,r.hasOwnProperty(f)&&d!==u&&(d!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&u[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(f,n)),n=d;else f==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(o=o||[]).push(f,d)):f==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(f,""+d):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Po.hasOwnProperty(f)?(d!=null&&f==="onScroll"&&_e("scroll",e),o||u===d||(o=[])):(o=o||[]).push(f,d))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};Kb=function(e,t,n,r){n!==r&&(t.flags|=4)};function vo(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function u_(e,t,n){var r=t.pendingProps;switch(Lp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return At(t.type)&&eu(),ft(t),null;case 3:return r=t.stateNode,oa(),Ee(It),Ee(mt),Wp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(xc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,jn!==null&&(Xf(jn),jn=null))),zf(e,t),ft(t),null;case 5:Vp(t);var a=Rs(Go.current);if(n=t.type,e!==null&&t.stateNode!=null)Wb(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(P(166));return ft(t),null}if(e=Rs(Gn.current),xc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Wn]=t,r[Wo]=o,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(a=0;a<jo.length;a++)_e(jo[a],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":oy(r,o),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},_e("invalid",r);break;case"textarea":cy(r,o),_e("invalid",r)}gf(n,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];l==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,u,e),a=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&wc(r.textContent,u,e),a=["children",""+u]):Po.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&_e("scroll",r)}switch(n){case"input":dc(r),ly(r,o,!0);break;case"textarea":dc(r),uy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zc)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xx(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Wn]=t,e[Wo]=r,Vb(e,t,!1,!1),t.stateNode=e;e:{switch(l=vf(n,r),n){case"dialog":_e("cancel",e),_e("close",e),a=r;break;case"iframe":case"object":case"embed":_e("load",e),a=r;break;case"video":case"audio":for(a=0;a<jo.length;a++)_e(jo[a],e);a=r;break;case"source":_e("error",e),a=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),a=r;break;case"details":_e("toggle",e),a=r;break;case"input":oy(e,r),a=df(e,r),_e("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Me({},r,{value:void 0}),_e("invalid",e);break;case"textarea":cy(e,r),a=pf(e,r),_e("invalid",e);break;default:a=r}gf(n,a),u=a;for(o in u)if(u.hasOwnProperty(o)){var d=u[o];o==="style"?kx(e,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&bx(e,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Lo(e,d):typeof d=="number"&&Lo(e,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Po.hasOwnProperty(o)?d!=null&&o==="onScroll"&&_e("scroll",e):d!=null&&bp(e,o,d,l))}switch(n){case"input":dc(e),ly(e,r,!1);break;case"textarea":dc(e),uy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Xr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Qi(e,!!r.multiple,o,!1):r.defaultValue!=null&&Qi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Zc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)Kb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(P(166));if(n=Rs(Go.current),Rs(Gn.current),xc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Wn]=t,(o=r.nodeValue!==n)&&(e=Wt,e!==null))switch(e.tag){case 3:wc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&wc(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=t,t.stateNode=r}return ft(t),null;case 13:if(Ee(Pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&Vt!==null&&t.mode&1&&!(t.flags&128))ub(),ia(),t.flags|=98560,o=!1;else if(o=xc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(P(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(P(317));o[Wn]=t}else ia(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),o=!1}else jn!==null&&(Xf(jn),jn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?Xe===0&&(Xe=3):rm())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return oa(),zf(e,t),e===null&&zo(t.stateNode.containerInfo),ft(t),null;case 10:return Bp(t.type._context),ft(t),null;case 17:return At(t.type)&&eu(),ft(t),null;case 19:if(Ee(Pe),o=t.memoizedState,o===null)return ft(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)vo(o,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ou(e),l!==null){for(t.flags|=128,vo(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Pe,Pe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Fe()>ca&&(t.flags|=128,r=!0,vo(o,!1),t.lanes=4194304)}else{if(!r)if(e=ou(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ie)return ft(t),null}else 2*Fe()-o.renderingStartTime>ca&&n!==1073741824&&(t.flags|=128,r=!0,vo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Fe(),t.sibling=null,n=Pe.current,Ne(Pe,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return nm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ht&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function d_(e,t){switch(Lp(t),t.tag){case 1:return At(t.type)&&eu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oa(),Ee(It),Ee(mt),Wp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vp(t),null;case 13:if(Ee(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));ia()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Pe),null;case 4:return oa(),null;case 10:return Bp(t.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var kc=!1,pt=!1,h_=typeof WeakSet=="function"?WeakSet:Set,F=null;function Gi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Vf(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var Zy=!1;function f_(e,t){if(Ef=Qc,e=Xx(),Dp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,u=-1,d=-1,f=0,m=0,y=e,v=null;t:for(;;){for(var S;y!==n||a!==0&&y.nodeType!==3||(u=l+a),y!==o||r!==0&&y.nodeType!==3||(d=l+r),y.nodeType===3&&(l+=y.nodeValue.length),(S=y.firstChild)!==null;)v=y,y=S;for(;;){if(y===e)break t;if(v===n&&++f===a&&(u=l),v===o&&++m===r&&(d=l),(S=y.nextSibling)!==null)break;y=v,v=y.parentNode}y=S}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tf={focusedElem:e,selectionRange:n},Qc=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var _=N.memoizedProps,A=N.memoizedState,k=t.stateNode,w=k.getSnapshotBeforeUpdate(t.elementType===t.type?_:yn(t.type,_),A);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(C){Ue(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return N=Zy,Zy=!1,N}function Io(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,o!==void 0&&Vf(t,n,o)}a=a.next}while(a!==r)}}function Cu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Wf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gb(e){var t=e.alternate;t!==null&&(e.alternate=null,Gb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wn],delete t[Wo],delete t[Af],delete t[JN],delete t[QN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qb(e){return e.tag===5||e.tag===3||e.tag===4}function ew(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zc));else if(r!==4&&(e=e.child,e!==null))for(Kf(e,t,n),e=e.sibling;e!==null;)Kf(e,t,n),e=e.sibling}function Gf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Gf(e,t,n),e=e.sibling;e!==null;)Gf(e,t,n),e=e.sibling}var at=null,xn=!1;function Rr(e,t,n){for(n=n.child;n!==null;)Jb(e,t,n),n=n.sibling}function Jb(e,t,n){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:pt||Gi(n,t);case 6:var r=at,a=xn;at=null,Rr(e,t,n),at=r,xn=a,at!==null&&(xn?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(xn?(e=at,n=n.stateNode,e.nodeType===8?Ph(e.parentNode,n):e.nodeType===1&&Ph(e,n),Bo(e)):Ph(at,n.stateNode));break;case 4:r=at,a=xn,at=n.stateNode.containerInfo,xn=!0,Rr(e,t,n),at=r,xn=a;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Vf(n,t,l),a=a.next}while(a!==r)}Rr(e,t,n);break;case 1:if(!pt&&(Gi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ue(n,t,u)}Rr(e,t,n);break;case 21:Rr(e,t,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,Rr(e,t,n),pt=r):Rr(e,t,n);break;default:Rr(e,t,n)}}function tw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new h_),t.forEach(function(r){var a=j_.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:at=u.stateNode,xn=!1;break e;case 3:at=u.stateNode.containerInfo,xn=!0;break e;case 4:at=u.stateNode.containerInfo,xn=!0;break e}u=u.return}if(at===null)throw Error(P(160));Jb(o,l,a),at=null,xn=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(f){Ue(a,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qb(t,e),t=t.sibling}function Qb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(t,e),Bn(e),r&4){try{Io(3,e,e.return),Cu(3,e)}catch(_){Ue(e,e.return,_)}try{Io(5,e,e.return)}catch(_){Ue(e,e.return,_)}}break;case 1:gn(t,e),Bn(e),r&512&&n!==null&&Gi(n,n.return);break;case 5:if(gn(t,e),Bn(e),r&512&&n!==null&&Gi(n,n.return),e.flags&32){var a=e.stateNode;try{Lo(a,"")}catch(_){Ue(e,e.return,_)}}if(r&4&&(a=e.stateNode,a!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,u=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&yx(a,o),vf(u,l);var f=vf(u,o);for(l=0;l<d.length;l+=2){var m=d[l],y=d[l+1];m==="style"?kx(a,y):m==="dangerouslySetInnerHTML"?bx(a,y):m==="children"?Lo(a,y):bp(a,m,y,f)}switch(u){case"input":hf(a,o);break;case"textarea":wx(a,o);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Qi(a,!!o.multiple,S,!1):v!==!!o.multiple&&(o.defaultValue!=null?Qi(a,!!o.multiple,o.defaultValue,!0):Qi(a,!!o.multiple,o.multiple?[]:"",!1))}a[Wo]=o}catch(_){Ue(e,e.return,_)}}break;case 6:if(gn(t,e),Bn(e),r&4){if(e.stateNode===null)throw Error(P(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(_){Ue(e,e.return,_)}}break;case 3:if(gn(t,e),Bn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bo(t.containerInfo)}catch(_){Ue(e,e.return,_)}break;case 4:gn(t,e),Bn(e);break;case 13:gn(t,e),Bn(e),a=e.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(em=Fe())),r&4&&tw(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(pt=(f=pt)||m,gn(t,e),pt=f):gn(t,e),Bn(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!m&&e.mode&1)for(F=e,m=e.child;m!==null;){for(y=F=m;F!==null;){switch(v=F,S=v.child,v.tag){case 0:case 11:case 14:case 15:Io(4,v,v.return);break;case 1:Gi(v,v.return);var N=v.stateNode;if(typeof N.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(_){Ue(r,n,_)}}break;case 5:Gi(v,v.return);break;case 22:if(v.memoizedState!==null){rw(y);continue}}S!==null?(S.return=v,F=S):rw(y)}m=m.sibling}e:for(m=null,y=e;;){if(y.tag===5){if(m===null){m=y;try{a=y.stateNode,f?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=y.stateNode,d=y.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=jx("display",l))}catch(_){Ue(e,e.return,_)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=f?"":y.memoizedProps}catch(_){Ue(e,e.return,_)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:gn(t,e),Bn(e),r&4&&tw(e);break;case 21:break;default:gn(t,e),Bn(e)}}function Bn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qb(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Lo(a,""),r.flags&=-33);var o=ew(e);Gf(e,o,a);break;case 3:case 4:var l=r.stateNode.containerInfo,u=ew(e);Kf(e,u,l);break;default:throw Error(P(161))}}catch(d){Ue(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function p_(e,t,n){F=e,Xb(e)}function Xb(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var a=F,o=a.child;if(a.tag===22&&r){var l=a.memoizedState!==null||kc;if(!l){var u=a.alternate,d=u!==null&&u.memoizedState!==null||pt;u=kc;var f=pt;if(kc=l,(pt=d)&&!f)for(F=a;F!==null;)l=F,d=l.child,l.tag===22&&l.memoizedState!==null?sw(a):d!==null?(d.return=l,F=d):sw(a);for(;o!==null;)F=o,Xb(o),o=o.sibling;F=a,kc=u,pt=f}nw(e)}else a.subtreeFlags&8772&&o!==null?(o.return=a,F=o):nw(e)}}function nw(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pt||Cu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!pt)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:yn(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&By(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}By(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&Bo(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}pt||t.flags&512&&Wf(t)}catch(v){Ue(t,t.return,v)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function rw(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function sw(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Cu(4,t)}catch(d){Ue(t,n,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(d){Ue(t,a,d)}}var o=t.return;try{Wf(t)}catch(d){Ue(t,o,d)}break;case 5:var l=t.return;try{Wf(t)}catch(d){Ue(t,l,d)}}}catch(d){Ue(t,t.return,d)}if(t===e){F=null;break}var u=t.sibling;if(u!==null){u.return=t.return,F=u;break}F=t.return}}var m_=Math.ceil,uu=gr.ReactCurrentDispatcher,Yp=gr.ReactCurrentOwner,an=gr.ReactCurrentBatchConfig,ge=0,Ze=null,Ke=null,ot=0,Ht=0,qi=es(0),Xe=0,Xo=null,Bs=0,Iu=0,Zp=0,Ao=null,Tt=null,em=0,ca=1/0,ar=null,du=!1,qf=null,qr=null,Sc=!1,Fr=null,hu=0,Oo=0,Jf=null,Hc=-1,Fc=0;function xt(){return ge&6?Fe():Hc!==-1?Hc:Hc=Fe()}function Jr(e){return e.mode&1?ge&2&&ot!==0?ot&-ot:YN.transition!==null?(Fc===0&&(Fc=Px()),Fc):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Fx(e.type)),e):1}function Sn(e,t,n,r){if(50<Oo)throw Oo=0,Jf=null,Error(P(185));il(e,n,r),(!(ge&2)||e!==Ze)&&(e===Ze&&(!(ge&2)&&(Iu|=n),Xe===4&&Ur(e,ot)),Ot(e,r),n===1&&ge===0&&!(t.mode&1)&&(ca=Fe()+500,_u&&ts()))}function Ot(e,t){var n=e.callbackNode;YS(e,t);var r=Jc(e,e===Ze?ot:0);if(r===0)n!==null&&fy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fy(n),t===1)e.tag===0?XN(iw.bind(null,e)):ob(iw.bind(null,e)),GN(function(){!(ge&6)&&ts()}),n=null;else{switch(Lx(r)){case 1:n=_p;break;case 4:n=Rx;break;case 16:n=qc;break;case 536870912:n=Dx;break;default:n=qc}n=i0(n,Yb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yb(e,t){if(Hc=-1,Fc=0,ge&6)throw Error(P(327));var n=e.callbackNode;if(ta()&&e.callbackNode!==n)return null;var r=Jc(e,e===Ze?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=fu(e,r);else{t=r;var a=ge;ge|=2;var o=e0();(Ze!==e||ot!==t)&&(ar=null,ca=Fe()+500,Ps(e,t));do try{y_();break}catch(u){Zb(e,u)}while(!0);Up(),uu.current=o,ge=a,Ke!==null?t=0:(Ze=null,ot=0,t=Xe)}if(t!==0){if(t===2&&(a=jf(e),a!==0&&(r=a,t=Qf(e,a))),t===1)throw n=Xo,Ps(e,0),Ur(e,r),Ot(e,Fe()),n;if(t===6)Ur(e,r);else{if(a=e.current.alternate,!(r&30)&&!g_(a)&&(t=fu(e,r),t===2&&(o=jf(e),o!==0&&(r=o,t=Qf(e,o))),t===1))throw n=Xo,Ps(e,0),Ur(e,r),Ot(e,Fe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(P(345));case 2:Es(e,Tt,ar);break;case 3:if(Ur(e,r),(r&130023424)===r&&(t=em+500-Fe(),10<t)){if(Jc(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=If(Es.bind(null,e,Tt,ar),t);break}Es(e,Tt,ar);break;case 4:if(Ur(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-kn(r);o=1<<l,l=t[l],l>a&&(a=l),r&=~o}if(r=a,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m_(r/1960))-r,10<r){e.timeoutHandle=If(Es.bind(null,e,Tt,ar),r);break}Es(e,Tt,ar);break;case 5:Es(e,Tt,ar);break;default:throw Error(P(329))}}}return Ot(e,Fe()),e.callbackNode===n?Yb.bind(null,e):null}function Qf(e,t){var n=Ao;return e.current.memoizedState.isDehydrated&&(Ps(e,t).flags|=256),e=fu(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Xf(t)),e}function Xf(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function g_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Nn(o(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ur(e,t){for(t&=~Zp,t&=~Iu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kn(t),r=1<<n;e[n]=-1,t&=~r}}function iw(e){if(ge&6)throw Error(P(327));ta();var t=Jc(e,0);if(!(t&1))return Ot(e,Fe()),null;var n=fu(e,t);if(e.tag!==0&&n===2){var r=jf(e);r!==0&&(t=r,n=Qf(e,r))}if(n===1)throw n=Xo,Ps(e,0),Ur(e,t),Ot(e,Fe()),n;if(n===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Es(e,Tt,ar),Ot(e,Fe()),null}function tm(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(ca=Fe()+500,_u&&ts())}}function Hs(e){Fr!==null&&Fr.tag===0&&!(ge&6)&&ta();var t=ge;ge|=1;var n=an.transition,r=ye;try{if(an.transition=null,ye=1,e)return e()}finally{ye=r,an.transition=n,ge=t,!(ge&6)&&ts()}}function nm(){Ht=qi.current,Ee(qi)}function Ps(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,KN(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Lp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eu();break;case 3:oa(),Ee(It),Ee(mt),Wp();break;case 5:Vp(r);break;case 4:oa();break;case 13:Ee(Pe);break;case 19:Ee(Pe);break;case 10:Bp(r.type._context);break;case 22:case 23:nm()}n=n.return}if(Ze=e,Ke=e=Qr(e.current,null),ot=Ht=t,Xe=0,Xo=null,Zp=Iu=Bs=0,Tt=Ao=null,Os!==null){for(t=0;t<Os.length;t++)if(n=Os[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=a,r.next=l}n.pending=r}Os=null}return e}function Zb(e,t){do{var n=Ke;try{if(Up(),$c.current=cu,lu){for(var r=Le.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}lu=!1}if(Us=0,Ye=Qe=Le=null,Co=!1,qo=0,Yp.current=null,n===null||n.return===null){Xe=1,Xo=t,Ke=null;break}e:{var o=e,l=n.return,u=n,d=t;if(t=ot,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var f=d,m=u,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var S=Ky(l);if(S!==null){S.flags&=-257,Gy(S,l,u,o,t),S.mode&1&&Wy(o,f,t),t=S,d=f;var N=t.updateQueue;if(N===null){var _=new Set;_.add(d),t.updateQueue=_}else N.add(d);break e}else{if(!(t&1)){Wy(o,f,t),rm();break e}d=Error(P(426))}}else if(Ie&&u.mode&1){var A=Ky(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Gy(A,l,u,o,t),Mp(la(d,u));break e}}o=d=la(d,u),Xe!==4&&(Xe=2),Ao===null?Ao=[o]:Ao.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var k=Lb(o,d,t);Uy(o,k);break e;case 1:u=d;var w=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(qr===null||!qr.has(j)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=Mb(o,u,t);Uy(o,C);break e}}o=o.return}while(o!==null)}n0(n)}catch(M){t=M,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function e0(){var e=uu.current;return uu.current=cu,e===null?cu:e}function rm(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),Ze===null||!(Bs&268435455)&&!(Iu&268435455)||Ur(Ze,ot)}function fu(e,t){var n=ge;ge|=2;var r=e0();(Ze!==e||ot!==t)&&(ar=null,Ps(e,t));do try{v_();break}catch(a){Zb(e,a)}while(!0);if(Up(),ge=n,uu.current=r,Ke!==null)throw Error(P(261));return Ze=null,ot=0,Xe}function v_(){for(;Ke!==null;)t0(Ke)}function y_(){for(;Ke!==null&&!zS();)t0(Ke)}function t0(e){var t=s0(e.alternate,e,Ht);e.memoizedProps=e.pendingProps,t===null?n0(e):Ke=t,Yp.current=null}function n0(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=d_(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ke=null;return}}else if(n=u_(n,t,Ht),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Xe===0&&(Xe=5)}function Es(e,t,n){var r=ye,a=an.transition;try{an.transition=null,ye=1,w_(e,t,n,r)}finally{an.transition=a,ye=r}return null}function w_(e,t,n,r){do ta();while(Fr!==null);if(ge&6)throw Error(P(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(ZS(e,o),e===Ze&&(Ke=Ze=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sc||(Sc=!0,i0(qc,function(){return ta(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=an.transition,an.transition=null;var l=ye;ye=1;var u=ge;ge|=4,Yp.current=null,f_(e,n),Qb(n,e),UN(Tf),Qc=!!Ef,Tf=Ef=null,e.current=n,p_(n),VS(),ge=u,ye=l,an.transition=o}else e.current=n;if(Sc&&(Sc=!1,Fr=e,hu=a),o=e.pendingLanes,o===0&&(qr=null),GS(n.stateNode),Ot(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(du)throw du=!1,e=qf,qf=null,e;return hu&1&&e.tag!==0&&ta(),o=e.pendingLanes,o&1?e===Jf?Oo++:(Oo=0,Jf=e):Oo=0,ts(),null}function ta(){if(Fr!==null){var e=Lx(hu),t=an.transition,n=ye;try{if(an.transition=null,ye=16>e?16:e,Fr===null)var r=!1;else{if(e=Fr,Fr=null,hu=0,ge&6)throw Error(P(331));var a=ge;for(ge|=4,F=e.current;F!==null;){var o=F,l=o.child;if(F.flags&16){var u=o.deletions;if(u!==null){for(var d=0;d<u.length;d++){var f=u[d];for(F=f;F!==null;){var m=F;switch(m.tag){case 0:case 11:case 15:Io(8,m,o)}var y=m.child;if(y!==null)y.return=m,F=y;else for(;F!==null;){m=F;var v=m.sibling,S=m.return;if(Gb(m),m===f){F=null;break}if(v!==null){v.return=S,F=v;break}F=S}}}var N=o.alternate;if(N!==null){var _=N.child;if(_!==null){N.child=null;do{var A=_.sibling;_.sibling=null,_=A}while(_!==null)}}F=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,F=l;else e:for(;F!==null;){if(o=F,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Io(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,F=k;break e}F=o.return}}var w=e.current;for(F=w;F!==null;){l=F;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,F=j;else e:for(l=w;F!==null;){if(u=F,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Cu(9,u)}}catch(M){Ue(u,u.return,M)}if(u===l){F=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,F=C;break e}F=u.return}}if(ge=a,ts(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(bu,e)}catch{}r=!0}return r}finally{ye=n,an.transition=t}}return!1}function aw(e,t,n){t=la(n,t),t=Lb(e,t,1),e=Gr(e,t,1),t=xt(),e!==null&&(il(e,1,t),Ot(e,t))}function Ue(e,t,n){if(e.tag===3)aw(e,e,n);else for(;t!==null;){if(t.tag===3){aw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){e=la(n,e),e=Mb(t,e,1),t=Gr(t,e,1),e=xt(),t!==null&&(il(t,1,e),Ot(t,e));break}}t=t.return}}function x_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(ot&n)===n&&(Xe===4||Xe===3&&(ot&130023424)===ot&&500>Fe()-em?Ps(e,0):Zp|=n),Ot(e,t)}function r0(e,t){t===0&&(e.mode&1?(t=pc,pc<<=1,!(pc&130023424)&&(pc=4194304)):t=1);var n=xt();e=pr(e,t),e!==null&&(il(e,t,n),Ot(e,n))}function b_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),r0(e,n)}function j_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(t),r0(e,n)}var s0;s0=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,c_(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,Ie&&t.flags&1048576&&lb(t,ru,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bc(e,t),e=t.pendingProps;var a=sa(t,mt.current);ea(t,n),a=Gp(null,t,r,e,a,n);var o=qp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,At(r)?(o=!0,tu(t)):o=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Fp(t),a.updater=Tu,t.stateNode=a,a._reactInternals=t,Mf(t,r,e,n),t=Bf(null,t,r,!0,o,n)):(t.tag=0,Ie&&o&&Pp(t),wt(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bc(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=S_(r),e=yn(r,e),a){case 0:t=Uf(null,t,r,e,n);break e;case 1:t=Qy(null,t,r,e,n);break e;case 11:t=qy(null,t,r,e,n);break e;case 14:t=Jy(null,t,r,yn(r.type,e),n);break e}throw Error(P(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:yn(r,a),Uf(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:yn(r,a),Qy(e,t,r,a,n);case 3:e:{if(Hb(t),e===null)throw Error(P(387));r=t.pendingProps,o=t.memoizedState,a=o.element,pb(e,t),au(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){a=la(Error(P(423)),t),t=Xy(e,t,r,n,a);break e}else if(r!==a){a=la(Error(P(424)),t),t=Xy(e,t,r,n,a);break e}else for(Vt=Kr(t.stateNode.containerInfo.firstChild),Wt=t,Ie=!0,jn=null,n=hb(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ia(),r===a){t=mr(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return mb(t),e===null&&Df(t),r=t.type,a=t.pendingProps,o=e!==null?e.memoizedProps:null,l=a.children,Cf(r,a)?l=null:o!==null&&Cf(r,o)&&(t.flags|=32),Bb(e,t),wt(e,t,l,n),t.child;case 6:return e===null&&Df(t),null;case 13:return Fb(e,t,n);case 4:return zp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=aa(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:yn(r,a),qy(e,t,r,a,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,l=a.value,Ne(su,r._currentValue),r._currentValue=l,o!==null)if(Nn(o.value,l)){if(o.children===a.children&&!It.current){t=mr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){l=o.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(o.tag===1){d=dr(-1,n&-n),d.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?d.next=d:(d.next=m.next,m.next=d),f.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Pf(o.return,n,t),u.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(P(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Pf(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}wt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ea(t,n),a=on(a),r=r(a),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,a=yn(r,t.pendingProps),a=yn(r.type,a),Jy(e,t,r,a,n);case 15:return $b(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:yn(r,a),Bc(e,t),t.tag=1,At(r)?(e=!0,tu(t)):e=!1,ea(t,n),Pb(t,r,a),Mf(t,r,a,n),Bf(null,t,r,!0,e,n);case 19:return zb(e,t,n);case 22:return Ub(e,t,n)}throw Error(P(156,t.tag))};function i0(e,t){return Ox(e,t)}function k_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,r){return new k_(e,t,n,r)}function sm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function S_(e){if(typeof e=="function")return sm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===kp)return 11;if(e===Sp)return 14}return 2}function Qr(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,a,o){var l=2;if(r=e,typeof e=="function")sm(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case $i:return Ls(n.children,a,o,t);case jp:l=8,a|=8;break;case of:return e=sn(12,n,t,a|2),e.elementType=of,e.lanes=o,e;case lf:return e=sn(13,n,t,a),e.elementType=lf,e.lanes=o,e;case cf:return e=sn(19,n,t,a),e.elementType=cf,e.lanes=o,e;case mx:return Au(n,a,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fx:l=10;break e;case px:l=9;break e;case kp:l=11;break e;case Sp:l=14;break e;case Pr:l=16,r=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=sn(l,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function Ls(e,t,n,r){return e=sn(7,e,r,t),e.lanes=n,e}function Au(e,t,n,r){return e=sn(22,e,r,t),e.elementType=mx,e.lanes=n,e.stateNode={isHidden:!1},e}function zh(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function Vh(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N_(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sh(0),this.expirationTimes=Sh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sh(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function im(e,t,n,r,a,o,l,u,d){return e=new N_(e,t,n,u,d),t===1?(t=1,o===!0&&(t|=8)):t=0,o=sn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fp(o),e}function __(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function a0(e){if(!e)return Yr;e=e._reactInternals;e:{if(zs(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(At(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var n=e.type;if(At(n))return ab(e,n,t)}return t}function o0(e,t,n,r,a,o,l,u,d){return e=im(n,r,!0,e,a,o,l,u,d),e.context=a0(null),n=e.current,r=xt(),a=Jr(n),o=dr(r,a),o.callback=t??null,Gr(n,o,a),e.current.lanes=a,il(e,a,r),Ot(e,r),e}function Ou(e,t,n,r){var a=t.current,o=xt(),l=Jr(a);return n=a0(n),t.context===null?t.context=n:t.pendingContext=n,t=dr(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Gr(a,t,l),e!==null&&(Sn(e,a,l,o),Mc(e,a,l)),l}function pu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ow(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function am(e,t){ow(e,t),(e=e.alternate)&&ow(e,t)}function E_(){return null}var l0=typeof reportError=="function"?reportError:function(e){console.error(e)};function om(e){this._internalRoot=e}Ru.prototype.render=om.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ou(e,t,null,null)};Ru.prototype.unmount=om.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hs(function(){Ou(null,e,null,null)}),t[fr]=null}};function Ru(e){this._internalRoot=e}Ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ux();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$r.length&&t!==0&&t<$r[n].priority;n++);$r.splice(n,0,e),n===0&&Hx(e)}};function lm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Du(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lw(){}function T_(e,t,n,r,a){if(a){if(typeof r=="function"){var o=r;r=function(){var f=pu(l);o.call(f)}}var l=o0(t,r,e,0,null,!1,!1,"",lw);return e._reactRootContainer=l,e[fr]=l.current,zo(e.nodeType===8?e.parentNode:e),Hs(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var u=r;r=function(){var f=pu(d);u.call(f)}}var d=im(e,0,!1,null,null,!1,!1,"",lw);return e._reactRootContainer=d,e[fr]=d.current,zo(e.nodeType===8?e.parentNode:e),Hs(function(){Ou(t,d,n,r)}),d}function Pu(e,t,n,r,a){var o=n._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var u=a;a=function(){var d=pu(l);u.call(d)}}Ou(t,l,e,a)}else l=T_(n,t,e,a,r);return pu(l)}Mx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bo(t.pendingLanes);n!==0&&(Ep(t,n|1),Ot(t,Fe()),!(ge&6)&&(ca=Fe()+500,ts()))}break;case 13:Hs(function(){var r=pr(e,1);if(r!==null){var a=xt();Sn(r,e,1,a)}}),am(e,1)}};Tp=function(e){if(e.tag===13){var t=pr(e,134217728);if(t!==null){var n=xt();Sn(t,e,134217728,n)}am(e,134217728)}};$x=function(e){if(e.tag===13){var t=Jr(e),n=pr(e,t);if(n!==null){var r=xt();Sn(n,e,t,r)}am(e,t)}};Ux=function(){return ye};Bx=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};wf=function(e,t,n){switch(t){case"input":if(hf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Nu(r);if(!a)throw Error(P(90));vx(r),hf(r,a)}}}break;case"textarea":wx(e,n);break;case"select":t=n.value,t!=null&&Qi(e,!!n.multiple,t,!1)}};_x=tm;Ex=Hs;var C_={usingClientEntryPoint:!1,Events:[ol,Fi,Nu,Sx,Nx,tm]},yo={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I_={bundleType:yo.bundleType,version:yo.version,rendererPackageName:yo.rendererPackageName,rendererConfig:yo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ix(e),e===null?null:e.stateNode},findFiberByHostInstance:yo.findFiberByHostInstance||E_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{bu=Nc.inject(I_),Kn=Nc}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C_;Gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(t))throw Error(P(200));return __(e,t,null,n)};Gt.createRoot=function(e,t){if(!lm(e))throw Error(P(299));var n=!1,r="",a=l0;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=im(e,1,!1,null,null,n,!1,r,a),e[fr]=t.current,zo(e.nodeType===8?e.parentNode:e),new om(t)};Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Ix(t),e=e===null?null:e.stateNode,e};Gt.flushSync=function(e){return Hs(e)};Gt.hydrate=function(e,t,n){if(!Du(t))throw Error(P(200));return Pu(null,e,t,!0,n)};Gt.hydrateRoot=function(e,t,n){if(!lm(e))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,a=!1,o="",l=l0;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=o0(t,null,e,1,n??null,a,!1,o,l),e[fr]=t.current,zo(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ru(t)};Gt.render=function(e,t,n){if(!Du(t))throw Error(P(200));return Pu(null,e,t,!1,n)};Gt.unmountComponentAtNode=function(e){if(!Du(e))throw Error(P(40));return e._reactRootContainer?(Hs(function(){Pu(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0):!1};Gt.unstable_batchedUpdates=tm;Gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Du(n))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return Pu(e,t,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function c0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c0)}catch(e){console.error(e)}}c0(),cx.exports=Gt;var A_=cx.exports,cw=A_;sf.createRoot=cw.createRoot,sf.hydrateRoot=cw.hydrateRoot;function zn(e,t){const n=t&&t.cache?t.cache:$_,r=t&&t.serializer?t.serializer:L_;return(t&&t.strategy?t.strategy:D_)(e,{cache:n,serializer:r})}function O_(e){return e==null||typeof e=="number"||typeof e=="boolean"}function R_(e,t,n,r){const a=O_(r)?r:n(r);let o=t.get(a);return typeof o>"u"&&(o=e.call(this,r),t.set(a,o)),o}function u0(e,t,n){const r=Array.prototype.slice.call(arguments,3),a=n(r);let o=t.get(a);return typeof o>"u"&&(o=e.apply(this,r),t.set(a,o)),o}function d0(e,t,n,r,a){return n.bind(t,e,r,a)}function D_(e,t){const n=e.length===1?R_:u0;return d0(e,this,n,t.cache.create(),t.serializer)}function P_(e,t){return d0(e,this,u0,t.cache.create(),t.serializer)}const L_=function(){return JSON.stringify(arguments)};class M_{constructor(){ue(this,"cache");this.cache=Object.create(null)}get(t){return this.cache[t]}set(t,n){this.cache[t]=n}}const $_={create:function(){return new M_}},Vn={variadic:P_},U_=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function B_(e){const t={};return e.replace(U_,n=>{const r=n.length;switch(n[0]){case"G":t.era=r===4?"long":r===5?"narrow":"short";break;case"y":t.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}const H_=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function F_(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");const t=e.split(H_).filter(r=>r.length>0),n=[];for(const r of t){let a=r.split("/");if(a.length===0)throw new Error("Invalid number skeleton");const[o,...l]=a;for(const u of l)if(u.length===0)throw new Error("Invalid number skeleton");n.push({stem:o,options:l})}return n}function z_(e){return e.replace(/^(.*?)-/,"")}const uw=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,h0=/^(@+)?(\+|#+)?[rs]?$/g,V_=/(\*)(0+)|(#+)(0+)|(0+)/g,f0=/^(0+)$/;function dw(e){const t={};return e[e.length-1]==="r"?t.roundingPriority="morePrecision":e[e.length-1]==="s"&&(t.roundingPriority="lessPrecision"),e.replace(h0,function(n,r,a){return typeof a!="string"?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):a==="+"?t.minimumSignificantDigits=r.length:r[0]==="#"?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+(typeof a=="string"?a.length:0)),""}),t}function p0(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function W_(e){let t;if(e[0]==="E"&&e[1]==="E"?(t={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(t={notation:"scientific"},e=e.slice(1)),t){const n=e.slice(0,2);if(n==="+!"?(t.signDisplay="always",e=e.slice(2)):n==="+?"&&(t.signDisplay="exceptZero",e=e.slice(2)),!f0.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function hw(e){const t={},n=p0(e);return n||t}function K_(e){let t={};for(const n of e){switch(n.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=n.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=z_(n.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t={...t,notation:"scientific",...n.options.reduce((o,l)=>({...o,...hw(l)}),{})};continue;case"engineering":t={...t,notation:"engineering",...n.options.reduce((o,l)=>({...o,...hw(l)}),{})};continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(n.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(V_,function(o,l,u,d,f,m){if(l)t.minimumIntegerDigits=u.length;else{if(d&&f)throw new Error("We currently do not support maximum integer digits");if(m)throw new Error("We currently do not support exact integer digits")}return""});continue}if(f0.test(n.stem)){t.minimumIntegerDigits=n.stem.length;continue}if(uw.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(uw,function(l,u,d,f,m,y){return d==="*"?t.minimumFractionDigits=u.length:f&&f[0]==="#"?t.maximumFractionDigits=f.length:m&&y?(t.minimumFractionDigits=m.length,t.maximumFractionDigits=m.length+y.length):(t.minimumFractionDigits=u.length,t.maximumFractionDigits=u.length),""});const o=n.options[0];o==="w"?t={...t,trailingZeroDisplay:"stripIfInteger"}:o&&(t={...t,...dw(o)});continue}if(h0.test(n.stem)){t={...t,...dw(n.stem)};continue}const r=p0(n.stem);r&&(t={...t,...r});const a=W_(n.stem);a&&(t={...t,...a})}return t}let Re=function(e){return e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag",e}({}),mu=function(e){return e[e.number=0]="number",e[e.dateTime=1]="dateTime",e}({});function fw(e){return e.type===Re.literal}function G_(e){return e.type===Re.argument}function m0(e){return e.type===Re.number}function g0(e){return e.type===Re.date}function v0(e){return e.type===Re.time}function y0(e){return e.type===Re.select}function w0(e){return e.type===Re.plural}function q_(e){return e.type===Re.pound}function x0(e){return e.type===Re.tag}function b0(e){return!!(e&&typeof e=="object"&&e.type===mu.number)}function Yf(e){return!!(e&&typeof e=="object"&&e.type===mu.dateTime)}let me=function(e){return e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG",e}({});const j0=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,_c={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GS:["H","h","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ku-SY":["H","hB"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function J_(e,t){let n="";for(let r=0;r<e.length;r++){const a=e.charAt(r);if(a==="j"){let o=0;for(;r+1<e.length&&e.charAt(r+1)===a;)o++,r++;let l=1+(o&1),u=o<2?1:3+(o>>1),d="a",f=Q_(t);for((f=="H"||f=="k")&&(u=0);u-- >0;)n+=d;for(;l-- >0;)n=f+n}else a==="J"?n+="H":n+=a}return n}function Q_(e){let t=e.hourCycle;if(t===void 0&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}const n=e.language;let r;return n!=="root"&&(r=e.maximize().region),(_c[r||""]||_c[n||""]||_c[`${n}-001`]||_c["001"])[0]}const X_=new RegExp(`^${j0.source}*`),Y_=new RegExp(`${j0.source}*$`);function de(e,t){return{start:e,end:t}}const Z_=!!Object.fromEntries,eE=!!String.prototype.trimStart,tE=!!String.prototype.trimEnd,pw=Z_?Object.fromEntries:function(t){const n={};for(const[r,a]of t)n[r]=a;return n},nE=eE?function(t){return t.trimStart()}:function(t){return t.replace(X_,"")},rE=tE?function(t){return t.trimEnd()}:function(t){return t.replace(Y_,"")},mw=new RegExp("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");function sE(e,t){return mw.lastIndex=t,mw.exec(e)[1]??""}class iE{constructor(t,n={}){ue(this,"message");ue(this,"position");ue(this,"locale");ue(this,"ignoreTag");ue(this,"requiresOtherClause");ue(this,"shouldParseSkeletons");this.message=t,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}parse(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)}parseMessage(t,n,r){let a=[];for(;!this.isEOF();){const o=this.char();if(o===123){const l=this.parseArgument(t,r);if(l.err)return l;a.push(l.val)}else{if(o===125&&t>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){const l=this.clonePosition();this.bump(),a.push({type:Re.pound,location:de(l,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(me.UNMATCHED_CLOSING_TAG,de(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&Zf(this.peek()||0)){const l=this.parseTag(t,n);if(l.err)return l;a.push(l.val)}else{const l=this.parseLiteral(t,n);if(l.err)return l;a.push(l.val)}}}return{val:a,err:null}}parseTag(t,n){const r=this.clonePosition();this.bump();const a=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Re.literal,value:`<${a}/>`,location:de(r,this.clonePosition())},err:null};if(this.bumpIf(">")){const o=this.parseMessage(t+1,n,!0);if(o.err)return o;const l=o.val,u=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Zf(this.char()))return this.error(me.INVALID_TAG,de(u,this.clonePosition()));const d=this.clonePosition(),f=this.parseTagName();return a!==f?this.error(me.UNMATCHED_CLOSING_TAG,de(d,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Re.tag,value:a,children:l,location:de(r,this.clonePosition())},err:null}:this.error(me.INVALID_TAG,de(u,this.clonePosition())))}else return this.error(me.UNCLOSED_TAG,de(r,this.clonePosition()))}else return this.error(me.INVALID_TAG,de(r,this.clonePosition()))}parseTagName(){const t=this.offset();for(this.bump();!this.isEOF()&&oE(this.char());)this.bump();return this.message.slice(t,this.offset())}parseLiteral(t,n){const r=this.clonePosition();let a="";for(;;){const l=this.tryParseQuote(n);if(l){a+=l;continue}const u=this.tryParseUnquoted(t,n);if(u){a+=u;continue}const d=this.tryParseLeftAngleBracket();if(d){a+=d;continue}break}const o=de(r,this.clonePosition());return{val:{type:Re.literal,value:a,location:o},err:null}}tryParseLeftAngleBracket(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!aE(this.peek()||0))?(this.bump(),"<"):null}tryParseQuote(t){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(t==="plural"||t==="selectordinal")break;return null;default:return null}this.bump();const n=[this.char()];for(this.bump();!this.isEOF();){const r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return String.fromCodePoint(...n)}tryParseUnquoted(t,n){if(this.isEOF())return null;const r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&t>0?null:(this.bump(),String.fromCodePoint(r))}parseArgument(t,n){const r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(me.EXPECT_ARGUMENT_CLOSING_BRACE,de(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(me.EMPTY_ARGUMENT,de(r,this.clonePosition()));let a=this.parseIdentifierIfPossible().value;if(!a)return this.error(me.MALFORMED_ARGUMENT,de(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(me.EXPECT_ARGUMENT_CLOSING_BRACE,de(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Re.argument,value:a,location:de(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(me.EXPECT_ARGUMENT_CLOSING_BRACE,de(r,this.clonePosition())):this.parseArgumentOptions(t,n,a,r);default:return this.error(me.MALFORMED_ARGUMENT,de(r,this.clonePosition()))}}parseIdentifierIfPossible(){const t=this.clonePosition(),n=this.offset(),r=sE(this.message,n),a=n+r.length;this.bumpTo(a);const o=this.clonePosition(),l=de(t,o);return{value:r,location:l}}parseArgumentOptions(t,n,r,a){let o=this.clonePosition(),l=this.parseIdentifierIfPossible().value,u=this.clonePosition();switch(l){case"":return this.error(me.EXPECT_ARGUMENT_TYPE,de(o,u));case"number":case"date":case"time":{this.bumpSpace();let d=null;if(this.bumpIf(",")){this.bumpSpace();const y=this.clonePosition(),v=this.parseSimpleArgStyleIfPossible();if(v.err)return v;const S=rE(v.val);if(S.length===0)return this.error(me.EXPECT_ARGUMENT_STYLE,de(this.clonePosition(),this.clonePosition()));const N=de(y,this.clonePosition());d={style:S,styleLocation:N}}const f=this.tryParseArgumentClose(a);if(f.err)return f;const m=de(a,this.clonePosition());if(d&&d.style.startsWith("::")){let y=nE(d.style.slice(2));if(l==="number"){const v=this.parseNumberSkeletonFromString(y,d.styleLocation);return v.err?v:{val:{type:Re.number,value:r,location:m,style:v.val},err:null}}else{if(y.length===0)return this.error(me.EXPECT_DATE_TIME_SKELETON,m);let v=y;this.locale&&(v=J_(y,this.locale));const S={type:mu.dateTime,pattern:v,location:d.styleLocation,parsedOptions:this.shouldParseSkeletons?B_(v):{}};return{val:{type:l==="date"?Re.date:Re.time,value:r,location:m,style:S},err:null}}}return{val:{type:l==="number"?Re.number:l==="date"?Re.date:Re.time,value:r,location:m,style:(d==null?void 0:d.style)??null},err:null}}case"plural":case"selectordinal":case"select":{const d=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(me.EXPECT_SELECT_ARGUMENT_OPTIONS,de(d,{...d}));this.bumpSpace();let f=this.parseIdentifierIfPossible(),m=0;if(l!=="select"&&f.value==="offset"){if(!this.bumpIf(":"))return this.error(me.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,de(this.clonePosition(),this.clonePosition()));this.bumpSpace();const N=this.tryParseDecimalInteger(me.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,me.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(N.err)return N;this.bumpSpace(),f=this.parseIdentifierIfPossible(),m=N.val}const y=this.tryParsePluralOrSelectOptions(t,l,n,f);if(y.err)return y;const v=this.tryParseArgumentClose(a);if(v.err)return v;const S=de(a,this.clonePosition());return l==="select"?{val:{type:Re.select,value:r,options:pw(y.val),location:S},err:null}:{val:{type:Re.plural,value:r,options:pw(y.val),offset:m,pluralType:l==="plural"?"cardinal":"ordinal",location:S},err:null}}default:return this.error(me.INVALID_ARGUMENT_TYPE,de(o,u))}}tryParseArgumentClose(t){return this.isEOF()||this.char()!==125?this.error(me.EXPECT_ARGUMENT_CLOSING_BRACE,de(t,this.clonePosition())):(this.bump(),{val:!0,err:null})}parseSimpleArgStyleIfPossible(){let t=0;const n=this.clonePosition();for(;!this.isEOF();)switch(this.char()){case 39:{this.bump();let a=this.clonePosition();if(!this.bumpUntil("'"))return this.error(me.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,de(a,this.clonePosition()));this.bump();break}case 123:{t+=1,this.bump();break}case 125:{if(t>0)t-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}return{val:this.message.slice(n.offset,this.offset()),err:null}}parseNumberSkeletonFromString(t,n){let r=[];try{r=F_(t)}catch{return this.error(me.INVALID_NUMBER_SKELETON,n)}return{val:{type:mu.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?K_(r):{}},err:null}}tryParsePluralOrSelectOptions(t,n,r,a){let o=!1;const l=[],u=new Set;let{value:d,location:f}=a;for(;;){if(d.length===0){const S=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){const N=this.tryParseDecimalInteger(me.EXPECT_PLURAL_ARGUMENT_SELECTOR,me.INVALID_PLURAL_ARGUMENT_SELECTOR);if(N.err)return N;f=de(S,this.clonePosition()),d=this.message.slice(S.offset,this.offset())}else break}if(u.has(d))return this.error(n==="select"?me.DUPLICATE_SELECT_ARGUMENT_SELECTOR:me.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,f);d==="other"&&(o=!0),this.bumpSpace();const m=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?me.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:me.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,de(this.clonePosition(),this.clonePosition()));const y=this.parseMessage(t+1,n,r);if(y.err)return y;const v=this.tryParseArgumentClose(m);if(v.err)return v;l.push([d,{value:y.val,location:de(m,this.clonePosition())}]),u.add(d),this.bumpSpace(),{value:d,location:f}=this.parseIdentifierIfPossible()}return l.length===0?this.error(n==="select"?me.EXPECT_SELECT_ARGUMENT_SELECTOR:me.EXPECT_PLURAL_ARGUMENT_SELECTOR,de(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(me.MISSING_OTHER_CLAUSE,de(this.clonePosition(),this.clonePosition())):{val:l,err:null}}tryParseDecimalInteger(t,n){let r=1;const a=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);let o=!1,l=0;for(;!this.isEOF();){const d=this.char();if(d>=48&&d<=57)o=!0,l=l*10+(d-48),this.bump();else break}const u=de(a,this.clonePosition());return o?(l*=r,Number.isSafeInteger(l)?{val:l,err:null}:this.error(n,u)):this.error(t,u)}offset(){return this.position.offset}isEOF(){return this.offset()===this.message.length}clonePosition(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}}char(){const t=this.position.offset;if(t>=this.message.length)throw Error("out of bound");const n=this.message.codePointAt(t);if(n===void 0)throw Error(`Offset ${t} is at invalid UTF-16 code unit boundary`);return n}error(t,n){return{val:null,err:{kind:t,message:this.message,location:n}}}bump(){if(this.isEOF())return;const t=this.char();t===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=t<65536?1:2)}bumpIf(t){if(this.message.startsWith(t,this.offset())){for(let n=0;n<t.length;n++)this.bump();return!0}return!1}bumpUntil(t){const n=this.offset(),r=this.message.indexOf(t,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)}bumpTo(t){if(this.offset()>t)throw Error(`targetOffset ${t} must be greater than or equal to the current offset ${this.offset()}`);for(t=Math.min(t,this.message.length);;){const n=this.offset();if(n===t)break;if(n>t)throw Error(`targetOffset ${t} is at invalid UTF-16 code unit boundary`);if(this.bump(),this.isEOF())break}}bumpSpace(){for(;!this.isEOF()&&lE(this.char());)this.bump()}peek(){if(this.isEOF())return null;const t=this.char(),n=this.offset();return this.message.charCodeAt(n+(t>=65536?2:1))??null}}function Zf(e){return e>=97&&e<=122||e>=65&&e<=90}function aE(e){return Zf(e)||e===47}function oE(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function lE(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function ep(e){e.forEach(t=>{if(delete t.location,y0(t)||w0(t))for(const n in t.options)delete t.options[n].location,ep(t.options[n].value);else m0(t)&&b0(t.style)||(g0(t)||v0(t))&&Yf(t.style)?delete t.style.location:x0(t)&&ep(t.children)})}function cE(e,t={}){t={shouldParseSkeletons:!0,requiresOtherClause:!0,...t};const n=new iE(e,t).parse();if(n.err){const r=SyntaxError(me[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return t!=null&&t.captureLocation||ep(n.val),n.val}let ns=function(e){return e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API",e}({});class rs extends Error{constructor(n,r,a){super(n);ue(this,"code");ue(this,"originalMessage");this.code=r,this.originalMessage=a}toString(){return`[formatjs Error: ${this.code}] ${this.message}`}}class gw extends rs{constructor(t,n,r,a){super(`Invalid values for "${t}": "${n}". Options are "${Object.keys(r).join('", "')}"`,ns.INVALID_VALUE,a)}}class uE extends rs{constructor(t,n,r){super(`Value for "${t}" must be of type ${n}`,ns.INVALID_VALUE,r)}}class dE extends rs{constructor(t,n){super(`The intl string context variable "${t}" was not provided to the string "${n}"`,ns.MISSING_VALUE,n)}}let Bt=function(e){return e[e.literal=0]="literal",e[e.object=1]="object",e}({});function hE(e){return e.length<2?e:e.reduce((t,n)=>{const r=t[t.length-1];return!r||r.type!==Bt.literal||n.type!==Bt.literal?t.push(n):r.value+=n.value,t},[])}function k0(e){return typeof e=="function"}function Vc(e,t,n,r,a,o,l){if(e.length===1&&fw(e[0]))return[{type:Bt.literal,value:e[0].value}];const u=[];for(const d of e){if(fw(d)){u.push({type:Bt.literal,value:d.value});continue}if(q_(d)){typeof o=="number"&&u.push({type:Bt.literal,value:n.getNumberFormat(t).format(o)});continue}const{value:f}=d;if(!(a&&f in a))throw new dE(f,l);let m=a[f];if(G_(d)){(!m||typeof m=="string"||typeof m=="number"||typeof m=="bigint")&&(m=typeof m=="string"||typeof m=="number"||typeof m=="bigint"?String(m):""),u.push({type:typeof m=="string"?Bt.literal:Bt.object,value:m});continue}if(g0(d)){const y=typeof d.style=="string"?r.date[d.style]:Yf(d.style)?d.style.parsedOptions:void 0;u.push({type:Bt.literal,value:n.getDateTimeFormat(t,y).format(m)});continue}if(v0(d)){const y=typeof d.style=="string"?r.time[d.style]:Yf(d.style)?d.style.parsedOptions:r.time.medium;u.push({type:Bt.literal,value:n.getDateTimeFormat(t,y).format(m)});continue}if(m0(d)){const y=typeof d.style=="string"?r.number[d.style]:b0(d.style)?d.style.parsedOptions:void 0;if(y&&y.scale){const v=y.scale||1;if(typeof m=="bigint"){if(!Number.isInteger(v))throw new TypeError(`Cannot apply fractional scale ${v} to bigint value. Scale must be an integer when formatting bigint.`);m=m*BigInt(v)}else m=m*v}u.push({type:Bt.literal,value:n.getNumberFormat(t,y).format(m)});continue}if(x0(d)){const{children:y,value:v}=d,S=a[v];if(!k0(S))throw new uE(v,"function",l);const N=Vc(y,t,n,r,a,o);let _=S(N.map(A=>A.value));Array.isArray(_)||(_=[_]),u.push(..._.map(A=>({type:typeof A=="string"?Bt.literal:Bt.object,value:A})))}if(y0(d)){const y=m,v=(Object.prototype.hasOwnProperty.call(d.options,y)?d.options[y]:void 0)||d.options.other;if(!v)throw new gw(d.value,m,Object.keys(d.options),l);u.push(...Vc(v.value,t,n,r,a));continue}if(w0(d)){const y=`=${m}`;let v=Object.prototype.hasOwnProperty.call(d.options,y)?d.options[y]:void 0;if(!v){if(!Intl.PluralRules)throw new rs(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ns.MISSING_INTL_API,l);const N=typeof m=="bigint"?Number(m):m,_=n.getPluralRules(t,{type:d.pluralType}).select(N-(d.offset||0));v=(Object.prototype.hasOwnProperty.call(d.options,_)?d.options[_]:void 0)||d.options.other}if(!v)throw new gw(d.value,m,Object.keys(d.options),l);const S=typeof m=="bigint"?Number(m):m;u.push(...Vc(v.value,t,n,r,a,S-(d.offset||0)));continue}}return hE(u)}function fE(e,t){return t?{...e,...t,...Object.keys(e).reduce((n,r)=>(n[r]={...e[r],...t[r]},n),{})}:e}function pE(e,t){return t?Object.keys(e).reduce((n,r)=>(n[r]=fE(e[r],t[r]),n),{...e}):e}function Wh(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function mE(e={number:{},dateTime:{},pluralRules:{}}){return{getNumberFormat:zn((...t)=>new Intl.NumberFormat(...t),{cache:Wh(e.number),strategy:Vn.variadic}),getDateTimeFormat:zn((...t)=>new Intl.DateTimeFormat(...t),{cache:Wh(e.dateTime),strategy:Vn.variadic}),getPluralRules:zn((...t)=>new Intl.PluralRules(...t),{cache:Wh(e.pluralRules),strategy:Vn.variadic})}}const Et=class Et{constructor(t,n=Et.defaultLocale,r,a){ue(this,"ast");ue(this,"locales");ue(this,"resolvedLocale");ue(this,"formatters");ue(this,"formats");ue(this,"message");ue(this,"formatterCache",{number:{},dateTime:{},pluralRules:{}});ue(this,"format",t=>{const n=this.formatToParts(t);if(n.length===1)return n[0].value;const r=n.reduce((a,o)=>(!a.length||o.type!==Bt.literal||typeof a[a.length-1]!="string"?a.push(o.value):a[a.length-1]+=o.value,a),[]);return r.length<=1?r[0]||"":r});ue(this,"formatToParts",t=>Vc(this.ast,this.locales,this.formatters,this.formats,t,void 0,this.message));ue(this,"resolvedOptions",()=>{var t;return{locale:((t=this.resolvedLocale)==null?void 0:t.toString())||Intl.NumberFormat.supportedLocalesOf(this.locales)[0]}});ue(this,"getAst",()=>this.ast);if(this.locales=n,this.resolvedLocale=Et.resolveLocale(n),typeof t=="string"){if(this.message=t,!Et.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");const{...o}=a||{};this.ast=Et.__parse(t,{...o,locale:this.resolvedLocale})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=pE(Et.formats,r),this.formatters=a&&a.formatters||mE(this.formatterCache)}static get defaultLocale(){return Et.memoizedDefaultLocale||(Et.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),Et.memoizedDefaultLocale}};ue(Et,"memoizedDefaultLocale",null),ue(Et,"resolveLocale",t=>{if(typeof Intl.Locale>"u")return;const n=Intl.NumberFormat.supportedLocalesOf(t);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof t=="string"?t:t[0])}),ue(Et,"__parse",cE),ue(Et,"formats",{number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}});let gu=Et,cl=function(e){return e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION",e}({});class Vs extends Error{constructor(n,r,a){const o=a?a instanceof Error?a:new Error(String(a)):void 0;super(`[@formatjs/intl Error ${n}] ${r}
${o?`
${o.message}
${o.stack}`:""}`);ue(this,"code");this.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Vs)}}class gE extends Vs{constructor(t,n){super(cl.UNSUPPORTED_FORMATTER,t,n)}}class vE extends Vs{constructor(t,n){super(cl.INVALID_CONFIG,t,n)}}class vw extends Vs{constructor(t,n){super(cl.MISSING_DATA,t,n)}}class cn extends Vs{constructor(n,r,a){super(cl.FORMAT_ERROR,`${n}
Locale: ${r}
`,a);ue(this,"descriptor");ue(this,"locale");this.locale=r}}class Kh extends cn{constructor(n,r,a,o){super(`${n}
MessageID: ${a==null?void 0:a.id}
Default Message: ${a==null?void 0:a.defaultMessage}
Description: ${a==null?void 0:a.description}
`,r,o);ue(this,"descriptor");ue(this,"locale");this.descriptor=a,this.locale=r}}class yE extends Vs{constructor(n,r){super(cl.MISSING_TRANSLATION,`Missing message: "${n.id}" for locale "${r}", using ${n.defaultMessage?`default message (${typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(a=>a.value??JSON.stringify(a)).join()})`:"id"} as fallback.`);ue(this,"descriptor");this.descriptor=n}}function wE(e,t,n=Error){if(!e)throw new n(t)}function fa(e,t,n={}){return t.reduce((r,a)=>(a in e?r[a]=e[a]:a in n&&(r[a]=n[a]),r),{})}const xE=e=>{},bE=e=>{},S0={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:xE,onWarn:bE};function N0(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ks(e){return{create(){return{get(t){return e[t]},set(t,n){e[t]=n}}}}}function jE(e=N0()){const t=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,a=zn((...u)=>new Intl.DateTimeFormat(...u),{cache:ks(e.dateTime),strategy:Vn.variadic}),o=zn((...u)=>new Intl.NumberFormat(...u),{cache:ks(e.number),strategy:Vn.variadic}),l=zn((...u)=>new Intl.PluralRules(...u),{cache:ks(e.pluralRules),strategy:Vn.variadic});return{getDateTimeFormat:a,getNumberFormat:o,getMessageFormat:zn((u,d,f,m)=>new gu(u,d,f,{formatters:{getNumberFormat:o,getDateTimeFormat:a,getPluralRules:l},...m}),{cache:ks(e.message),strategy:Vn.variadic}),getRelativeTimeFormat:zn((...u)=>new t(...u),{cache:ks(e.relativeTime),strategy:Vn.variadic}),getPluralRules:l,getListFormat:zn((...u)=>new n(...u),{cache:ks(e.list),strategy:Vn.variadic}),getDisplayNames:zn((...u)=>new r(...u),{cache:ks(e.displayNames),strategy:Vn.variadic})}}function cm(e,t,n,r){const a=e&&e[t];let o;if(a&&(o=a[n]),o)return o;r(new gE(`No ${t} format named: ${n}`))}function Ec(e,t){return Object.keys(e).reduce((n,r)=>(n[r]={timeZone:t,...e[r]},n),{})}function yw(e,t){return Object.keys({...e,...t}).reduce((r,a)=>(r[a]={...e[a],...t[a]},r),{})}function ww(e,t){if(!t)return e;const n=gu.formats;return{...n,...e,date:yw(Ec(n.date,t),Ec(e.date||{},t)),time:yw(Ec(n.time,t),Ec(e.time||{},t))}}const tp=({locale:e,formats:t,messages:n,defaultLocale:r,defaultFormats:a,fallbackOnEmptyString:o,onError:l,timeZone:u,defaultRichTextElements:d},f,m={id:""},y,v)=>{const{id:S,defaultMessage:N}=m;wE(!!S,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");const _=String(S),A=n&&Object.prototype.hasOwnProperty.call(n,_)&&n[_];if(Array.isArray(A)&&A.length===1&&A[0].type===Re.literal)return A[0].value;if(y={...d,...y},t=ww(t,u),a=ww(a,u),!A){if(o===!1&&A==="")return A;if((!N||e&&e.toLowerCase()!==r.toLowerCase())&&l(new yE(m,e)),N)try{return f.getMessageFormat(N,r,a,v).format(y)}catch(k){return l(new Kh(`Error formatting default message for: "${_}", rendering default message verbatim`,e,m,k)),typeof N=="string"?N:_}return _}try{return f.getMessageFormat(A,e,t,{formatters:f,...v}).format(y)}catch(k){l(new Kh(`Error formatting message: "${_}", using ${N?"default message":"id"} as fallback.`,e,m,k))}if(N)try{return f.getMessageFormat(N,r,a,v).format(y)}catch(k){l(new Kh(`Error formatting the default message for: "${_}", rendering message verbatim`,e,m,k))}return typeof A=="string"?A:typeof N=="string"?N:_},kE=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function ul({locale:e,formats:t,onError:n,timeZone:r},a,o,l={}){const{format:u}=l,d={...r&&{timeZone:r},...u&&cm(t,a,u,n)};let f=fa(l,kE,d);return a==="time"&&!f.hour&&!f.minute&&!f.second&&!f.timeStyle&&!f.dateStyle&&(f={...f,hour:"numeric",minute:"numeric"}),o(e,f)}function SE(e,t,n,r={}){const a=typeof n=="string"?new Date(n||0):n;try{return ul(e,"date",t,r).format(a)}catch(o){e.onError(new cn("Error formatting date.",e.locale,o))}return String(a)}function NE(e,t,n,r={}){const a=typeof n=="string"?new Date(n||0):n;try{return ul(e,"time",t,r).format(a)}catch(o){e.onError(new cn("Error formatting time.",e.locale,o))}return String(a)}function _E(e,t,n,r,a={}){const o=typeof n=="string"?new Date(n||0):n,l=typeof r=="string"?new Date(r||0):r;try{return ul(e,"dateTimeRange",t,a).formatRange(o,l)}catch(u){e.onError(new cn("Error formatting date time range.",e.locale,u))}return String(o)}function EE(e,t,n,r={}){const a=typeof n=="string"?new Date(n||0):n;try{return ul(e,"date",t,r).formatToParts(a)}catch(o){e.onError(new cn("Error formatting date.",e.locale,o))}return[]}function TE(e,t,n,r={}){const a=typeof n=="string"?new Date(n||0):n;try{return ul(e,"time",t,r).formatToParts(a)}catch(o){e.onError(new cn("Error formatting time.",e.locale,o))}return[]}const CE=["style","type","fallback","languageDisplay"];function IE({locale:e,onError:t},n,r,a){Intl.DisplayNames||t(new rs(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,ns.MISSING_INTL_API));const l=fa(a,CE);try{return n(e,l).of(r)}catch(u){t(new cn("Error formatting display name.",e,u))}}const AE=["type","style"],xw=Date.now();function OE(e){return`${xw}_${e}_${xw}`}function RE(e,t,n,r={}){const a=_0(e,t,n,r).reduce((o,l)=>{const u=l.value;return typeof u!="string"?o.push(u):typeof o[o.length-1]=="string"?o[o.length-1]+=u:o.push(u),o},[]);return a.length===1?a[0]:a.length===0?"":a}function _0({locale:e,onError:t},n,r,a={}){Intl.ListFormat||t(new rs(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,ns.MISSING_INTL_API));const l=fa(a,AE);try{const u={},d=Array.from(r).map((f,m)=>{if(typeof f=="object"&&f!==null){const y=OE(m);return u[y]=f,y}return String(f)});return n(e,l).formatToParts(d).map(f=>f.type==="literal"?f:{...f,value:u[f.value]||f.value})}catch(u){t(new cn("Error formatting list.",e,u))}return r}const DE=["type"];function PE({locale:e,onError:t},n,r,a={}){Intl.PluralRules||t(new rs(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,ns.MISSING_INTL_API));const o=fa(a,DE);try{return n(e,o).select(r)}catch(l){t(new cn("Error formatting plural.",e,l))}return"other"}const LE=["numeric","style"];function ME({locale:e,formats:t,onError:n},r,a={}){const{format:o}=a,l=!!o&&cm(t,"relative",o,n)||{},u=fa(a,LE,l);return r(e,u)}function $E(e,t,n,r,a={}){r||(r="second"),Intl.RelativeTimeFormat||e.onError(new rs(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,ns.MISSING_INTL_API));try{return ME(e,t,a).format(n,r)}catch(l){e.onError(new cn("Error formatting relative time.",e.locale,l))}return String(n)}const UE=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function E0({locale:e,formats:t,onError:n},r,a={}){const{format:o}=a,l=o&&cm(t,"number",o,n)||{},u=fa(a,UE,l);return r(e,u)}function BE(e,t,n,r={}){try{return E0(e,t,r).format(n)}catch(a){e.onError(new cn("Error formatting number.",e.locale,a))}return String(n)}function HE(e,t,n,r={}){try{return E0(e,t,r).formatToParts(n)}catch(a){e.onError(new cn("Error formatting number.",e.locale,a))}return[]}function FE(e){return typeof(e?e[Object.keys(e)[0]]:void 0)=="string"}function zE(e){e.onWarn&&e.defaultRichTextElements&&FE(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function VE(e,t){const n=jE(t),r={...S0,...e},{locale:a,defaultLocale:o,onError:l}=r;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&l?l(new vw(`Missing locale data for locale: "${a}" in Intl.NumberFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&l&&l(new vw(`Missing locale data for locale: "${a}" in Intl.DateTimeFormat. Using default locale: "${o}" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details`)):(l&&l(new vE(`"locale" was not configured, using "${o}" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details`)),r.locale=r.defaultLocale||"en"),zE(r),{...r,formatters:n,formatNumber:BE.bind(null,r,n.getNumberFormat),formatNumberToParts:HE.bind(null,r,n.getNumberFormat),formatRelativeTime:$E.bind(null,r,n.getRelativeTimeFormat),formatDate:SE.bind(null,r,n.getDateTimeFormat),formatDateToParts:EE.bind(null,r,n.getDateTimeFormat),formatTime:NE.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:_E.bind(null,r,n.getDateTimeFormat),formatTimeToParts:TE.bind(null,r,n.getDateTimeFormat),formatPlural:PE.bind(null,r,n.getPluralRules),formatMessage:tp.bind(null,r,n),$t:tp.bind(null,r,n),formatList:RE.bind(null,r,n.getListFormat),formatListToParts:_0.bind(null,r,n.getListFormat),formatDisplayName:IE.bind(null,r,n.getDisplayNames)}}function WE(e,t,n=Error){if(!e)throw new n(t)}function T0(e){WE(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}const C0={...S0,textComponent:g.Fragment},I0=e=>g.Children.toArray(e).map((n,r)=>g.isValidElement(n)?s.jsx(g.Fragment,{children:n},r):n);function KE(e){return function(t){return e(I0(t))}}function GE(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(var o=0;o<a;o++){var l=n[o];if(e[l]!==t[l]||!Object.prototype.hasOwnProperty.call(t,l))return!1}return!0}var A0={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=typeof Symbol=="function"&&Symbol.for,um=et?Symbol.for("react.element"):60103,dm=et?Symbol.for("react.portal"):60106,Lu=et?Symbol.for("react.fragment"):60107,Mu=et?Symbol.for("react.strict_mode"):60108,$u=et?Symbol.for("react.profiler"):60114,Uu=et?Symbol.for("react.provider"):60109,Bu=et?Symbol.for("react.context"):60110,hm=et?Symbol.for("react.async_mode"):60111,Hu=et?Symbol.for("react.concurrent_mode"):60111,Fu=et?Symbol.for("react.forward_ref"):60112,zu=et?Symbol.for("react.suspense"):60113,qE=et?Symbol.for("react.suspense_list"):60120,Vu=et?Symbol.for("react.memo"):60115,Wu=et?Symbol.for("react.lazy"):60116,JE=et?Symbol.for("react.block"):60121,QE=et?Symbol.for("react.fundamental"):60117,XE=et?Symbol.for("react.responder"):60118,YE=et?Symbol.for("react.scope"):60119;function Jt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case um:switch(e=e.type,e){case hm:case Hu:case Lu:case $u:case Mu:case zu:return e;default:switch(e=e&&e.$$typeof,e){case Bu:case Fu:case Wu:case Vu:case Uu:return e;default:return t}}case dm:return t}}}function O0(e){return Jt(e)===Hu}we.AsyncMode=hm;we.ConcurrentMode=Hu;we.ContextConsumer=Bu;we.ContextProvider=Uu;we.Element=um;we.ForwardRef=Fu;we.Fragment=Lu;we.Lazy=Wu;we.Memo=Vu;we.Portal=dm;we.Profiler=$u;we.StrictMode=Mu;we.Suspense=zu;we.isAsyncMode=function(e){return O0(e)||Jt(e)===hm};we.isConcurrentMode=O0;we.isContextConsumer=function(e){return Jt(e)===Bu};we.isContextProvider=function(e){return Jt(e)===Uu};we.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===um};we.isForwardRef=function(e){return Jt(e)===Fu};we.isFragment=function(e){return Jt(e)===Lu};we.isLazy=function(e){return Jt(e)===Wu};we.isMemo=function(e){return Jt(e)===Vu};we.isPortal=function(e){return Jt(e)===dm};we.isProfiler=function(e){return Jt(e)===$u};we.isStrictMode=function(e){return Jt(e)===Mu};we.isSuspense=function(e){return Jt(e)===zu};we.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Lu||e===Hu||e===$u||e===Mu||e===zu||e===qE||typeof e=="object"&&e!==null&&(e.$$typeof===Wu||e.$$typeof===Vu||e.$$typeof===Uu||e.$$typeof===Bu||e.$$typeof===Fu||e.$$typeof===QE||e.$$typeof===XE||e.$$typeof===YE||e.$$typeof===JE)};we.typeOf=Jt;A0.exports=we;var ZE=A0.exports,R0=ZE,eT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},D0={};D0[R0.ForwardRef]=eT;D0[R0.Memo]=tT;const P0=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=g.createContext(null)):g.createContext(null),{Consumer:tI,Provider:nT}=P0,rT=nT,sT=P0;function fm(){const e=g.useContext(sT);return T0(e),e}var L0=function(e){return e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName",e}(L0||{}),M0=function(e){return e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts",e}(M0||{});function $0(e){const t=n=>{const r=fm(),{value:a,children:o,...l}=n,u=typeof a=="string"?new Date(a||0):a,d=e==="formatDate"?r.formatDateToParts(u,l):r.formatTimeToParts(u,l);return o(d)};return t.displayName=M0[e],t}function dl(e){const t=n=>{const r=fm(),{value:a,children:o,...l}=n,u=r[e](a,l);if(typeof o=="function")return o(u);const d=r.textComponent||g.Fragment;return s.jsx(d,{children:u})};return t.displayName=L0[e],t}function U0(e){return e&&Object.keys(e).reduce((t,n)=>{const r=e[n];return t[n]=k0(r)?KE(r):r,t},{})}const bw=(e,t,n,r,...a)=>{const o=U0(r),l=tp(e,t,n,o,...a);return Array.isArray(l)?I0(l):l},jw=({defaultRichTextElements:e,...t},n)=>{const r=U0(e),a=VE({...C0,...t,defaultRichTextElements:r},n),o={locale:a.locale,timeZone:a.timeZone,fallbackOnEmptyString:a.fallbackOnEmptyString,formats:a.formats,defaultLocale:a.defaultLocale,defaultFormats:a.defaultFormats,messages:a.messages,onError:a.onError,defaultRichTextElements:r};return{...a,formatMessage:bw.bind(null,o,a.formatters),$t:bw.bind(null,o,a.formatters)}};function Gh(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}class np extends g.PureComponent{constructor(){super(...arguments);ue(this,"cache",N0());ue(this,"state",{cache:this.cache,intl:jw(Gh(this.props),this.cache),prevConfig:Gh(this.props)})}static getDerivedStateFromProps(n,{prevConfig:r,cache:a}){const o=Gh(n);return GE(r,o)?null:{intl:jw(o,a),prevConfig:o}}render(){return T0(this.state.intl),s.jsx(rT,{value:this.state.intl,children:this.props.children})}}ue(np,"displayName","IntlProvider"),ue(np,"defaultProps",C0);dl("formatDate");dl("formatTime");dl("formatNumber");dl("formatList");dl("formatDisplayName");$0("formatDate");$0("formatTime");var se;(function(e){e.BACKLOG="BACKLOG",e.TODO="TODO",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.BLOCKED="BLOCKED",e.ARCHIVED="ARCHIVED"})(se||(se={}));var kw;(function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.CRITICAL="CRITICAL"})(kw||(kw={}));var Sw;(function(e){e.TASK_CREATE="TASK_CREATE",e.TASK_UPDATE="TASK_UPDATE",e.TASK_DELETE="TASK_DELETE",e.POLICY_EVALUATE="POLICY_EVALUATE",e.ACCESS_DENIED="ACCESS_DENIED"})(Sw||(Sw={}));var Nw;(function(e){e.USER="USER",e.SERVICE="SERVICE",e.INTEGRATION="INTEGRATION"})(Nw||(Nw={}));function Ku(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function iT(e,t,n,r){function a(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(m){try{f(r.next(m))}catch(y){l(y)}}function d(m){try{f(r.throw(m))}catch(y){l(y)}}function f(m){m.done?o(m.value):a(m.value).then(u,d)}f((r=r.apply(e,t||[])).next())})}const aT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class pm extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class oT extends pm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _w extends pm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ew extends pm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var rp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(rp||(rp={}));class lT{constructor(t,{headers:n={},customFetch:r,region:a=rp.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=aT(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return iT(this,arguments,void 0,function*(n,r={}){var a;let o,l;try{const{headers:u,method:d,body:f,signal:m,timeout:y}=r;let v={},{region:S}=r;S||(S=this.region);const N=new URL(`${this.url}/${n}`);S&&S!=="any"&&(v["x-region"]=S,N.searchParams.set("forceFunctionRegion",S));let _;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",_=f):typeof f=="string"?(v["Content-Type"]="text/plain",_=f):typeof FormData<"u"&&f instanceof FormData?_=f:(v["Content-Type"]="application/json",_=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?_=JSON.stringify(f):_=f;let A=m;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),m?(A=l.signal,m.addEventListener("abort",()=>l.abort())):A=l.signal);const k=yield this.fetch(N.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:_,signal:A}).catch(M=>{throw new oT(M)}),w=k.headers.get("x-relay-error");if(w&&w==="true")throw new _w(k);if(!k.ok)throw new Ew(k);let j=((a=k.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),C;return j==="application/json"?C=yield k.json():j==="application/octet-stream"||j==="application/pdf"?C=yield k.blob():j==="text/event-stream"?C=k:j==="multipart/form-data"?C=yield k.formData():C=yield k.text(),{data:C,error:null,response:k}}catch(u){return{data:null,error:u,response:u instanceof Ew||u instanceof _w?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var cT=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},uT=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,u=null,d=null,f=o.status,m=o.statusText;if(o.ok){var y,v;if(n.method!=="HEAD"){var S;const k=await o.text();k===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?u=k:u=JSON.parse(k))}const _=(y=n.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),A=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");_&&A&&A.length>1&&(d=parseInt(A[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var N;const _=await o.text();try{l=JSON.parse(_),Array.isArray(l)&&o.status===404&&(u=[],l=null,f=200,m="OK")}catch{o.status===404&&_===""?(f=204,m="No Content"):l={message:_}}if(l&&n.isMaybeSingle&&(!(l==null||(N=l.details)===null||N===void 0)&&N.includes("0 rows"))&&(l=null,f=200,m="OK"),l&&n.shouldThrowOnError)throw new cT(l)}return{error:l,data:u,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(a=a.catch(o=>{var l;let u="";const d=o==null?void 0:o.cause;if(d){var f,m,y,v;const N=(f=d==null?void 0:d.message)!==null&&f!==void 0?f:"",_=(m=d==null?void 0:d.code)!==null&&m!==void 0?m:"";u=`${(y=o==null?void 0:o.name)!==null&&y!==void 0?y:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(v=d==null?void 0:d.name)!==null&&v!==void 0?v:"Error"}: ${N}`,_&&(u+=` (${_})`),d!=null&&d.stack&&(u+=`
${d.stack}`)}else{var S;u=(S=o==null?void 0:o.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},dT=class extends uT{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Tw=new RegExp("[,()]");var Di=class extends dT{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Tw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Tw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},hT=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},a=n?"HEAD":"GET";let o=!1;const l=(e??"*").split("").map(f=>/\s/.test(f)&&!o?"":(f==='"'&&(o=!o),f)).join(""),{url:u,headers:d}=this.cloneRequestState();return u.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new Di({method:a,url:u,headers:d,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const a="POST",{url:o,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);o.searchParams.set("columns",d.join(","))}}return new Di({method:a,url:o,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){var o;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&u.searchParams.set("on_conflict",t),r&&d.append("Prefer",`count=${r}`),a||d.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(f.length>0){const m=[...new Set(f)].map(y=>`"${y}"`);u.searchParams.set("columns",m.join(","))}}return new Di({method:l,url:u,headers:d,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:a,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Di({method:r,url:a,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Di({method:n,url:r,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},fT=class B0{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new hT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new B0(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:o}={}){var l;let u;const d=new URL(`${this.url}/rpc/${t}`);let f;const m=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(m)),y=r&&Object.values(n).some(m);y?(u="POST",f=n):r||a?(u=r?"HEAD":"GET",Object.entries(n).filter(([S,N])=>N!==void 0).map(([S,N])=>[S,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([S,N])=>{d.searchParams.append(S,N)})):(u="POST",f=n);const v=new Headers(this.headers);return y?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new Di({method:u,url:d,headers:v,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class pT{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const a=r.node,o=parseInt(a.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mT="2.91.0",gT=`realtime-js/${mT}`,vT="1.0.0",H0="2.0.0",Cw=H0,sp=1e4,yT=1e3,wT=100;var Mr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Mr||(Mr={}));var Je;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Je||(Je={}));var bn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bn||(bn={}));var ip;(function(e){e.websocket="websocket"})(ip||(ip={}));var Cs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Cs||(Cs={}));class xT{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const a=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,r;const a=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var a,o;const l=t.topic,u=(a=t.ref)!==null&&a!==void 0?a:"",d=(o=t.join_ref)!==null&&o!==void 0?o:"",f=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},y=Object.keys(m).length===0?"":JSON.stringify(m);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+f.length+y.length,S=new ArrayBuffer(this.HEADER_LENGTH+v);let N=new DataView(S),_=0;N.setUint8(_++,this.KINDS.userBroadcastPush),N.setUint8(_++,d.length),N.setUint8(_++,u.length),N.setUint8(_++,l.length),N.setUint8(_++,f.length),N.setUint8(_++,y.length),N.setUint8(_++,n),Array.from(d,k=>N.setUint8(_++,k.charCodeAt(0))),Array.from(u,k=>N.setUint8(_++,k.charCodeAt(0))),Array.from(l,k=>N.setUint8(_++,k.charCodeAt(0))),Array.from(f,k=>N.setUint8(_++,k.charCodeAt(0))),Array.from(y,k=>N.setUint8(_++,k.charCodeAt(0)));var A=new Uint8Array(S.byteLength+r.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(r),S.byteLength),A.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[a,o,l,u,d]=r;return n({join_ref:a,ref:o,topic:l,event:u,payload:d})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,r){const a=n.getUint8(1),o=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(t.slice(d,d+a));d=d+a;const m=r.decode(t.slice(d,d+o));d=d+o;const y=r.decode(t.slice(d,d+l));d=d+l;const v=t.slice(d,t.byteLength),S=u===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,N={type:this.BROADCAST_EVENT,event:m,payload:S};return l>0&&(N.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class F0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const Iw=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,l)=>(o[l]=bT(l,e,t,a),o),{}):{}},bT=(e,t,n,r)=>{const a=t.find(u=>u.name===e),o=a==null?void 0:a.type,l=n[e];return o&&!r.includes(o)?z0(o,l):ap(l)},z0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return NT(t,n)}switch(e){case Se.bool:return jT(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return kT(t);case Se.json:case Se.jsonb:return ST(t);case Se.timestamp:return _T(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return ap(t);default:return ap(t)}},ap=e=>e,jT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},kT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ST=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},NT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const l=e.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>z0(t,u))}return e},_T=e=>typeof e=="string"?e.replace(" ","T"):e,V0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class qh{constructor(t,n,r={},a=sp){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Aw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Aw||(Aw={}));class Ro{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ro.syncState(this.state,a,o,l),this.pendingDiffs.forEach(d=>{this.state=Ro.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ro.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const o=this.cloneDeep(t),l=this.transformState(n),u={},d={};return this.map(o,(f,m)=>{l[f]||(d[f]=m)}),this.map(l,(f,m)=>{const y=o[f];if(y){const v=m.map(A=>A.presence_ref),S=y.map(A=>A.presence_ref),N=m.filter(A=>S.indexOf(A.presence_ref)<0),_=y.filter(A=>v.indexOf(A.presence_ref)<0);N.length>0&&(u[f]=N),_.length>0&&(d[f]=_)}else u[f]=m}),this.syncDiff(o,{joins:u,leaves:d},r,a)}static syncDiff(t,n,r,a){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(u,d)=>{var f;const m=(f=t[u])!==null&&f!==void 0?f:[];if(t[u]=this.cloneDeep(d),m.length>0){const y=t[u].map(S=>S.presence_ref),v=m.filter(S=>y.indexOf(S.presence_ref)<0);t[u].unshift(...v)}r(u,m,d)}),this.map(l,(u,d)=>{let f=t[u];if(!f)return;const m=d.map(y=>y.presence_ref);f=f.filter(y=>m.indexOf(y.presence_ref)<0),t[u]=f,a(u,f,d),f.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ow;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ow||(Ow={}));var Do;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Do||(Do={}));var or;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class Ji{constructor(t,n={config:{}},r){var a,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new qh(this,bn.join,this.params,this.timeout),this.rejoinTimer=new F0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Ro(this),this.broadcastEndpointURL=V0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,f=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[Do.PRESENCE]&&this.bindings[Do.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(S=>t==null?void 0:t(or.CHANNEL_ERROR,S)),this._onClose(()=>t==null?void 0:t(or.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){t==null||t(or.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,A=(N=_==null?void 0:_.length)!==null&&N!==void 0?N:0,k=[];for(let w=0;w<A;w++){const j=_[w],{filter:{event:C,schema:M,table:D,filter:L}}=j,U=S&&S[w];if(U&&U.event===C&&Ji.isFilterValueEqual(U.schema,M)&&Ji.isFilterValueEqual(U.table,D)&&Ji.isFilterValueEqual(U.filter,L))k.push(Object.assign(Object.assign({},j),{id:U.id}));else{this.unsubscribe(),this.state=Je.errored,t==null||t(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(or.SUBSCRIBED);return}}).receive("error",S=>{this.state=Je.errored,t==null||t(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Je.joined&&t===Do.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Je.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new qh(this,bn.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Je.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new qh(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>wT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,o;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:f,join:m}=bn;if(r&&[u,d,f,m].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var N,_,A;return((N=S.filter)===null||N===void 0?void 0:N.event)==="*"||((A=(_=S.filter)===null||_===void 0?void 0:_.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(S=>S.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(S=>{var N,_,A,k,w,j,C,M;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in S){const D=S.id,L=(N=S.filter)===null||N===void 0?void 0:N.event;return D&&((_=n.ids)===null||_===void 0?void 0:_.includes(D))&&(L==="*"||(L==null?void 0:L.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))&&(!(!((k=S.filter)===null||k===void 0)&&k.table)||S.filter.table===((w=n.data)===null||w===void 0?void 0:w.table))}else{const D=(C=(j=S==null?void 0:S.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return D==="*"||D===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===l}).map(S=>{if(typeof v=="object"&&"ids"in v){const N=v.data,{schema:_,table:A,commit_timestamp:k,type:w,errors:j}=N;v=Object.assign(Object.assign({},{schema:_,table:A,commit_timestamp:k,eventType:w,new:{},old:{},errors:j}),this._getPayloadRecords(N))}S.callback(v,r)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),o={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ji.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bn.close,{},t)}_onError(t){this._on(bn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Iw(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Iw(t.columns,t.old_record)),n}}const Jh=()=>{},Tc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ET=[1e3,2e3,5e3,1e4],TT=1e4,CT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class IT{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sp,this.transport=null,this.heartbeatIntervalMs=Tc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jh,this.ref=0,this.reconnectTimer=null,this.vsn=Cw,this.logger=Jh,this.conn=null,this.sendBuffer=[],this.serializer=new xT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ip.websocket}`,this.httpEndpoint=V0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Mr.connecting:return Cs.Connecting;case Mr.open:return Cs.Open;case Mr.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(o=>o.topic===r);if(a)return a;{const o=new Ji(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){const{topic:n,event:r,payload:a,ref:o}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Tc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:a,payload:o,ref:l}=n,u=l?`(${l})`:"",d=o.status||"";this.log("receive",`${d} ${r} ${a} ${u}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(a,o,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Mr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Mr.open||this.conn.readyState===Mr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([CT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const o={access_token:n,version:gT};n&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(bn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new F0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,o,l,u,d,f,m,y,v,S;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:sp,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Tc.HEARTBEAT_INTERVAL,this.worker=(o=t==null?void 0:t.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Jh,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:Cw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:N=>ET[N-1]||TT,this.vsn){case vT:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:(N,_)=>_(JSON.stringify(N)),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:(N,_)=>_(JSON.parse(N));break;case H0:this.encode=(v=t==null?void 0:t.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(S=t==null?void 0:t.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Yo=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function AT(e,t,n){const r=new URL(t,e);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&r.searchParams.set(a,o);return r.toString()}async function OT(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function RT(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:a,body:o,headers:l}){const u=AT(e.baseUrl,r,a),d=await OT(e.auth),f=await t(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...d,...l},body:o?JSON.stringify(o):void 0}),m=await f.text(),y=(f.headers.get("content-type")||"").includes("application/json"),v=y&&m?JSON.parse(m):m;if(!f.ok){const S=y?v:void 0,N=S==null?void 0:S.error;throw new Yo((N==null?void 0:N.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:S})}return{status:f.status,headers:f.headers,data:v}}}}function Cc(e){return e.join("")}var DT=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Cc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cc(e.namespace)}`}),!0}catch(t){if(t instanceof Yo&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Yo&&n.status===409)return;throw n}}};function Ti(e){return e.join("")}var PT=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ti(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Yo&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Yo&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},LT=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=RT({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new DT(this.client,t),this.tableOps=new PT(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Gu=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function De(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var MT=class extends Gu{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},op=class extends Gu{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const mm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$T=()=>Response,lp=e=>{if(Array.isArray(e))return e.map(n=>lp(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[a]=lp(r)}),t},UT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},BT=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Zo(e){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(e)}function HT(e,t){if(Zo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FT(e){var t=HT(e,"string");return Zo(t)=="symbol"?t:t+""}function zT(e,t,n){return(t=FT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rw(Object(n),!0).forEach(function(r){zT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Qh=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},VT=async(e,t,n)=>{e instanceof await $T()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const a=e.status||500,o=(r==null?void 0:r.statusCode)||a+"";t(new MT(Qh(r),a,o))}).catch(r=>{t(new op(Qh(r),r))}):t(new op(Qh(e),e))},WT=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(UT(r)?(a.headers=Y({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Y(Y({},a),n))};async function hl(e,t,n,r,a,o){return new Promise((l,u)=>{e(n,WT(t,r,a,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>VT(d,u,r))})}async function el(e,t,n,r){return hl(e,"GET",t,n,r)}async function wn(e,t,n,r,a){return hl(e,"POST",t,r,a,n)}async function cp(e,t,n,r,a){return hl(e,"PUT",t,r,a,n)}async function KT(e,t,n,r){return hl(e,"HEAD",t,Y(Y({},n),{},{noResolveJson:!0}),r)}async function gm(e,t,n,r,a){return hl(e,"DELETE",t,r,a,n)}var GT=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(De(t))return{data:null,error:t};throw t}}};let W0;W0=Symbol.toStringTag;var qT=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[W0]="BlobDownloadBuilder",this.promise=null}asStream(){return new GT(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(De(t))return{data:null,error:t};throw t}}};const JT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var QT=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=mm(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var a=this;try{let o;const l=Y(Y({},Dw),r);let u=Y(Y({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",a.encodeMetadata(d)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),d&&!o.has("metadata")&&o.append("metadata",a.encodeMetadata(d))):(o=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=a.toBase64(a.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(u=Y(Y({},u),r.headers));const f=a._removeEmptyFolders(t),m=a._getFinalPath(f),y=await(e=="PUT"?cp:wn)(a.fetch,`${a.url}/object/${m}`,o,Y({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:f,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(De(o))return{data:null,error:o};throw o}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var a=this;const o=a._removeEmptyFolders(e),l=a._getFinalPath(o),u=new URL(a.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const f=Y({upsert:Dw.upsert},r),m=Y(Y({},a.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType),{data:{path:o,fullPath:(await cp(a.fetch,u.toString(),d,{headers:m})).Key},error:null}}catch(d){if(a.shouldThrowOnError)throw d;if(De(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const a=Y({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const o=await wn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:a}),l=new URL(n.url+o.url),u=l.searchParams.get("token");if(!u)throw new Gu("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await wn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}}async copy(e,t,n){var r=this;try{return{data:{path:(await wn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var r=this;try{let a=r._getFinalPath(e),o=await wn(r.fetch,`${r.url}/object/sign/${a}`,Y({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var r=this;try{const a=await wn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Y(Y({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=r?`?${r}`:"",o=this._getFinalPath(e),l=()=>el(this.fetch,`${this.url}/${n}/${o}${a}`,{headers:this.headers,noResolveJson:!0});return new qT(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:lp(await el(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await KT(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(De(r)&&r instanceof op){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&r.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(e){var t=this;try{return{data:await gm(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const a=Y(Y(Y({},JT),t),{},{prefix:e||""});return{data:await wn(r.fetch,`${r.url}/object/list/${r.bucketId}`,a,{headers:r.headers},n),error:null}}catch(a){if(r.shouldThrowOnError)throw a;if(De(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const r=Y({},e);return{data:await wn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const K0="2.91.0",G0={"X-Client-Info":`storage-js/${K0}`};var XT=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const a=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Y(Y({},G0),t),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await el(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await el(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await wn(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await cp(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(De(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await gm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},YT=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Y(Y({},G0),t),this.fetch=mm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),a=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await el(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await gm(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(De(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!BT(e))throw new Gu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new LT({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(a,o){const l=a[o];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(a,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}};const vm={"X-Client-Info":`storage-js/${K0}`,"Content-Type":"application/json"};var q0=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ft(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Xh=class extends q0{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},ZT=class extends q0{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ym=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eC=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Pw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tC=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";t(new Xh(Pw(o),r,l))}).catch(()=>{const o=r+"";t(new Xh(a.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";t(new Xh(a.statusText||`HTTP ${r} error`,r,o))}}else t(new ZT(Pw(e),e))},nC=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(eC(r)?(a.headers=Y({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Y(Y({},a),n)):a};async function rC(e,t,n,r,a,o){return new Promise((l,u)=>{e(n,nC(t,r,a,o)).then(d=>{if(!d.ok)throw d;if(r!=null&&r.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>tC(d,u,r))})}async function zt(e,t,n,r,a){return rC(e,"POST",t,r,a,n)}var sC=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Y(Y({},vm),t),this.fetch=ym(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await zt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await zt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}}},iC=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Y(Y({},vm),t),this.fetch=ym(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await zt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await zt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await zt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}},aC=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Y(Y({},vm),t),this.fetch=ym(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await zt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ft(n))return{data:null,error:n};throw n}}},oC=class extends aC{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new lC(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},lC=class extends sC{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new cC(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},cC=class extends iC{constructor(e,t,n,r,a){super(e,t,a),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Y(Y({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},uC=class extends XT{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new QT(this.url,this.headers,e,this.fetch)}get vectors(){return new oC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new YT(this.url+"/iceberg",this.headers,this.fetch)}};const J0="2.91.0",Pi=30*1e3,up=3,Yh=up*Pi,dC="http://localhost:9999",hC="supabase.auth.token",fC={"X-Client-Info":`gotrue-js/${J0}`},dp="X-Supabase-Api-Version",Q0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mC=10*60*1e3;class tl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class gC extends tl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function vC(e){return W(e)&&e.name==="AuthApiError"}class Is extends tl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class vr extends tl{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Ut extends vr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yC(e){return W(e)&&e.name==="AuthSessionMissingError"}class Ci extends vr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ic extends vr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ac extends vr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wC(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lw extends vr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xC extends vr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class hp extends vr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Zh(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Mw extends vr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class fp extends vr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$w=` 	
\r=`.split(""),bC=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$w.length;t+=1)e[$w[t].charCodeAt(0)]=-2;for(let t=0;t<vu.length;t+=1)e[vu[t].charCodeAt(0)]=t;return e})();function Uw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vu[r]),t.queuedBits-=6}}function X0(e,t,n){const r=bC[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Bw(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{SC(l,r,n)};for(let l=0;l<e.length;l+=1)X0(e.charCodeAt(l),a,o);return t.join("")}function jC(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kC(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}jC(r,t)}}function SC(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function na(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)X0(e.charCodeAt(a),n,r);return new Uint8Array(t)}function NC(e){const t=[];return kC(e,n=>t.push(n)),new Uint8Array(t)}function Ds(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>Uw(a,n,r)),Uw(null,n,r),t.join("")}function _C(e){return Math.round(Date.now()/1e3)+e}function EC(){return Symbol("auth-callback")}const it=()=>typeof window<"u"&&typeof document<"u",Ss={tested:!1,writable:!1},Y0=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ss.tested)return Ss.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ss.tested=!0,Ss.writable=!0}catch{Ss.tested=!0,Ss.writable=!1}return Ss.writable};function TC(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{t[o]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const Z0=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),CC=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Li=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ns=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},st=async(e,t)=>{await e.removeItem(t)};class qu{constructor(){this.promise=new qu.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}qu.promiseConstructor=Promise;function ef(e){const t=e.split(".");if(t.length!==3)throw new fp("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!pC.test(t[r]))throw new fp("JWT not in base64url format");return{header:JSON.parse(Bw(t[0])),payload:JSON.parse(Bw(t[1])),signature:na(t[2]),raw:{header:t[0],payload:t[1]}}}async function IC(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function AC(e,t){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await e(o);if(!t(o,null,l)){r(l);return}}catch(l){if(!t(o,l)){a(l);return}}})()})}function OC(e){return("0"+e.toString(16)).substr(-2)}function RC(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,OC).join("")}async function DC(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function PC(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await DC(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ii(e,t,n=!1){const r=RC();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Li(e,`${t}-code-verifier`,a);const o=await PC(r);return[o,r===o?"plain":"s256"]}const LC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MC(e){const t=e.headers.get(dp);if(!t||!t.match(LC))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $C(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function UC(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const BC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ai(e){if(!BC.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function HC(e,t){return new Proxy(e,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,a)}})}function Hw(e){return JSON.parse(JSON.stringify(e))}const Ts=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FC=[502,503,504];async function Fw(e){var t;if(!CC(e))throw new hp(Ts(e),0);if(FC.includes(e.status))throw new hp(Ts(e),e.status);let n;try{n=await e.json()}catch(o){throw new Is(Ts(o),o)}let r;const a=MC(e);if(a&&a.getTime()>=Q0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Mw(Ts(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ut}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new Mw(Ts(n),e.status,n.weak_password.reasons);throw new gC(Ts(n),e.status||500,r)}const zC=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function X(e,t,n,r){var a;const o=Object.assign({},r==null?void 0:r.headers);o[dp]||(o[dp]=Q0["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await VC(e,t,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function VC(e,t,n,r,a,o){const l=zC(t,r,a,o);let u;try{u=await e(n,Object.assign({},l))}catch(d){throw console.error(d),new hp(Ts(d),0)}if(u.ok||await Fw(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Fw(d)}}function vn(e){var t;let n=null;GC(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=_C(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function zw(e){const t=vn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Br(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function WC(e){return{data:e,error:null}}function KC(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=e,l=Ku(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Vw(e){return e}function GC(e){return e.access_token&&e.refresh_token&&e.expires_in}const nf=["global","local","others"];class qC{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Z0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=nf[0]){if(nf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nf.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Br})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Ku(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:KC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(W(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Br})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Vw});if(m.error)throw m.error;const y=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return S.length>0&&(S.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);f[`${A}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(W(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Ai(t);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Br})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ai(t);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Br})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ai(t);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Br})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ai(t.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ai(t.userId),Ai(t.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,a,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},m=await X(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Vw});if(m.error)throw m.error;const y=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return S.length>0&&(S.forEach(N=>{const _=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(N.split(";")[1].split("=")[1]);f[`${A}Page`]=_}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},y),f),error:null}}catch(f){if(W(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await X(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await X(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await X(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await X(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await X(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}}function Ww(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Oi={debug:!!(globalThis&&Y0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ej extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class JC extends ej{}async function QC(e,t,n){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Oi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new JC(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Oi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tj(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function YC(e){return parseInt(e,16)}function ZC(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function e1(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:u,requestId:d,resources:f,scheme:m,uri:y,version:v}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const S=tj(e.address),N=m?`${m}://${r}`:r,_=e.statement?`${e.statement}
`:"",A=`${N} wants you to sign in with your Ethereum account:
${S}

${_}`;let k=`URI: ${y}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(k+=`
Expiration Time: ${a.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),d&&(k+=`
Request ID: ${d}`),f){let w=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);w+=`
- ${j}`}k+=w}return`${A}
${k}`}class We extends Error{constructor({message:t,code:n,cause:r,name:a}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=a??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class yu extends We{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function t1({error:e,options:t}){var n,r,a;const{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new We({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(nj(l)){if(o.rp.id!==l)return new We({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function n1({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new We({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(nj(r)){if(n.rpId!==r)return new We({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class r1{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const s1=new r1;function i1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=Ku(e,["challenge","user","excludeCredentials"]),o=na(t).buffer,l=Object.assign(Object.assign({},n),{id:na(n.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:o,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:na(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function a1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Ku(e,["challenge","allowCredentials"]),a=na(t).buffer,o=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];o.allowCredentials[l]=Object.assign(Object.assign({},u),{id:na(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function o1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ds(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ds(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function l1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ds(new Uint8Array(a.authenticatorData)),clientDataJSON:Ds(new Uint8Array(a.clientDataJSON)),signature:Ds(new Uint8Array(a.signature)),userHandle:a.userHandle?Ds(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function nj(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Kw(){var e,t;return!!(it()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function c1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yu("Browser returned unexpected credential type",t)}:{data:null,error:new yu("Empty credential response",t)}}catch(t){return{data:null,error:t1({error:t,options:e})}}}async function u1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yu("Browser returned unexpected credential type",t)}:{data:null,error:new yu("Empty credential response",t)}}catch(t){return{data:null,error:n1({error:t,options:e})}}}const d1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},h1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function wu(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of e)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(n(l))r[o]=l;else if(t(l)){const u=r[o];t(u)?r[o]=wu(u,l):r[o]=wu(l)}else r[o]=l}return r}function f1(e,t){return wu(d1,e,t||{})}function p1(e,t){return wu(h1,e,t||{})}class m1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:a},o){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const d=a??s1.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:f}=l.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(l.webauthn.type){case"create":{const f=f1(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:m,error:y}=await c1({publicKey:f,signal:d});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}case"request":{const f=p1(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:m,error:y}=await u1(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:f,signal:d}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:y}}}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Is("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn authentication")};try{if(!Kw())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:o});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Is("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn registration")};try{if(!Kw())return{data:null,error:new Is("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var y;return(y=m.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:o});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return W(l)?{data:null,error:l}:{data:null,error:new Is("Unexpected error in register",l)}}}}XC();const g1={url:dC,storageKey:hC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Gw(e,t,n){return await n()}const Ri={};class nl{get jwks(){var t,n;return(n=(t=Ri[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ri[this.storageKey]=Object.assign(Object.assign({},Ri[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ri[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ri[this.storageKey]=Object.assign(Object.assign({},Ri[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},g1),t);if(this.storageKey=o.storageKey,this.instanceID=(n=nl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,nl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&it()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new qC({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Z0(o.fetch),this.lock=o.lock||Gw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&it()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=QC:this.lock=Gw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new m1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Y0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ww(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ww(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${J0}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(it()&&(n=TC(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),it()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wC(o)){const d=(t=o.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return W(n)?this._returnResult({error:n}):this._returnResult({error:new Is("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:vn}),{data:l,error:u}=o;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(t){var n,r,a;try{let o;if("email"in t){const{email:m,password:y,options:v}=t;let S=null,N=null;this.flowType==="pkce"&&([S,N]=await Ii(this.storage,this.storageKey)),o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:y,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:S,code_challenge_method:N},xform:vn})}else if("phone"in t){const{phone:m,password:y,options:v}=t;o=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(a=v==null?void 0:v.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:vn})}else throw new Ic("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return await st(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(t){try{let n;if("email"in t){const{email:o,password:l,options:u}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zw})}else if("phone"in t){const{phone:o,password:l,options:u}=t;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zw})}else throw new Ic("You must provide either an email or phone number and a password");const{data:r,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const o=new Ci;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,a,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,a,o,l,u,d,f,m,y,v;let S,N;if("message"in t)S=t.message,N=t.signature;else{const{chain:_,wallet:A,statement:k,options:w}=t;let j;if(it())if(typeof A=="object")j=A;else{const le=window;if("ethereum"in le&&typeof le.ethereum=="object"&&"request"in le.ethereum&&typeof le.ethereum.request=="function")j=le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=A}const C=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),M=await j.request({method:"eth_requestAccounts"}).then(le=>le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=tj(M[0]);let L=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const le=await j.request({method:"eth_chainId"});L=YC(le)}const U={domain:C.host,address:D,statement:k,uri:C.href,version:"1",chainId:L,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=w==null?void 0:w.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=w==null?void 0:w.signInWithEthereum)===null||m===void 0?void 0:m.resources};S=e1(U),N=await j.request({method:"personal_sign",params:[ZC(S),D]})}try{const{data:_,error:A}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:N},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:vn});if(A)throw A;if(!_||!_.session||!_.user){const k=new Ci;return this._returnResult({data:{user:null,session:null},error:k})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:A})}catch(_){if(W(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(t){var n,r,a,o,l,u,d,f,m,y,v,S;let N,_;if("message"in t)N=t.message,_=t.signature;else{const{chain:A,wallet:k,statement:w,options:j}=t;let C;if(it())if(typeof k=="object")C=k;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))C=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=k}const M=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const D=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),w?{statement:w}:null));let L;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")L=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)L=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)N=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),_=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${M.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(a=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((y=(m=j==null?void 0:j.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...j.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const D=await C.signMessage(new TextEncoder().encode(N),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=D}}try{const{data:A,error:k}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Ds(_)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(S=t.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:vn});if(k)throw k;if(!A||!A.session||!A.user){const w=new Ci;return this._returnResult({data:{user:null,session:null},error:w})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:k})}catch(A){if(W(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(t){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new xC;const{data:o,error:l}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:vn});if(await st(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const u=new Ci;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",o.session)},0)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:o,nonce:l}=t,u=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:vn}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new Ci;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,a,o,l;try{if("email"in t){const{email:u,options:d}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ii(this.storage,this.storageKey));const{error:y}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in t){const{phone:u,options:d}=t,{data:f,error:m}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Ic("You must provide either an email or phone number.")}catch(u){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,r;try{let a,o;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,o=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:vn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,r,a,o,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Ii(this.storage,this.storageKey));const f=await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:WC});return!((o=f.data)===null||o===void 0)&&o.url&&it()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ut;const{error:a}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(W(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:o}=t,{error:l}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:a,options:o}=t,{data:l,error:u}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Ic("You must provide either an email or phone number and a type")}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Yh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await Ns(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=tf()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=HC(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Br}):await this._useSession(async n=>{var r,a,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Br})})}catch(n){if(W(n))return yC(n)&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new Ut;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Ii(this.storage,this.storageKey));const{data:f,error:m}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Br});if(m)throw m;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ut;const n=Date.now()/1e3;let r=n,a=!0,o=null;const{payload:l}=ef(t.access_token);if(l.exp&&(r=l.exp,a=r<=n),a){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;o={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(W(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ut;const{data:a,error:o}=await this._callRefreshToken(t.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(W(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!it())throw new Ac("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ac(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Lw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ac("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lw("No code detected.");const{data:w,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=t;if(!o||!u||!l||!f)throw new Ac("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(u);let v=m+y;d&&(v=parseInt(d));const S=v-m;S*1e3<=Pi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${y}s`);const N=v-y;m-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,v,m):m-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,v,m);const{data:_,error:A}=await this._getUser(o);if(A)throw A;const k={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:f,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:t.type},error:null})}catch(r){if(W(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const l=(r=a.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(vC(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await st(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=EC(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Ii(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:a}=await this._useSession(async o=>{var l,u,d,f,m;const{data:y,error:v}=o;if(v)throw v;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",S,{headers:this.headers,jwt:(m=(f=y.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return it()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(W(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:l,provider:u,token:d,access_token:f,nonce:m}=t,y=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vn}),{data:v,error:S}=y;return S?this._returnResult({data:{user:null,session:null},error:S}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Ci}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:S}))}catch(a){if(await st(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:o,error:l}=n;if(l)throw l;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await AC(async a=>(a>0&&await IC(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vn})),(a,o)=>{const l=200*Math.pow(2,a);return o&&Zh(o)&&Date.now()+l-r<Pi})}catch(r){if(this._debug(n,"error",r),W(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),it()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ns(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ns(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Li(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:tf()}else if(a&&!a.user&&!a.user){const l=await Ns(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await st(this.storage,this.storageKey+"-user"),await Li(this.storage,this.storageKey,a)):a.user=tf()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Yh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Yh}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Zh(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new qu;const{data:o,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!o.session)throw new Ut;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),W(o)){const l={data:null,error:o};return Zh(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await st(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Li(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=Hw(a);await Li(this.storage,this.storageKey,o)}else{const a=Hw(n);await Li(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await st(this.storage,this.storageKey),await st(this.storage,this.storageKey+"-code-verifier"),await st(this.storage,this.storageKey+"-user"),this.userStorage&&await st(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Pi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Pi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Pi}ms, refresh threshold is ${up} ticks`),a<=up&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ej)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Ii(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await X(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:f}=await X(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?o1(t.webauthn.credential_response):l1(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const l=await X(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:i1(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:a1(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=ef(r.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?await X(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ut});const l=await X(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&it()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ut});const l=await X(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&it()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await X(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ut})})}catch(t){if(W(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?this._returnResult({data:null,error:a}):r?(await X(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ut})})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(u=>u.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(u=>u.kid===t),r&&this.jwks_cached_at+mC>a)return r;const{data:o,error:l}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,r=o.keys.find(u=>u.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:S,error:N}=await this.getSession();if(N||!S.session)return this._returnResult({data:null,error:N});r=S.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:d}}=ef(r);n!=null&&n.allowExpired||$C(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:o,header:a,signature:l},error:null}}const m=UC(a.alg),y=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,NC(`${u}.${d}`)))throw new fp("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}}nl.nextInstanceID={};const v1=nl,y1="2.91.0";let ko="";typeof Deno<"u"?ko="deno":typeof document<"u"?ko="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ko="react-native":ko="node";const w1={"X-Client-Info":`supabase-js-${ko}/${y1}`},x1={headers:w1},b1={schema:"public"},j1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k1={};function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function S1(e,t){if(rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N1(e){var t=S1(e,"string");return rl(t)=="symbol"?t:t+""}function _1(e,t,n){return(t=N1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(n),!0).forEach(function(r){_1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const E1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),T1=()=>Headers,C1=(e,t,n)=>{const r=E1(n),a=T1();return async(o,l)=>{var u;const d=(u=await t())!==null&&u!==void 0?u:e;let f=new a(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,$e($e({},l),{},{headers:f}))}};function I1(e){return e.endsWith("/")?e:e+"/"}function A1(e,t){var n,r;const{db:a,auth:o,realtime:l,global:u}=e,{db:d,auth:f,realtime:m,global:y}=t,v={db:$e($e({},d),a),auth:$e($e({},f),o),realtime:$e($e({},m),l),storage:{},global:$e($e($e({},y),u),{},{headers:$e($e({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function O1(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(I1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var R1=class extends v1{constructor(e){super(e)}},D1=class{constructor(e,t,n){var r,a;this.supabaseUrl=e,this.supabaseKey=t;const o=O1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:b1,realtime:k1,auth:$e($e({},j1),{},{storageKey:l}),global:x1},d=A1(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=C1(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient($e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new fT(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new uC(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new lT(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,storageKey:o,flowType:l,lock:u,debug:d,throwOnError:f},m,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new R1({url:this.authUrl.href,headers:$e($e({},v),m),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:a,flowType:l,lock:u,debug:d,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new IT(this.realtimeUrl.href,$e($e({},e),{},{params:$e($e({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const P1=(e,t,n)=>new D1(e,t,n);function L1(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}L1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const M1="https://mvewgciqyhjcnxkfpawb.supabase.co",$1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12ZXdnY2lxeWhqY254a2ZwYXdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjM2MDQsImV4cCI6MjA4NDQ5OTYwNH0.TIHQZdtG9pfK19kaPjGTKDumxT5KKTsdGGVuhWPn7zU",Dr=P1(M1,$1),Jw=[{value:"email",labelId:"inbox.source.email",defaultMessage:"Email"},{value:"meeting",labelId:"inbox.source.meeting",defaultMessage:"Meeting note"},{value:"request",labelId:"inbox.source.request",defaultMessage:"Request"},{value:"idea",labelId:"inbox.source.idea",defaultMessage:"Idea"},{value:"external",labelId:"inbox.source.external",defaultMessage:"External"}],Qw=[{value:"this-week",labelId:"inbox.action.thisWeek",defaultMessage:"This Week"},{value:"next-week",labelId:"inbox.action.nextWeek",defaultMessage:"Next Week"},{value:"later",labelId:"inbox.action.later",defaultMessage:"Later"},{value:"archive",labelId:"inbox.action.archive",defaultMessage:"Archive"}],ie="http://localhost:4000",Hn="archived",_t="all",$t="mine",Xw="kanbax-inbox-items",rj="kanbax-inbox-statuses",U1=()=>{if(typeof window>"u")return{};try{const e=window.localStorage.getItem(rj);return e?JSON.parse(e):{}}catch{return{}}},B1=()=>{var Nv,_v,Ev,Tv,Cv,Iv,Av,Ov,Rv,Dv,Pv,Lv,Mv,$v,Uv,Bv,Hv,Fv,zv,Vv,Wv,Kv,Gv,qv,Jv,Qv,Xv,Yv,Zv;const e=fm(),t=(i,c)=>e.formatMessage({id:i},{defaultMessage:c}),n=(i,c,h,p)=>{if(!c)return t(h,p);const x=i.find(b=>b.value===c);return x?t(x.labelId,x.defaultMessage):c},r=i=>n(Jw,i,"inbox.field.selectSource","Quelle whlen"),a=i=>n(Qw,i,"inbox.field.selectAction","Aktion whlen"),[o,l]=g.useState("dashboard"),[u,d]=g.useState(null),[f,m]=g.useState("comments"),[y,v]=g.useState(null),[S,N]=g.useState(null),[_,A]=g.useState(U1),[k,w]=g.useState(null),[j,C]=g.useState("eingang"),M={eingang:{label:t("inbox.view.incoming","Eingang"),tooltip:t("inbox.tooltip.incoming","Unsortierte Arbeit. Entscheide was wichtig ist")},spaeter:{label:t("inbox.view.later","Spter"),tooltip:t("inbox.tooltip.later","Spter / in Bearbeitung")},bearbeitet:{label:t("inbox.view.review","Bearbeitet"),tooltip:t("inbox.tooltip.review","Zur spteren berprfung")},archiv:{label:t("inbox.view.archived","Archiviert"),tooltip:t("inbox.tooltip.archived","Archivierte Items")}},[D,L]=g.useState(!1),[U,le]=g.useState(!1),[ne,ct]=g.useState(!1),qn=g.useRef(null),Jn=g.useRef(null),fl=s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:[s.jsx("path",{d:"M5 6.5V20h14V8.5L17.5 5H6a1 1 0 0 0-1 1.5z"}),s.jsx("path",{d:"M6 5.5h10v4H6z"}),s.jsx("circle",{cx:"12",cy:"15.5",r:"2",fill:"currentColor",stroke:"none"})]}),[ss,pa]=g.useState([]),Ws=i=>{const c=typeof i=="function"?i(ss):i;pa(c);try{localStorage.setItem(Xw,JSON.stringify(c))}catch{}},B=i=>{if(!(typeof window>"u"))try{window.localStorage.setItem(rj,JSON.stringify(i))}catch{}},ee=(i,c)=>{A(h=>{if(h[i]===c)return h;const p={...h,[i]:c};return B(p),p}),c==="bearbeitet"&&N(i),c!==j&&w(null)},[q,xe]=g.useState({title:"",source:"",suggestedAction:"",description:""}),Be=i=>{U&&qn.current&&!qn.current.contains(i.target)&&le(!1),ne&&Jn.current&&!Jn.current.contains(i.target)&&ct(!1)};g.useEffect(()=>{o==="list"&&l("table")},[o]),g.useEffect(()=>{const i=new URLSearchParams(window.location.search);if(i.get("view")==="calendar"){l("calendar"),i.delete("view");const h=i.toString();window.history.replaceState({},"",`${window.location.pathname}${h?`?${h}`:""}`)}},[]),g.useEffect(()=>{const i=()=>{const h=new URLSearchParams(window.location.search).get("scope");h?(hn(h),l("scope"),Rt("detail")):(hn(null),Rt("list"))};return i(),window.addEventListener("popstate",i),()=>window.removeEventListener("popstate",i)},[]),g.useEffect(()=>{try{const i=localStorage.getItem(Xw);if(i){const c=JSON.parse(i);Ws(c)}}catch{}},[]),g.useEffect(()=>{!k&&ss.length>0&&w(ss[0].id)},[ss,k]);const[V,_n]=g.useState(null),[$,un]=g.useState(null),[Qt,Ju]=g.useState([]),[ma,wm]=g.useState([]),[E,xm]=g.useState(()=>{try{return localStorage.getItem("kanbax-active-tenant")}catch{return null}}),[ga,pl]=g.useState(!1),[Qu,Xu]=g.useState(""),[bm,jm]=g.useState(""),[km,sj]=g.useState("MEMBER"),[Sm,ij]=g.useState([]),[ml,Xt]=g.useState(null),[aj,Nm]=g.useState(!1),[_m,oj]=g.useState(!1),[lj,cj]=g.useState(!1),[Yu,gl]=g.useState(!1),[Ks,uj]=g.useState({}),[yr,Zu]=g.useState("login"),[vl,dj]=g.useState(""),[ed,hj]=g.useState(""),[Em,yl]=g.useState(null),[Tm,va]=g.useState(null),[fj,Cm]=g.useState(!1),[O,Te]=g.useState(null),[Im,Am]=g.useState(!1),[Om,td]=g.useState(null),[wl,Qn]=g.useState(null),[nd,wr]=g.useState([]),[ya,xl]=g.useState(null),[Rm,Gs]=g.useState({}),[dn,Dm]=g.useState({}),[Pm,Lm]=g.useState({}),[V1,Mm]=g.useState(!1),[xr,$m]=g.useState(null),[Um,Bm]=g.useState(!1),bl=g.useRef(!1);g.useRef(null);const qs=g.useRef(null),Js=g.useRef(null),Hm=g.useRef(0),[rd,is]=g.useState(!1),[sd,Yt]=g.useState(!1),[id,ad]=g.useState(!1),[Qs,as]=g.useState(!1),[Xs,os]=g.useState(!1),od=g.useRef(null),ld=g.useRef(null),[W1,pj]=g.useState(null),[Ys,K1]=g.useState(30);g.useEffect(()=>{pj(null)},[Ys]);const[tt,mj]=g.useState(()=>{try{return localStorage.getItem("kanbax-sidebar-collapsed")==="true"}catch{return!1}}),[he,cd]=g.useState([]),[En,jl]=g.useState(null),[kt,ud]=g.useState([]),[Tn,Fm]=g.useState({}),[dd,kl]=g.useState(!1),[hd,Sl]=g.useState(!1),[fd,Nl]=g.useState(!1),[_l,gj]=g.useState(()=>{try{const i=localStorage.getItem("kanbax-scope-windows");if(!i)return{};const c=JSON.parse(i),h={};return Object.entries(c).forEach(([p,x])=>{if(Array.isArray(x))if(p.includes(":")){const b=p.split(":")[0];if(!b)return;const I=h[b]||[];x.forEach(R=>{I.some(T=>T.id===R.id)||I.push(R)}),h[b]=I}else h[p]=x}),h}catch{return{}}}),[Cn,wa]=g.useState({name:"",description:"",startDate:"",endDate:""}),[pd,Zs]=g.useState(null),[md,xa]=g.useState(""),[vj,El]=g.useState(null),[In,ls]=g.useState(null),[gt,Rt]=g.useState("list"),[ba,hn]=g.useState(null),[br,zm]=g.useState("ALL"),[jr,Vm]=g.useState("ALL"),[ei,ja]=g.useState(!1),[ti,ka]=g.useState(!1),[ni,Wm]=g.useState("board"),[Km,Tl]=g.useState(!1),[gd,yj]=g.useState("current"),[Sa,Na]=g.useState(!1),[Gm,wj]=g.useState(!1),[Dt,_a]=g.useState({name:"",description:"",startDate:"",endDate:""}),[re,ri]=g.useState(null),[Cl,cs]=g.useState([]),[qm,Jm]=g.useState(!1),[Qm,vd]=g.useState(null),[si,fn]=g.useState(null),[Ea,G1]=g.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-pinned")||"[]")}catch{return[]}}),[Xm,Ym]=g.useState([]),[Ta,xj]=g.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-recent")||"[]")}catch{return[]}}),[An,Zm]=g.useState(null),[kr,eg]=g.useState("list"),[On,yd]=g.useState("list"),[Ca,wd]=g.useState(0),[xd,Ia]=g.useState(!1),[bd,Il]=g.useState(!1),[jd,Aa]=g.useState(!1),[ii,Oa]=g.useState(null),[kd,Ra]=g.useState(!1),[Al,Da]=g.useState(null),[Pa,Ol]=g.useState(null),[Ce,Rn]=g.useState({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),[Ge,ut]=g.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[us,ds]=g.useState({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[q1,J1]=g.useState({}),[Sd,tg]=g.useState(""),[ai,bj]=g.useState("ALL"),[Nd,jj]=g.useState(!1),[Xn,ng]=g.useState("ALL"),[La,kj]=g.useState("ALL"),[Yn,Ma]=g.useState(!1),_d=g.useRef(null),[oi,Ed]=g.useState([]),[li,Rl]=g.useState(!1),[Sr,$a]=g.useState(!1),Td=g.useRef(null),Cd=g.useRef(null),Id=g.useRef(null),Ad=g.useRef(null),[Dn,nt]=g.useState(null),[ci,rg]=g.useState(()=>new Date),[Od,Rd]=g.useState(()=>new Date),[sg,ig]=g.useState([]),[Sj,Nj]=g.useState([]),[_j,ag]=g.useState(!1),[og,Pn]=g.useState(null);g.useEffect(()=>{const i=c=>{const h=c.target;Xs&&od.current&&!od.current.contains(h)&&os(!1),Qs&&ld.current&&!ld.current.contains(h)&&as(!1),Yn&&_d.current&&!_d.current.contains(h)&&Ma(!1),li&&Td.current&&!Td.current.contains(h)&&Rl(!1),Sr&&Cd.current&&!Cd.current.contains(h)&&$a(!1),ei&&Id.current&&!Id.current.contains(h)&&ja(!1),ti&&Ad.current&&!Ad.current.contains(h)&&ka(!1),Dn&&(h.closest("[data-member-dropdown]")||nt(null))};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[Xs,Qs,Yn,li,Sr,ei,ti,Dn]);const[lg,cg]=g.useState(""),[Dl,ug]=g.useState(null),[Pl,Ll]=g.useState(!1),[Ej,Tj]=g.useState(0),[dg,hg]=g.useState(""),[Ml,fg]=g.useState(""),[Q1,ui]=g.useState(()=>!tt),[X1,di]=g.useState(()=>!tt&&o==="okr"),[Ua,Dd]=g.useState(!1);g.useEffect(()=>{o!=="kanban"&&o!=="table"&&ui(!1),o!=="okr"&&di(!1)},[o]);const[Zt,hi]=g.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[pg,Ba]=g.useState([]),[Ha,Fa]=g.useState([]),[mg,za]=g.useState(""),[ve,gg]=g.useState(null),[Va,Wa]=g.useState(null),[hs,$l]=g.useState(null),[Nr,Pd]=g.useState([]),[Cj,Ij]=g.useState(se.BACKLOG),[Ka,_r]=g.useState(!1),[Ld,fs]=g.useState(null),[Ga,Md]=g.useState(!1),[qa,$d]=g.useState(null),[Pt,Ja]=g.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[fe,vg]=g.useState(null),[ps,Ul]=g.useState(null),[Aj,yg]=g.useState(null),[Qa,Oj]=g.useState(null),[ms,Bl]=g.useState(null),[Er,Ud]=g.useState([]),[Rj,wg]=g.useState([]),[Hl,fi]=g.useState([]),[Dj,Fl]=g.useState([]),[Pj,zl]=g.useState([]),[Xa,Vl]=g.useState([]),[xg,Wl]=g.useState(""),[bg,Bd]=g.useState(""),[gs,vs]=g.useState([]),[Hd,ys]=g.useState(""),[pi,Kl]=g.useState(null),[Ln,mi]=g.useState([]),[Ya,ws]=g.useState(""),Fd=g.useRef(null),zd=g.useRef(null),[jg,Vd]=g.useState(!0),[kg,Wd]=g.useState(null),ae=(i=!0,c)=>{const h={"Content-Type":"application/json"};V!=null&&V.access_token&&(h.Authorization=`Bearer ${V.access_token}`);const p=i?c??E??"":"";return i&&p&&(h["x-tenant-id"]=p),$!=null&&$.id&&(h["x-user-id"]=$.id),h};g.useEffect(()=>{Dr.auth.getSession().then(({data:c})=>_n(c.session));const{data:{subscription:i}}=Dr.auth.onAuthStateChange((c,h)=>{_n(h)});return()=>i.unsubscribe()},[]),g.useEffect(()=>{const i=()=>{const h=Wg(window.location.pathname);Zm(h),h&&l("okr")};i();const c=()=>i();return window.addEventListener("popstate",c),()=>window.removeEventListener("popstate",c)},[]),g.useEffect(()=>{o!=="okr"&&window.location.pathname.startsWith("/okr")&&window.history.replaceState({},"","/")},[o]);const Mn=async()=>{var i,c;try{if(Vd(!0),!V||!E){cd([]),jl(null),Wd(null),Vd(!1);return}const h=await fetch(`${ie}/boards`,{headers:ae()});if(!h.ok)throw new Error("Failed to fetch task lists");const p=await h.json();ud(p),E&&Fm(Q=>({...Q,[E]:p}));const x=(()=>{try{return localStorage.getItem(`kanbax-active-board:${E}`)}catch{return null}})(),b=((i=p[0])==null?void 0:i.id)||null,R=x===Hn||x===_t||x===$t||x&&p.some(Q=>Q.id===x)?x:b;if(ri(R),R)try{localStorage.setItem(`kanbax-active-board:${E}`,R)}catch{}const T=R===Hn||R===_t||R===$t?"all":R||"",G=await fetch(`${ie}/tasks?boardId=${encodeURIComponent(T)}`,{headers:ae()});if(!G.ok)throw new Error("Failed to fetch tasks");const ce=await G.json(),be=($==null?void 0:$.id)||((c=V==null?void 0:V.user)==null?void 0:c.id)||"",He=R===$t&&be?ce.filter(Q=>Q.ownerId===be||(Q.assignees||[]).includes(be)):ce;cd(He),E&&Dm(Q=>{const Oe=Q[E];return T!=="all"&&Oe&&Oe.length>0?Q:{...Q,[E]:ce}});const pe=R&&R!==Hn&&R!==_t&&R!==$t&&(p.find(Q=>Q.id===R)||p[0])||null;jl(pe);const Ae=ce.flatMap(Q=>(Q.kinds||[]).map(Oe=>Oe.trim())).filter(Q=>Q.length>0),H=(()=>{try{const Q=localStorage.getItem("kanbax-kind-history");return Q?JSON.parse(Q):[]}catch{return[]}})(),J=Array.from(new Set([...H,...Ae])).sort((Q,Oe)=>Q.localeCompare(Oe));zl(J);try{localStorage.setItem("kanbax-kind-history",JSON.stringify(J))}catch{}Wd(null)}catch(h){Wd(h.message)}finally{Vd(!1)}},gi=i=>{const c=typeof i=="string"?i:(i==null?void 0:i.error)||(i==null?void 0:i.message)||"Unknown error",h=c.toLowerCase();return h.includes("permission")?{code:"permission",safeReason:"Blocked by permission."}:h.includes("policy")||h.includes("denied")?{code:"policy",safeReason:"Blocked by policy."}:{code:"unknown",safeReason:c}},Sg=async()=>{if(!V||!E){cs([]),vd(null),fn(null);return}try{Jm(!0);const i=re===_t||re===$t||re===Hn?Si(E):re||"default-board",c=await fetch(`${ie}/okrs?boardId=${encodeURIComponent(i)}`,{headers:ae()});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to load OKRs")}const h=await c.json();cs(h||[]),vd(null),fn(null)}catch(i){vd(i.message),fn(gi(i))}finally{Jm(!1)}},Gl=async()=>{if(E)try{const i=await fetch(`${ie}/calendar/imports`,{headers:ae(!0)});if(!i.ok){const h=await i.json();throw new Error(h.error||"Failed to load calendar imports")}const c=await i.json();Nj(c||[])}catch(i){Pn(i.message)}},Za=async(i,c)=>{if(E){ag(!0),Pn(null);try{const h=new URLSearchParams({start:i.toISOString(),end:c.toISOString()}),p=await fetch(`${ie}/calendar/events?${h.toString()}`,{headers:ae(!0)});if(!p.ok){const b=await p.json();throw new Error(b.error||"Failed to load calendar events")}const x=await p.json();ig(x||[])}catch(h){ig([]),Pn(h.message)}finally{ag(!1)}}},Lj=async()=>{if(!Dl){Pn("Please select an .ics file to import.");return}Ll(!0),Pn(null);try{const i=await Dl.text(),c=lg.trim()||Dl.name.replace(/\.ics$/i,"")||"Imported calendar",h=await fetch(`${ie}/calendar/imports`,{method:"POST",headers:{...ae(!0),"Content-Type":"application/json"},body:JSON.stringify({name:c,ics:i})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to import calendar")}cg(""),ug(null),Tj(p=>p+1),await Gl(),Za(yt.start,yt.end)}catch(i){Pn(i.message)}finally{Ll(!1)}},Mj=async()=>{if(!Ml.trim()){Pn("Please paste an ICS subscription URL.");return}Ll(!0),Pn(null);try{const i=dg.trim()||"Subscribed calendar",c=await fetch(`${ie}/calendar/imports`,{method:"POST",headers:{...ae(!0),"Content-Type":"application/json"},body:JSON.stringify({name:i,url:Ml.trim()})});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to subscribe calendar")}hg(""),fg(""),await Gl(),Za(yt.start,yt.end)}catch(i){Pn(i.message)}finally{Ll(!1)}},$j=async i=>{try{const c=await fetch(`${ie}/calendar/imports/${i}`,{method:"DELETE",headers:ae(!0)});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to remove calendar import")}await Gl(),Za(yt.start,yt.end)}catch(c){Pn(c.message)}},Ng=i=>{const c=new Date(ci);c.setMonth(c.getMonth()+i),rg(c),Rd(c)},Uj=()=>{const i=new Date;rg(i),Rd(i)},_g=async(i,c)=>{var h;if(E)try{const p={title:i.title.trim(),description:((h=i.description)==null?void 0:h.trim())||null,ownerId:i.ownerId||null,startDate:i.startDate||null,endDate:i.endDate||null,status:i.status||"ACTIVE",boardId:re===_t||re===$t||re===Hn?Si(E):re||"default-board"};if(!p.title){alert("Objective title is required");return}const x=!!ii,b=await fetch(x?`${ie}/okrs/objectives/${ii}`:`${ie}/okrs/objectives`,{method:x?"PATCH":"POST",headers:ae(),body:JSON.stringify(p)});if(!b.ok){const R=await b.json();throw new Error(R.error||`Failed to ${x?"update":"create"} objective`)}const I=await b.json();cs(R=>x?R.map(T=>T.id===I.id?I:T):[I,...R]),fn(null),c&&c()}catch(p){alert(p.message),fn(gi(p))}},Bj=async()=>{await _g(us,()=>{ds({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Hj=async()=>{if(!E)return;const i=prompt("Task list name");if(i)try{const c=await fetch(`${ie}/boards`,{method:"POST",headers:ae(),body:JSON.stringify({name:i.trim()})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to create task list")}const h=await c.json();ud(p=>p.concat(h)),ri(h.id),jl(h);try{localStorage.setItem(`kanbax-active-board:${E}`,h.id)}catch{}Mn()}catch(c){alert(c.message)}},Fj=i=>{if(i){ri(i);try{localStorage.setItem(`kanbax-active-board:${E}`,i)}catch{}Mn()}},zj=i=>{if(tt){ui(!0),l("kanban");return}if(i.target.closest(".sidebar-nav-chevron")){ui(h=>!h);return}ui(!0),l("kanban")},Vj=()=>{l("scope"),Rt("list"),hn(null),er(null,"replace")},Wj=()=>{var h;if(!Ar||!Cn.name.trim())return;const i=dk(),c={id:i,name:Cn.name.trim(),description:((h=Cn.description)==null?void 0:h.trim())||null,startDate:Cn.startDate||null,endDate:Cn.endDate||null,taskIds:[],createdAt:new Date().toISOString()};no(p=>p.concat(c)),wa({name:"",description:"",startDate:"",endDate:""}),ls(i),Tl(!1)},eo=i=>{ls(i),Rt("detail"),hn(i),er(i,"push")},Eg=(i,c)=>{no(h=>h.map(p=>p.id===i&&!p.taskIds.includes(c)?{...p,taskIds:p.taskIds.concat(c)}:p))},Tg=(i,c)=>{confirm("Remove this task from the scope window?")&&no(h=>h.map(p=>p.id===i?{...p,taskIds:p.taskIds.filter(x=>x!==c)}:p))},Cg=i=>{confirm("Delete this scope window and remove its task links?")&&(no(c=>c.filter(h=>h.id!==i)),Zs(c=>c===i?null:c),i===In&&(ls(null),Rt("list"),hn(null),er(null,"replace")))},Kj=(i,c)=>{i.preventDefault(),i.dataTransfer.dropEffect="move",El(c)},Gj=(i,c)=>{const h=i.currentTarget,p=i.relatedTarget;(!p||!h.contains(p))&&El(x=>x===c?null:x)},qj=(i,c)=>{i.preventDefault();const h=i.dataTransfer.getData("text/plain")||xr||"";h&&(Eg(c,h),El(null),Qn("Added to scope window"))},Jj=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over")},Qj=i=>{const c=i.currentTarget,h=i.relatedTarget;(!h||!c.contains(h))&&i.currentTarget.classList.remove("drag-over")},Xj=(i,c)=>{i.preventDefault(),i.currentTarget.classList.remove("drag-over");const h=i.dataTransfer.getData("text/plain")||xr||"";if(!h||!te||!te.taskIds.includes(h))return;const p=Yl.get(h);p&&p.status===c||(hh(h,c),Qn(`Moved to ${c}`))},Ig=async i=>{if(i&&!Tn[i])try{const c=await fetch(`${ie}/boards`,{headers:ae(!0,i)});if(!c.ok)return;const h=await c.json();Fm(p=>({...p,[i]:h}))}catch{}},Ag=async()=>{await _g(Ge,()=>{Aa(!1),Oa(null),ut({title:"",description:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},Yj=i=>{Oa(i.id),ut({title:i.title,description:i.description||"",ownerId:i.ownerId||"",startDate:Ug(i.startDate),endDate:Ug(i.endDate),status:i.status||"ACTIVE"}),Il(!0)},Zj=async i=>{if(confirm("Delete this objective and its key results?"))try{const c=await fetch(`${ie}/okrs/objectives/${i}`,{method:"DELETE",headers:ae()});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to delete objective")}cs(h=>h.filter(p=>p.id!==i)),bs("/okr")}catch(c){alert(c.message),fn(gi(c))}},ek=async(i,c)=>{if(confirm("Delete this key result?"))try{const h=await fetch(`${ie}/okrs/key-results/${i}`,{method:"DELETE",headers:ae()});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to delete key result")}cs(p=>p.map(x=>x.id===c?{...x,keyResults:x.keyResults.filter(b=>b.id!==i)}:x))}catch(h){alert(h.message),fn(gi(h))}},tk=async()=>{if(!(!E||!re)&&!(re===Hn||re===_t||re===$t)&&confirm("Delete this task list and all its data? This cannot be undone."))try{const i=await fetch(`${ie}/boards/${re}`,{method:"DELETE",headers:ae()});if(!i.ok){const p=await i.json();throw new Error(p.error||"Failed to delete task list")}const c=kt.filter(p=>p.id!==re);ud(c);const h=c[0]||null;ri((h==null?void 0:h.id)||null),jl(h),Ia(!1);try{h!=null&&h.id?localStorage.setItem(`kanbax-active-board:${E}`,h.id):localStorage.removeItem(`kanbax-active-board:${E}`)}catch{}Mn()}catch(i){alert(i.message)}},nk=i=>{Da(i),Rn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),Ol(null),Ra(!0)},Kd=(i,c)=>{Da(c),Rn({title:i.title,description:i.description||"",assignees:i.assignees||[],startValue:String(i.startValue),targetValue:String(i.targetValue),status:i.status||"ON_TRACK"}),Ol(i.id),Ra(!0)},[Og,to]=g.useState(null),[Gd,qd]=g.useState(""),[Jd,Zn]=g.useState(null),Rg=i=>{to(i.id),qd(String(Math.round(i.progress??0)))},ql=(i,c)=>{const h=Number(Gd);if(Number.isNaN(h)){to(null);return}const p=Math.max(0,Math.min(100,h)),x=i.targetValue-i.startValue,b=i.startValue+x*p/100;vi(i.id,c,{currentValue:Number.isFinite(b)?b:i.currentValue}),to(null)},vt=i=>i==="ON_TRACK"?"On track":i==="AT_RISK"?"At risk":i==="OFF_TRACK"?"Off track":i==="PAUSED"?"Paused":i==="DONE"?"Done":i,rk=async()=>{var i,c;if(Al){if(!Ce.title.trim()){alert("Key result title is required");return}if(Pa){await vi(Pa,Al,{title:Ce.title.trim(),description:((i=Ce.description)==null?void 0:i.trim())||null,assignees:Ce.assignees||[],startValue:Number(Ce.startValue),targetValue:Number(Ce.targetValue),status:Ce.status||"ON_TRACK"}),Ra(!1),Da(null),Ol(null),Rn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"});return}try{const h=await fetch(`${ie}/okrs/objectives/${Al}/key-results`,{method:"POST",headers:ae(),body:JSON.stringify({title:Ce.title.trim(),description:((c=Ce.description)==null?void 0:c.trim())||null,assignees:Ce.assignees||[],startValue:Number(Ce.startValue),targetValue:Number(Ce.targetValue),currentValue:Number(Ce.startValue),status:Ce.status||"ON_TRACK"})});if(!h.ok){const x=await h.json();throw new Error(x.error||"Failed to create key result")}const p=await h.json();cs(x=>x.map(b=>b.id===Al?{...b,keyResults:[...b.keyResults,p],progress:b.keyResults.length?(b.keyResults.reduce((I,R)=>I+R.progress,0)+p.progress)/(b.keyResults.length+1):p.progress}:b)),Ra(!1),Da(null),Rn({title:"",description:"",assignees:[],startValue:"0",targetValue:"100",status:"ON_TRACK"}),fn(null)}catch(h){alert(h.message),fn(gi(h))}}},vi=async(i,c,h)=>{try{const p=await fetch(`${ie}/okrs/key-results/${i}`,{method:"PATCH",headers:ae(),body:JSON.stringify(h)});if(!p.ok){const b=await p.json();throw new Error(b.error||"Failed to update key result")}const x=await p.json();cs(b=>b.map(I=>{if(I.id!==c)return I;const R=I.keyResults.map(G=>G.id===i?{...G,...x}:G),T=R.length?R.reduce((G,ce)=>G+ce.progress,0)/R.length:0;return{...I,keyResults:R,progress:T}})),fn(null)}catch(p){alert(p.message),fn(gi(p))}},sk=i=>{var h;const c=((h=i==null?void 0:i.toUpperCase)==null?void 0:h.call(i))||"ON_TRACK";return c==="AT_RISK"?"AT_RISK":c==="OFF_TRACK"?"OFF_TRACK":"ON_TRACK"},ik=i=>{if(i.length===0)return 0;const c=i.reduce((h,p)=>h+p.progress,0);return Math.round(c/i.length)},Tr=i=>i.status!=="DONE",Jl=i=>{var b;if(!(i!=null&&i.dueDate)||i.status===se.DONE||i.status===se.ARCHIVED)return"none";const c=new Date(i.dueDate);if(Number.isNaN(c.getTime()))return"none";const h=new Date,p=((b=O==null?void 0:O.reminders)==null?void 0:b.dueSoonHours)??24,x=new Date(h.getTime()+p*60*60*1e3);return c<h?"overdue":c<=x?"due-soon":"none"},Ql=i=>{const c=i.getFullYear(),h=String(i.getMonth()+1).padStart(2,"0"),p=String(i.getDate()).padStart(2,"0");return`${c}-${h}-${p}`},Cr=(i,c,h,p)=>{const x=[];for(let b=h-1;b>=0;b-=1){const I=new Date(c);I.setDate(c.getDate()-b);const R=new Date(I);R.setDate(I.getDate()+1);const T=i.filter(G=>{const ce=new Date(G.updatedAt||G.createdAt||0).getTime();return!ce||ce<I.getTime()||ce>=R.getTime()?!1:p?p(G):!0}).length;x.push(T)}return x},St=g.useMemo(()=>Cl.map(i=>{const c=(i.keyResults||[]).map(b=>({id:b.id,objectiveId:b.objectiveId,title:b.title,description:b.description??null,assignees:b.assignees??[],metricType:"NUMERIC",startValue:b.startValue,targetValue:b.targetValue,currentValue:b.currentValue,status:sk(b.status),progress:Math.round(b.progress??0),lastUpdatedAt:b.updatedAt||b.createdAt})),h=ik(c),p=i.sourceType;return{id:i.id,title:i.title,description:i.description??null,ownerId:i.ownerId??null,startDate:i.startDate??null,endDate:i.endDate??null,status:i.status,confidence:typeof i.confidence=="number"?i.confidence:0,progress:h,keyResults:c,readOnly:!!(p&&p!=="MANUAL")}}),[Cl]),yi=g.useMemo(()=>E?dn[E]||he||[]:[],[E,dn,he]),Xl=g.useMemo(()=>E?Pm[E]||dn[E]||he||[]:he||[],[E,Pm,dn,he]),Yl=g.useMemo(()=>new Map(Xl.map(i=>[i.id,i])),[Xl]),wi=g.useMemo(()=>{var ey;const i=new Date,c=new Date;c.setDate(i.getDate()+7);const h=new Date(i);h.setHours(0,0,0,0);const p=yi.filter(Z=>Z&&Z.id),x=Z=>Z?new Date(Z):null,b=p.reduce((Z,je)=>{const js=je.status||"UNKNOWN";return Z[js]=(Z[js]||0)+1,Z},{}),I=b.DONE||0,R=Cr(p,h,14),T=Cr(p,h,14,Z=>Z.status==="DONE"),G=Cr(p,h,14,Z=>Tr(Z)),ce=St.flatMap(Z=>Z.keyResults),be=Cr(ce,h,14),He=R.slice(7),pe=T.slice(7),Ae=G.slice(7),H=be.slice(7),J=Z=>Z?new Date(Z).getTime():0,Q=Z=>Z.reduce((je,js)=>je+js,0),Oe=(Z,je)=>{const js=Q(Z),yh=Q(je);return yh===0?js===0?0:100:Math.round((js-yh)/yh*100)},Mt=Q(R),rt=Q(T),Ve=Q(G),_i=Q(be),sr=Oe(He,R.slice(0,7)),ir=p.filter(Z=>{const je=x(Z.dueDate);return je&&je>=i&&je<=c&&Tr(Z)}).sort((Z,je)=>J(Z.dueDate)-J(je.dueDate)).slice(0,5),lc=p.filter(Z=>{const je=x(Z.dueDate);return je&&je<i&&Tr(Z)}).sort((Z,je)=>J(Z.dueDate)-J(je.dueDate)).slice(0,5),Xk=[...p].sort((Z,je)=>J(je.updatedAt)-J(Z.updatedAt)).slice(0,5),Yk=p.filter(Z=>Z.isFavorite).slice(0,5),Zk=p.filter(Tr).slice(0,5),eS=E?((ey=Tn[E])==null?void 0:ey.length)??kt.length:kt.length,tS=ce.length?Math.round(ce.reduce((Z,je)=>Z+je.progress,0)/ce.length):0,nS=ce.filter(Z=>Z.status!=="ON_TRACK").length;return{totalTasks:p.length,openTasks:p.filter(Tr).length,dueSoonCount:p.filter(Z=>{const je=x(Z.dueDate);return je&&je>=i&&je<=c&&Tr(Z)}).length,overdueCount:p.filter(Z=>{const je=x(Z.dueDate);return je&&je<i&&Tr(Z)}).length,favoriteCount:p.filter(Z=>Z.isFavorite).length,completionRate:p.length?Math.round(I/p.length*100):0,doneCount:I,statusCounts:b,boardCount:eS,objectiveCount:St.length,keyResultCount:ce.length,atRiskKrs:nS,averageKrProgress:tS,activitySeries:He,completionSeries:pe,openSeries:Ae,krSeries:H,activitySeries14:R,completionSeries14:T,openSeries14:G,krSeries14:be,activityTotal14:Mt,completionTotal14:rt,openTotal14:Ve,krTotal14:_i,activityChange:sr,openChange:Oe(Ae,G.slice(0,7)),completionChange:Oe(pe,T.slice(0,7)),okrChange:Oe(H,be.slice(0,7)),activeTasks:Zk,dueSoonTasks:ir,overdueTasks:lc,recentTasks:Xk,favoriteTasks:Yk}},[yi,E,Tn,kt.length,St]);g.useMemo(()=>yi.flatMap(c=>(c.activityLog||[]).map(p=>({id:p.id,taskId:c.id,tenantId:c.tenantId,boardId:c.boardId,title:c.title,message:p.message,actorId:p.actorId,timestamp:new Date(p.timestamp)}))).sort((c,h)=>h.timestamp.getTime()-c.timestamp.getTime()).slice(0,8),[yi]);const xs=g.useMemo(()=>{const i=new Date,c=new Date(i);c.setHours(0,0,0,0);const h=yi.filter(x=>x&&x.id),p=St.flatMap(x=>x.keyResults);return{activity:Cr(h,c,Ys),done:Cr(h,c,Ys,x=>x.status==="DONE"),open:Cr(h,c,Ys,x=>Tr(x)),kr:Cr(p,c,Ys)}},[yi,St,Ys]);g.useMemo(()=>{const i=c=>c.reduce((h,p)=>h+p,0);return{activity:i(xs.activity),done:i(xs.done),open:i(xs.open),kr:i(xs.kr)}},[xs]),g.useMemo(()=>{const i=xs.activity.length;if(!i)return[];const c=new Date;return Array.from({length:i},(h,p)=>{const x=new Date(c);return x.setDate(c.getDate()-(i-1-p)),x.toLocaleDateString(void 0,{month:"short",day:"numeric"})})},[xs.activity.length]),g.useMemo(()=>{const i=[],c=new Set,h=p=>{!p||c.has(p.id)||(c.add(p.id),i.push(p))};return wi.overdueTasks.forEach(h),wi.dueSoonTasks.forEach(h),i.length<5&&wi.activeTasks.forEach(h),i.slice(0,5)},[wi.overdueTasks,wi.dueSoonTasks,wi.activeTasks]);const yt=g.useMemo(()=>{const i=new Date(ci);i.setHours(0,0,0,0);const c=new Date(i.getFullYear(),i.getMonth(),1),h=(c.getDay()+6)%7,p=new Date(c);p.setDate(c.getDate()-h);const x=Array.from({length:42},(I,R)=>{const T=new Date(p);return T.setDate(p.getDate()+R),T}),b=new Date(x[x.length-1]);return b.setHours(23,59,59,999),{start:p,end:b,days:x}},[ci]),Dg=g.useMemo(()=>{const i=new Map;return sg.forEach(c=>{const h=new Date(c.start),p=new Date(c.end),x=new Date(h.getFullYear(),h.getMonth(),h.getDate()),b=new Date(p.getFullYear(),p.getMonth(),p.getDate());c.allDay&&b.getTime()===p.getTime()&&b.setDate(b.getDate()-1);let I=0;for(;x<=b&&I<40;){const R=Ql(x),T=i.get(R)||[];T.push(c),i.set(R,T),x.setDate(x.getDate()+1),I+=1}}),i.forEach(c=>{c.sort((h,p)=>new Date(h.start).getTime()-new Date(p.start).getTime())}),i},[sg]),Pg=g.useMemo(()=>Ql(Od),[Od]),Qd=Dg.get(Pg)||[],ak=g.useMemo(()=>ci.toLocaleDateString(void 0,{month:"long",year:"numeric"}),[ci]),ok=g.useMemo(()=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],[]),lk=g.useMemo(()=>{try{return localStorage.getItem("kanbax-okr-legacy")==="1"}catch{return!1}},[]),Zl=i=>{bs(`/okr/objective/${i}`),xj(c=>[i,...c.filter(p=>p!==i)].slice(0,8))},K=g.useMemo(()=>St.find(i=>i.id===(An==null?void 0:An.objectiveId)),[St,An]),pn=(An==null?void 0:An.screen)||"library";g.useEffect(()=>{pn==="review"&&wd(0)},[pn,An==null?void 0:An.objectiveId]),g.useEffect(()=>{o!=="calendar"||!V||!E||Gl()},[o,V,E]),g.useEffect(()=>{o!=="calendar"||!V||!E||Za(yt.start,yt.end)},[o,V,E,yt.start.getTime(),yt.end.getTime()]),g.useEffect(()=>{if(o!=="calendar"||!V||!E)return;const i=()=>Za(yt.start,yt.end),c=window.setInterval(i,18e4),h=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",h),()=>{window.clearInterval(c),document.removeEventListener("visibilitychange",h)}},[o,V,E,yt.start.getTime(),yt.end.getTime()]),g.useMemo(()=>{const i=Ea.map(p=>St.find(x=>x.id===p)).filter(Boolean),c=Ta.map(p=>St.find(x=>x.id===p)).filter(Boolean),h=St.filter(p=>!Ea.includes(p.id)&&!Ta.includes(p.id)).sort((p,x)=>x.progress-p.progress).slice(0,5);return{pinned:i,recent:c,suggested:h}},[Ea,Ta,St]);const xi=g.useMemo(()=>K?[{title:"Relevance check",content:"Is this objective still aligned with the current quarter?"},{title:"KR validity check",content:"Do the metrics still represent success?"},{title:"Update KR values",content:K.readOnly?s.jsx("div",{className:"okr-empty",children:"This objective is read-only due to its source."}):s.jsx("div",{className:"okr-review-kr",children:K.keyResults.map(i=>s.jsxs("label",{children:[i.title,s.jsx("input",{type:"number",defaultValue:i.currentValue,onBlur:c=>vi(i.id,K.id,{currentValue:Number(c.target.value)})})]},i.id))})},{title:"Review summary",content:`Progress ${K.progress}%  ${K.keyResults.length} key results`}]:[],[K]);g.useEffect(()=>{V&&E&&Mn()},[V,E]),g.useEffect(()=>{var h;if(re!==$t||!E)return;const i=($==null?void 0:$.id)||((h=V==null?void 0:V.user)==null?void 0:h.id)||"";if(!i)return;const c=dn[E];c&&cd(c.filter(p=>p.ownerId===i||(p.assignees||[]).includes(i)))},[re,E,$==null?void 0:$.id,(Nv=V==null?void 0:V.user)==null?void 0:Nv.id,dn]),g.useEffect(()=>{try{localStorage.setItem("kanbax-okr-pinned",JSON.stringify(Ea))}catch{}},[Ea]),g.useEffect(()=>{try{localStorage.setItem("kanbax-okr-recent",JSON.stringify(Ta))}catch{}},[Ta]),g.useEffect(()=>{try{localStorage.setItem("kanbax-scope-windows",JSON.stringify(_l))}catch{}},[_l]),g.useEffect(()=>{o==="okr"&&Sg()},[o,V,E,re]),g.useEffect(()=>{if(o!=="scope"||!E||!(V!=null&&V.access_token))return;let i=!1;return(async()=>{try{const h=await fetch(`${ie}/tasks?boardId=all`,{headers:ae(!0,E)});if(!h.ok)return;const p=await h.json();i||Lm(x=>({...x,[E]:p}))}catch{}})(),()=>{i=!0}},[o,E,V==null?void 0:V.access_token]),g.useEffect(()=>{try{localStorage.setItem("kanbax-sidebar-collapsed",String(tt))}catch{}},[tt]),g.useEffect(()=>{tt&&ui(!1)},[tt]),g.useEffect(()=>{tt&&o!=="kanban"&&o!=="table"&&ui(!1)},[tt,o]),g.useEffect(()=>{Zs(null),xa("")},[E]),g.useEffect(()=>{tt&&di(!1)},[tt]),g.useEffect(()=>{tt&&o!=="okr"&&di(!1)},[tt,o]),g.useEffect(()=>{const i=document.createElement("div");i.className="app-tooltip",i.setAttribute("role","tooltip"),i.style.opacity="0",i.style.visibility="hidden",document.body.appendChild(i);let c=null,h=null;const p=H=>(H.getAttribute("data-tooltip")||H.getAttribute("data-label")||H.getAttribute("title")||"").trim()||null,x=H=>{H.dataset.tooltipTitle!==void 0&&(H.setAttribute("title",H.dataset.tooltipTitle),delete H.dataset.tooltipTitle)},b=()=>{var lc;if(!c||!p(c))return;const J=c.getBoundingClientRect(),Q=i.getBoundingClientRect(),Oe=window.innerWidth,Mt=window.innerHeight,rt=8,Ve=(lc=document.querySelector(".dashboard"))==null?void 0:lc.classList.contains("sidebar-collapsed"),_i=!!c.closest(".sidebar")&&!!Ve;let sr,ir;_i?(ir=J.right+rt,sr=J.top+J.height/2-Q.height/2,ir+Q.width>Oe-rt&&(ir=J.left-rt-Q.width)):(sr=J.top-rt-Q.height,ir=J.left+J.width/2-Q.width/2,sr<rt&&(sr=J.bottom+rt)),ir=Math.max(rt,Math.min(ir,Oe-rt-Q.width)),sr=Math.max(rt,Math.min(sr,Mt-rt-Q.height)),i.style.left=`${ir}px`,i.style.top=`${sr}px`},I=()=>{h&&cancelAnimationFrame(h),h=window.requestAnimationFrame(b)},R=H=>{var Mt;const J=p(H);if(!J)return;const Q=(Mt=document.querySelector(".dashboard"))==null?void 0:Mt.classList.contains("sidebar-collapsed");H.closest(".sidebar")&&!Q||(c&&c!==H&&x(c),c=H,H.hasAttribute("title")&&(H.dataset.tooltipTitle=H.getAttribute("title")||"",H.removeAttribute("title")),i.textContent=J,i.style.opacity="1",i.style.visibility="visible",I())},T=()=>{c&&x(c),c=null,i.style.opacity="0",i.style.visibility="hidden"},G=H=>H instanceof HTMLElement?H.closest("[data-tooltip], [data-label], [title]"):null,ce=H=>{const J=G(H.target);J&&(c&&(J===c||c.contains(J))||R(J))},be=H=>{if(!c)return;const J=H.relatedTarget;if(J&&c.contains(J))return;const Q=G(H.target);Q&&Q!==c||T()},He=H=>{const J=G(H.target);J&&R(J)},pe=()=>{T()},Ae=()=>{c&&I()};return document.addEventListener("pointerover",ce),document.addEventListener("pointerout",be),document.addEventListener("focusin",He),document.addEventListener("focusout",pe),window.addEventListener("scroll",Ae,!0),window.addEventListener("resize",Ae),()=>{h&&cancelAnimationFrame(h),document.removeEventListener("pointerover",ce),document.removeEventListener("pointerout",be),document.removeEventListener("focusin",He),document.removeEventListener("focusout",pe),window.removeEventListener("scroll",Ae,!0),window.removeEventListener("resize",Ae),i.remove()}},[]);const Xd=async()=>{var i,c,h,p,x;if(V!=null&&V.access_token){Nm(!1);try{const b=await fetch(`${ie}/me`,{headers:ae(!1)});if(!b.ok)throw new Error("Failed to load profile");const I=await b.json();un(I.user),Ju(I.memberships||[]),wm(I.invites||[]);const R=new Set((I.invites||[]).map(pe=>String(pe.id))),T=(I.invites||[]).filter(pe=>!sh.current.has(pe.id));sh.current.size>0&&T.length>0&&T.forEach(pe=>{var J,Q,Oe;const Ae=dt((J=pe.tenant)==null?void 0:J.name)||pe.tenantId,H=((Q=pe.invitedBy)==null?void 0:Q.name)||((Oe=pe.invitedBy)==null?void 0:Oe.email)||pe.invitedByUserId||"Someone";wr(Mt=>[{id:`invite-${pe.id}`,message:`${H} invited you to ${Ae}`,huddleName:Ae,timestamp:new Date(pe.createdAt||Date.now()).toISOString(),read:!1,tenantId:pe.tenantId},...Mt])}),sh.current=R;const G=(c=(i=I.user)==null?void 0:i.preferences)==null?void 0:c.defaultHuddleId,ce=E&&((h=I.memberships)==null?void 0:h.some(pe=>pe.tenantId===E)),be=(p=I.memberships)==null?void 0:p.find(pe=>pe.tenantId===G),He=(x=I.memberships)==null?void 0:x[0];!ce&&(be!=null&&be.tenantId||He!=null&&He.tenantId)&&nr((be==null?void 0:be.tenantId)||(He==null?void 0:He.tenantId))}catch(b){va(b.message)}finally{Nm(!0)}}};g.useEffect(()=>{Xd()},[V]),g.useEffect(()=>{$&&O===null&&Te(Kg($))},[$,O]),g.useEffect(()=>{ga&&E&&lo(E)},[ga,E]),g.useEffect(()=>{E&&co(E)},[E]),g.useEffect(()=>{ve&&co(ve)},[ve]),g.useEffect(()=>{fe&&co(fe)},[fe]),g.useEffect(()=>{if(!ve)return;Ig(ve);const i=Lt(ve);if(i.length===0)return;const c=new Set(i.map(h=>h.userId));hs&&!c.has(hs)&&$l(null),Nr.length>0&&Pd(Nr.filter(h=>c.has(h)))},[ve,Ks]),g.useEffect(()=>{if(!ve)return;const i=ro(ve);i.length!==0&&(!Va||!i.some(c=>c.id===Va))&&Wa(i[0].id)},[ve,Va,Tn,kt]),g.useEffect(()=>{if(!fe)return;Ig(fe);const i=Lt(fe);if(i.length===0)return;const c=new Set(i.map(h=>h.userId));ms&&!c.has(ms)&&Bl(null),Er.length>0&&Ud(Er.filter(h=>c.has(h)))},[fe,Ks]),g.useEffect(()=>{if(!fe)return;const i=ro(fe);!i||i.length===0||(!ps||!i.some(c=>c.id===ps))&&Ul(i[0].id)},[fe,Tn,ps]),g.useEffect(()=>{Ua&&Fd.current&&(Fd.current.innerHTML=Zt.description||"")},[Ua]),g.useEffect(()=>{Ga&&zd.current&&(zd.current.innerHTML=Pt.description||"")},[Ga]);const z=Ld?he.find(i=>i.id===Ld)??null:null,Lg=z?he.filter(i=>(i.linkedTaskIds||[]).includes(z.id)):[],Mg=new Map(he.map(i=>[i.id,i])),bi=String(($==null?void 0:$.email)||((_v=V==null?void 0:V.user)==null?void 0:_v.email)||"U"),ck=bi.charAt(0).toUpperCase()||"U",$g=(O==null?void 0:O.avatarUrl)||($==null?void 0:$.avatarUrl)||"",Ug=i=>i?new Date(i).toISOString().slice(0,10):"",Ir=re===Hn,Bg=re===_t,Hg=re===$t,ji=Bg||Hg,ze=Ir?{name:"Archived"}:Bg?{name:"All tasks"}:Hg?{name:"My tickets"}:kt.find(i=>i.id===re)||En,er=(i,c="push")=>{const h=new URLSearchParams(window.location.search);i?h.set("scope",i):h.delete("scope");const p=h.toString(),x=`${window.location.pathname}${p?`?${p}`:""}`;c==="replace"?window.history.replaceState({},"",x):window.history.pushState({},"",x)},uk=g.useMemo(()=>{const i=E&&Tn[E]||kt,c=new Map;return(i||[]).forEach(h=>{h!=null&&h.id&&c.set(h.id,h.name||"Tasks")}),c.set(Hn,"Archived"),c.set(_t,"All tasks"),c.set($t,"My tickets"),c.has("default-board")||c.set("default-board","Main Tasks"),c},[E,Tn,kt]),ki=i=>i?uk.get(i)||(i===_t?"All tasks":i):"Tasks",Ar=E||null,qe=g.useMemo(()=>Ar?_l[Ar]||[]:[],[Ar,_l]),te=g.useMemo(()=>In&&qe.find(i=>i.id===In)||null,[qe,In]),Yd=g.useMemo(()=>[se.BACKLOG,se.TODO,se.IN_PROGRESS,se.DONE],[]),Zd=g.useMemo(()=>{if(!te)return[];const c=te.taskIds.map(h=>Yl.get(h)).filter(Boolean).filter(h=>!(br!=="ALL"&&h.priority!==br||jr!=="ALL"&&h.status!==jr));return Yd.map(h=>({status:h,tasks:c.filter(p=>p.status===h)}))},[te,Yl,Yd,br,jr]),Fg=g.useMemo(()=>Zd.flatMap(i=>i.tasks),[Zd]),eh=g.useMemo(()=>{if(!te)return[];const i=new Set(te.taskIds);return Xl.filter(c=>c.status!==se.ARCHIVED&&!i.has(c.id))},[te,Xl]),zg=g.useMemo(()=>{const i=md.trim().toLowerCase();return i?eh.filter(c=>c.title.toLowerCase().includes(i)):eh},[eh,md]);g.useEffect(()=>{if(!E){ls(null);return}if(qe.length===0){ls(null);return}(!In||!qe.some(i=>i.id===In))&&ls(qe[0].id)},[E,qe,In]),g.useEffect(()=>{Zs(null),xa("")},[In]),g.useEffect(()=>{if(!E||qe.length===0){Rt("list");return}gt==="detail"&&!te&&Rt("list")},[E,qe.length,te,gt]),g.useEffect(()=>{if(!ba||qe.length===0)return;const i=qe.find(c=>c.id===ba);if(i){ls(i.id),Rt("detail");return}hn(null),er(null,"replace"),Rt("list")},[ba,qe]),g.useEffect(()=>{o!=="scope"&&ba&&(hn(null),er(null,"replace"))},[o,ba]),g.useEffect(()=>{gt!=="detail"&&(ja(!1),ka(!1))},[gt]),g.useEffect(()=>{!Sa||!te||_a({name:te.name,description:te.description||"",startDate:te.startDate||"",endDate:te.endDate||""})},[Sa,te]);const no=i=>{Ar&&gj(c=>{const h=c[Ar]||[],p=i(h);return{...c,[Ar]:p}})},dk=()=>typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`scope-${Date.now()}-${Math.random().toString(16).slice(2)}`,Vg=i=>i?new Date(i).toLocaleDateString():"",hk=(i,c)=>!i||!c?!1:new Date(c)<new Date(i),th=i=>!i.startDate&&!i.endDate?"No dates set":`${Vg(i.startDate)}  ${Vg(i.endDate)}`,nh=g.useMemo(()=>hk(Dt.startDate,Dt.endDate),[Dt.startDate,Dt.endDate]),fk=()=>{if(!te)return;const i=Dt.name.trim();i&&(nh||(no(c=>c.map(h=>h.id===te.id?{...h,name:i,description:Dt.description.trim()||null,startDate:Dt.startDate||null,endDate:Dt.endDate||null}:h)),Na(!1)))},pk=g.useMemo(()=>{const i=E&&Tn[E]||kt,c=[],h=p=>{c.some(x=>x.id===p.id)||c.push(p)};return h({id:_t,name:"All tasks"}),h({id:$t,name:"My tickets"}),(Array.isArray(i)?i:[]).forEach(p=>{p!=null&&p.id&&h({id:p.id,name:p.name||"Tasks"})}),h({id:Hn,name:"Archived"}),c},[E,Tn,kt]),ro=i=>((i?Tn[i]||(i===E?kt:[]):kt)||[]).filter(h=>h.id!==_t&&h.id!==$t),Si=i=>{var h;const c=ro(i);return i===E&&re&&re!==_t&&re!==$t&&re!==Hn&&c.some(p=>p.id===re)?re:((h=c[0])==null?void 0:h.id)||"default-board"},mk=()=>{var c;hi({title:"",description:"",priority:(O==null?void 0:O.defaultPriority)||"MEDIUM",dueDate:""}),Ij((O==null?void 0:O.defaultStatus)||se.BACKLOG),Ba([]),Fa([]),za("");const i=E||((c=ke[0])==null?void 0:c.tenantId)||null;gg(i),Wa(Si(i)),$l(($==null?void 0:$.id)||null),Pd([]),Dd(!0)},dt=i=>i?i.toLowerCase()==="personal"?"Private Huddle":i:"Huddle",gk=i=>{let c=0;for(let h=0;h<i.length;h+=1)c=(c<<5)-c+i.charCodeAt(h),c|=0;return Math.abs(c)},mn=(i,c)=>{const h=`${i||""}:${c||""}`,p=gk(h)%360;return{solid:`hsl(${p} 70% 60%)`,soft:`hsla(${p}, 70%, 60%, 0.16)`,border:`hsla(${p}, 70%, 60%, 0.35)`,text:`hsl(${p} 70% 75%)`}},$n=(i,c)=>{var p,x;if(!i||!c)return"Unassigned";const h=(Ks[i]||[]).find(b=>b.userId===c);return((p=h==null?void 0:h.user)==null?void 0:p.name)||((x=h==null?void 0:h.user)==null?void 0:x.email)||c},so=(i,c)=>{var p,x,b;if(!i||!c)return{label:"Unassigned",avatarUrl:""};const h=(Ks[i]||[]).find(I=>I.userId===c);return{label:((p=h==null?void 0:h.user)==null?void 0:p.name)||((x=h==null?void 0:h.user)==null?void 0:x.email)||c,avatarUrl:((b=h==null?void 0:h.user)==null?void 0:b.avatarUrl)||""}},io=i=>{var h,p;if(!i)return!1;const c=Qt.find(x=>x.tenantId===i);return((p=(h=c==null?void 0:c.tenant)==null?void 0:h.name)==null?void 0:p.toLowerCase())==="personal"},Lt=i=>{var p,x;if(!i)return[];const c=Ks[i]||[];if(!io(i))return c;const h=c.find(b=>b.userId===Nt);return h?[h]:Nt?[{userId:Nt,role:"owner",user:{name:($==null?void 0:$.name)||($==null?void 0:$.email)||((p=V==null?void 0:V.user)==null?void 0:p.email)||"You",email:($==null?void 0:$.email)||((x=V==null?void 0:V.user)==null?void 0:x.email)||"",avatarUrl:($==null?void 0:$.avatarUrl)||""}}]:[]},Wg=i=>{if(!i.startsWith("/okr"))return null;const c=i.split("/").filter(Boolean);return c.length===1||c[1]==="objectives"?{screen:"library"}:c[1]==="objective"&&c[2]?{screen:"objective",objectiveId:c[2]}:c[1]==="review"&&c[2]?{screen:"review",objectiveId:c[2]}:{screen:"library"}},bs=i=>{window.history.pushState({},"",i),l("okr"),Zm(Wg(i))},vk=i=>{if(tt){di(!0),bs("/okr");return}if(i.target.closest(".sidebar-nav-chevron")){di(h=>!h);return}di(!0),bs("/okr")},Kg=i=>{var h,p,x,b,I,R,T,G,ce,be,He,pe,Ae,H,J,Q,Oe,Mt,rt,Ve,_i;const c=(i==null?void 0:i.preferences)||{};return{name:(i==null?void 0:i.name)||"",avatarUrl:(i==null?void 0:i.avatarUrl)||"",timezone:c.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||"",locale:c.locale||navigator.language||"en",profileVisibility:c.profileVisibility||"huddle",defaultHuddleId:c.defaultHuddleId||E||"",defaultPriority:c.defaultPriority||"MEDIUM",defaultStatus:c.defaultStatus||"BACKLOG",notifications:{email:{assigned:((p=(h=c.notifications)==null?void 0:h.email)==null?void 0:p.assigned)??!0,mentions:((b=(x=c.notifications)==null?void 0:x.email)==null?void 0:b.mentions)??!0,due:((R=(I=c.notifications)==null?void 0:I.email)==null?void 0:R.due)??!0,invites:((G=(T=c.notifications)==null?void 0:T.email)==null?void 0:G.invites)??!0},inApp:{assigned:((be=(ce=c.notifications)==null?void 0:ce.inApp)==null?void 0:be.assigned)??!0,mentions:((pe=(He=c.notifications)==null?void 0:He.inApp)==null?void 0:pe.mentions)??!0,due:((H=(Ae=c.notifications)==null?void 0:Ae.inApp)==null?void 0:H.due)??!0,invites:((Q=(J=c.notifications)==null?void 0:J.inApp)==null?void 0:Q.invites)??!0}},workingHours:{start:((Oe=c.workingHours)==null?void 0:Oe.start)||"09:00",end:((Mt=c.workingHours)==null?void 0:Mt.end)||"17:00",days:((rt=c.workingHours)==null?void 0:rt.days)||["Mon","Tue","Wed","Thu","Fri"]},reminders:{dueSoonHours:((Ve=c.reminders)==null?void 0:Ve.dueSoonHours)??24,dailySummaryTime:((_i=c.reminders)==null?void 0:_i.dailySummaryTime)||"09:00"}}},ao=i=>{var x,b;const c=i.trim().split(/\s+/),h=((x=c[0])==null?void 0:x[0])||"",p=c.length>1&&((b=c[c.length-1])==null?void 0:b[0])||"";return(h+p).toUpperCase()||"U"},en=(i,c,h="")=>s.jsx("div",{className:`avatar-stack ${h}`.trim(),children:c.map(p=>{const{label:x,avatarUrl:b}=so(i,p);return s.jsx("span",{className:"avatar avatar-tooltip","data-label":x,"aria-label":x,title:x,children:b?s.jsx("img",{src:b,alt:x}):ao(x)},p)})}),Gg=i=>{var c,h;return((h=(c=i==null?void 0:i.tenant)==null?void 0:c.name)==null?void 0:h.toLowerCase())==="personal"},{displayMemberships:ke,activeMembership:tr,activeHuddleName:Ni,isPersonalActive:qg,hasSharedHuddles:yk,activeHuddleAccent:Y1}=g.useMemo(()=>{var b,I,R,T;const i=Qt.filter(Gg),c=Qt.filter(G=>!Gg(G)),h=i.find(G=>G.tenantId===E)||i[0],p=h?[h,...c]:c,x=Qt.find(G=>G.tenantId===E)||h;return{displayMemberships:p,activeMembership:x,activeHuddleName:dt((b=x==null?void 0:x.tenant)==null?void 0:b.name),isPersonalActive:((R=(I=x==null?void 0:x.tenant)==null?void 0:I.name)==null?void 0:R.toLowerCase())==="personal",hasSharedHuddles:c.length>0,activeHuddleAccent:mn(E,(T=x==null?void 0:x.tenant)==null?void 0:T.name)}},[Qt,E]),Jg=(tr==null?void 0:tr.role)==="OWNER"||(tr==null?void 0:tr.role)==="ADMIN",Or=g.useMemo(()=>E&&dn[E]?dn[E]||[]:he,[E,dn,he]),wk=g.useMemo(()=>{const c=((O==null?void 0:O.name)||($==null?void 0:$.name)||bi||"").trim().split(/\s+/)[0]||"there",h=new Date().getHours();return h<12?`Guten Morgen, ${c}`:h<18?`Guten Tag, ${c}`:`Guten Abend, ${c}`},[O==null?void 0:O.name,$==null?void 0:$.name,bi]),xk=g.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),Or.filter(h=>{if(!h.dueDate||h.status===se.DONE||h.status===se.ARCHIVED)return!1;const p=new Date(h.dueDate);return p>=i&&p<=c}).length},[Or]),ec=g.useMemo(()=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date;return c.setHours(23,59,59,999),Or.filter(h=>{if(!h.dueDate||h.status===se.DONE||h.status===se.ARCHIVED)return!1;const p=new Date(h.dueDate);return p>=i&&p<=c})},[Or]),tc=g.useMemo(()=>Or.filter(i=>i.isFavorite&&i.status!==se.ARCHIVED).slice(0,5).map(i=>({id:i.id,label:i.title,sublabel:ki(i.boardId)})),[Or]),Qg=g.useMemo(()=>{if(o==="settings")return[{label:"Settings"}];const c=[{label:Ni||"Huddle",onClick:()=>l("dashboard")}];return o==="okr"?(c.push({label:"OKRs",onClick:()=>bs("/okr")}),pn==="objective"&&K&&c.push({label:K.title,onClick:()=>Zl(K.id)}),pn==="review"&&K&&c.push({label:"Review"}),c):(o==="dashboard"&&c.push({label:"Dashboard",onClick:()=>l("dashboard")}),o==="calendar"&&c.push({label:"Calendar",onClick:()=>l("calendar")}),o==="scope"?(c.push({label:"Scope Window",onClick:()=>{l("scope"),Rt("list"),hn(null),er(null,"replace")}}),gt==="detail"&&te&&c.push({label:te.name}),c):(o==="table"&&c.push({label:ze!=null&&ze.name?`Table  ${ze.name}`:"Table",onClick:()=>l("table")}),o==="list"&&c.push({label:ze!=null&&ze.name?`Table  ${ze.name}`:"Table",onClick:()=>l("table")}),o==="kanban"&&c.push({label:(ze==null?void 0:ze.name)||"Tasks",onClick:()=>l("kanban")}),c))},[o,Ni,pn,K,ze==null?void 0:ze.name,gt,te]),rh=g.useRef({}),Xg=g.useRef(new Set),sh=g.useRef(new Set),Nt=($==null?void 0:$.id)||"",Yg=(($==null?void 0:$.email)||"").toLowerCase(),bk=(i,c)=>{const h=i.activityLog.find(p=>p.type==="CREATE");return h!=null&&h.actorId?h.actorId:i.ownerId||c||""},nc=nd.filter(i=>!i.read).length,jk=i=>{wr(c=>c.map(h=>h.id===i.id?{...h,read:!0}:h)),!(!i.taskId||!i.tenantId)&&(i.tenantId!==E&&nr(i.tenantId),fs(i.taskId),_r(!0),is(!1))};g.useEffect(()=>{z!=null&&z.tenantId&&co(z.tenantId)},[z==null?void 0:z.tenantId]),g.useEffect(()=>{Ka&&m("comments")},[Ka,Ld]),g.useEffect(()=>{Array.from(new Set(he.map(c=>c.tenantId).filter(Boolean))).forEach(c=>co(c))},[he]);const tn=i=>{if(i==="createLink"){const c=prompt("Link URL");c&&document.execCommand(i,!1,c);return}document.execCommand(i,!1)},oo=i=>i.replace(/<[^>]+>/g,""),Zg=i=>{i.preventDefault();const c=i.clipboardData.getData("text/plain");if(document.queryCommandSupported("insertText")){document.execCommand("insertText",!1,c);return}const h=window.getSelection();!h||h.rangeCount===0||(h.deleteFromDocument(),h.getRangeAt(0).insertNode(document.createTextNode(c)),h.collapseToEnd())},nr=i=>{xm(i);try{localStorage.setItem("kanbax-active-tenant",i)}catch{}},kk=async i=>{i.preventDefault(),Cm(!0),va(null),yl(null);try{if(yr==="magic"){const{error:h}=await Dr.auth.signInWithOtp({email:vl,options:{emailRedirectTo:window.location.origin}});if(h)throw h;yl("Check your email for the magic link.");return}if(yr==="signup"){const{error:h}=await Dr.auth.signUp({email:vl,password:ed,options:{emailRedirectTo:window.location.origin}});if(h)throw h;yl("Account created. Check your email to confirm.");return}const{error:c}=await Dr.auth.signInWithPassword({email:vl,password:ed});if(c)throw c}catch(c){va(c.message||"Authentication failed")}finally{Cm(!1)}},ev=async i=>{va(null),yl(null);const{error:c}=await Dr.auth.signInWithOAuth({provider:i,options:{redirectTo:window.location.origin}});c&&va(c.message)},rc=async()=>{await Dr.auth.signOut(),un(null),Ju([]),wm([]),xm(null);try{localStorage.removeItem("kanbax-active-tenant")}catch{}},tv=async i=>{i.preventDefault(),Xt(null);try{const c=await fetch(`${ie}/teams`,{method:"POST",headers:ae(!1),body:JSON.stringify({name:Qu})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to create huddle")}const h=await c.json();Xu(""),Ju(p=>p.concat({...h.membership,tenant:h.tenant})),nr(h.tenant.id)}catch(c){Xt(c.message)}},lo=async i=>{try{const c=await fetch(`${ie}/teams/${i}/members`,{headers:ae(!0)});if(!c.ok)throw new Error("Failed to load members");const h=await c.json();ij(h)}catch(c){Xt(c.message)}},Sk=async i=>{if(i.preventDefault(),!!E){Xt(null);try{const c=await fetch(`${ie}/teams/${E}/invites`,{method:"POST",headers:ae(!0),body:JSON.stringify({email:bm,role:km})});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to invite member")}jm(""),await lo(E)}catch(c){Xt(c.message)}}},co=async i=>{if(!(!i||Ks[i]||!(V!=null&&V.access_token)))try{const c=await fetch(`${ie}/teams/${i}/members`,{headers:ae(!1)});if(!c.ok)throw new Error("Failed to load members");const h=await c.json();uj(p=>({...p,[i]:h}))}catch(c){Xt(c.message)}},nv=async(i,c)=>{Xt(null);try{const h=await fetch(`${ie}/invites/${i.id}/${c}`,{method:"POST",headers:ae(!1)});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to update invite")}c==="accept"&&i.tenantId&&nr(i.tenantId),await Xd(),c==="accept"&&gl(!1)}catch(h){Xt(h.message)}},Nk=async()=>{if(O){Am(!0),td(null);try{const i=await fetch(`${ie}/me`,{method:"PATCH",headers:ae(!1),body:JSON.stringify({name:O.name,avatarUrl:O.avatarUrl,preferences:{timezone:O.timezone,locale:O.locale,profileVisibility:O.profileVisibility,defaultHuddleId:O.defaultHuddleId||null,defaultPriority:O.defaultPriority,defaultStatus:O.defaultStatus,notifications:O.notifications,workingHours:O.workingHours,reminders:O.reminders}})});if(!i.ok){const h=await i.json();throw new Error(h.error||"Failed to save settings")}const c=await i.json();un(c.user),Te(Kg(c.user)),Qn("Settings saved")}catch(i){Qn(i.message)}finally{Am(!1)}}},_k=async()=>{if(!($!=null&&$.email))return;td(null);const{error:i}=await Dr.auth.resetPasswordForEmail($.email,{redirectTo:window.location.origin});if(i){Qn(i.message);return}Qn("Password reset email sent.")},Ek=async i=>{if(!i||i.length===0||!O)return;const c=i[0],h=new FileReader;h.onload=()=>{Te({...O,avatarUrl:String(h.result||"")})},h.readAsDataURL(c)},rv=(i,c,h="text/plain")=>{const p=new Blob([c],{type:h}),x=URL.createObjectURL(p),b=document.createElement("a");b.href=x,b.download=i,b.click(),URL.revokeObjectURL(x)},Tk=()=>{const i=JSON.stringify(he,null,2);rv("kanbax-tasks.json",i,"application/json")},Ck=()=>{const c=[["id","title","status","priority","dueDate","ownerId","assignees","huddleId"],...he.map(h=>[h.id,h.title.replace(/"/g,'""'),h.status,h.priority,h.dueDate?new Date(h.dueDate).toISOString():"",h.ownerId||"",(h.assignees||[]).join("|"),h.tenantId])].map(h=>h.map(p=>`"${p}"`).join(",")).join(`
`);rv("kanbax-tasks.csv",c,"text/csv")},Ik=async i=>{td(null);try{const c=await fetch(`${ie}/teams/${i}/leave`,{method:"POST",headers:ae(!1)});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to leave huddle")}await Xd(),E===i&&nr(""),Qn("Left huddle")}catch(c){Qn(c.message)}};g.useEffect(()=>{if(!wl)return;const i=setTimeout(()=>Qn(null),3e3);return()=>clearTimeout(i)},[wl]);const Ak=i=>i.toLowerCase(),Ok=(i,c,h)=>{const p=rh.current,x={...p};if(!Xg.current.has(i)){h.forEach(b=>{x[`${i}:${b.id}`]={status:b.status,ownerId:b.ownerId||null,assignees:b.assignees||[],updatedAt:b.updatedAt,commentIds:b.comments.map(I=>I.id)}}),Xg.current.add(i),rh.current=x;return}h.forEach(b=>{const I=`${i}:${b.id}`,R=p[I],T=b.activityLog&&b.activityLog.length>0?[...b.activityLog].sort((H,J)=>new Date(J.timestamp).getTime()-new Date(H.timestamp).getTime())[0]:null,G=(T==null?void 0:T.actorId)===Nt;if(!R){G||wr(H=>[{id:`task-new-${I}`,message:`New task created: ${b.title}`,huddleName:c,timestamp:new Date(b.createdAt).toISOString(),read:!1,taskId:b.id,tenantId:i},...H]),x[I]={status:b.status,ownerId:b.ownerId||null,assignees:b.assignees||[],updatedAt:b.updatedAt,commentIds:b.comments.map(H=>H.id)};return}R.status!==b.status&&!G&&wr(H=>[{id:`task-status-${I}-${b.updatedAt}`,message:`Status changed: ${b.title}  ${b.status}`,huddleName:c,timestamp:new Date(b.updatedAt).toISOString(),read:!1,taskId:b.id,tenantId:i},...H]),R.ownerId!==b.ownerId&&b.ownerId&&!(b.ownerId===Nt)&&!G&&wr(J=>[{id:`task-owner-${I}-${b.updatedAt}`,message:`Owner changed: ${b.title}`,huddleName:c,timestamp:new Date(b.updatedAt).toISOString(),read:!1,taskId:b.id,tenantId:i},...J]);const ce=new Set(R.assignees||[]);new Set(b.assignees||[]);const be=b.assignees.filter(H=>!ce.has(H));if(be.length>0){const H=Nt&&be.includes(Nt);G||wr(J=>[{id:`task-assignees-${I}-${b.updatedAt}`,message:H?`You were added to ${b.title}`:`Assignees updated: ${b.title}`,huddleName:c,timestamp:new Date(b.updatedAt).toISOString(),read:!1,taskId:b.id,tenantId:i},...J])}const He=new Set(R.commentIds||[]),pe=b.comments.filter(H=>!He.has(H.id)),Ae=pe.some(H=>H.createdBy!==Nt);if(pe.length>0&&Ae){const H=pe.some(J=>Yg&&Ak(J.text).includes(`@${Yg}`));G||wr(J=>[{id:`task-comment-${I}-${b.updatedAt}`,message:H?`You were mentioned in ${b.title}`:`New comment on ${b.title}`,huddleName:c,timestamp:new Date(b.updatedAt).toISOString(),read:!1,taskId:b.id,tenantId:i},...J])}x[I]={status:b.status,ownerId:b.ownerId||null,assignees:b.assignees||[],updatedAt:b.updatedAt,commentIds:b.comments.map(H=>H.id)}}),rh.current=x};g.useEffect(()=>{if(!(V!=null&&V.access_token)||ke.length===0)return;let i=!1;const c=async()=>{var h;if(!bl.current){bl.current=!0;for(const p of ke){const x=p.tenantId,b=dt((h=p.tenant)==null?void 0:h.name);try{const I=await fetch(`${ie}/tasks`,{headers:ae(!0,x)});if(!I.ok)continue;const R=await I.json();i||(Dm(T=>({...T,[x]:R})),Ok(x,b,R))}catch{}}bl.current=!1}};return c(),Js.current&&clearInterval(Js.current),Js.current=window.setInterval(c,3e4),()=>{i=!0,bl.current=!1,Js.current&&(clearInterval(Js.current),Js.current=null)}},[V==null?void 0:V.access_token,ke]);const Rk=async(i,c)=>{if(E){Xt(null);try{const h=await fetch(`${ie}/teams/${E}/members/${i}`,{method:"PATCH",headers:ae(!0),body:JSON.stringify({role:c})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to update role")}await lo(E)}catch(h){Xt(h.message)}}},Dk=async i=>{if(E){Xt(null);try{const c=await fetch(`${ie}/teams/${E}/members/${i}`,{method:"DELETE",headers:ae(!0)});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to remove member")}await lo(E)}catch(c){Xt(c.message)}}},ih=g.useMemo(()=>{if(Ir)return["ALL",se.ARCHIVED];const i=new Set;return ji||((En==null?void 0:En.columns)||[]).forEach(c=>{c!=null&&c.status&&i.add(String(c.status))}),i.size===0&&he.forEach(c=>{c.status&&c.status!==se.ARCHIVED&&i.add(c.status)}),["ALL",...Array.from(i)]},[En==null?void 0:En.columns,he,Ir,ji]),sc=g.useMemo(()=>{const i=Ir?he.filter(h=>h.status===se.ARCHIVED):he.filter(h=>h.status!==se.ARCHIVED),c=new Set;return i.forEach(h=>{(h.kinds||[]).forEach(p=>{const x=String(p||"").trim();x&&c.add(x)})}),Array.from(c).sort((h,p)=>h.localeCompare(p))},[he,Ir]);g.useEffect(()=>{Ed(i=>i.filter(c=>sc.includes(c)))},[sc]),g.useEffect(()=>{Xn!=="ALL"&&!ih.includes(Xn)&&ng("ALL")},[Xn,ih]),g.useEffect(()=>{o!=="table"&&Sr&&$a(!1)},[o,Sr]),g.useEffect(()=>{Yn&&(o==="dashboard"||o==="scope")&&Ma(!1)},[o,Yn]),g.useEffect(()=>{o==="dashboard"&&Yn&&Ma(!1)},[o,Yn]);const sv=Sd.trim().toLowerCase(),iv=i=>{if(Nd&&!i.isFavorite||ai!=="ALL"&&i.priority!==ai||o==="table"&&Xn!=="ALL"&&i.status!==Xn)return!1;if(oi.length>0){const h=(i.kinds||[]).map(x=>String(x));if(!oi.some(x=>h.includes(x)))return!1}if(La!=="ALL"){const h=i.dueDate?new Date(i.dueDate):null;if(La==="MINE"&&(!Nt||!(i.ownerId===Nt||(i.assignees||[]).includes(Nt)))||La==="OVERDUE"&&(!h||i.status===se.DONE||i.status===se.ARCHIVED||h>=new Date))return!1;if(La==="WEEK"){if(!h)return!1;const p=new Date,x=new Date;if(x.setDate(p.getDate()+7),i.status===se.DONE||i.status===se.ARCHIVED||h<p||h>x)return!1}}return sv?[i.title,oo(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(sv):!0},ah=Ir?he.filter(i=>i.status===se.ARCHIVED):he.filter(i=>i.status!==se.ARCHIVED),av=ah.filter(iv),Pk=g.useMemo(()=>ji?[se.BACKLOG,se.TODO,se.IN_PROGRESS,se.DONE].map(c=>({status:c,tasks:ah.filter(h=>h.status===c)})):[],[ah,ji]),ov=Ir?[{status:se.ARCHIVED,tasks:av}]:ji?Pk:(En==null?void 0:En.columns)||[],Lk=new Set(he.flatMap(i=>i.linkedTaskIds)),Un=Sd.trim().toLowerCase(),Mk=Un?Object.entries(dn).flatMap(([i,c])=>(c||[]).map(h=>({...h,tenantId:h.tenantId||i}))):[],oh=Un?Mk.filter(i=>[i.title,oo(i.description||""),i.kinds.join(" ")].join(" ").toLowerCase().includes(Un)):[],lh=Un?ke.filter(i=>{var h;return(dt((h=i.tenant)==null?void 0:h.name)||i.tenantId).toLowerCase().includes(Un)}):[],ch=Un?ov.filter(i=>String(i.status).toLowerCase().includes(Un)):[],lv=ke.length>0&&ke.every(i=>!!dn[i.tenantId]),ic=(i,c,h)=>`${i||"unknown"}:${c||"unknown"}:${h}`,uh=(i,c,h)=>{if(!(!i||!c))try{localStorage.setItem(`kanbax-task-order:${i}:${c}`,JSON.stringify(h))}catch{}},dh=(i,c)=>{i==="task"&&(c.tenantId&&c.tenantId!==E?(xl({taskId:c.id,tenantId:c.tenantId}),nr(c.tenantId)):(fs(c.id),_r(!0))),i==="huddle"&&(nr(c.tenantId),l("kanban")),i==="column"&&l("kanban"),tg("")};g.useEffect(()=>{!ya||ya.tenantId!==E||!he.some(c=>c.id===ya.taskId)||(fs(ya.taskId),_r(!0),xl(null))},[ya,E,he]),g.useEffect(()=>{if(!Un){Mm(!1);return}Mm(!1)},[Un,V,ke]),g.useEffect(()=>{if(!(!E||!re))try{const i=localStorage.getItem(`kanbax-task-order:${E}:${re}`);if(i){const c=JSON.parse(i);Gs(c)}else Gs({})}catch{Gs({})}},[E,re]),g.useEffect(()=>{if(!E||he.length===0)return;const i={...Rm};Array.from(new Set(he.map(h=>h.status))).forEach(h=>{const p=ic(E,re,h),x=i[p]||[],b=he.filter(T=>T.status===h).map(T=>T.id),I=x.filter(T=>b.includes(T)),R=b.filter(T=>!I.includes(T));i[p]=I.concat(R)}),Gs(i),uh(E,re,i)},[E,re,he]),he.filter(i=>i.status!==se.ARCHIVED);const $k=async i=>{i.preventDefault();try{const c=Va||Si(ve),h=await fetch(`${ie}/commands/task/create`,{method:"POST",headers:ae(!0,ve),body:JSON.stringify({title:Zt.title,description:Zt.description,kinds:Ha,status:Cj,priority:Zt.priority,dueDate:Zt.dueDate||void 0,attachments:pg,ownerId:hs??($==null?void 0:$.id)??void 0,assignees:Nr,boardId:c,source:{type:"MANUAL",createdBy:"admin-user-1"}})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to create task")}Dd(!1),hi({title:"",description:"",priority:"MEDIUM",dueDate:""}),Ba([]),Fa([]),za(""),Wa(null),Ha.length>0&&zl(p=>{const x=new Set(p);Ha.forEach(I=>x.add(I));const b=Array.from(x).sort((I,R)=>I.localeCompare(R));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(b))}catch{}return b}),Mn()}catch(c){alert(c.message)}},hh=async(i,c)=>{try{const h=await fetch(`${ie}/commands/task/update-status`,{method:"POST",headers:ae(),body:JSON.stringify({taskId:i,newStatus:c})});if(!h.ok){const p=await h.json();throw new Error(p.error||"Failed to update status")}if(Mn(),o==="scope"&&E)try{const p=await fetch(`${ie}/tasks?boardId=all`,{headers:ae(!0,E)});if(p.ok){const x=await p.json();Lm(b=>({...b,[E]:x}))}}catch{}}catch(h){alert(h.message)}},Uk=async i=>{const c=i.status===se.ARCHIVED?se.BACKLOG:se.ARCHIVED;await hh(i.id,c)},Bk=async i=>{if(confirm("Are you sure you want to delete this task?"))try{const c=await fetch(`${ie}/commands/task/delete`,{method:"POST",headers:ae(),body:JSON.stringify({taskId:i})});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to delete task")}_r(!1),fs(null),Mn()}catch(c){alert(c.message)}},cv=i=>{fs(i.id),vs(i.checklist||[]),Bd(""),ys(""),mi(i.linkedTaskIds||[]),ws(""),_r(!0)},ac=i=>{Um||Date.now()-Hm.current<200||cv(i)},uv=i=>{if(i.sourceType!=="MANUAL")return;$d(i.id),Oj(i.tenantId),vg(i.tenantId),Ul(i.boardId||Si(i.tenantId)),yg(i.boardId||Si(i.tenantId)),Bl(i.ownerId??null),Ud(i.assignees??[]);const c=i.dueDate?new Date(i.dueDate).toISOString().split("T")[0]:"";Ja({title:i.title,description:i.description||"",priority:i.priority,dueDate:c}),Vl(i.kinds||[]),Wl(""),vs(i.checklist||[]),ys(""),mi(i.linkedTaskIds||[]),ws(""),i.kinds&&i.kinds.length>0&&zl(h=>{const p=new Set(h);i.kinds.forEach(b=>{b.trim().length>0&&p.add(b)});const x=Array.from(p).sort((b,I)=>b.localeCompare(I));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(x))}catch{}return x}),wg(i.attachments||[]),fi([]),Fl([]),Md(!0)},fh=()=>{Dd(!1),Ba([]),Fa([]),za(""),Wa(null)},oc=()=>{_r(!1),fs(null)},ph=()=>{Md(!1),$d(null),fi([]),Fl([]),Vl([]),Wl(""),vs([]),ys(""),mi([]),ws("")},mh=()=>{Ra(!1),Da(null),Ol(null)},gh=()=>{Il(!1),Oa(null)};g.useEffect(()=>{const i=c=>{if(c.key!=="Escape")return;let h=!1;pi?(Kl(null),h=!0):Ga?(ph(),h=!0):Ka?(oc(),h=!0):D?(L(!1),h=!0):Ua?(fh(),h=!0):kd?(mh(),h=!0):jd?(Aa(!1),h=!0):bd?(gh(),h=!0):Sa?(Na(!1),h=!0):Km?(Tl(!1),h=!0):xd?(Ia(!1),h=!0):Yu?(gl(!1),h=!0):ga?(pl(!1),h=!0):rd?(is(!1),h=!0):Xs?(os(!1),h=!0):sd?(Yt(!1),h=!0):id?(ad(!1),h=!0):dd?(kl(!1),h=!0):hd?(Sl(!1),h=!0):fd?(Nl(!1),h=!0):Qs?(as(!1),h=!0):pd?(Zs(null),h=!0):ei?(ja(!1),h=!0):ti?(ka(!1),h=!0):li?(Rl(!1),h=!0):Sr?($a(!1),h=!0):Yn?(Ma(!1),h=!0):Dn&&(nt(null),h=!0),h&&(c.preventDefault(),c.stopPropagation())};return window.addEventListener("keydown",i),document.addEventListener("mousedown",Be),()=>{window.removeEventListener("keydown",i),document.removeEventListener("mousedown",Be)}},[pi,Ga,Ka,Ua,kd,jd,bd,Sa,xd,Yu,ga,rd,sd,id,dd,hd,fd,pd,ei,ti,li,Sr,U,ne,fh,oc,ph,mh,gh]);const Hk=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(h=>new Promise((p,x)=>{const b=new FileReader;b.onload=()=>p({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:h.name,size:h.size,type:h.type||"application/octet-stream",dataUrl:String(b.result||""),uploadedAt:new Date}),b.onerror=()=>x(new Error("Failed to read file")),b.readAsDataURL(h)}));try{const h=await Promise.all(c);Ba(p=>p.concat(h))}catch(h){alert(h.message||"Failed to attach file")}},Fk=i=>{Ba(c=>c.filter(h=>h.id!==i))},dv=(i,c)=>{const h=i.trim();return h?(c(p=>p.some(b=>b.toLowerCase()===h.toLowerCase())?p:[...p,h]),!0):!1},hv=()=>{dv(mg,Fa)&&za("")},fv=()=>{dv(xg,Vl)&&Wl("")},pv=(i,c)=>{(i.key==="Enter"||i.key===",")&&(i.preventDefault(),c==="new"?hv():fv())},mv=(i,c)=>{c(h=>h.filter(p=>p!==i))},rr=async i=>{if(!z)return;const c=await fetch(`${ie}/commands/task/update-details`,{method:"POST",headers:ae(!0,z.tenantId),body:JSON.stringify({taskId:z.id,title:z.title,description:z.description,...i})});if(!c.ok){const h=await c.json();throw new Error(h.error||"Failed to update task")}await Mn()},zk=async()=>{const i=bg.trim();if(!(!i||!z))try{await rr({commentText:i}),Bd("")}catch(c){alert(c.message)}},gv=async()=>{const i=Hd.trim();if(!i||!z)return;const c=[...gs,{id:Math.random().toString(36).substring(2,15),text:i,done:!1}];vs(c),ys("");try{await rr({checklist:c})}catch(h){alert(h.message)}},vv=async i=>{const c=gs.map(h=>h.id===i?{...h,done:!h.done}:h);vs(c);try{await rr({checklist:c})}catch(h){alert(h.message)}},yv=async i=>{const c=gs.filter(h=>h.id!==i);vs(c);try{await rr({checklist:c})}catch(h){alert(h.message)}},wv=async()=>{if(!Ya||!z)return;const i=Ln.includes(Ya)?Ln:[...Ln,Ya];mi(i),ws("");try{await rr({linkedTaskIds:i})}catch(c){alert(c.message)}},xv=async i=>{const c=Ln.filter(h=>h!==i);mi(c);try{await rr({linkedTaskIds:c})}catch(h){alert(h.message)}},vh=async i=>{try{await fetch(`${ie}/commands/task/update-details`,{method:"POST",headers:ae(!0,i.tenantId),body:JSON.stringify({taskId:i.id,title:i.title,description:i.description,isFavorite:!i.isFavorite})}),Mn()}catch(c){alert(c.message)}},bv=async i=>{if(!i||i.length===0)return;const c=Array.from(i).map(h=>new Promise((p,x)=>{const b=new FileReader;b.onload=()=>p({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:h.name,size:h.size,type:h.type||"application/octet-stream",dataUrl:String(b.result||""),uploadedAt:new Date}),b.onerror=()=>x(new Error("Failed to read file")),b.readAsDataURL(h)}));try{const h=await Promise.all(c);fi(p=>p.concat(h))}catch(h){alert(h.message||"Failed to attach file")}},Vk=i=>{fi(c=>c.filter(h=>h.id!==i)),wg(c=>(c.some(p=>p.id===i)&&Fl(p=>p.concat(i)),c.filter(p=>p.id!==i)))},Wk=async i=>{if(i.preventDefault(),!!qa)try{const c=await fetch(`${ie}/commands/task/update-details`,{method:"POST",headers:ae(!0,Qa),body:JSON.stringify({taskId:qa,title:Pt.title,description:Pt.description,kinds:Xa,priority:Pt.priority,dueDate:Pt.dueDate?Pt.dueDate:null,ownerId:ms||null,assignees:Er,attachmentsToAdd:Hl,attachmentsToRemove:Dj})});if(!c.ok){const p=await c.json();throw new Error(p.error||"Failed to update task")}if(fe&&Qa&&fe!==Qa){const p=await fetch(`${ie}/commands/task/assign-huddle`,{method:"POST",headers:ae(!0,Qa),body:JSON.stringify({taskId:qa,targetTenantId:fe})});if(!p.ok){const x=await p.json();throw new Error(x.error||"Failed to move task to huddle")}}const h=fe||Qa;if(ps&&h&&ps!==Aj){const p=await fetch(`${ie}/commands/task/assign-board`,{method:"POST",headers:ae(!0,h),body:JSON.stringify({taskId:qa,boardId:ps})});if(!p.ok){const x=await p.json();throw new Error(x.error||"Failed to move task to board")}}Md(!1),$d(null),Ul(null),yg(null),_r(!1),fs(null),fi([]),Fl([]),vs([]),ys(""),mi([]),ws(""),Xa.length>0&&zl(p=>{const x=new Set(p);Xa.forEach(I=>x.add(I));const b=Array.from(x).sort((I,R)=>I.localeCompare(R));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(b))}catch{}return b}),Mn()}catch(c){alert(c.message)}},jv=(i,c)=>{Hm.current=Date.now(),i.dataTransfer.setData("text/plain",c),i.dataTransfer.effectAllowed="move",$m(c),Bm(!0)},kv=i=>{document.querySelectorAll(".task-card.drag-over-card").forEach(c=>{c.classList.remove("drag-over-card")}),document.querySelectorAll(".kanban-column.drag-over").forEach(c=>{c.classList.remove("drag-over")}),$m(null),qs.current=null,El(null),setTimeout(()=>Bm(!1),200)},Kk=i=>{i.preventDefault(),i.dataTransfer.dropEffect="move",i.currentTarget.classList.add("drag-over"),i.target===i.currentTarget&&(qs.current=null)},Gk=i=>{i.currentTarget.classList.remove("drag-over")},qk=(i,c)=>{i.preventDefault(),i.currentTarget.classList.remove("drag-over");const h=i.dataTransfer.getData("text/plain")||xr||"";if(!h||!E)return;const p=he.find(R=>R.id===h),x=p==null?void 0:p.status,b=ic(E,re,c),I=qs.current;if(qs.current=null,x&&x!==c&&hh(h,c),I!=null&&I.startsWith(`${c}:`)){const R=I.split(":")[1]||null;R&&Sv(E,re,c,h,R);return}Gs(R=>{const T={...R},G=(T[b]||[]).filter(ce=>ce!==h);return T[b]=G.concat(h),uh(E,re,T),T})},Sv=(i,c,h,p,x)=>{const b=ic(i,c,h);Gs(I=>{const R={...I},T=(R[b]||[]).filter(G=>G!==p);if(x){const G=T.indexOf(x);G===-1?T.push(p):T.splice(G,0,p)}else T.push(p);return R[b]=T,uh(i,c,R),R})},Jk=(i,c,h)=>{if(i.preventDefault(),i.dataTransfer.dropEffect="move",!xr||xr===h||!E)return;const p=he.find(b=>b.id===xr);if(!p||p.status!==c)return;const x=`${c}:${h}`;qs.current!==x&&(qs.current=x,Sv(E,re,c,xr,h),i.currentTarget.classList.add("drag-over-card"))},Qk=i=>{const c=i.currentTarget,h=i.relatedTarget;c.contains(h)||i.currentTarget.classList.remove("drag-over-card")};return V?aj?Qt.length===0&&!_m?s.jsx("div",{className:"auth-screen",children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("h1",{children:"Create your first huddle"}),s.jsx("p",{children:"Set up a shared space and invite teammates."})]}),s.jsxs("form",{className:"auth-form",onSubmit:tv,children:[s.jsxs("label",{children:["Huddle name",s.jsx("input",{type:"text",value:Qu,onChange:i=>Xu(i.target.value),placeholder:"Design Squad",required:!0})]}),s.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create huddle"}),ml&&s.jsx("div",{className:"auth-error",children:ml})]}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>oj(!0),children:"Continue with private huddle"}),s.jsx("button",{className:"btn btn-ghost",onClick:rc,children:"Sign out"})]})}):!E&&Qt.length>0&&!_m?s.jsx("div",{className:"auth-screen",children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("h1",{children:"Select a huddle"}),s.jsx("p",{children:"Choose a space to continue."})]}),s.jsx("div",{className:"auth-form",children:s.jsxs("label",{children:["Huddle",s.jsxs("select",{value:E||"",onChange:i=>nr(i.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Select huddle"}),ke.map(i=>{var c;return s.jsx("option",{value:i.tenantId,children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})]})]})}),s.jsx("button",{className:"btn btn-ghost",onClick:rc,children:"Sign out"})]})}):s.jsxs("div",{className:`dashboard${tt?" sidebar-collapsed":""}`,children:[s.jsx("datalist",{id:"kind-suggestions",children:Pj.map(i=>s.jsx("option",{value:i},i))}),s.jsx("header",{className:"topbar",children:s.jsxs("div",{className:"topbar-inner",children:[s.jsxs("div",{className:"topbar-search",tabIndex:-1,children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"11",cy:"11",r:"7"}),s.jsx("path",{d:"M20 20l-3.5-3.5"})]}),s.jsx("input",{type:"search",placeholder:"Search tasks, huddles...",value:Sd,onChange:i=>tg(i.target.value)})]}),Un&&s.jsxs("div",{className:"topbar-search-panel",children:[!lv&&s.jsx("div",{className:"empty-state",children:"Indexing huddles..."}),lv&&lh.length===0&&oh.length===0&&ch.length===0&&s.jsx("div",{className:"empty-state",children:"No results."}),lh.length>0&&s.jsxs("div",{className:"search-section",children:[s.jsx("div",{className:"search-title",children:"Huddles"}),lh.map(i=>{var c,h;return s.jsxs("button",{className:"search-item",onClick:()=>dh("huddle",i),children:[s.jsx("span",{className:"huddle-item-dot",style:{background:mn(i.tenantId,(c=i.tenant)==null?void 0:c.name).solid}}),dt((h=i.tenant)==null?void 0:h.name)||i.tenantId]},i.id)})]}),oh.length>0&&s.jsxs("div",{className:"search-section",children:[s.jsx("div",{className:"search-title",children:"Tasks"}),oh.slice(0,6).map(i=>s.jsx("button",{className:"search-item",onClick:()=>dh("task",i),children:i.title},i.id))]}),ch.length>0&&s.jsxs("div",{className:"search-section",children:[s.jsx("div",{className:"search-title",children:"Task columns"}),ch.map(i=>s.jsx("button",{className:"search-item",onClick:()=>dh("column",i),children:i.status},i.status))]})]}),s.jsx("div",{className:"topbar-personal",children:s.jsxs("div",{className:"topbar-greeting",children:[s.jsx("span",{className:"topbar-greeting-title",children:wk}),s.jsx("div",{className:"topbar-greeting-meta",children:s.jsxs("div",{className:`focus-dropdown${Xs?" open":""}`,ref:od,children:[s.jsxs("button",{type:"button",className:"focus-dropdown-button",onClick:()=>{os(i=>!i),as(!1),is(!1),Yt(!1)},"aria-expanded":Xs,"aria-haspopup":"menu",children:["Heute fllig: ",xk]}),Xs&&s.jsx("div",{className:"quick-pins-panel focus-panel header-dropdown-panel",role:"menu",children:ec.length===0?s.jsxs("div",{className:"quick-pin-empty",children:[s.jsx("span",{className:"quick-pin-empty-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("path",{d:"M4 7h16"}),s.jsx("path",{d:"M6 7v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),s.jsx("path",{d:"M9 4h6"}),s.jsx("path",{d:"M9 11h6"}),s.jsx("path",{d:"M9 15h4"})]})}),s.jsx("span",{children:"Keine Tasks fllig"})]}):ec.map(i=>s.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{l("kanban"),ri(i.boardId||_t),xl({taskId:i.id,tenantId:i.tenantId||E||""}),os(!1)},children:[s.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),s.jsx("span",{className:"quick-pin-label",children:i.title}),s.jsx("span",{className:"quick-pin-meta",children:ki(i.boardId)})]},i.id))})]})})]})}),s.jsxs("div",{className:"topbar-actions",children:[tc.length>0&&s.jsxs("div",{className:`quick-pins quick-pins-icon${Qs?" open":""}`,ref:ld,children:[s.jsxs("button",{type:"button",className:"notif-button quick-pins-icon-button",onClick:()=>{as(i=>!i),os(!1),is(!1),Yt(!1)},"aria-expanded":Qs,"aria-haspopup":"menu",title:"Favoriten","aria-label":"Favoriten ffnen",children:[s.jsx("span",{className:"quick-pins-icon-star",children:""}),tc.length>0&&s.jsx("span",{className:"notif-badge",children:tc.length})]}),Qs&&s.jsx("div",{className:"quick-pins-panel header-dropdown-panel",role:"menu",children:tc.map(i=>s.jsxs("button",{type:"button",className:"quick-pin quick-pin-panel-item",onClick:()=>{const c=Or.find(h=>h.id===i.id);c&&(l("kanban"),ri(c.boardId||_t),xl({taskId:c.id,tenantId:c.tenantId||E||""}),as(!1))},children:[s.jsx("span",{className:"quick-pin-dot task","aria-hidden":"true"}),s.jsx("span",{className:"quick-pin-label",children:i.label}),i.sublabel&&s.jsx("span",{className:"quick-pin-meta",children:i.sublabel})]},i.id))})]}),s.jsxs("div",{className:"notif-dropdown",children:[s.jsxs("button",{className:"notif-button",onClick:()=>{is(i=>!i),as(!1),os(!1),Yt(!1)},"aria-label":"Notifications",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),s.jsx("path",{d:"M10 21a2 2 0 0 0 4 0"})]}),nc>0&&s.jsx("span",{className:"notif-badge",children:nc})]}),rd&&s.jsxs("div",{className:"notif-panel header-dropdown-panel",children:[s.jsxs("div",{className:"notif-header",children:[s.jsx("div",{children:"Notifications"}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>wr(i=>i.map(c=>({...c,read:!0}))),children:"Mark all read"})]}),s.jsxs("div",{className:"notif-list",children:[nd.length===0&&s.jsx("div",{className:"empty-state",children:"No notifications yet."}),nd.map(i=>s.jsxs("div",{className:`notif-item ${i.read?"read":""} ${i.taskId?"clickable":""}`,onClick:()=>i.taskId&&jk(i),children:[s.jsx("div",{className:"notif-title",children:i.message}),s.jsxs("div",{className:"notif-meta",children:[i.huddleName,"  ",new Date(i.timestamp).toLocaleString()]})]},i.id))]})]})]}),s.jsxs("div",{className:"user-menu",children:[s.jsx("button",{className:"user-menu-button",onClick:()=>{Yt(i=>!i),is(!1),as(!1),os(!1)},"aria-label":"User menu",children:$g?s.jsx("img",{src:$g,alt:"User avatar"}):s.jsx("span",{children:ao(bi)})}),sd&&s.jsxs("div",{className:"user-menu-dropdown header-dropdown-panel",children:[s.jsxs("div",{className:"user-menu-header",children:[s.jsx("div",{className:"user-menu-name",children:(O==null?void 0:O.name)||bi}),s.jsx("div",{className:"user-menu-email",children:bi})]}),s.jsx("button",{className:"user-menu-item",onClick:()=>{l("dashboard"),Yt(!1)},children:"Home"}),s.jsx("button",{className:"user-menu-item",onClick:()=>{l("kanban"),Yt(!1)},children:"Work"}),s.jsx("button",{className:"user-menu-item",onClick:()=>{l("scope"),Rt("list"),hn(null),er(null,"replace"),Yt(!1)},children:"Scope"}),s.jsx("button",{className:"user-menu-item",onClick:()=>{bs("/okr"),Yt(!1)},children:"Goals"}),s.jsxs("button",{className:"user-menu-item",onClick:()=>{is(!0),Yt(!1)},children:["Notifications ",nc>0?`(${nc})`:""]}),s.jsx("button",{className:"user-menu-item",onClick:()=>{l("settings"),Yt(!1)},children:"Settings"}),s.jsx("button",{className:"user-menu-item danger",onClick:()=>{Yt(!1),rc()},children:"Sign out"})]})]})]})]})}),s.jsxs("aside",{className:"sidebar",children:[s.jsx("div",{className:"sidebar-header",children:s.jsxs("div",{className:"sidebar-brand",children:[s.jsx("img",{className:"sidebar-logo",src:"/sqirch_logo.svg",alt:"sqirch"}),s.jsx("img",{className:"sidebar-logo-mark",src:"/sqirch_mark.svg",alt:"","aria-hidden":"true"})]})}),s.jsxs("div",{className:"sidebar-content",children:[s.jsxs("div",{className:"sidebar-huddle",children:[s.jsxs("button",{className:"sidebar-nav-item sidebar-huddle-toggle",onClick:()=>ad(i=>!i),"data-tooltip":"Huddles","aria-label":"Select huddle",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[s.jsx("circle",{cx:"8",cy:"8",r:"3.2"}),s.jsx("circle",{cx:"16",cy:"8",r:"3.2"}),s.jsx("path",{d:"M3.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"}),s.jsx("path",{d:"M11.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"})]}),s.jsx("span",{className:"sidebar-huddle-initial",children:dt(((Tv=(Ev=ke.find(i=>i.tenantId===E))==null?void 0:Ev.tenant)==null?void 0:Tv.name)||"H").charAt(0)}),s.jsx("span",{className:"sidebar-huddle-label",children:dt((Iv=(Cv=ke.find(i=>i.tenantId===E))==null?void 0:Cv.tenant)==null?void 0:Iv.name)||"Huddle"})]}),id&&s.jsx("div",{className:"sidebar-huddle-menu",children:ke.map(i=>{var h,p;const c=i.tenantId===E;return s.jsxs("button",{className:`sidebar-huddle-item ${c?"active":""}`,onClick:()=>{nr(i.tenantId),ad(!1)},children:[s.jsx("span",{className:"huddle-item-dot",style:{background:mn(i.tenantId,(h=i.tenant)==null?void 0:h.name).solid}}),s.jsx("span",{className:"sidebar-huddle-name",children:dt((p=i.tenant)==null?void 0:p.name)||i.tenantId})]},i.id)})})]}),s.jsx("div",{className:"sidebar-team",children:s.jsxs("div",{className:"sidebar-nav",children:[s.jsxs("button",{className:`sidebar-nav-item ${o==="dashboard"?"active":""}`,onClick:()=>l("dashboard"),"data-tooltip":"Home",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("rect",{x:"3.5",y:"3.5",width:"7",height:"7",rx:"2"}),s.jsx("rect",{x:"13.5",y:"3.5",width:"7",height:"7",rx:"2"}),s.jsx("rect",{x:"3.5",y:"13.5",width:"7",height:"7",rx:"2"}),s.jsx("rect",{x:"13.5",y:"13.5",width:"7",height:"7",rx:"2"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Home"})]}),s.jsxs("button",{className:`sidebar-nav-item ${o==="inbox"?"active":""}`,onClick:()=>l("inbox"),"data-tooltip":"Inbox",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("path",{d:"M4 4h16v12H4z"}),s.jsx("path",{d:"M4 16h6l2 3h4l2-3h6"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Inbox"})]}),s.jsxs("button",{className:`sidebar-nav-item ${o==="kanban"||o==="table"||o==="timeline"?"active":""}`,onClick:zj,"data-tooltip":"Work",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("rect",{x:"3.5",y:"4",width:"7",height:"16",rx:"2"}),s.jsx("rect",{x:"13.5",y:"4",width:"7",height:"9",rx:"2"}),s.jsx("path",{d:"M13.5 16h7"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Work"})]}),s.jsxs("button",{className:`sidebar-nav-item ${o==="scope"?"active":""}`,onClick:Vj,"data-tooltip":"Scope",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),s.jsx("path",{d:"M12 4v3"}),s.jsx("path",{d:"M12 17v3"}),s.jsx("path",{d:"M4 12h3"}),s.jsx("path",{d:"M17 12h3"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Scope"})]}),s.jsxs("button",{className:`sidebar-nav-item ${o==="initiatives"?"active":""}`,onClick:()=>l("initiatives"),"data-tooltip":"Initiatives",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("path",{d:"M4 16l6-6 4 4 6-6"}),s.jsx("path",{d:"M4 20h16"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Initiatives"})]}),s.jsxs("button",{className:`sidebar-nav-item ${o==="okr"?"active":""}`,onClick:vk,"data-tooltip":"Goals",children:[s.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[s.jsx("circle",{cx:"12",cy:"12",r:"8"}),s.jsx("path",{d:"M12 6v6l4 2"})]})}),s.jsx("span",{className:"sidebar-nav-label",children:"Goals"})]})]})}),s.jsx("div",{className:"sidebar-footer",children:s.jsx("button",{className:"sidebar-toggle",onClick:()=>mj(i=>!i),"aria-label":tt?"Expand sidebar":"Collapse sidebar",title:tt?"Expand sidebar":"Collapse sidebar",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M6 12h12"}),s.jsx("path",{d:"M12 6l6 6-6 6"})]})})})]})]}),s.jsxs("main",{className:"main-content",children:[jg&&s.jsx("div",{className:"loading-strip",children:"Syncing huddle"}),qg&&!yk&&!lj&&s.jsxs("div",{className:"huddle-cta",children:[s.jsxs("div",{children:[s.jsx("div",{className:"huddle-cta-title",children:"Share work with a huddle"}),s.jsx("div",{className:"huddle-cta-text",children:"Create a shared huddle for your team while keeping your private tasks separate."})]}),s.jsxs("div",{className:"huddle-cta-actions",children:[s.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>pl(!0),children:"Create shared huddle"}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>cj(!0),children:"Dismiss"})]})]}),ma.length>0&&s.jsxs("div",{className:"invite-banner",children:[s.jsxs("div",{children:[s.jsx("div",{className:"invite-title",children:"Huddle invitations"}),s.jsxs("div",{className:"invite-text",children:["You have ",ma.length," pending invitation",ma.length>1?"s":"","."]})]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>gl(!0),children:"View invites"})]}),!E&&s.jsxs("div",{className:"team-warning",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"No huddle selected."})," Create or join a huddle to start managing tasks."]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>pl(!0),children:"Create huddle"})]}),s.jsxs("div",{className:"page-heading-wrap",children:[s.jsxs("div",{className:"page-breadcrumbs-row",children:[s.jsx("div",{className:"page-breadcrumbs",children:Qg.map((i,c)=>s.jsxs("span",{className:"page-breadcrumb-item",children:[i.onClick?s.jsx("button",{type:"button",className:"page-breadcrumb-link",onClick:i.onClick,children:i.label}):s.jsx("span",{children:i.label}),c<Qg.length-1&&s.jsx("span",{className:"page-breadcrumb-sep",children:"/"})]},`${i.label}-${c}`))}),(o==="kanban"||o==="table"||o==="timeline"||o==="okr"||o==="scope")&&s.jsxs("div",{className:"page-breadcrumb-actions",children:[(o==="kanban"||o==="table")&&s.jsxs("span",{className:"board-switch-inline",children:[s.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>kl(i=>!i),children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M6 9l6 6 6-6"})})}),dd&&s.jsxs("div",{className:"board-switch-menu",children:[s.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{kl(!1),Hj()},children:"+ Taskliste erstellen"}),pk.map(i=>s.jsx("button",{type:"button",className:`board-switch-item ${i.id===re?"active":""}`,onClick:()=>{kl(!1),Fj(i.id)},children:i.name},i.id))]})]}),o==="okr"&&s.jsxs("span",{className:"board-switch-inline",children:[s.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Sl(i=>!i),children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M6 9l6 6 6-6"})})}),hd&&s.jsxs("div",{className:"board-switch-menu",children:[s.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{Sl(!1),Aa(!0)},children:"+ Objective erstellen"}),St.map(i=>s.jsx("button",{type:"button",className:`board-switch-item ${i.id===(K==null?void 0:K.id)?"active":""}`,onClick:()=>{Sl(!1),Zl(i.id)},children:i.title},i.id))]})]}),o==="scope"&&s.jsxs("span",{className:"board-switch-inline",children:[s.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>Nl(i=>!i),children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M6 9l6 6 6-6"})})}),fd&&s.jsxs("div",{className:"board-switch-menu",children:[s.jsx("button",{type:"button",className:`board-switch-item ${gt==="list"?"active":""}`,onClick:()=>{Nl(!1),Rt("list"),hn(null),er(null,"replace")},children:"Scope list"}),qe.length===0?s.jsx("div",{className:"board-switch-empty",children:"No scope windows yet."}):qe.map(i=>s.jsx("button",{type:"button",className:`board-switch-item ${i.id===In?"active":""}`,onClick:()=>{Nl(!1),eo(i.id)},children:i.name},i.id))]})]})]})]}),s.jsx("div",{className:`page-heading${o==="kanban"||o==="table"||o==="timeline"||o==="scope"?" page-heading-dark":""}`,children:!(o==="okr"&&pn==="objective")&&s.jsxs("div",{className:"page-heading-row",children:[s.jsxs("div",{className:"page-heading-title",children:[s.jsxs("h1",{children:[o==="settings"?"Settings":o==="okr"?"Goals":o==="dashboard"?"Home":o==="calendar"?"Calendar":o==="inbox"?"Inbox":o==="initiatives"?"Initiatives":o==="scope"?gt==="detail"&&te?te.name:"Scope":(ze==null?void 0:ze.name)||Ni||"Work",o==="scope"&&s.jsx("button",{type:"button",className:"icon-action scope-help","data-tooltip":"Ein Scope Window ist ein zeitlicher Rahmen, in dem bestimmte Tasks erledigt werden sollen.","aria-label":"Was ist ein Scope Window?",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"9"}),s.jsx("path",{d:"M9.5 9a2.5 2.5 0 0 1 5 0c0 2-2 2-2 4"}),s.jsx("path",{d:"M12 17h.01"})]})})]}),(o==="kanban"||o==="table"||o==="timeline"||o==="scope"||o==="okr")&&s.jsxs("div",{className:"page-heading-meta",children:[s.jsx("span",{className:"page-heading-meta-label",children:Ni||"Huddle"}),o==="kanban"||o==="table"||o==="timeline"?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"page-heading-dot",children:""}),s.jsx("span",{className:"page-heading-meta-label",children:o==="table"?"List view":o==="timeline"?"Timeline view":"Board view"})]}):null,o==="okr"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"page-heading-dot",children:""}),s.jsx("span",{className:"page-heading-meta-label",children:"Goals"})]}),o==="scope"&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"page-heading-dot",children:""}),s.jsx("span",{className:"page-heading-meta-label",children:"Scope"}),gt==="detail"&&te&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"page-heading-dot",children:""}),s.jsx("span",{className:"page-heading-meta-label",children:th(te)}),s.jsx("span",{className:"page-heading-dot",children:""}),s.jsxs("span",{className:"page-heading-meta-label",children:[te.taskIds.length," tasks"]})]})]})]}),o==="scope"&&gt==="detail"&&(te==null?void 0:te.description)&&s.jsx("div",{className:"page-heading-description",children:te.description})]}),(o==="kanban"||o==="table"||o==="timeline"||o==="scope"&&gt==="detail"&&te||o==="scope"&&gt==="list")&&s.jsxs("div",{className:"page-heading-actions",children:[(o==="kanban"||o==="table"||o==="timeline")&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:"icon-action scope-toggle",onClick:()=>wj(i=>!i),"data-tooltip":"Tasks zu Scope zuteilen","aria-label":"Tasks zu Scope zuteilen","aria-pressed":Gm,children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"8"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M12 2v3"}),s.jsx("path",{d:"M12 19v3"}),s.jsx("path",{d:"M2 12h3"}),s.jsx("path",{d:"M19 12h3"})]})}),Jg&&!Ir&&!ji&&s.jsx("button",{className:"icon-action settings",onClick:()=>Ia(!0),"data-tooltip":"Einstellungen zu Tasks","aria-label":"Einstellungen zu Tasks",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})}),s.jsx("button",{className:"icon-action create",disabled:!E,onClick:mk,"data-tooltip":"Task erstellen","aria-label":"Task erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),o==="scope"&&gt==="list"&&s.jsx("button",{className:"icon-action create",disabled:!E,onClick:()=>Tl(!0),"data-tooltip":"Scope Window erstellen","aria-label":"Scope Window erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})}),o==="scope"&&gt==="detail"&&te&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"icon-action settings",onClick:()=>Na(!0),"data-tooltip":"Scope Window settings","aria-label":"Scope Window settings",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})}),s.jsx("button",{className:"icon-action create",onClick:()=>{xa(""),Zs(i=>i===te.id?null:te.id)},"data-tooltip":"Task zum Scope hinzufgen","aria-label":"Task zum Scope hinzufgen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","stroke-width":"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]})]})]})})]}),o==="inbox"&&s.jsx("div",{className:"filter-bar inbox-filter-bar",children:s.jsx("div",{className:"view-switch inbox-view-switch",role:"tablist","aria-label":"Inbox view switcher",style:{"--active-index":["eingang","spaeter","bearbeitet","archiv"].indexOf(j),"--segment-count":4},children:[{key:"eingang",label:"Eingang"},{key:"spaeter",label:"Spter"},{key:"bearbeitet",label:"Bearbeitet"},{key:"archiv",label:"Archiviert"}].map(i=>s.jsx("button",{type:"button",className:`view-pill ${j===i.key?"active":""}`,onClick:()=>C(i.key),role:"tab","aria-selected":j===i.key,children:i.label},i.key))})}),jg?s.jsxs("div",{className:"content-loader",children:[s.jsx("div",{className:"content-loader-title",children:"Loading huddle"}),s.jsx("div",{className:"content-loader-text",children:"Fetching tasks and status."})]}):o==="calendar"?s.jsxs("div",{className:"calendar-view",children:[s.jsxs("div",{className:"calendar-header",children:[s.jsxs("div",{className:"calendar-header-left",children:[s.jsx("div",{className:"calendar-title",children:ak}),s.jsxs("div",{className:"calendar-nav",children:[s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Uj,children:"Today"}),s.jsx("button",{className:"icon-action",onClick:()=>Ng(-1),"aria-label":"Previous month",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M15 6l-6 6 6 6"})})}),s.jsx("button",{className:"icon-action",onClick:()=>Ng(1),"aria-label":"Next month",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M9 6l6 6-6 6"})})})]})]}),s.jsxs("div",{className:"calendar-imports",children:[s.jsxs("div",{className:"calendar-import-card",children:[s.jsx("div",{className:"calendar-import-title",children:"Manual import (.ics)"}),s.jsx("div",{className:"calendar-import-meta",children:"Upload a calendar export. Re-upload to refresh."}),s.jsxs("div",{className:"calendar-import-form",children:[s.jsx("input",{type:"file",accept:".ics,text/calendar",onChange:i=>{var h;const c=((h=i.target.files)==null?void 0:h[0])||null;ug(c)}},Ej),s.jsx("input",{type:"text",placeholder:"Optional label",value:lg,onChange:i=>cg(i.target.value)}),s.jsx("button",{className:"btn btn-primary btn-compact",onClick:Lj,disabled:Pl||!Dl,children:Pl?"Importing":"Import"})]})]}),s.jsxs("div",{className:"calendar-import-card",children:[s.jsx("div",{className:"calendar-import-title",children:"Subscribe via URL"}),s.jsx("div",{className:"calendar-import-meta",children:"Add a published ICS link. Auto-refreshes while open."}),s.jsxs("div",{className:"calendar-import-form",children:[s.jsx("input",{type:"url",placeholder:"https://outlook.office.com/calendar/...",value:Ml,onChange:i=>fg(i.target.value)}),s.jsx("input",{type:"text",placeholder:"Optional label",value:dg,onChange:i=>hg(i.target.value)}),s.jsx("button",{className:"btn btn-primary btn-compact",onClick:Mj,disabled:Pl||!Ml.trim(),children:Pl?"Subscribing":"Subscribe"})]})]}),Sj.map(i=>s.jsxs("div",{className:"calendar-import-card",children:[s.jsx("div",{className:"calendar-import-title",children:i.name}),s.jsxs("div",{className:"calendar-import-meta",children:[i.type==="url"?"URL subscription":"File import"," "," ",new Date(i.createdAt).toLocaleDateString()]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>$j(i.id),children:"Remove"})]},i.id))]})]}),og&&s.jsx("div",{className:"calendar-error",children:og}),s.jsxs("div",{className:"calendar-layout",children:[s.jsxs("div",{className:"calendar-grid",children:[s.jsx("div",{className:"calendar-weekdays",children:ok.map(i=>s.jsx("span",{children:i},i))}),s.jsx("div",{className:"calendar-days",children:yt.days.map(i=>{const c=Ql(i),h=Dg.get(c)||[],p=i.getMonth()===ci.getMonth(),x=c===Ql(new Date),b=c===Pg;return s.jsxs("button",{className:`calendar-day${p?"":" muted"}${x?" today":""}${b?" selected":""}`,onClick:()=>Rd(i),children:[s.jsx("span",{className:"calendar-day-number",children:i.getDate()}),s.jsxs("span",{className:"calendar-day-events",children:[h.slice(0,3).map((I,R)=>s.jsx("span",{className:`calendar-event-dot ${I.provider}`},`${I.id}-${R}`)),h.length>3&&s.jsxs("span",{className:"calendar-event-more",children:["+",h.length-3]})]})]},c)})})]}),s.jsxs("div",{className:"calendar-agenda",children:[s.jsxs("div",{className:"calendar-agenda-header",children:[s.jsx("div",{className:"calendar-agenda-date",children:Od.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})}),s.jsxs("div",{className:"calendar-agenda-meta",children:[Qd.length," events"]})]}),_j?s.jsx("div",{className:"calendar-loading",children:"Loading events"}):Qd.length===0?s.jsx("div",{className:"calendar-empty",children:"No events scheduled."}):s.jsx("div",{className:"calendar-agenda-list",children:Qd.map(i=>{const c=new Date(i.start),h=new Date(i.end),p=i.allDay?"All day":`${c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}  ${h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`;return s.jsxs("div",{className:"calendar-agenda-item",children:[s.jsx("span",{className:`calendar-event-dot ${i.provider}`}),s.jsxs("div",{className:"calendar-agenda-info",children:[s.jsx("div",{className:"calendar-agenda-time",children:p}),s.jsx("div",{className:"calendar-agenda-title",children:i.title||"(No title)"}),i.location&&s.jsx("div",{className:"calendar-agenda-meta",children:i.location})]})]},`${i.provider}-${i.id}`)})})]})]})]}):o==="settings"?s.jsx("div",{className:"settings-panel",children:O?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{className:"btn btn-primary btn-compact",onClick:Nk,disabled:Im,children:Im?"Saving...":"Save settings"}),Om&&s.jsx("div",{className:"settings-message",children:Om})]}),s.jsxs("div",{className:"settings-grid",children:[s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Profile"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsxs("div",{className:"settings-avatar",children:[O.avatarUrl?s.jsx("img",{src:O.avatarUrl,alt:"Avatar preview"}):s.jsx("div",{className:"settings-avatar-placeholder",children:ao(O.name||($==null?void 0:$.email)||"U")}),s.jsxs("label",{className:"settings-upload",children:["Upload avatar",s.jsx("input",{type:"file",accept:"image/*",onChange:i=>Ek(i.target.files)})]})]}),s.jsxs("label",{children:["Name",s.jsx("input",{type:"text",value:O.name,onChange:i=>Te({...O,name:i.target.value})})]}),s.jsxs("label",{children:["Avatar URL",s.jsx("input",{type:"text",value:O.avatarUrl,onChange:i=>Te({...O,avatarUrl:i.target.value})})]}),s.jsxs("label",{children:["Email",s.jsx("input",{type:"text",value:($==null?void 0:$.email)||"",readOnly:!0})]}),s.jsxs("label",{children:["Profile visibility",s.jsxs("select",{value:O.profileVisibility,onChange:i=>Te({...O,profileVisibility:i.target.value}),children:[s.jsx("option",{value:"huddle",children:"Visible to huddles"}),s.jsx("option",{value:"private",children:"Private"})]})]})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Localization"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsxs("label",{children:["Timezone",s.jsx("input",{type:"text",value:O.timezone,onChange:i=>Te({...O,timezone:i.target.value})})]}),s.jsxs("label",{children:["Locale",s.jsx("input",{type:"text",value:O.locale,onChange:i=>Te({...O,locale:i.target.value})})]})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Defaults"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsxs("label",{children:["Default huddle",s.jsx("select",{value:O.defaultHuddleId||"",onChange:i=>Te({...O,defaultHuddleId:i.target.value}),children:ke.map(i=>{var c;return s.jsx("option",{value:i.tenantId,children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),s.jsxs("label",{children:["Default priority",s.jsxs("select",{value:O.defaultPriority,onChange:i=>Te({...O,defaultPriority:i.target.value}),children:[s.jsx("option",{value:"LOW",children:"Low"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HIGH",children:"High"}),s.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),s.jsxs("label",{children:["Default status",s.jsxs("select",{value:O.defaultStatus,onChange:i=>Te({...O,defaultStatus:i.target.value}),children:[s.jsx("option",{value:"BACKLOG",children:"Backlog"}),s.jsx("option",{value:"TODO",children:"Todo"}),s.jsx("option",{value:"IN_PROGRESS",children:"In progress"}),s.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Notifications"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsx("div",{className:"settings-subtitle",children:"Email"}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.email.assigned,onChange:i=>Te({...O,notifications:{...O.notifications,email:{...O.notifications.email,assigned:i.target.checked}}})}),"Task assigned"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.email.mentions,onChange:i=>Te({...O,notifications:{...O.notifications,email:{...O.notifications.email,mentions:i.target.checked}}})}),"Mentions"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.email.due,onChange:i=>Te({...O,notifications:{...O.notifications,email:{...O.notifications.email,due:i.target.checked}}})}),"Due date reminders"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.email.invites,onChange:i=>Te({...O,notifications:{...O.notifications,email:{...O.notifications.email,invites:i.target.checked}}})}),"Huddle invites"]}),s.jsx("div",{className:"settings-subtitle",children:"In-app"}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.inApp.assigned,onChange:i=>Te({...O,notifications:{...O.notifications,inApp:{...O.notifications.inApp,assigned:i.target.checked}}})}),"Task assigned"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.inApp.mentions,onChange:i=>Te({...O,notifications:{...O.notifications,inApp:{...O.notifications.inApp,mentions:i.target.checked}}})}),"Mentions"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.inApp.due,onChange:i=>Te({...O,notifications:{...O.notifications,inApp:{...O.notifications.inApp,due:i.target.checked}}})}),"Due date reminders"]}),s.jsxs("label",{className:"settings-toggle",children:[s.jsx("input",{type:"checkbox",checked:O.notifications.inApp.invites,onChange:i=>Te({...O,notifications:{...O.notifications,inApp:{...O.notifications.inApp,invites:i.target.checked}}})}),"Huddle invites"]})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Working hours"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsxs("label",{children:["Start",s.jsx("input",{type:"time",value:O.workingHours.start,onChange:i=>Te({...O,workingHours:{...O.workingHours,start:i.target.value}})})]}),s.jsxs("label",{children:["End",s.jsx("input",{type:"time",value:O.workingHours.end,onChange:i=>Te({...O,workingHours:{...O.workingHours,end:i.target.value}})})]}),s.jsx("div",{className:"settings-subtitle",children:"Days"}),s.jsx("div",{className:"settings-days",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(i=>s.jsxs("label",{className:"settings-day",children:[s.jsx("input",{type:"checkbox",checked:O.workingHours.days.includes(i),onChange:c=>{const h=c.target.checked?O.workingHours.days.concat(i):O.workingHours.days.filter(p=>p!==i);Te({...O,workingHours:{...O.workingHours,days:h}})}}),i]},i))})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Reminders"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsxs("label",{children:["Due soon (hours)",s.jsx("input",{type:"number",min:1,value:O.reminders.dueSoonHours,onChange:i=>Te({...O,reminders:{...O.reminders,dueSoonHours:Number(i.target.value)}})})]}),s.jsxs("label",{children:["Daily summary",s.jsx("input",{type:"time",value:O.reminders.dailySummaryTime,onChange:i=>Te({...O,reminders:{...O.reminders,dailySummaryTime:i.target.value}})})]})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Huddles"})}),s.jsx("div",{className:"settings-card-body ui-card-body",children:s.jsx("div",{className:"template-list",children:ke.map(i=>{var c,h;return s.jsxs("div",{className:"template-row",children:[s.jsxs("div",{children:[s.jsx("div",{className:"member-name",children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId}),s.jsxs("div",{className:"member-meta",children:["Role: ",i.role]})]}),((h=i.tenant)==null?void 0:h.name)!=="Personal"&&s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Ik(i.tenantId),children:"Leave"})]},i.id)})})})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Security & Sessions"})}),s.jsxs("div",{className:"settings-card-body ui-card-body",children:[s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:_k,children:"Send password reset email"}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:rc,children:"Sign out"})]})]}),s.jsxs("section",{className:"settings-card ui-card",children:[s.jsx("div",{className:"settings-card-header ui-card-header",children:s.jsx("div",{className:"settings-title",children:"Export"})}),s.jsx("div",{className:"settings-card-body ui-card-body",children:s.jsxs("div",{className:"settings-actions",children:[s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Tk,children:"Export JSON"}),s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Ck,children:"Export CSV"})]})})]})]})]}):s.jsx("div",{className:"empty-state",children:"Loading settings..."})}):o==="okr"?lk?s.jsxs("div",{className:"okr-panel",children:[s.jsxs("div",{className:"okr-create ui-card",children:[s.jsx("div",{className:"okr-card-title ui-card-header",children:"Create objective"}),s.jsxs("div",{className:"okr-card-body ui-card-body",children:[s.jsxs("div",{className:"okr-grid",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",value:us.title,onChange:i=>ds(c=>({...c,title:i.target.value})),placeholder:"Ship a new onboarding"})]}),s.jsxs("label",{children:["Owner",s.jsxs("select",{value:us.ownerId,onChange:i=>ds(c=>({...c,ownerId:i.target.value})),children:[s.jsx("option",{value:"",children:"Unassigned"}),Lt(E).map(i=>{var c,h;return s.jsx("option",{value:i.userId,children:((c=i.user)==null?void 0:c.name)||((h=i.user)==null?void 0:h.email)||i.userId},i.userId)})]})]}),s.jsxs("label",{children:["Start date",s.jsx("input",{type:"date",value:us.startDate,onChange:i=>ds(c=>({...c,startDate:i.target.value}))})]}),s.jsxs("label",{children:["End date",s.jsx("input",{type:"date",value:us.endDate,onChange:i=>ds(c=>({...c,endDate:i.target.value}))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{value:us.status,onChange:i=>ds(c=>({...c,status:i.target.value})),children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"AT_RISK",children:"At risk"}),s.jsx("option",{value:"PAUSED",children:"Paused"}),s.jsx("option",{value:"DONE",children:"Done"})]})]}),s.jsxs("label",{className:"okr-grid-full",children:["Description",s.jsx("textarea",{value:us.description,onChange:i=>ds(c=>({...c,description:i.target.value})),placeholder:"Short context for the objective",rows:3})]})]}),s.jsxs("div",{className:"okr-actions",children:[s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Sg,children:"Refresh"}),s.jsx("button",{className:"icon-action create",onClick:Bj,"data-tooltip":"Objective erstellen","aria-label":"Objective erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]})]})]}),Qm&&s.jsxs("div",{className:"okr-error",children:["Error: ",Qm]}),qm?s.jsx("div",{className:"empty-state",children:"Loading OKRs..."}):s.jsxs("div",{className:"okr-list",children:[Cl.length===0&&s.jsx("div",{className:"empty-state",children:"No objectives yet."}),Cl.map(i=>{const c=i.ownerId?$n(E,i.ownerId):"Unassigned",h=Xm.includes(i.id);return s.jsxs("div",{className:"okr-card ui-card",onClick:()=>bs(`/okr/objective/${i.id}`),children:[s.jsxs("div",{className:"okr-header ui-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"okr-title",children:i.title}),i.description&&s.jsx("div",{className:"okr-description",children:i.description}),s.jsxs("div",{className:"okr-meta",children:[s.jsx("span",{children:i.status}),i.ownerId?s.jsx("div",{className:"okr-owner-stack",children:en(E||"",[i.ownerId])}):s.jsxs("span",{className:"okr-owner-badge",children:["Owner: ",c]}),i.startDate&&s.jsx("span",{children:new Date(i.startDate).toLocaleDateString()}),i.endDate&&s.jsx("span",{children:new Date(i.endDate).toLocaleDateString()})]})]}),s.jsxs("div",{className:"okr-progress",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),s.jsxs("div",{className:"okr-progress-label",children:[Math.round(i.progress),"%"]})]}),s.jsx("button",{className:`okr-chevron ${h?"expanded":""}`,type:"button",onClick:p=>{p.stopPropagation(),Ym(x=>x.includes(i.id)?x.filter(b=>b!==i.id):[...x,i.id])},"aria-expanded":h,"aria-label":h?"Hide key results":"Show key results",children:s.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("polyline",{points:"4 8 10 14 16 8"})})})]}),h&&s.jsx("div",{className:"okr-card-body ui-card-body",children:s.jsx("div",{className:"okr-keyresults-expanded",children:i.keyResults.length===0?s.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(p=>s.jsx("div",{className:"okr-kr-expanded",children:s.jsxs("div",{className:"okr-kr-expanded-header",children:[s.jsxs("div",{className:"okr-kr-expanded-main",children:[s.jsx("div",{className:"okr-kr-title",children:p.title}),p.description&&s.jsx("div",{className:"okr-kr-description",children:p.description}),s.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(p.progress)}%`}})}),s.jsxs("div",{className:"okr-progress-foot",children:[Math.round(p.progress),"%"]})]})]}),s.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(p.updatedAt||p.createdAt).toLocaleDateString()]})]})},p.id))})})]},i.id)})]})]}):s.jsxs("div",{className:"okr-shell",children:[si&&s.jsxs("div",{className:"okr-notice",children:[s.jsx("div",{className:"okr-notice-title",children:si.code==="permission"?"Blocked by permission":si.code==="policy"?"Blocked by policy":"Request blocked"}),s.jsx("div",{className:"okr-notice-text",children:si.safeReason}),si.correlationId&&s.jsxs("div",{className:"okr-notice-meta",children:["Ref: ",si.correlationId]})]}),qm&&s.jsx("div",{className:"okr-loading",children:"Syncing OKRs"}),pn==="objective"&&K&&s.jsxs("div",{className:"okr-focus",children:[s.jsxs("div",{className:"okr-focus-main",children:[s.jsxs("div",{className:"okr-focus-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"okr-focus-title",children:K.title}),s.jsxs("div",{className:"okr-focus-meta",children:[s.jsx("span",{children:K.status}),s.jsxs("span",{className:"okr-owner-inline",children:[s.jsx("span",{className:"okr-owner-label",children:"Owner"}),K.ownerId?en(E||"",[K.ownerId]):s.jsx("span",{className:"okr-owner-empty",children:""})]}),K.startDate&&s.jsx("span",{children:new Date(K.startDate).toLocaleDateString()})," ",K.endDate&&s.jsx("span",{children:new Date(K.endDate).toLocaleDateString()})]}),K.description&&s.jsx("div",{className:"okr-focus-description",children:K.description})]}),s.jsx("div",{className:"okr-focus-actions",children:(K.ownerId===($==null?void 0:$.id)||Jg)&&s.jsx("button",{className:"icon-action settings",onClick:()=>Yj(K),"data-tooltip":"Einstellungen zum Objective","aria-label":"Einstellungen zum Objective",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),s.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})})]}),s.jsxs("div",{className:"okr-focus-progress",children:[s.jsx("div",{className:"okr-progress-label",children:"Progress"}),s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${K.progress}%`}})}),s.jsxs("div",{className:"okr-progress-foot",children:[K.progress,"% of ",K.keyResults.length," key results"]})]})]}),s.jsx("div",{className:"okr-focus-keyresults",children:s.jsxs("div",{className:"okr-focus-section",children:[s.jsx("div",{className:"okr-section-title",children:"Key results"}),s.jsxs("div",{className:"okr-section-toolbar",children:[s.jsxs("div",{className:"view-switch okr-view-switch okr-view-switch-three",role:"tablist","aria-label":"Key results view switcher",style:{"--active-index":On==="list"?0:On==="cards"?1:2,"--segment-count":3},children:[s.jsx("button",{className:`view-pill ${On==="list"?"active":""}`,onClick:()=>yd("list"),role:"tab","aria-selected":On==="list",children:"Liste"}),s.jsx("button",{className:`view-pill ${On==="cards"?"active":""}`,onClick:()=>yd("cards"),role:"tab","aria-selected":On==="cards",children:"Cards"}),s.jsx("button",{className:`view-pill ${On==="table"?"active":""}`,onClick:()=>yd("table"),role:"tab","aria-selected":On==="table",children:"Table"})]}),!K.readOnly&&s.jsx("button",{className:"icon-action create",onClick:()=>nk(K.id),"data-tooltip":"Neuen Key result hinzufgen","aria-label":"Neuen Key result hinzufgen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","stroke-width":"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),On==="table"?s.jsx("div",{className:"task-table-wrap okr-kr-table-wrap",children:s.jsxs("table",{className:"task-table okr-kr-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Key result"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Progress"}),s.jsx("th",{children:"Members"}),s.jsx("th",{children:"Updated"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:K.keyResults.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"okr-empty",children:"No key results yet."})}):K.keyResults.map(i=>s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"okr-kr-table-title",children:i.title}),i.description&&s.jsx("div",{className:"okr-kr-table-desc",children:i.description})]}),s.jsx("td",{children:Jd===i.id?s.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[s.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>Zn(null),"aria-haspopup":"listbox","aria-expanded":"true",children:vt(i.status)}),s.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>s.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{vi(i.id,K.id,{status:c}),Zn(null)},role:"option","aria-selected":i.status===c,children:vt(c)},c))})]}):s.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>Zn(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${vt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${vt(i.status)})`,children:vt(i.status)})}),s.jsx("td",{children:s.jsxs("div",{className:"okr-kr-table-progress okr-progress-inline",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),Og===i.id?s.jsx("input",{type:"number",className:"okr-progress-input",value:Gd,min:0,max:100,onChange:c=>qd(c.target.value),onBlur:()=>ql(i,K.id),onKeyDown:c=>{c.key==="Enter"&&ql(i,K.id),c.key==="Escape"&&to(null)},autoFocus:!0}):s.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>Rg(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})}),s.jsx("td",{children:i.assignees&&i.assignees.length>0?s.jsx("div",{className:"okr-kr-assignees",children:en(E||"",i.assignees)}):s.jsx("span",{className:"okr-empty",children:""})}),s.jsx("td",{className:"okr-kr-date",children:new Date(i.lastUpdatedAt).toLocaleDateString()}),s.jsx("td",{children:s.jsx("button",{className:"icon-action settings",onClick:()=>Kd(i,K.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})})]},i.id))})]})}):s.jsxs("div",{className:`okr-kr-list ${On==="cards"?"okr-kr-cards":""}`,children:[K.keyResults.length===0&&s.jsx("div",{className:"okr-empty",children:"No key results yet."}),K.keyResults.map(i=>s.jsxs("div",{className:"okr-kr-card ui-card",children:[s.jsx("div",{className:"okr-kr-card-header ui-card-header",children:s.jsxs("div",{className:"okr-kr-toprow",children:[s.jsxs("div",{className:"okr-kr-toprow-left",children:[Jd===i.id?s.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[s.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>Zn(null),"aria-haspopup":"listbox","aria-expanded":"true",children:vt(i.status)}),s.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(c=>s.jsx("button",{type:"button",className:`filter-option ${i.status===c?"active":""} filter-option-${c.toLowerCase()}`,onClick:()=>{vi(i.id,K.id,{status:c}),Zn(null)},role:"option","aria-selected":i.status===c,children:vt(c)},c))})]}):s.jsx("button",{type:"button",className:`okr-status-badge status-${i.status.toLowerCase()} tooltip-target`,onClick:()=>Zn(i.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${vt(i.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${vt(i.status)})`,children:vt(i.status)}),i.assignees&&i.assignees.length>0&&s.jsx("div",{className:"okr-kr-assignees",children:en(E||"",i.assignees)})]}),s.jsxs("div",{className:"okr-kr-toprow-right",children:[s.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(i.lastUpdatedAt).toLocaleDateString()]}),s.jsx("button",{className:"icon-action settings",onClick:()=>Kd(i,K.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})}),s.jsx("div",{className:"okr-kr-card-body ui-card-body",children:s.jsxs("div",{className:"okr-kr-expanded-main",children:[s.jsx("div",{className:"okr-kr-title",children:i.title}),i.description&&s.jsx("div",{className:"okr-kr-description",children:i.description}),s.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${i.progress}%`}})}),Og===i.id?s.jsx("input",{type:"number",className:"okr-progress-input",value:Gd,min:0,max:100,onChange:c=>qd(c.target.value),onBlur:()=>ql(i,K.id),onKeyDown:c=>{c.key==="Enter"&&ql(i,K.id),c.key==="Escape"&&to(null)},autoFocus:!0}):s.jsxs("button",{type:"button",className:"okr-progress-value tooltip-target",onClick:()=>Rg(i),"data-tooltip":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,"aria-label":`Klicken zum Bearbeiten des Fortschritts (derzeit: ${Math.round(i.progress)}%)`,children:[Math.round(i.progress),"%"]})]})]})})]},i.id))]})]})})]}),pn==="objective"&&!K&&s.jsx("div",{className:"okr-empty",children:"Select an objective from Pulse to focus."}),pn==="review"&&K&&s.jsxs("div",{className:"okr-review",children:[s.jsxs("div",{className:"okr-review-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"okr-review-title",children:"Strategic review"}),s.jsx("div",{className:"okr-review-subtitle",children:"6-minute guided check-in"})]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Zl(K.id),children:"Back to focus"})]}),xi.length>0&&s.jsxs("div",{className:"okr-review-steps",children:[s.jsxs("div",{className:"okr-review-step",children:[s.jsx("div",{className:"okr-step-title",children:(Av=xi[Ca])==null?void 0:Av.title}),s.jsx("div",{className:"okr-step-text",children:(Ov=xi[Ca])==null?void 0:Ov.content})]}),s.jsxs("div",{className:"okr-review-nav",children:[s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>wd(i=>Math.max(i-1,0)),disabled:Ca===0,children:"Back"}),s.jsxs("div",{className:"okr-review-progress",children:["Step ",Ca+1," / ",xi.length]}),s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>wd(i=>Math.min(i+1,xi.length-1)),disabled:Ca===xi.length-1,children:"Next"})]})]})]}),pn==="review"&&!K&&s.jsx("div",{className:"okr-empty",children:"Select an objective to start a review."}),pn==="library"&&s.jsxs("div",{className:"okr-pulse",children:[s.jsxs("div",{className:"okr-pulse-toolbar",children:[s.jsxs("div",{className:"view-switch okr-view-switch",role:"tablist","aria-label":"Objectives view switcher",style:{"--active-index":kr==="list"?0:1},children:[s.jsx("button",{className:`view-pill ${kr==="list"?"active":""}`,onClick:()=>eg("list"),role:"tab","aria-selected":kr==="list",children:"Liste"}),s.jsx("button",{className:`view-pill ${kr==="cards"?"active":""}`,onClick:()=>eg("cards"),role:"tab","aria-selected":kr==="cards",children:"Cards"})]}),s.jsx("div",{className:"okr-pulse-actions",children:s.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Aa(!0),children:"+ Objective"})})]}),s.jsx("div",{className:"okr-pulse-section okr-pulse-objectives",children:St.length===0?s.jsx("div",{className:"okr-empty",children:"No objectives yet."}):s.jsx("div",{className:kr==="cards"?"okr-objective-grid":"task-list",children:St.map(i=>{const c=kr==="list"&&Xm.includes(i.id),h=i.ownerId?$n(E,i.ownerId):"Unassigned";return s.jsxs("div",{className:`okr-objective-item ${c?"expanded":""}`,children:[s.jsxs("div",{className:"task-row okr-objective-row",onClick:()=>Zl(i.id),children:[s.jsxs("div",{className:"task-row-main",children:[s.jsx("div",{className:"task-row-title",children:s.jsx("span",{className:"okr-objective-title-text",children:i.title})}),i.description&&s.jsx("div",{className:"okr-objective-description",children:i.description}),s.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(i.progress)}%`}})}),s.jsxs("div",{className:"okr-progress-foot",children:[Math.round(i.progress),"%"]})]}),s.jsxs("div",{className:"task-row-meta",children:[s.jsx("span",{className:"badge task-kind-badge",children:i.status}),s.jsxs("span",{className:"badge task-kind-badge",children:[i.keyResults.length," KRs"]}),i.ownerId?s.jsx("div",{className:"okr-owner-stack",children:en(E||"",[i.ownerId])}):s.jsxs("span",{className:"badge task-kind-badge",children:["Owner: ",h]})]})]}),kr==="list"&&s.jsx("div",{className:"task-row-side",children:s.jsx("button",{className:`okr-chevron ${c?"expanded":""}`,type:"button",onClick:p=>{p.stopPropagation(),Ym(x=>x.includes(i.id)?x.filter(b=>b!==i.id):[...x,i.id])},"aria-expanded":c,"aria-label":c?"Hide key results":"Show key results",children:s.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("polyline",{points:"4 8 10 14 16 8"})})})})]}),c&&s.jsx("div",{className:"okr-kr-inline",children:i.keyResults.length===0?s.jsx("div",{className:"okr-empty",children:"No key results yet."}):i.keyResults.map(p=>s.jsx("div",{className:"okr-kr-inline-row",children:s.jsxs("div",{className:"okr-kr-expanded-header okr-kr-detail-header",children:[s.jsxs("div",{className:"okr-kr-toprow",children:[s.jsxs("div",{className:"okr-kr-toprow-left",children:[Jd===p.id?s.jsxs("div",{className:"filter-dropdown okr-status-dropdown",children:[s.jsx("button",{type:"button",className:"filter-select okr-status-select",onClick:()=>Zn(null),"aria-haspopup":"listbox","aria-expanded":"true",children:vt(p.status)}),s.jsx("div",{className:"filter-options",role:"listbox",children:["ON_TRACK","AT_RISK","OFF_TRACK"].map(x=>s.jsx("button",{type:"button",className:`filter-option ${p.status===x?"active":""} filter-option-${x.toLowerCase()}`,onClick:()=>{vi(p.id,i.id,{status:x}),Zn(null)},role:"option","aria-selected":p.status===x,children:vt(x)},x))})]}):s.jsx("button",{type:"button",className:`okr-status-badge status-${p.status.toLowerCase()} tooltip-target`,onClick:()=>Zn(p.id),"data-tooltip":`Klicken zum ndern des Status (derzeit: ${vt(p.status)})`,"aria-label":`Klicken zum ndern des Status (derzeit: ${vt(p.status)})`,children:vt(p.status)}),p.assignees&&p.assignees.length>0&&s.jsx("div",{className:"okr-kr-assignees",children:en(E||"",p.assignees)})]}),s.jsxs("div",{className:"okr-kr-toprow-right",children:[s.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(p.lastUpdatedAt).toLocaleDateString()]}),s.jsx("button",{className:"icon-action settings",onClick:()=>Kd(p,i.id),"data-tooltip":"KR bearbeiten","aria-label":"KR bearbeiten",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]}),s.jsxs("div",{className:"okr-kr-expanded-main",children:[s.jsx("div",{className:"okr-kr-title",children:p.title}),p.description&&s.jsx("div",{className:"okr-kr-description",children:p.description}),s.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[s.jsx("div",{className:"okr-progress-bar",children:s.jsx("div",{className:"okr-progress-fill",style:{width:`${p.progress}%`}})}),s.jsxs("div",{className:"okr-progress-foot",children:[Math.round(p.progress),"%"]})]})]})]})},p.id))})]},i.id)})})})]}),jd&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:ii?"Objective bearbeiten":"Objective erstellen"}),s.jsx("div",{className:"panel-subtitle",children:"Create the objective details."})]}),s.jsx("button",{className:"panel-close",onClick:()=>Aa(!1),"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Details"}),s.jsxs("label",{children:["Objective title",s.jsx("input",{type:"text",value:Ge.title,onChange:i=>ut(c=>({...c,title:i.target.value})),placeholder:"Deliver a calmer onboarding experience"})]}),s.jsxs("label",{children:["Description",s.jsx("textarea",{value:Ge.description,onChange:i=>ut(c=>({...c,description:i.target.value})),placeholder:"Short context for this objective",rows:3})]}),s.jsxs("label",{children:["Owner",s.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="objective-owner"?null:"objective-owner"),children:Ge.ownerId?$n(E,Ge.ownerId):"Unassigned"}),Dn==="objective-owner"&&s.jsxs("div",{className:"member-select-dropdown",children:[s.jsx("button",{type:"button",className:`member-select-option${Ge.ownerId?"":" active"}`,onClick:()=>{ut(i=>({...i,ownerId:""})),nt(null)},children:"Unassigned"}),Lt(E).map(i=>{var c,h;return s.jsx("button",{type:"button",className:`member-select-option${Ge.ownerId===i.userId?" active":""}`,onClick:()=>{ut(p=>({...p,ownerId:i.userId})),nt(null)},children:((c=i.user)==null?void 0:c.name)||((h=i.user)==null?void 0:h.email)||i.userId},i.userId)})]})]})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Timeline"}),s.jsxs("div",{className:"objective-row",children:[s.jsxs("label",{children:["Start date",s.jsx("input",{type:"date",value:Ge.startDate,onChange:i=>ut(c=>({...c,startDate:i.target.value}))})]}),s.jsxs("label",{children:["End date",s.jsx("input",{type:"date",value:Ge.endDate,onChange:i=>ut(c=>({...c,endDate:i.target.value}))})]})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{value:Ge.status,onChange:i=>ut(c=>({...c,status:i.target.value})),children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"AT_RISK",children:"At risk"}),s.jsx("option",{value:"PAUSED",children:"Paused"}),s.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Ag,children:ii?"Save changes":"Create objective"})})})})]})})]}):o==="scope"?s.jsx("div",{className:"scope-view",children:E?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"scope-tabs",children:[{key:"current",label:"Current"},{key:"review",label:"Review"},{key:"history",label:"History"}].map(i=>s.jsx("button",{type:"button",className:`scope-tab${gd===i.key?" active":""}`,onClick:()=>yj(i.key),children:i.label},i.key))}),gd!=="current"?s.jsx("div",{className:"scope-empty",children:gd==="review"?"Review coming soon.":"History coming soon."}):gt==="list"?s.jsx(s.Fragment,{children:qe.length===0?s.jsx("div",{className:"scope-empty",children:"No scope windows yet. Create one to start grouping tasks."}):s.jsx("div",{className:"scope-window-grid",children:qe.map(i=>s.jsxs("div",{className:`scope-window-card ui-card${In===i.id?" active":""}`,onClick:()=>eo(i.id),role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),eo(i.id))},children:[s.jsxs("div",{className:"scope-window-header ui-card-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"scope-window-title",children:i.name}),s.jsxs("div",{className:"scope-window-meta",children:[th(i),"  ",i.taskIds.length," tasks"]})]}),s.jsx("button",{className:"icon-action delete",onClick:c=>{c.stopPropagation(),Cg(i.id)},"data-tooltip":"Scope Window lschen","aria-label":"Scope Window lschen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M6 6l12 12"}),s.jsx("path",{d:"M18 6L6 18"})]})})]}),s.jsxs("div",{className:"scope-window-body ui-card-body",children:[(()=>{const c=i.taskIds.map(T=>Yl.get(T)).filter(T=>!!T),h=c.length,p=c.filter(T=>T.status===se.DONE).length,x=c.filter(T=>!T.dueDate||T.status===se.DONE||T.status===se.ARCHIVED?!1:new Date(T.dueDate)<new Date).length,b=h?Math.round(p/h*100):0,I=x>0?"overdue":b>=80?"good":b>=50?"ok":"risk",R=I==="overdue"?"Overdue":I==="good"?"On track":I==="ok"?"At risk":"Needs focus";return s.jsxs("div",{className:`scope-window-health health-${I}`,children:[s.jsxs("div",{className:"scope-window-progress",children:[s.jsx("div",{className:"scope-window-progress-bar",children:s.jsx("span",{style:{width:`${b}%`}})}),s.jsxs("span",{className:"scope-window-progress-label",children:[b,"% done"]})]}),s.jsxs("div",{className:"scope-window-health-row",children:[s.jsx("span",{className:`scope-window-health-pill ${I}`,children:R}),s.jsxs("span",{className:"scope-window-overdue",children:[x," overdue"]})]})]})})(),i.description&&s.jsx("div",{className:"scope-window-description",children:i.description}),s.jsx("div",{className:"scope-window-actions",children:s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:c=>{c.stopPropagation(),eo(i.id)},children:"Open tasks"})})]})]},i.id))})}):te?s.jsx("div",{className:"scope-detail-panel",children:s.jsxs("div",{className:"scope-board-panel",children:[s.jsxs("div",{className:"scope-board-toolbar",children:[s.jsx("div",{className:"scope-board-toolbar-left",children:s.jsxs("div",{className:"view-switch scope-view-switch",role:"tablist","aria-label":"Scope view switcher",style:{"--active-index":ni==="board"?0:1},children:[s.jsx("button",{className:`view-pill ${ni==="board"?"active":""}`,onClick:()=>Wm("board"),role:"tab","aria-selected":ni==="board",children:"Board"}),s.jsx("button",{className:`view-pill ${ni==="list"?"active":""}`,onClick:()=>Wm("list"),role:"tab","aria-selected":ni==="list",children:"Table"})]})}),s.jsx("div",{className:"scope-board-toolbar-right",children:s.jsxs("div",{className:"scope-filter-row",children:[s.jsxs("div",{className:"filter-dropdown",ref:Id,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>ja(i=>!i),"aria-haspopup":"listbox","aria-expanded":ei,children:br==="ALL"?"All priorities":br}),ei&&s.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>s.jsx("button",{type:"button",className:`filter-option ${br===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{zm(i),ja(!1)},role:"option","aria-selected":br===i,children:i==="ALL"?"All priorities":i},i))})]}),s.jsxs("div",{className:"filter-dropdown",ref:Ad,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>ka(i=>!i),"aria-haspopup":"listbox","aria-expanded":ti,children:jr==="ALL"?"All statuses":jr}),ti&&s.jsx("div",{className:"filter-options",role:"listbox",children:["ALL",...Yd].map(i=>s.jsx("button",{type:"button",className:`filter-option ${jr===i?"active":""}`,onClick:()=>{Vm(i),ka(!1)},role:"option","aria-selected":jr===i,children:i==="ALL"?"All statuses":i},i))})]}),(br!=="ALL"||jr!=="ALL")&&s.jsx("button",{className:"btn btn-ghost btn-compact scope-filter-reset",onClick:()=>{zm("ALL"),Vm("ALL")},children:"Reset filters"})]})})]}),pd===te.id&&s.jsxs("div",{className:"scope-task-picker",children:[s.jsxs("div",{className:"scope-task-picker-header",children:[s.jsx("input",{type:"text",placeholder:"Search tasks",value:md,onChange:i=>xa(i.target.value)}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>{Zs(null),xa("")},children:"Done"})]}),s.jsx("div",{className:"scope-task-picker-list",children:zg.length===0?s.jsx("div",{className:"scope-task-empty",children:"No tasks left to add."}):zg.map(i=>s.jsxs("button",{type:"button",className:"scope-task-option",onClick:()=>Eg(te.id,i.id),children:[s.jsxs("div",{className:"scope-task-option-main",children:[s.jsx("div",{className:"scope-task-option-title",children:i.title}),s.jsxs("div",{className:"scope-task-option-meta",children:[i.status,"  ",ki(i.boardId),"  ",i.dueDate?new Date(i.dueDate).toLocaleDateString():"No due date"]})]}),s.jsx("span",{className:"scope-task-option-add",children:"Add"})]},i.id))})]}),ni==="list"?Fg.length===0?s.jsx("div",{className:"scope-task-empty",children:"No tasks in this scope window."}):s.jsx("div",{className:"task-table-wrap",children:s.jsxs("table",{className:"task-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Title"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Due"}),s.jsx("th",{children:"Tasks"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:Fg.map(i=>{const c=Jl(i),h=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,p=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",x=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"",b=i.boardId?ki(i.boardId):"";return s.jsxs("tr",{className:`task-table-row${x}`,onClick:()=>ac(i),children:[s.jsx("td",{children:i.title}),s.jsx("td",{children:i.status}),s.jsx("td",{children:s.jsxs("div",{className:`task-table-due${x}`,children:[s.jsx("span",{className:"task-table-due-date",children:p}),h&&s.jsx("span",{className:"task-table-due-badge",children:h})]})}),s.jsx("td",{children:b}),s.jsx("td",{children:s.jsx("div",{className:"table-actions",children:s.jsx("button",{type:"button",className:"scope-task-remove",onClick:I=>{I.stopPropagation(),Tg(te.id,i.id)},children:"Remove"})})})]},i.id)})})]})}):s.jsx("div",{className:"kanban-board scope-kanban-board",children:Zd.map(i=>s.jsxs("div",{className:"kanban-column",onDragOver:Jj,onDragLeave:Qj,onDrop:c=>Xj(c,i.status),children:[s.jsxs("div",{className:"column-header",children:[s.jsx("span",{children:i.status}),s.jsx("span",{children:i.tasks.length})]}),s.jsx("div",{className:"column-content",children:i.tasks.length===0?s.jsx("div",{className:"scope-column-empty",children:"No tasks"}):i.tasks.map(c=>{const h=Jl(c),p=h==="overdue"?"Overdue":h==="due-soon"?"Due soon":null,x=c.dueDate?new Date(c.dueDate).toLocaleDateString():"",b=h==="overdue"?" overdue":h==="due-soon"?" due-soon":"",I=c.sourceType?c.sourceType==="MANUAL":!0,R=ki(c.boardId);return s.jsx("div",{className:`task-card scope-task-card${I?" task-card-draggable":""}`,onClick:()=>ac(c),draggable:I,onDragStart:T=>I?jv(T,c.id):T.preventDefault(),onDragEnd:kv,children:s.jsxs("div",{className:"task-card-content",children:[s.jsxs("div",{className:"task-card-topbar",children:[s.jsxs("div",{className:`task-card-due${b}`,children:[s.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M5 4v16"}),s.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),s.jsx("span",{className:"task-card-due-date",children:x}),p&&s.jsx("span",{className:"task-card-due-badge",children:p})]}),s.jsx("div",{className:`priority-bubble priority-${c.priority.toLowerCase()}`,children:s.jsx("span",{className:`priority-line tooltip-target ${c.priority==="CRITICAL"?"priority-line-critical":""}`,"aria-hidden":"true","data-tooltip":`Priority: ${c.priority}`})})]}),s.jsxs("div",{className:"task-card-header",children:[s.jsx("div",{className:"task-title-row",children:c.title}),s.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${c.isFavorite?" active":""}`,onClick:T=>{T.stopPropagation(),vh(c)},title:c.isFavorite?"Unfavorite":"Favorite","aria-label":c.isFavorite?"Unfavorite task":"Favorite task",children:c.isFavorite?"":""})]}),c.description&&s.jsx("div",{className:"task-card-description",children:oo(c.description)}),s.jsxs("div",{className:"scope-card-footer",children:[s.jsxs("div",{className:"task-card-kinds",children:[c.kinds.map(T=>s.jsx("span",{className:"badge task-kind-badge",children:T},T)),R&&s.jsxs("span",{className:"scope-task-origin",children:["Tasks: ",R]})]}),s.jsx("button",{type:"button",className:"scope-task-remove",onClick:T=>{T.stopPropagation(),Tg(te.id,c.id)},children:"Remove"})]})]})},c.id)})})]},i.status))})]})}):s.jsx("div",{className:"scope-empty",children:"Select a scope window."})]}):s.jsx("div",{className:"empty-state",children:"Select a huddle to build a scope window."})}):o==="dashboard"?s.jsx("div",{className:"dashboard-panel",children:E?s.jsxs("div",{className:"dashboard-visuals",children:[s.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[s.jsx("div",{className:"dashboard-card-title ui-card-header",children:"Scope"}),s.jsx("div",{className:"dashboard-card-content ui-card-body",children:qe.length===0?s.jsx("div",{className:"dashboard-empty",children:"No scope windows yet."}):qe.slice(0,5).map(i=>s.jsxs("button",{className:"dashboard-item",onClick:()=>eo(i.id),children:[s.jsx("div",{className:"dashboard-item-title",children:i.name}),s.jsxs("div",{className:"dashboard-item-meta",children:[th(i),"  ",i.taskIds.length," tasks"]})]},i.id))})]}),s.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[s.jsx("div",{className:"dashboard-card-title ui-card-header",children:"My Focus"}),s.jsx("div",{className:"dashboard-card-content ui-card-body",children:ec.length===0?s.jsx("div",{className:"dashboard-empty",children:"Nothing due today."}):ec.slice(0,6).map(i=>s.jsxs("button",{className:"dashboard-item",onClick:()=>ac(i),children:[s.jsx("div",{className:"dashboard-item-title",children:i.title}),s.jsxs("div",{className:"dashboard-item-meta",children:[i.dueDate?new Date(i.dueDate).toLocaleDateString():"No due date",s.jsxs("span",{children:[" ",ki(i.boardId)]})]})]},i.id))})]})]}):s.jsx("div",{className:"empty-state",children:"Select a huddle to see Home."})}):o==="inbox"?s.jsx("div",{className:"dashboard-panel",children:E?s.jsxs("div",{className:"dashboard-card dashboard-list ui-card",children:[s.jsx("div",{className:"dashboard-card-title ui-card-header",children:s.jsxs("div",{className:"dashboard-card-title-row inbox-header-row",children:[(()=>{const i=M[j];return s.jsxs("div",{className:"inbox-header-left",children:[s.jsx("span",{children:i.label}),s.jsx("button",{type:"button",className:"info-icon tooltip-target","data-tooltip":i.tooltip,"aria-label":i.tooltip,children:"?"})]})})(),s.jsx("div",{className:"inbox-header-actions",children:s.jsx("button",{type:"button",className:"btn btn-save btn-compact tooltip-target","data-tooltip":t("inbox.tooltip.create","Erstellen"),"aria-label":t("inbox.tooltip.create","Erstellen"),onClick:()=>L(!0),children:s.jsx("span",{className:"btn-save-icon",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",stroke:"currentColor",children:s.jsx("path",{d:"M12 5v14M5 12h14"})})})})})]})}),s.jsx("div",{className:"dashboard-card-content ui-card-body",children:(()=>{const i=ss,c=Or.map(b=>{var T;const I=bk(b,Nt),R=so(b.tenantId,I||void 0);return{id:b.id,title:b.title,source:b.source,createdAt:b.createdAt||new Date().toISOString(),suggestedAction:"",description:b.description||void 0,kind:((T=b.kinds)==null?void 0:T[0])||"Incoming",creatorLabel:R.label,creatorAvatarUrl:R.avatarUrl}}),p=[...i,...c].filter(b=>{const I=_[b.id]||"eingang";return j==="eingang"?I==="eingang":j==="spaeter"?I==="spaeter":j==="bearbeitet"?I==="bearbeitet":I==="archiv"}),x=p.find(b=>b.id===k)||p[0]||null;return s.jsxs("div",{className:"inbox-layout",children:[s.jsxs("div",{className:"inbox-sidebar",children:[p.length===0&&s.jsxs("div",{className:"dashboard-empty inbox-empty",children:[s.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),s.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]}),p.map(b=>{const I=b.kind||t("inbox.incoming","Incoming"),R=b.createdAt?new Date(b.createdAt).toLocaleDateString():"Just now",T=S===b.id,G=b.creatorLabel||I||b.title,ce=ao(G);return s.jsxs("button",{type:"button",className:`inbox-sidebar-item${(x==null?void 0:x.id)===b.id?" active":""}${T?" moved":""}`,onClick:()=>w(b.id),children:[s.jsx("div",{className:`inbox-avatar${b.creatorAvatarUrl?" has-image":""} tooltip-target`,"aria-label":G,"data-tooltip":G,children:b.creatorAvatarUrl?s.jsx("img",{src:b.creatorAvatarUrl,alt:G}):ce}),s.jsxs("div",{className:"inbox-sidebar-body",children:[s.jsx("div",{className:"inbox-sidebar-title",children:b.title}),s.jsxs("div",{className:"inbox-sidebar-meta",children:[s.jsx("span",{children:I}),s.jsx("span",{children:""}),s.jsx("span",{children:R})]})]})]},b.id)})]}),s.jsx("div",{className:"inbox-detail",children:x?s.jsx("div",{className:"inbox-detail",children:s.jsxs("div",{className:"inbox-detail-body",children:[s.jsxs("div",{className:"inbox-detail-topbar",children:[s.jsxs("div",{className:"inbox-detail-user",children:[s.jsx("div",{className:`inbox-avatar${x.creatorAvatarUrl?" has-image":""} tooltip-target`,"aria-label":x.creatorLabel||x.title,"data-tooltip":x.creatorLabel||x.title,children:x.creatorAvatarUrl?s.jsx("img",{src:x.creatorAvatarUrl,alt:x.creatorLabel||x.title}):ao(x.creatorLabel||x.title)}),s.jsx("span",{className:"inbox-detail-user-label",children:x.creatorLabel||t("inbox.meta.owner","Owner")})]}),s.jsxs("div",{className:"inbox-detail-topbar-actions",children:[s.jsx("button",{type:"button",className:"icon-action scope-toggle inbox-action tooltip-target","data-tooltip":t("inbox.action.addScopeTooltip","Zum Scope hinzufgen"),"aria-label":t("inbox.action.addScope","Zum Scope hinzufgen"),onClick:()=>{ee(x.id,"bearbeitet"),v(b=>b===x.id?null:x.id)},children:s.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none","stroke-width":"1.6",children:[s.jsx("circle",{cx:"12",cy:"12",r:"7.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"2.5"}),s.jsx("path",{d:"M12 4v3"}),s.jsx("path",{d:"M12 17v3"}),s.jsx("path",{d:"M4 12h3"}),s.jsx("path",{d:"M17 12h3"})]})})}),s.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.laterTooltip","Later"),"aria-label":t("inbox.action.later","Later"),onClick:()=>ee(x.id,"spaeter"),children:s.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("circle",{cx:"12",cy:"12",r:"7"}),s.jsx("path",{d:"M12 7v5l3 3"})]})})}),j==="eingang"&&s.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.archiveTooltip","Archive"),"aria-label":t("inbox.action.archive","Archive"),onClick:()=>ee(x.id,"archiv"),children:s.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M4 7h16"}),s.jsx("path",{d:"M6 7v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7"}),s.jsx("path",{d:"M9 11h6"})]})})}),j==="archiv"&&s.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.backTooltip","Back to inbox"),"aria-label":t("inbox.action.backToInbox","Zum Eingang"),onClick:()=>{ee(x.id,"eingang"),w(null)},children:s.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M14 7l-5 5 5 5"}),s.jsx("path",{d:"M19 12H9"})]})})}),j==="spaeter"&&s.jsx("button",{type:"button",className:"icon-action inbox-action tooltip-target","data-tooltip":t("inbox.action.moveToInboxTooltip","Zurck in den Eingang"),"aria-label":t("inbox.action.moveToInbox","Zur Eingang"),onClick:()=>ee(x.id,"eingang"),children:s.jsx("span",{className:"inbox-action-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M9 12h8"}),s.jsx("path",{d:"M12 7l-5 5 5 5"})]})})})]})]}),s.jsxs("div",{className:"inbox-detail-meta",role:"list",children:[x.source&&s.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[s.jsxs("strong",{children:[t("inbox.field.source","Source"),":"]})," ",r(x.source)]}),x.suggestedAction&&s.jsxs("span",{className:"inbox-detail-extra",role:"listitem",children:[s.jsxs("strong",{children:[t("inbox.field.action","Suggested action"),":"]})," ",a(x.suggestedAction)]})]}),s.jsxs("div",{className:"inbox-detail-header",children:[s.jsx("h3",{children:x.title}),s.jsx("span",{className:"inbox-detail-date",children:new Date(x.createdAt).toLocaleDateString()})]}),x.description&&s.jsx("p",{className:"inbox-detail-description",children:x.description})]})}):s.jsxs("div",{className:"inbox-empty-detail",children:[s.jsx("div",{className:"inbox-empty-title",children:t("inbox.empty.title","Inbox Zero")}),s.jsx("div",{className:"inbox-empty-text",children:t("inbox.empty.text","No unplanned work right now.")})]})})]})})()})]}):s.jsx("div",{className:"empty-state",children:"Select a huddle to see Inbox."})}):o==="initiatives"?s.jsx("div",{className:"empty-state",children:"Initiatives coming soon."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"filter-bar",children:[s.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":o==="kanban"?1:o==="timeline"?2:0},children:[s.jsx("button",{className:`view-pill ${o==="table"?"active":""}`,onClick:()=>l("table"),role:"tab","aria-selected":o==="table",children:"List"}),s.jsx("button",{className:`view-pill ${o==="kanban"?"active":""}`,onClick:()=>l("kanban"),role:"tab","aria-selected":o==="kanban",children:"Board"}),s.jsx("button",{className:`view-pill ${o==="timeline"?"active":""}`,onClick:()=>l("timeline"),role:"tab","aria-selected":o==="timeline",children:"Timeline"})]}),s.jsxs("div",{className:"filter-actions",children:[s.jsx("div",{className:"filter-quick",children:[{key:"MINE",label:"My tasks"},{key:"OVERDUE",label:"Overdue"},{key:"WEEK",label:"This week"}].map(i=>s.jsx("button",{type:"button",className:`filter-quick-pill${La===i.key?" active":""}`,onClick:()=>kj(c=>c===i.key?"ALL":i.key),children:i.label},i.key))}),s.jsxs("div",{className:"filter-dropdown",ref:Td,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>Rl(i=>!i),"aria-haspopup":"listbox","aria-expanded":li,children:ai==="ALL"?"All priorities":ai}),li&&s.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(i=>s.jsx("button",{type:"button",className:`filter-option ${ai===i?"active":""} filter-option-${i.toLowerCase()}`,onClick:()=>{bj(i),Rl(!1)},role:"option","aria-selected":ai===i,children:i==="ALL"?"All priorities":i},i))})]}),o==="table"&&s.jsxs("div",{className:"filter-dropdown",ref:Cd,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>$a(i=>!i),"aria-haspopup":"listbox","aria-expanded":Sr,children:Xn==="ALL"?"All statuses":Xn}),Sr&&s.jsx("div",{className:"filter-options",role:"listbox",children:ih.map(i=>s.jsx("button",{type:"button",className:`filter-option ${Xn===i?"active":""}`,onClick:()=>{ng(i),$a(!1)},role:"option","aria-selected":Xn===i,children:i==="ALL"?"All statuses":i},i))})]}),s.jsxs("div",{className:"filter-dropdown",ref:_d,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>Ma(i=>!i),"aria-haspopup":"listbox","aria-expanded":Yn,children:oi.length>0?`Labels (${oi.length})`:"All labels"}),Yn&&s.jsxs("div",{className:"filter-options filter-options-multi",role:"listbox",children:[sc.length===0&&s.jsx("div",{className:"filter-empty",children:"No labels found"}),sc.map(i=>{const c=oi.includes(i);return s.jsxs("button",{type:"button",className:`filter-option ${c?"active":""}`,onClick:()=>{Ed(h=>h.includes(i)?h.filter(p=>p!==i):h.concat(i))},role:"option","aria-selected":c,children:[s.jsx("span",{children:i}),c&&s.jsx("span",{className:"filter-option-check",children:""})]},i)}),oi.length>0&&s.jsx("button",{type:"button",className:"filter-option filter-option-clear",onClick:()=>Ed([]),children:"Clear selection"})]})]}),s.jsxs("label",{className:`filter-checkbox filter-favorites ${Nd?"active":""}`,"data-tooltip":"Nur Favoriten","aria-label":"Nur Favoriten",children:[s.jsx("input",{type:"checkbox",checked:Nd,onChange:i=>jj(i.target.checked)}),s.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),kg&&s.jsxs("div",{style:{color:"#f87171",marginBottom:"1rem"},children:["Error: ",kg]}),o==="kanban"?s.jsxs("div",{className:"kanban-board-wrap",children:[E&&Gm&&s.jsxs("div",{className:`scope-drop-row${Um?" dragging":""}`,children:[s.jsxs("div",{className:"scope-drop-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"scope-drop-title",children:"Scope Window"}),s.jsx("div",{className:"scope-drop-subtitle",children:"Drag tasks here to add them to a scope window."})]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>{l("scope"),Rt("list"),hn(null),er(null,"replace")},children:"Open"})]}),qe.length===0?s.jsx("div",{className:"scope-drop-empty",children:"No scope windows yet."}):s.jsx("div",{className:"scope-drop-list",children:qe.map(i=>s.jsxs("div",{className:`scope-drop-item${vj===i.id?" over":""}`,onDragOver:c=>Kj(c,i.id),onDragLeave:c=>Gj(c,i.id),onDrop:c=>qj(c,i.id),children:[s.jsx("div",{className:"scope-drop-name",children:i.name}),s.jsxs("div",{className:"scope-drop-meta",children:[i.taskIds.length," tasks"]})]},i.id))})]}),s.jsx("div",{className:"kanban-board",children:ov.map(i=>{const c=i.tasks.filter(iv),h=ic(E,re,i.status),p=Rm[h]||[],x=new Map(c.map(T=>[T.id,T])),b=p.map(T=>x.get(T)).filter(Boolean),I=c.filter(T=>!p.includes(T.id)),R=b.concat(I);return s.jsxs("div",{className:"kanban-column",onDragOver:Kk,onDragLeave:Gk,onDrop:T=>qk(T,i.status),children:[s.jsxs("div",{className:"column-header",children:[s.jsx("span",{children:i.status}),s.jsx("span",{children:R.length})]}),s.jsx("div",{className:"column-content",children:R.map(T=>{const G=T.checklist.filter(Ve=>Ve.done).length,ce=T.checklist.length,be=T.linkedTaskIds.length,He=ce>0&&G===ce,pe=Lk.has(T.id),Ae=T.sourceType?T.sourceType==="MANUAL":!0,H=Jl(T),J=H==="overdue"?"Overdue":H==="due-soon"?"Due soon":null,Q=T.dueDate?new Date(T.dueDate).toLocaleDateString():"",Oe=H==="overdue"?" overdue":H==="due-soon"?" due-soon":"",Mt=H==="overdue"?" task-card-overdue":H==="due-soon"?" task-card-due-soon":"",rt={cursor:Ae?"grab":"default",userSelect:"none",WebkitUserDrag:Ae?"element":"auto",pointerEvents:"auto"};return s.jsx(rf.Fragment,{children:s.jsx("div",{className:`task-card${Ae?" task-card-draggable":""}${xr===T.id?" dragging":""}${Mt}`,style:rt,draggable:Ae,onDragStart:Ve=>Ae?jv(Ve,T.id):Ve.preventDefault(),onDragEnd:kv,onDragOver:Ve=>Jk(Ve,i.status,T.id),onDragLeave:Qk,onClick:()=>ac(T),children:s.jsxs("div",{className:"task-card-content",children:[s.jsxs("div",{className:"task-card-topbar",children:[s.jsxs("div",{className:`task-card-due${Oe}`,children:[s.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M5 4v16"}),s.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),s.jsx("span",{className:"task-card-due-date",children:Q}),J&&s.jsx("span",{className:"task-card-due-badge",children:J})]}),s.jsx("div",{className:`priority-bubble priority-${T.priority.toLowerCase()}`,children:s.jsx("span",{className:`priority-line tooltip-target ${T.priority==="CRITICAL"?"priority-line-critical":""}`,"aria-hidden":"true","data-tooltip":`Priority: ${T.priority}`})})]}),s.jsxs("div",{className:"task-card-header",children:[s.jsxs("div",{className:"task-title-row",children:[pe&&s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[s.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),s.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),T.title]}),s.jsx("button",{type:"button",className:`favorite-badge favorite-badge-button${T.isFavorite?" active":""}`,onClick:Ve=>{Ve.stopPropagation(),vh(T)},title:T.isFavorite?"Unfavorite":"Favorite","aria-label":T.isFavorite?"Unfavorite task":"Favorite task",children:T.isFavorite?"":""})]}),T.description&&s.jsx("div",{className:"task-card-description",children:oo(T.description)}),s.jsx("hr",{className:"card-divider"}),s.jsxs("div",{className:"task-card-footer",children:[s.jsx("div",{className:"task-card-kinds",children:T.kinds.map(Ve=>s.jsx("span",{className:"badge task-kind-badge",children:Ve},Ve))}),s.jsxs("div",{className:"task-card-people",children:[T.ownerId&&en(T.tenantId,[T.ownerId]),T.assignees.length>0&&en(T.tenantId,T.assignees.filter(Ve=>Ve!==T.ownerId))]}),s.jsxs("div",{className:"task-card-icons",children:[ce>0&&s.jsxs("span",{className:He?"icon-badge checklist-complete":"icon-badge",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),s.jsx("path",{d:"M18 17l2 2 4-4"})]}),G,"/",ce]}),T.comments.length>0&&s.jsxs("span",{className:"icon-badge",children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:s.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),T.comments.length]}),be>0&&s.jsxs("span",{className:"icon-badge",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),s.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),be]}),T.attachments.length>0&&s.jsxs("span",{className:"icon-badge",children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:s.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),T.attachments.length]})]})]})]})})},T.id)})})]},i.status)})})]}):o==="timeline"?s.jsx("div",{className:"empty-state",children:"Timeline view coming soon."}):o==="table"?s.jsx("div",{className:"task-table-wrap",children:s.jsxs("table",{className:"task-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Title"}),s.jsx("th",{children:"People"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Art"}),s.jsx("th",{children:"Priority"}),s.jsx("th",{children:"Due"}),s.jsx("th",{children:"Source"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:av.map(i=>{const c=Jl(i),h=c==="overdue"?"Overdue":c==="due-soon"?"Due soon":null,p=i.dueDate?new Date(i.dueDate).toLocaleDateString():"",x=c==="overdue"?" overdue":c==="due-soon"?" due-soon":"";return s.jsxs(rf.Fragment,{children:[s.jsxs("tr",{className:`task-table-row${x}`,onClick:()=>cv(i),children:[s.jsx("td",{children:i.title}),s.jsx("td",{children:s.jsxs("div",{className:"task-card-people",children:[i.ownerId&&en(i.tenantId,[i.ownerId]),i.assignees.length>0&&en(i.tenantId,i.assignees.filter(b=>b!==i.ownerId))]})}),s.jsx("td",{children:i.status}),s.jsx("td",{children:i.kinds.length>0?i.kinds.join(", "):""}),s.jsx("td",{children:s.jsx("span",{className:`badge badge-priority-${i.priority.toLowerCase()}`,children:i.priority})}),s.jsx("td",{children:s.jsxs("div",{className:`task-table-due${x}`,children:[s.jsx("span",{className:"task-table-due-date",children:p}),h&&s.jsx("span",{className:"task-table-due-badge",children:h})]})}),s.jsx("td",{children:i.sourceIndicator}),s.jsx("td",{children:s.jsxs("div",{className:"table-actions",children:[i.sourceType==="MANUAL"&&s.jsx("button",{className:"icon-action settings",onClick:b=>{b.stopPropagation(),uv(i)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),s.jsx("button",{className:"icon-action",onClick:b=>{b.stopPropagation(),d(I=>I===i.id?null:i.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:s.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),u===i.id&&s.jsx("tr",{className:"task-table-details",children:s.jsx("td",{colSpan:8,children:s.jsxs("div",{className:"table-details-grid",children:[s.jsxs("div",{className:"table-details-span",children:[s.jsx("div",{className:"table-details-label",children:"Description"}),s.jsx("div",{className:"table-details-text",children:i.description?oo(i.description):""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"table-details-label",children:"Members"}),s.jsx("div",{className:"table-details-text",children:i.assignees.length>0?i.assignees.map(b=>$n(i.tenantId,b)).join(", "):""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"table-details-label",children:"Checklist"}),s.jsx("div",{className:"table-details-text",children:i.checklist.length>0?`${i.checklist.filter(b=>b.done).length}/${i.checklist.length} done`:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"table-details-label",children:"Linked tasks"}),s.jsx("div",{className:"table-details-text",children:i.linkedTaskIds.length>0?i.linkedTaskIds.length:""})]}),s.jsxs("div",{children:[s.jsx("div",{className:"table-details-label",children:"Attachments"}),s.jsx("div",{className:"table-details-text",children:i.attachments.length>0?i.attachments.length:""})]})]})})})]},i.id)})})]})}):s.jsx("div",{className:"empty-state",children:"No tasks to display."})]}),wl&&s.jsx("div",{className:"toast",children:wl}),Km&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Create scope window"}),s.jsx("div",{className:"panel-subtitle",children:"Bundle tasks into a focused sprint scope."})]}),s.jsx("button",{className:"panel-close",onClick:()=>Tl(!1),"aria-label":"Close",children:""})]}),s.jsx("div",{className:"panel-body",children:s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Details"}),s.jsxs("div",{className:"scope-create-grid",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",placeholder:"e.g. Sprint 12",value:Cn.name,onChange:i=>wa(c=>({...c,name:i.target.value}))})]}),s.jsxs("label",{children:["Start date",s.jsx("input",{type:"date",value:Cn.startDate,onChange:i=>wa(c=>({...c,startDate:i.target.value}))})]}),s.jsxs("label",{children:["End date",s.jsx("input",{type:"date",value:Cn.endDate,onChange:i=>wa(c=>({...c,endDate:i.target.value}))})]}),s.jsxs("label",{className:"scope-create-span",children:["Notes",s.jsx("textarea",{rows:2,placeholder:"Optional note for this scope window.",value:Cn.description,onChange:i=>wa(c=>({...c,description:i.target.value}))})]})]})]})}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Wj,disabled:!Cn.name.trim()||!Ar,children:"Create scope window"})})})})]})})]}),xd&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Task settings"}),s.jsx("div",{className:"panel-subtitle",children:"Manage this task list"})]}),s.jsx("button",{className:"panel-close",onClick:()=>Ia(!1),"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Tasks"}),s.jsx("div",{className:"member-name",children:(ze==null?void 0:ze.name)||re||"Tasks"}),s.jsxs("div",{className:"member-meta",children:["Role: ",(tr==null?void 0:tr.role)||"Member"]})]}),s.jsxs("div",{className:"panel-section panel-danger",children:[s.jsxs("div",{className:"panel-danger-row",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[s.jsx("path",{d:"M12 3l9 16H3l9-16z"}),s.jsx("path",{d:"M12 9v4"}),s.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),s.jsx("div",{className:"section-title",children:"Danger zone"}),s.jsx("div",{className:"panel-text",children:"Delete this task list and all tasks, objectives, and key results."}),s.jsx("button",{className:"btn btn-delete btn-compact",onClick:tk,children:"Delete task list"})]})]}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Ia(!1),children:"Close"})})})})]})}),Sa&&te&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Scope window settings"}),s.jsx("div",{className:"panel-subtitle",children:"Manage this scope window"})]}),s.jsx("button",{className:"panel-close",onClick:()=>Na(!1),"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Scope window"}),s.jsxs("div",{className:"scope-create-grid",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",value:Dt.name,onChange:i=>_a(c=>({...c,name:i.target.value}))})]}),s.jsxs("label",{children:["Start date",s.jsx("input",{type:"date",value:Dt.startDate,onChange:i=>_a(c=>({...c,startDate:i.target.value}))})]}),s.jsxs("label",{children:["End date",s.jsx("input",{type:"date",value:Dt.endDate,onChange:i=>_a(c=>({...c,endDate:i.target.value}))})]}),s.jsxs("label",{className:"scope-create-span",children:["Notes",s.jsx("textarea",{rows:3,value:Dt.description,onChange:i=>_a(c=>({...c,description:i.target.value}))})]})]}),nh&&s.jsx("div",{className:"form-error",children:"End date must be after start date."}),s.jsxs("div",{className:"member-meta",children:["Huddle: ",Ni||""]})]}),s.jsxs("div",{className:"panel-section panel-danger",children:[s.jsxs("div",{className:"panel-danger-row",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[s.jsx("path",{d:"M12 3l9 16H3l9-16z"}),s.jsx("path",{d:"M12 9v4"}),s.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),s.jsx("div",{className:"section-title",children:"Danger zone"}),s.jsx("div",{className:"panel-text",children:"Delete this scope window and remove its task links."}),s.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Cg(te.id),Na(!1)},children:"Delete scope window"})]})]}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-primary btn-compact",onClick:fk,disabled:!Dt.name.trim()||nh,children:"Save changes"})})})})]})}),kd&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:Pa?"KR bearbeiten":"KR erstellen"}),s.jsx("div",{className:"panel-subtitle",children:Pa?"Update the metric and target.":"Define the metric and target."})]}),s.jsx("button",{className:"panel-close",onClick:mh,"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Details"}),s.jsxs("div",{className:"okr-grid",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",placeholder:"e.g. Improve activation rate",value:Ce.title,onChange:i=>Rn(c=>({...c,title:i.target.value}))})]}),s.jsxs("label",{className:"okr-grid-full",children:["Description",s.jsx("textarea",{placeholder:"What does this key result capture?",value:Ce.description,onChange:i=>Rn(c=>({...c,description:i.target.value})),rows:3})]}),s.jsxs("label",{children:["Start",s.jsx("input",{type:"number",placeholder:"0",value:Ce.startValue,onChange:i=>Rn(c=>({...c,startValue:i.target.value}))})]}),s.jsxs("label",{children:["Target",s.jsx("input",{type:"number",placeholder:"100",value:Ce.targetValue,onChange:i=>Rn(c=>({...c,targetValue:i.target.value}))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{value:Ce.status,onChange:i=>Rn(c=>({...c,status:i.target.value})),children:[s.jsx("option",{value:"ON_TRACK",children:"On track"}),s.jsx("option",{value:"AT_RISK",children:"At risk"}),s.jsx("option",{value:"OFF_TRACK",children:"Off track"})]})]})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Members"}),s.jsxs("div",{className:"member-select","data-member-dropdown":"kr-assignees",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="kr-assignees"?null:"kr-assignees"),children:Ce.assignees.length>0?Ce.assignees.map(i=>$n(E,i)).join(", "):"Select members"}),Dn==="kr-assignees"&&s.jsxs("div",{className:"member-select-dropdown",children:[Lt(E).map(i=>{var h,p;const c=Ce.assignees.includes(i.userId);return s.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const x=c?Ce.assignees.filter(b=>b!==i.userId):Ce.assignees.concat(i.userId);Rn(b=>({...b,assignees:x}))},children:((h=i.user)==null?void 0:h.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Lt(E).length===0&&s.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]})]}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-primary btn-compact",onClick:rk,children:Pa?"Save changes":"Create key result"})})})})]})}),bd&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content settings-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Objective settings"}),s.jsx("div",{className:"panel-subtitle",children:"Edit or delete this objective"})]}),s.jsx("button",{className:"panel-close",onClick:gh,"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Details"}),s.jsxs("div",{className:"okr-grid",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",value:Ge.title,onChange:i=>ut(c=>({...c,title:i.target.value}))})]}),s.jsxs("label",{className:"okr-grid-full",children:["Description",s.jsx("textarea",{value:Ge.description,onChange:i=>ut(c=>({...c,description:i.target.value})),rows:3})]}),s.jsxs("label",{children:["Owner",s.jsxs("div",{className:"member-select","data-member-dropdown":"objective-owner-settings",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="objective-owner-settings"?null:"objective-owner-settings"),children:Ge.ownerId?$n(E,Ge.ownerId):"Unassigned"}),Dn==="objective-owner-settings"&&s.jsxs("div",{className:"member-select-dropdown",children:[s.jsx("button",{type:"button",className:`member-select-option${Ge.ownerId?"":" active"}`,onClick:()=>{ut(i=>({...i,ownerId:""})),nt(null)},children:"Unassigned"}),Lt(E).map(i=>{var c,h;return s.jsx("button",{type:"button",className:`member-select-option${Ge.ownerId===i.userId?" active":""}`,onClick:()=>{ut(p=>({...p,ownerId:i.userId})),nt(null)},children:((c=i.user)==null?void 0:c.name)||((h=i.user)==null?void 0:h.email)||i.userId},i.userId)})]})]})]}),s.jsxs("label",{children:["Start date",s.jsx("input",{type:"date",value:Ge.startDate,onChange:i=>ut(c=>({...c,startDate:i.target.value}))})]}),s.jsxs("label",{children:["End date",s.jsx("input",{type:"date",value:Ge.endDate,onChange:i=>ut(c=>({...c,endDate:i.target.value}))})]}),s.jsxs("label",{children:["Status",s.jsxs("select",{value:Ge.status,onChange:i=>ut(c=>({...c,status:i.target.value})),children:[s.jsx("option",{value:"ACTIVE",children:"Active"}),s.jsx("option",{value:"AT_RISK",children:"At risk"}),s.jsx("option",{value:"PAUSED",children:"Paused"}),s.jsx("option",{value:"DONE",children:"Done"})]})]})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Key results"}),(Rv=K==null?void 0:K.keyResults)!=null&&Rv.length?s.jsx("div",{className:"template-list",children:K.keyResults.map(i=>s.jsxs("div",{className:"template-row",children:[s.jsxs("div",{children:[s.jsx("div",{className:"member-name",children:i.title}),s.jsxs("div",{className:"member-meta",children:[i.currentValue," / ",i.targetValue]})]}),s.jsx("button",{className:"icon-action delete",onClick:()=>ek(i.id,K.id),"data-tooltip":"KR lschen","aria-label":"KR lschen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M6 6l12 12"}),s.jsx("path",{d:"M18 6L6 18"})]})})]},i.id))}):s.jsx("div",{className:"empty-state",children:"No key results yet."})]}),s.jsxs("div",{className:"panel-section panel-danger",children:[s.jsxs("div",{className:"panel-danger-row",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[s.jsx("path",{d:"M12 3l9 16H3l9-16z"}),s.jsx("path",{d:"M12 9v4"}),s.jsx("path",{d:"M12 17h.01"})]}),"Warning"]}),s.jsx("div",{className:"section-title",children:"Danger zone"}),s.jsx("div",{className:"panel-text",children:"Delete this objective and its key results."}),ii&&s.jsx("button",{className:"btn btn-delete btn-compact",onClick:()=>{Zj(ii),Il(!1),Oa(null)},children:"Delete objective"})]})]}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>{Ag(),Il(!1),Oa(null)},children:"Save changes"})})})})]})}),ga&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content team-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Huddle settings"}),s.jsx("div",{className:"panel-subtitle",children:"Manage huddles and members"})]}),s.jsx("button",{className:"panel-close",onClick:()=>pl(!1),"aria-label":"Close",children:""})]}),s.jsxs("div",{className:"panel-body",children:[s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Active huddle"}),s.jsxs("div",{className:"team-active-row",children:[s.jsx("div",{className:"team-name",children:Ni||E}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>E&&lo(E),children:"Refresh members"})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Create a new huddle"}),s.jsxs("form",{className:"inline-form",onSubmit:tv,children:[s.jsx("input",{type:"text",placeholder:"Huddle name",value:Qu,onChange:i=>Xu(i.target.value),required:!0}),s.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create"})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Invite to huddle"}),qg?s.jsx("div",{className:"empty-state",children:"Private huddles are personal and cannot have members."}):s.jsxs("form",{className:"inline-form",onSubmit:Sk,children:[s.jsx("input",{type:"email",placeholder:"email@company.com",value:bm,onChange:i=>jm(i.target.value),required:!0}),s.jsxs("select",{value:km,onChange:i=>sj(i.target.value),children:[s.jsx("option",{value:"MEMBER",children:"Member"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]}),s.jsx("button",{className:"btn btn-primary",type:"submit",children:"Invite"})]})]}),s.jsxs("div",{className:"panel-section",children:[s.jsx("div",{className:"section-title",children:"Huddle members"}),s.jsxs("div",{className:"member-list",children:[Sm.map(i=>{var h,p,x;const c=i.userId===($==null?void 0:$.id);return s.jsxs("div",{className:"member-row",children:[s.jsxs("div",{children:[s.jsx("div",{className:"member-name",children:((h=i.user)==null?void 0:h.name)||((p=i.user)==null?void 0:p.email)}),s.jsx("div",{className:"member-meta",children:(x=i.user)==null?void 0:x.email})]}),s.jsxs("div",{className:"member-actions",children:[s.jsxs("select",{value:i.role,onChange:b=>Rk(i.id,b.target.value),disabled:c,children:[s.jsx("option",{value:"MEMBER",children:"Member"}),s.jsx("option",{value:"ADMIN",children:"Admin"})]}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Dk(i.id),disabled:c,children:"Remove"})]})]},i.id)}),Sm.length===0&&s.jsx("div",{className:"empty-state",children:"No members yet."})]})]}),ml&&s.jsx("div",{className:"auth-error",children:ml})]})]})}),Yu&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content team-modal",children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Huddle invites"}),s.jsx("div",{className:"panel-subtitle",children:"Accept or decline invitations"})]}),s.jsx("button",{className:"panel-close",onClick:()=>gl(!1),"aria-label":"Close",children:""})]}),s.jsx("div",{className:"panel-body",children:ma.length>0?s.jsx("div",{className:"invite-list",children:ma.map(i=>{var c,h,p;return s.jsxs("div",{className:"invite-row",children:[s.jsxs("div",{children:[s.jsx("div",{className:"member-name",children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId}),s.jsxs("div",{className:"member-meta",children:["Invited by ",((h=i.invitedBy)==null?void 0:h.name)||((p=i.invitedBy)==null?void 0:p.email)||i.invitedByUserId,"  ",new Date(i.createdAt).toLocaleString()]})]}),s.jsxs("div",{className:"invite-actions",children:[s.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>nv(i,"accept"),children:"Accept"}),s.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>nv(i,"decline"),children:"Decline"})]})]},i.id)})}):s.jsx("div",{className:"empty-state",children:"No pending invites."})})]})}),Ua&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[s.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[s.jsxs("div",{className:"modal-header-row",children:[s.jsx("h2",{style:{marginBottom:0},children:"Create New Task"}),s.jsx("button",{className:"panel-close",onClick:fh,"aria-label":"Close",children:""})]}),ve&&s.jsxs("div",{className:"huddle-inline",children:[s.jsx("span",{children:"Creating in"}),s.jsxs("span",{className:"huddle-chip",style:{background:mn(ve,(Pv=(Dv=ke.find(i=>i.tenantId===ve))==null?void 0:Dv.tenant)==null?void 0:Pv.name).soft,borderColor:mn(ve,(Mv=(Lv=ke.find(i=>i.tenantId===ve))==null?void 0:Lv.tenant)==null?void 0:Mv.name).border,color:mn(ve,(Uv=($v=ke.find(i=>i.tenantId===ve))==null?void 0:$v.tenant)==null?void 0:Uv.name).text},children:[s.jsx("span",{className:"huddle-dot",style:{background:mn(ve,(Hv=(Bv=ke.find(i=>i.tenantId===ve))==null?void 0:Bv.tenant)==null?void 0:Hv.name).solid}}),dt((zv=(Fv=ke.find(i=>i.tenantId===ve))==null?void 0:Fv.tenant)==null?void 0:zv.name)]})]})]}),s.jsxs("form",{onSubmit:$k,children:[s.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Title"}),s.jsx("input",{type:"text",required:!0,value:Zt.title,onChange:i=>hi({...Zt,title:i.target.value}),placeholder:"What needs to be done?"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Huddle"}),s.jsx("select",{value:ve||"",onChange:i=>gg(i.target.value),children:ke.map(i=>{var c;return s.jsx("option",{value:i.tenantId,children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Tasks"}),s.jsx("select",{value:Va||"",onChange:i=>Wa(i.target.value),children:ro(ve).map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))})]}),!io(ve)&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Owner"}),s.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-owner",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="new-task-owner"?null:"new-task-owner"),children:hs?$n(ve,hs):"Unassigned"}),Dn==="new-task-owner"&&s.jsxs("div",{className:"member-select-dropdown",children:[s.jsx("button",{type:"button",className:`member-select-option${hs?"":" active"}`,onClick:()=>{$l(null),nt(null)},children:"Unassigned"}),Lt(ve).map(i=>{var c,h;return s.jsx("button",{type:"button",className:`member-select-option${hs===i.userId?" active":""}`,onClick:()=>{$l(i.userId),nt(null)},children:((c=i.user)==null?void 0:c.name)||((h=i.user)==null?void 0:h.email)||i.userId},i.userId)})]})]})]}),!io(ve)&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Members"}),s.jsxs("div",{className:"member-select","data-member-dropdown":"new-task-assignees",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="new-task-assignees"?null:"new-task-assignees"),children:Nr.length>0?Nr.map(i=>$n(ve,i)).join(", "):"Select members"}),Dn==="new-task-assignees"&&s.jsxs("div",{className:"member-select-dropdown",children:[Lt(ve).map(i=>{var h,p;const c=Nr.includes(i.userId);return s.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const x=c?Nr.filter(b=>b!==i.userId):Nr.concat(i.userId);Pd(x)},children:((h=i.user)==null?void 0:h.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Lt(ve).length===0&&s.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description"}),s.jsxs("div",{className:"rich-editor",children:[s.jsxs("div",{className:"rich-toolbar",children:[s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("bold"),children:"B"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("italic"),children:"I"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("underline"),children:"U"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("insertUnorderedList"),children:" List"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("insertOrderedList"),children:"1. List"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("createLink"),children:"Link"})]}),s.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:Fd,onInput:i=>hi({...Zt,description:i.currentTarget.innerHTML}),onPaste:Zg,"data-placeholder":"Optional details..."})]})]})]}),s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Art"}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("input",{type:"text",value:mg,onChange:i=>za(i.target.value),onKeyDown:i=>pv(i,"new"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:hv,children:"Add"})]}),Ha.length>0&&s.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Ha.map(i=>s.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,s.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>mv(i,Fa),children:""})]},i))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Priority"}),s.jsxs("select",{value:Zt.priority,onChange:i=>hi({...Zt,priority:i.target.value}),children:[s.jsx("option",{value:"LOW",children:"Low"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HIGH",children:"High"}),s.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Deadline"}),s.jsx("input",{type:"date",value:Zt.dueDate,onChange:i=>hi({...Zt,dueDate:i.target.value})})]})]}),s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Files"}),s.jsx("input",{type:"file",multiple:!0,onChange:i=>Hk(i.target.files)}),s.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:pg.map(i=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),s.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>Fk(i.id),children:"Remove"})]},i.id))})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Checklist"}),s.jsxs("div",{className:"checklist-input-row",children:[s.jsx("input",{className:"checklist-input",type:"text",value:Hd,onChange:i=>ys(i.target.value),placeholder:"Add checklist item"}),s.jsx("button",{type:"button",className:"icon-action create",onClick:gv,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),s.jsx("div",{className:"checklist-list",children:gs.length>0?gs.map(i=>s.jsxs("label",{className:"checklist-item",children:[s.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>vv(i.id)}),s.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),s.jsx("button",{type:"button",className:"delete-btn",onClick:()=>yv(i.id),children:"Remove"})]},i.id)):s.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),s.jsxs("div",{className:"link-row",children:[s.jsxs("select",{className:"link-select",value:Ya,onChange:i=>ws(i.target.value),children:[s.jsx("option",{value:"",children:"Select task to link"}),he.filter(i=>i.id!==qa&&!Ln.includes(i.id)).map(i=>s.jsx("option",{value:i.id,children:i.title},i.id))]}),s.jsx("button",{type:"button",className:"icon-action create",onClick:wv,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),s.jsx("div",{className:"link-list",children:Ln.length>0?Ln.map(i=>{var c;return s.jsxs("div",{className:"link-chip",children:[s.jsx("span",{className:"link-title",children:((c=Mg.get(i))==null?void 0:c.title)??i}),s.jsx("button",{type:"button",className:"link-remove",onClick:()=>xv(i),children:""})]},i)}):s.jsx("div",{className:"link-empty",children:"No linked tasks."})})]})]}),s.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:s.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Speichern"})})})]})]})}),D&&s.jsx("div",{className:"modal-overlay",onClick:()=>L(!1),children:s.jsxs("div",{className:"modal-content settings-modal",onClick:i=>i.stopPropagation(),style:{maxWidth:"560px",padding:0},children:[s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{children:[s.jsx("div",{className:"panel-title",children:"Capture inbox item"}),s.jsx("div",{className:"panel-subtitle",children:"Add incoming work before sorting."})]}),s.jsx("button",{className:"panel-close",onClick:()=>L(!1),"aria-label":"Close",children:""})]}),s.jsx("div",{className:"panel-body",children:s.jsxs("div",{className:"panel-section",children:[s.jsxs("label",{children:["Title",s.jsx("input",{type:"text",value:q.title,onChange:i=>xe(c=>({...c,title:i.target.value})),placeholder:"New incoming item"})]}),s.jsxs("label",{children:[t("inbox.field.description","Beschreibung"),s.jsx("textarea",{rows:2,value:q.description,placeholder:t("inbox.field.descriptionPlaceholder","Kurz beschreiben, worum es geht"),onChange:i=>xe(c=>({...c,description:i.target.value}))})]}),s.jsxs("div",{className:"inbox-dropdown-row",children:[s.jsxs("label",{children:[t("inbox.field.source","Source"),s.jsxs("div",{className:"filter-dropdown",ref:qn,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>{le(i=>!i),ct(!1)},"aria-expanded":U,children:q.source?r(q.source):t("inbox.field.selectSource","Select source")}),U&&s.jsx("div",{className:"filter-options",role:"listbox",children:Jw.map(i=>s.jsx("button",{type:"button",className:`filter-option ${q.source===i.value?"active":""}`,onClick:()=>{xe(c=>({...c,source:i.value})),le(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]}),s.jsxs("label",{children:[t("inbox.field.action","Suggested action"),s.jsxs("div",{className:"filter-dropdown",ref:Jn,children:[s.jsx("button",{type:"button",className:"filter-select",onClick:()=>{ct(i=>!i),le(!1)},"aria-expanded":ne,children:q.suggestedAction?a(q.suggestedAction):t("inbox.field.selectAction","Select action")}),ne&&s.jsx("div",{className:"filter-options",role:"listbox",children:Qw.map(i=>s.jsx("button",{type:"button",className:`filter-option ${q.suggestedAction===i.value?"active":""}`,onClick:()=>{xe(c=>({...c,suggestedAction:i.value})),ct(!1)},children:t(i.labelId,i.defaultMessage)},i.value))})]})]})]})]})}),s.jsx("div",{className:"panel-footer",children:s.jsx("div",{className:"panel-actions",children:s.jsx("div",{className:"panel-actions-right",children:s.jsx("button",{className:"btn btn-save btn-compact tooltip-target","data-tooltip":"Speichern","aria-label":"Speichern",onClick:()=>{if(!q.title.trim())return;const i=new Date().toISOString(),c=so(E,Nt||void 0);Ws(h=>[{id:`inbox-${i}-${Math.random().toString(36).slice(2,7)}`,title:q.title.trim(),source:q.source||void 0,suggestedAction:q.suggestedAction||void 0,description:q.description.trim()||void 0,createdAt:i,kind:"Incoming",creatorLabel:c.label,creatorAvatarUrl:c.avatarUrl,creatorId:Nt||void 0,tenantId:E||null},...h]),xe({title:"",source:"",suggestedAction:"",description:""}),L(!1)},children:s.jsx("span",{className:"btn-save-icon",children:fl})})})})})]})}),Ka&&z&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[s.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[s.jsxs("div",{className:"detail-header-top",children:[s.jsxs("div",{className:"detail-meta",children:["Created ",new Date(z.createdAt).toLocaleDateString()]}),s.jsxs("div",{className:"detail-actions",children:[s.jsx("button",{className:"panel-close",onClick:oc,"aria-label":"Close",children:""}),s.jsx("button",{className:z.isFavorite?"icon-btn favorite-icon active":"icon-btn favorite-icon",onClick:()=>vh(z),title:z.isFavorite?"Unfavorite":"Favorite","aria-label":z.isFavorite?"Unfavorite task":"Favorite task",children:z.isFavorite?"":""}),z.sourceType==="MANUAL"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"icon-btn",onClick:()=>Uk(z),title:z.status===se.ARCHIVED?"Restore":"Archive","aria-label":z.status===se.ARCHIVED?"Restore task":"Archive task",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M3 7h18"}),s.jsx("path",{d:"M5 7l1 13h12l1-13"}),s.jsx("path",{d:"M9 11h6"})]})}),s.jsx("button",{className:"icon-btn",onClick:()=>{_r(!1),uv(z)},title:"Edit","aria-label":"Edit task",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[s.jsx("path",{d:"M12 20h9"}),s.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})]}),s.jsx("div",{className:"detail-title",children:z.title}),s.jsxs("div",{className:"detail-chips",children:[z.kinds.map(i=>s.jsx("span",{className:"chip chip-muted",children:i},i)),s.jsx("span",{className:`chip chip-priority priority-${z.priority.toLowerCase()}`,children:z.priority})]})]}),s.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Overview"}),s.jsxs("div",{className:"detail-rows",children:[s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("path",{d:"M5 12h14"}),s.jsx("path",{d:"M12 5l7 7-7 7"})]}),"Status"]}),s.jsx("span",{className:"detail-value",children:z.status})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),s.jsx("path",{d:"M8 3v4M16 3v4M3 11h18"})]}),"Due date"]}),s.jsx("span",{className:"detail-value",children:z.dueDate?new Date(z.dueDate).toLocaleDateString():""})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"}),s.jsx("circle",{cx:"12",cy:"8",r:"4"})]}),"Owner"]}),s.jsx("span",{className:"detail-value",children:z.ownerId?en(z.tenantId,[z.ownerId],"avatar-stack-lg"):""})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("circle",{cx:"9",cy:"8",r:"3"}),s.jsx("circle",{cx:"17",cy:"9",r:"2.5"}),s.jsx("path",{d:"M3 21a6 6 0 0 1 12 0"}),s.jsx("path",{d:"M14.5 21a4.5 4.5 0 0 1 7.5 0"})]}),"Assignees"]}),s.jsx("span",{className:"detail-value",children:z.assignees.length>0?en(z.tenantId,z.assignees,"avatar-stack-lg"):""})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:s.jsx("path",{d:"M20 12l-8 8-8-8 8-8 8 8z"})}),"Labels"]}),s.jsx("span",{className:"detail-value detail-value-wrap",children:z.kinds.length>0?z.kinds.map(i=>s.jsx("span",{className:"chip chip-muted",children:i},i)):""})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),s.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),"Linked in"]}),s.jsx("span",{className:"detail-value",children:Lg.length>0?Lg.map(i=>i.title).join(", "):""})]}),s.jsxs("div",{className:"detail-row",children:[s.jsxs("span",{className:"detail-label",children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[s.jsx("path",{d:"M4 7h16"}),s.jsx("path",{d:"M4 12h10"}),s.jsx("path",{d:"M4 17h13"})]}),"All tasks"]}),s.jsx("span",{className:"detail-value",children:s.jsxs("span",{className:"detail-toggle-row",children:[s.jsx("button",{type:"button",className:`detail-toggle ${z.excludeFromAll?"":"active"}`,onClick:()=>rr({excludeFromAll:!z.excludeFromAll}),disabled:z.sourceType!=="MANUAL","aria-label":"Show in All tasks",children:s.jsx("span",{className:"detail-toggle-knob"})}),s.jsx("span",{className:"detail-toggle-text",children:z.excludeFromAll?"Hidden":"Shown"})]})})]})]})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Description"}),s.jsx("div",{className:"detail-description-box",children:s.jsx("div",{className:"detail-description rich-display",dir:"ltr",dangerouslySetInnerHTML:{__html:z.description||"No description provided."}})})]}),s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),s.jsxs("div",{className:"link-row",children:[s.jsxs("select",{className:"link-select",value:Ya,onChange:i=>ws(i.target.value),children:[s.jsx("option",{value:"",children:"Select task to link"}),he.filter(i=>i.id!==z.id&&!Ln.includes(i.id)).map(i=>s.jsx("option",{value:i.id,children:i.title},i.id))]}),s.jsx("button",{type:"button",className:"icon-action create",onClick:wv,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),s.jsx("div",{className:"link-list",children:Ln.length>0?Ln.map(i=>{var c;return s.jsxs("div",{className:"link-chip",children:[s.jsx("span",{className:"link-title",children:((c=Mg.get(i))==null?void 0:c.title)??i}),s.jsx("button",{type:"button",className:"link-remove",onClick:()=>xv(i),children:""})]},i)}):s.jsx("div",{className:"link-empty",children:"No linked tasks."})})]}),s.jsxs("div",{className:"checklist-panel",children:[s.jsx("div",{className:"section-title",children:"Checklist"}),s.jsxs("div",{className:"checklist-input-row",children:[s.jsx("input",{className:"checklist-input",type:"text",value:Hd,onChange:i=>ys(i.target.value),placeholder:"Add checklist item"}),s.jsx("button",{type:"button",className:"icon-action create",onClick:gv,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),s.jsx("div",{className:"checklist-list",children:gs.length>0?gs.map(i=>s.jsxs("label",{className:"checklist-item",children:[s.jsx("input",{type:"checkbox",checked:i.done,onChange:()=>vv(i.id)}),s.jsx("span",{className:i.done?"checklist-text checklist-done":"checklist-text",children:i.text}),s.jsx("button",{type:"button",className:"delete-btn",onClick:()=>yv(i.id),children:"Remove"})]},i.id)):s.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),s.jsxs("div",{className:"detail-tabs",style:{"--active-index":f==="comments"?0:f==="attachments"?1:2},children:[s.jsx("button",{className:`detail-tab ${f==="comments"?"active":""}`,onClick:()=>m("comments"),children:"Comments"}),s.jsx("button",{className:`detail-tab ${f==="attachments"?"active":""}`,onClick:()=>m("attachments"),children:"Attachments"}),s.jsx("button",{className:`detail-tab ${f==="activity"?"active":""}`,onClick:()=>m("activity"),children:"Activity"})]}),f==="comments"&&s.jsxs("div",{className:"comments-panel",children:[s.jsx("div",{className:"section-title",children:"Comments"}),s.jsxs("div",{className:"comment-input-row",children:[s.jsx("div",{className:"comment-avatar",children:ck}),s.jsx("input",{className:"comment-input",type:"text",value:bg,onChange:i=>Bd(i.target.value),placeholder:"Write a comment"}),s.jsx("button",{type:"button",className:"icon-action create",onClick:zk,"data-tooltip":"Kommentar erstellen","aria-label":"Kommentar erstellen",children:s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M5 12h14"})]})})]}),s.jsx("div",{className:"comment-list",children:z.comments&&z.comments.length>0?z.comments.map(i=>{const c=so(z.tenantId,i.createdBy);return s.jsxs("div",{className:"comment-card",children:[c.avatarUrl?s.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):s.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),s.jsxs("div",{className:"comment-body",children:[s.jsxs("div",{className:"comment-meta",children:[s.jsx("span",{className:"comment-author",children:c.label}),s.jsx("span",{className:"comment-time",children:new Date(i.createdAt).toLocaleString()})]}),s.jsx("div",{className:"comment-text",children:i.text})]})]},i.id)}):s.jsx("div",{className:"comment-empty",children:"No comments yet."})})]}),f==="attachments"&&s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Attachments"}),s.jsxs("div",{className:"link-row",children:[s.jsx("input",{className:"link-select",type:"file",multiple:!0,onChange:i=>bv(i.target.files)}),s.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:async()=>{if(!(!z||Hl.length===0))try{await rr({attachmentsToAdd:Hl}),fi([])}catch(i){alert(i.message)}},children:"Upload"})]}),s.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:z.attachments&&z.attachments.length>0?z.attachments.map(i=>s.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),s.jsx("button",{type:"button",className:"delete-btn",onClick:()=>rr({attachmentsToRemove:[i.id]}),children:"Remove"})]})]}),i.type.startsWith("image/")&&s.jsx("img",{src:i.dataUrl,alt:i.name,style:{width:"160px",height:"110px",objectFit:"cover",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},className:"attachment-thumb",onClick:()=>Kl({src:i.dataUrl,name:i.name})})]},i.id)):s.jsx("div",{style:{color:"var(--text-secondary)"},children:"No attachments."})})]}),f==="activity"&&s.jsxs("div",{className:"detail-section",children:[s.jsx("div",{className:"detail-section-title",children:"Activity"}),s.jsx("div",{className:"activity-list",children:z.activityLog&&z.activityLog.length>0?[...z.activityLog].sort((i,c)=>new Date(c.timestamp).getTime()-new Date(i.timestamp).getTime()).map(i=>{const c=so(z.tenantId,i.actorId);return s.jsxs("div",{className:"activity-item",children:[c.avatarUrl?s.jsx("img",{className:"comment-avatar comment-avatar-small",src:c.avatarUrl,alt:c.label}):s.jsx("div",{className:"comment-avatar comment-avatar-small",children:c.label.charAt(0).toUpperCase()||"U"}),s.jsxs("div",{className:"activity-body",children:[s.jsx("div",{className:"activity-text",children:i.message}),s.jsxs("div",{className:"activity-meta",children:[c.label,"  ",new Date(i.timestamp).toLocaleString()]})]})]},i.id)}):s.jsx("div",{className:"activity-empty",children:"No activity yet."})})]})]}),s.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[z.sourceType==="MANUAL"&&s.jsx("button",{className:"btn btn-secondary btn-delete",onClick:()=>Bk(z.id),children:"Lschen"}),s.jsx("button",{className:"btn btn-secondary",onClick:oc,children:"Speichern"})]})})]})}),pi&&s.jsx("div",{className:"image-overlay",onClick:()=>Kl(null),children:s.jsxs("div",{className:"image-overlay-content",onClick:i=>i.stopPropagation(),children:[s.jsx("button",{className:"image-overlay-close",onClick:()=>Kl(null),children:""}),s.jsx("img",{src:pi.src,alt:pi.name}),s.jsx("div",{className:"image-overlay-caption",children:pi.name})]})}),Ga&&s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[s.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[s.jsxs("div",{className:"modal-header-row",children:[s.jsx("h2",{style:{marginBottom:0},children:"Edit Task"}),s.jsx("button",{className:"panel-close",onClick:ph,"aria-label":"Close",children:""})]}),fe&&s.jsxs("div",{className:"huddle-inline",children:[s.jsx("span",{children:"Editing in"}),s.jsxs("span",{className:"huddle-chip",style:{background:mn(fe,(Wv=(Vv=ke.find(i=>i.tenantId===fe))==null?void 0:Vv.tenant)==null?void 0:Wv.name).soft,borderColor:mn(fe,(Gv=(Kv=ke.find(i=>i.tenantId===fe))==null?void 0:Kv.tenant)==null?void 0:Gv.name).border,color:mn(fe,(Jv=(qv=ke.find(i=>i.tenantId===fe))==null?void 0:qv.tenant)==null?void 0:Jv.name).text},children:[s.jsx("span",{className:"huddle-dot",style:{background:mn(fe,(Xv=(Qv=ke.find(i=>i.tenantId===fe))==null?void 0:Qv.tenant)==null?void 0:Xv.name).solid}}),dt((Zv=(Yv=ke.find(i=>i.tenantId===fe))==null?void 0:Yv.tenant)==null?void 0:Zv.name)]})]})]}),s.jsxs("form",{onSubmit:Wk,children:[s.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Title"}),s.jsx("input",{type:"text",required:!0,value:Pt.title,onChange:i=>Ja({...Pt,title:i.target.value}),placeholder:"What needs to be done?"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Huddle"}),s.jsx("select",{value:fe||"",onChange:i=>vg(i.target.value),children:ke.map(i=>{var c;return s.jsx("option",{value:i.tenantId,children:dt((c=i.tenant)==null?void 0:c.name)||i.tenantId},i.id)})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Tasks"}),s.jsx("select",{value:ps||"",onChange:i=>Ul(i.target.value),children:ro(fe||E).map(i=>s.jsx("option",{value:i.id,children:i.name},i.id))})]}),!io(fe)&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Owner"}),s.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-owner",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="edit-task-owner"?null:"edit-task-owner"),children:ms?$n(fe,ms):"Unassigned"}),Dn==="edit-task-owner"&&s.jsxs("div",{className:"member-select-dropdown",children:[s.jsx("button",{type:"button",className:`member-select-option${ms?"":" active"}`,onClick:()=>{Bl(null),nt(null)},children:"Unassigned"}),Lt(fe).map(i=>{var c,h;return s.jsx("button",{type:"button",className:`member-select-option${ms===i.userId?" active":""}`,onClick:()=>{Bl(i.userId),nt(null)},children:((c=i.user)==null?void 0:c.name)||((h=i.user)==null?void 0:h.email)||i.userId},i.userId)})]})]})]}),!io(fe)&&s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Members"}),s.jsxs("div",{className:"member-select","data-member-dropdown":"edit-task-assignees",children:[s.jsx("button",{type:"button",className:"member-select-trigger",onClick:()=>nt(i=>i==="edit-task-assignees"?null:"edit-task-assignees"),children:Er.length>0?Er.map(i=>$n(fe,i)).join(", "):"Select members"}),Dn==="edit-task-assignees"&&s.jsxs("div",{className:"member-select-dropdown",children:[Lt(fe).map(i=>{var h,p;const c=Er.includes(i.userId);return s.jsx("button",{type:"button",className:`member-select-option${c?" active":""}`,onClick:()=>{const x=c?Er.filter(b=>b!==i.userId):Er.concat(i.userId);Ud(x)},children:((h=i.user)==null?void 0:h.name)||((p=i.user)==null?void 0:p.email)||i.userId},i.userId)}),Lt(fe).length===0&&s.jsx("div",{className:"member-select-empty",children:"No members in this huddle yet."})]})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Description"}),s.jsxs("div",{className:"rich-editor",children:[s.jsxs("div",{className:"rich-toolbar",children:[s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("bold"),children:"B"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("italic"),children:"I"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("underline"),children:"U"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("insertUnorderedList"),children:" List"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("insertOrderedList"),children:"1. List"}),s.jsx("button",{type:"button",className:"rich-button",onMouseDown:i=>i.preventDefault(),onClick:()=>tn("createLink"),children:"Link"})]}),s.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:zd,onInput:i=>Ja({...Pt,description:i.currentTarget.innerHTML}),onPaste:Zg,"data-placeholder":"Optional details..."})]})]})]}),s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Art"}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[s.jsx("input",{type:"text",value:xg,onChange:i=>Wl(i.target.value),onKeyDown:i=>pv(i,"edit"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:fv,children:"Add"})]}),Xa.length>0&&s.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Xa.map(i=>s.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[i,s.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>mv(i,Vl),children:""})]},i))})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Priority"}),s.jsxs("select",{value:Pt.priority,onChange:i=>Ja({...Pt,priority:i.target.value}),children:[s.jsx("option",{value:"LOW",children:"Low"}),s.jsx("option",{value:"MEDIUM",children:"Medium"}),s.jsx("option",{value:"HIGH",children:"High"}),s.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Deadline"}),s.jsx("input",{type:"date",value:Pt.dueDate,onChange:i=>Ja({...Pt,dueDate:i.target.value})})]})]}),s.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[s.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{children:"Files"}),s.jsx("input",{type:"file",multiple:!0,onChange:i=>bv(i.target.files)}),s.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[...Rj,...Hl].map(i=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.9rem"},children:i.name}),s.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[s.jsx("a",{href:i.dataUrl,download:i.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),s.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>Vk(i.id),children:"Remove"})]})]},i.id))})]})]})]}),s.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:s.jsx("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})})})]})]})})]}):s.jsx("div",{style:{padding:"2rem"},children:"SQOPUS wird geladen ..."}):s.jsx("div",{className:"auth-screen",children:s.jsxs("div",{className:"auth-card",children:[s.jsxs("div",{className:"auth-header",children:[s.jsx("h1",{children:"Kanbax"}),s.jsx("p",{children:"Sign in to manage your tasks, huddles, and work."})]}),s.jsxs("div",{className:"auth-tabs",children:[s.jsx("button",{className:yr==="login"?"auth-tab active":"auth-tab",onClick:()=>Zu("login"),children:"Login"}),s.jsx("button",{className:yr==="signup"?"auth-tab active":"auth-tab",onClick:()=>Zu("signup"),children:"Sign up"}),s.jsx("button",{className:yr==="magic"?"auth-tab active":"auth-tab",onClick:()=>Zu("magic"),children:"Magic link"})]}),s.jsxs("form",{className:"auth-form",onSubmit:kk,children:[s.jsxs("label",{children:["Email",s.jsx("input",{type:"email",value:vl,onChange:i=>dj(i.target.value),placeholder:"you@company.com",required:!0})]}),yr!=="magic"&&s.jsxs("label",{children:["Password",s.jsx("input",{type:"password",value:ed,onChange:i=>hj(i.target.value),placeholder:"",required:!0})]}),s.jsx("button",{className:"btn btn-primary",type:"submit",disabled:fj,children:yr==="signup"?"Create account":yr==="magic"?"Send magic link":"Sign in"}),Em&&s.jsx("div",{className:"auth-message",children:Em}),Tm&&s.jsx("div",{className:"auth-error",children:Tm})]}),s.jsx("div",{className:"auth-divider",children:s.jsx("span",{children:"or"})}),s.jsxs("div",{className:"auth-oauth",children:[s.jsx("button",{className:"btn btn-secondary",onClick:()=>ev("google"),children:"Continue with Google"}),s.jsx("button",{className:"btn btn-secondary",onClick:()=>ev("github"),children:"Continue with GitHub"})]})]})})},H1={de:{"inbox.title":"Inbox","inbox.incoming":"Eingang","inbox.empty.title":"Inbox Zero","inbox.empty.text":"Keine ungeplanten Aufgaben gerade.","inbox.intro.line1":"Incoming  Entscheiden  Einordnen.","inbox.intro.line2":"Keine Task-Management-Hlle.","inbox.tooltip.info":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.action.addScope":"Zum Scope hinzufgen","inbox.action.later":"Spter","inbox.action.archive":"Archivieren","inbox.action.addScopeTooltip":"Zum Scope hinzufgen","inbox.action.laterTooltip":"Spter bearbeiten","inbox.action.archiveTooltip":"Archivieren","inbox.action.backTooltip":"Zurck zum Eingang","inbox.action.backToInbox":"Zum Eingang","inbox.action.moveToInbox":"Zum Eingang","inbox.action.moveToInboxTooltip":"Zurck in den Eingang","inbox.action.moved":"In Scope verschoben ","inbox.view.incoming":"Eingang","inbox.view.later":"Spter","inbox.view.review":"Bearbeitet","inbox.view.archived":"Archiviert","inbox.tooltip.incoming":"Unsortierte Arbeit. Entscheide was wichtig ist","inbox.tooltip.later":"Spter / in Bearbeitung","inbox.tooltip.review":"Zur spteren berprfung","inbox.tooltip.archived":"Archivierte Items","inbox.capture.title":"Inbox Item erfassen","inbox.capture.subtitle":"Fge eingehende Arbeit hinzu, bevor du sortierst.","inbox.field.title":"Titel","inbox.field.source":"Quelle","inbox.field.action":"Vorgeschlagene Aktion","inbox.field.selectSource":"Quelle whlen","inbox.field.selectAction":"Aktion whlen","inbox.field.description":"Beschreibung","inbox.field.descriptionPlaceholder":"Kurz beschreiben, worum es geht","inbox.tooltip.create":"Inbox Item erstellen","inbox.tooltip.save":"Speichern","inbox.source.email":"Email","inbox.source.meeting":"Meeting-Notiz","inbox.source.request":"Request","inbox.source.idea":"Idee","inbox.source.external":"Externe Anfrage","inbox.action.thisWeek":"Diese Woche","inbox.action.nextWeek":"Nchste Woche"}},pp="de",F1=g.createContext({locale:pp,setLocale:()=>null}),z1=({children:e})=>{const[t,n]=g.useState(pp),r=g.useMemo(()=>H1[t],[t]);return s.jsx(F1.Provider,{value:{locale:t,setLocale:n},children:s.jsx(np,{locale:t,messages:r,defaultLocale:pp,children:e})})};sf.createRoot(document.getElementById("root")).render(s.jsx(rf.StrictMode,{children:s.jsx(z1,{children:s.jsx(B1,{})})}));
