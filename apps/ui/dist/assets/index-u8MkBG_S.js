(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function sw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pm={exports:{}},Bo={},mm={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zi=Symbol.for("react.element"),iw=Symbol.for("react.portal"),aw=Symbol.for("react.fragment"),ow=Symbol.for("react.strict_mode"),lw=Symbol.for("react.profiler"),cw=Symbol.for("react.provider"),uw=Symbol.for("react.context"),dw=Symbol.for("react.forward_ref"),hw=Symbol.for("react.suspense"),fw=Symbol.for("react.memo"),pw=Symbol.for("react.lazy"),Rf=Symbol.iterator;function mw(e){return e===null||typeof e!="object"?null:(e=Rf&&e[Rf]||e["@@iterator"],typeof e=="function"?e:null)}var vm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gm=Object.assign,ym={};function Es(e,t,n){this.props=e,this.context=t,this.refs=ym,this.updater=n||vm}Es.prototype.isReactComponent={};Es.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Es.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wm(){}wm.prototype=Es.prototype;function Ru(e,t,n){this.props=e,this.context=t,this.refs=ym,this.updater=n||vm}var Pu=Ru.prototype=new wm;Pu.constructor=Ru;gm(Pu,Es.prototype);Pu.isPureReactComponent=!0;var Pf=Array.isArray,xm=Object.prototype.hasOwnProperty,Du={current:null},km={key:!0,ref:!0,__self:!0,__source:!0};function jm(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)xm.call(t,r)&&!km.hasOwnProperty(r)&&(s[r]=t[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),h=0;h<c;h++)u[h]=arguments[h+2];s.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Zi,type:e,key:i,ref:l,props:s,_owner:Du.current}}function vw(e,t){return{$$typeof:Zi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $u(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zi}function gw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Df=/\/+/g;function ql(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gw(""+e.key):t.toString(36)}function eo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Zi:case iw:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+ql(l,0):r,Pf(s)?(n="",e!=null&&(n=e.replace(Df,"$&/")+"/"),eo(s,t,n,"",function(h){return h})):s!=null&&($u(s)&&(s=vw(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Df,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Pf(e))for(var c=0;c<e.length;c++){i=e[c];var u=r+ql(i,c);l+=eo(i,t,n,u,s)}else if(u=mw(e),typeof u=="function")for(e=u.call(e),c=0;!(i=e.next()).done;)i=i.value,u=r+ql(i,c++),l+=eo(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Ra(e,t,n){if(e==null)return e;var r=[],s=0;return eo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function yw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ge={current:null},to={transition:null},ww={ReactCurrentDispatcher:Ge,ReactCurrentBatchConfig:to,ReactCurrentOwner:Du};function _m(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Ra,forEach:function(e,t,n){Ra(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ra(e,function(){t++}),t},toArray:function(e){return Ra(e,function(t){return t})||[]},only:function(e){if(!$u(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};G.Component=Es;G.Fragment=aw;G.Profiler=lw;G.PureComponent=Ru;G.StrictMode=ow;G.Suspense=hw;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ww;G.act=_m;G.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gm({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Du.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)xm.call(t,u)&&!km.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];r.children=c}return{$$typeof:Zi,type:e.type,key:s,ref:i,props:r,_owner:l}};G.createContext=function(e){return e={$$typeof:uw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cw,_context:e},e.Consumer=e};G.createElement=jm;G.createFactory=function(e){var t=jm.bind(null,e);return t.type=e,t};G.createRef=function(){return{current:null}};G.forwardRef=function(e){return{$$typeof:dw,render:e}};G.isValidElement=$u;G.lazy=function(e){return{$$typeof:pw,_payload:{_status:-1,_result:e},_init:yw}};G.memo=function(e,t){return{$$typeof:fw,type:e,compare:t===void 0?null:t}};G.startTransition=function(e){var t=to.transition;to.transition={};try{e()}finally{to.transition=t}};G.unstable_act=_m;G.useCallback=function(e,t){return Ge.current.useCallback(e,t)};G.useContext=function(e){return Ge.current.useContext(e)};G.useDebugValue=function(){};G.useDeferredValue=function(e){return Ge.current.useDeferredValue(e)};G.useEffect=function(e,t){return Ge.current.useEffect(e,t)};G.useId=function(){return Ge.current.useId()};G.useImperativeHandle=function(e,t,n){return Ge.current.useImperativeHandle(e,t,n)};G.useInsertionEffect=function(e,t){return Ge.current.useInsertionEffect(e,t)};G.useLayoutEffect=function(e,t){return Ge.current.useLayoutEffect(e,t)};G.useMemo=function(e,t){return Ge.current.useMemo(e,t)};G.useReducer=function(e,t,n){return Ge.current.useReducer(e,t,n)};G.useRef=function(e){return Ge.current.useRef(e)};G.useState=function(e){return Ge.current.useState(e)};G.useSyncExternalStore=function(e,t,n){return Ge.current.useSyncExternalStore(e,t,n)};G.useTransition=function(){return Ge.current.useTransition()};G.version="18.3.1";mm.exports=G;var S=mm.exports;const Cc=sw(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw=S,kw=Symbol.for("react.element"),jw=Symbol.for("react.fragment"),_w=Object.prototype.hasOwnProperty,Sw=xw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bw={key:!0,ref:!0,__self:!0,__source:!0};function Sm(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)_w.call(t,r)&&!bw.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:kw,type:e,key:i,ref:l,props:s,_owner:Sw.current}}Bo.Fragment=jw;Bo.jsx=Sm;Bo.jsxs=Sm;pm.exports=Bo;var a=pm.exports,Tc={},bm={exports:{}},ht={},Nm={exports:{}},Em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,V){var W=$.length;$.push(V);e:for(;0<W;){var ge=W-1>>>1,se=$[ge];if(0<s(se,V))$[ge]=V,$[W]=se,W=ge;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var V=$[0],W=$.pop();if(W!==V){$[0]=W;e:for(var ge=0,se=$.length,mn=se>>>1;ge<mn;){var pt=2*(ge+1)-1,Rs=$[pt],St=pt+1,_r=$[St];if(0>s(Rs,W))St<se&&0>s(_r,Rs)?($[ge]=_r,$[St]=W,ge=St):($[ge]=Rs,$[pt]=W,ge=pt);else if(St<se&&0>s(_r,W))$[ge]=_r,$[St]=W,ge=St;else break e}}return V}function s($,V){var W=$.sortIndex-V.sortIndex;return W!==0?W:$.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],h=[],p=1,x=null,g=3,j=!1,v=!1,b=!1,O=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var V=n(h);V!==null;){if(V.callback===null)r(h);else if(V.startTime<=$)r(h),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(h)}}function N($){if(b=!1,y($),!v)if(n(u)!==null)v=!0,Os(A);else{var V=n(h);V!==null&&As(N,V.startTime-$)}}function A($,V){v=!1,b&&(b=!1,w(U),U=-1),j=!0;var W=g;try{for(y(V),x=n(u);x!==null&&(!(x.expirationTime>V)||$&&!me());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,g=x.priorityLevel;var se=ge(x.expirationTime<=V);V=e.unstable_now(),typeof se=="function"?x.callback=se:x===n(u)&&r(u),y(V)}else r(u);x=n(u)}if(x!==null)var mn=!0;else{var pt=n(h);pt!==null&&As(N,pt.startTime-V),mn=!1}return mn}finally{x=null,g=W,j=!1}}var T=!1,R=null,U=-1,Q=5,q=-1;function me(){return!(e.unstable_now()-q<Q)}function qn(){if(R!==null){var $=e.unstable_now();q=$;var V=!0;try{V=R(!0,$)}finally{V?pn():(T=!1,R=null)}}else T=!1}var pn;if(typeof m=="function")pn=function(){m(qn)};else if(typeof MessageChannel<"u"){var Is=new MessageChannel,il=Is.port2;Is.port1.onmessage=qn,pn=function(){il.postMessage(null)}}else pn=function(){O(qn,0)};function Os($){R=$,T||(T=!0,pn())}function As($,V){U=O(function(){$(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){v||j||(v=!0,Os(A))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function($){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var W=g;g=V;try{return $()}finally{g=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,V){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=g;g=$;try{return V()}finally{g=W}},e.unstable_scheduleCallback=function($,V,W){var ge=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ge+W:ge):W=ge,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=W+se,$={id:p++,callback:V,priorityLevel:$,startTime:W,expirationTime:se,sortIndex:-1},W>ge?($.sortIndex=W,t(h,$),n(u)===null&&$===n(h)&&(b?(w(U),U=-1):b=!0,As(N,W-ge))):($.sortIndex=se,t(u,$),v||j||(v=!0,Os(A))),$},e.unstable_shouldYield=me,e.unstable_wrapCallback=function($){var V=g;return function(){var W=g;g=V;try{return $.apply(this,arguments)}finally{g=W}}}})(Em);Nm.exports=Em;var Nw=Nm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew=S,dt=Nw;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cm=new Set,Ii={};function kr(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(Ii[e]=t,e=0;e<t.length;e++)Cm.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ic=Object.prototype.hasOwnProperty,Cw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$f={},Lf={};function Tw(e){return Ic.call(Lf,e)?!0:Ic.call($f,e)?!1:Cw.test(e)?Lf[e]=!0:($f[e]=!0,!1)}function Iw(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ow(e,t,n,r){if(t===null||typeof t>"u"||Iw(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Je(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Be[e]=new Je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Be[t]=new Je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Be[e]=new Je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Be[e]=new Je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Be[e]=new Je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Be[e]=new Je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Be[e]=new Je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Be[e]=new Je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Be[e]=new Je(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lu=/[\-:]([a-z])/g;function Uu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lu,Uu);Be[t]=new Je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lu,Uu);Be[t]=new Je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lu,Uu);Be[t]=new Je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Be[e]=new Je(e,1,!1,e.toLowerCase(),null,!1,!1)});Be.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Be[e]=new Je(e,1,!1,e.toLowerCase(),null,!0,!0)});function Mu(e,t,n,r){var s=Be.hasOwnProperty(t)?Be[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ow(t,n,s,r)&&(n=null),r||s===null?Tw(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hn=Ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pa=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),Bu=Symbol.for("react.strict_mode"),Oc=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Im=Symbol.for("react.context"),zu=Symbol.for("react.forward_ref"),Ac=Symbol.for("react.suspense"),Rc=Symbol.for("react.suspense_list"),Fu=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Om=Symbol.for("react.offscreen"),Uf=Symbol.iterator;function ai(e){return e===null||typeof e!="object"?null:(e=Uf&&e[Uf]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,Gl;function pi(e){if(Gl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gl=t&&t[1]||""}return`
`+Gl+e}var Jl=!1;function Ql(e,t){if(!e||Jl)return"";Jl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,c=i.length-1;1<=l&&0<=c&&s[l]!==i[c];)c--;for(;1<=l&&0<=c;l--,c--)if(s[l]!==i[c]){if(l!==1||c!==1)do if(l--,c--,0>c||s[l]!==i[c]){var u=`
`+s[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{Jl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?pi(e):""}function Aw(e){switch(e.tag){case 5:return pi(e.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 2:case 15:return e=Ql(e.type,!1),e;case 11:return e=Ql(e.type.render,!1),e;case 1:return e=Ql(e.type,!0),e;default:return""}}function Pc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ts:return"Fragment";case es:return"Portal";case Oc:return"Profiler";case Bu:return"StrictMode";case Ac:return"Suspense";case Rc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Im:return(e.displayName||"Context")+".Consumer";case Tm:return(e._context.displayName||"Context")+".Provider";case zu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fu:return t=e.displayName||null,t!==null?t:Pc(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return Pc(e(t))}catch{}}return null}function Rw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(t);case 8:return t===Bu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Am(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pw(e){var t=Am(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Da(e){e._valueTracker||(e._valueTracker=Pw(e))}function Rm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Am(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function fo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Dc(e,t){var n=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Mf(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pm(e,t){t=t.checked,t!=null&&Mu(e,"checked",t,!1)}function $c(e,t){Pm(e,t);var n=Fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Lc(e,t.type,Fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bf(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Lc(e,t,n){(t!=="number"||fo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mi=Array.isArray;function fs(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Uc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(mi(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fn(n)}}function Dm(e,t){var n=Fn(t.value),r=Fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ff(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $m(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$m(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $a,Lm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$a.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dw=["Webkit","ms","Moz","O"];Object.keys(wi).forEach(function(e){Dw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wi[t]=wi[e]})});function Um(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wi.hasOwnProperty(e)&&wi[e]?(""+t).trim():t+"px"}function Mm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Um(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var $w=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bc(e,t){if(t){if($w[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function zc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=null;function Hu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hc=null,ps=null,ms=null;function Hf(e){if(e=na(e)){if(typeof Hc!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Wo(t),Hc(e.stateNode,e.type,t))}}function Bm(e){ps?ms?ms.push(e):ms=[e]:ps=e}function zm(){if(ps){var e=ps,t=ms;if(ms=ps=null,Hf(e),t)for(e=0;e<t.length;e++)Hf(t[e])}}function Fm(e,t){return e(t)}function Hm(){}var Yl=!1;function Vm(e,t,n){if(Yl)return e(t,n);Yl=!0;try{return Fm(e,t,n)}finally{Yl=!1,(ps!==null||ms!==null)&&(Hm(),zm())}}function Ai(e,t){var n=e.stateNode;if(n===null)return null;var r=Wo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var Vc=!1;if(ln)try{var oi={};Object.defineProperty(oi,"passive",{get:function(){Vc=!0}}),window.addEventListener("test",oi,oi),window.removeEventListener("test",oi,oi)}catch{Vc=!1}function Lw(e,t,n,r,s,i,l,c,u){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(p){this.onError(p)}}var xi=!1,po=null,mo=!1,Wc=null,Uw={onError:function(e){xi=!0,po=e}};function Mw(e,t,n,r,s,i,l,c,u){xi=!1,po=null,Lw.apply(Uw,arguments)}function Bw(e,t,n,r,s,i,l,c,u){if(Mw.apply(this,arguments),xi){if(xi){var h=po;xi=!1,po=null}else throw Error(I(198));mo||(mo=!0,Wc=h)}}function jr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Wm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vf(e){if(jr(e)!==e)throw Error(I(188))}function zw(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Vf(s),e;if(i===r)return Vf(s),t;i=i.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,c=s.child;c;){if(c===n){l=!0,n=s,r=i;break}if(c===r){l=!0,r=s,n=i;break}c=c.sibling}if(!l){for(c=i.child;c;){if(c===n){l=!0,n=i,r=s;break}if(c===r){l=!0,r=i,n=s;break}c=c.sibling}if(!l)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function Km(e){return e=zw(e),e!==null?qm(e):null}function qm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qm(e);if(t!==null)return t;e=e.sibling}return null}var Gm=dt.unstable_scheduleCallback,Wf=dt.unstable_cancelCallback,Fw=dt.unstable_shouldYield,Hw=dt.unstable_requestPaint,Se=dt.unstable_now,Vw=dt.unstable_getCurrentPriorityLevel,Vu=dt.unstable_ImmediatePriority,Jm=dt.unstable_UserBlockingPriority,vo=dt.unstable_NormalPriority,Ww=dt.unstable_LowPriority,Qm=dt.unstable_IdlePriority,zo=null,Gt=null;function Kw(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(zo,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Jw,qw=Math.log,Gw=Math.LN2;function Jw(e){return e>>>=0,e===0?32:31-(qw(e)/Gw|0)|0}var La=64,Ua=4194304;function vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function go(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var c=l&~s;c!==0?r=vi(c):(i&=l,i!==0&&(r=vi(i)))}else l=n&~s,l!==0?r=vi(l):i!==0&&(r=vi(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$t(t),s=1<<n,r|=e[n],t&=~s;return r}function Qw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yw(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-$t(i),c=1<<l,u=s[l];u===-1?(!(c&n)||c&r)&&(s[l]=Qw(c,t)):u<=t&&(e.expiredLanes|=c),i&=~c}}function Kc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ym(){var e=La;return La<<=1,!(La&4194240)&&(La=64),e}function Xl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ea(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$t(t),e[t]=n}function Xw(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-$t(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Wu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$t(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var re=0;function Xm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zm,Ku,ev,tv,nv,qc=!1,Ma=[],Pn=null,Dn=null,$n=null,Ri=new Map,Pi=new Map,Tn=[],Zw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kf(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":$n=null;break;case"pointerover":case"pointerout":Ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(t.pointerId)}}function li(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=na(t),t!==null&&Ku(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function e0(e,t,n,r,s){switch(t){case"focusin":return Pn=li(Pn,e,t,n,r,s),!0;case"dragenter":return Dn=li(Dn,e,t,n,r,s),!0;case"mouseover":return $n=li($n,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ri.set(i,li(Ri.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Pi.set(i,li(Pi.get(i)||null,e,t,n,r,s)),!0}return!1}function rv(e){var t=ur(e.target);if(t!==null){var n=jr(t);if(n!==null){if(t=n.tag,t===13){if(t=Wm(n),t!==null){e.blockedOn=t,nv(e.priority,function(){ev(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function no(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fc=r,n.target.dispatchEvent(r),Fc=null}else return t=na(n),t!==null&&Ku(t),e.blockedOn=n,!1;t.shift()}return!0}function qf(e,t,n){no(e)&&n.delete(t)}function t0(){qc=!1,Pn!==null&&no(Pn)&&(Pn=null),Dn!==null&&no(Dn)&&(Dn=null),$n!==null&&no($n)&&($n=null),Ri.forEach(qf),Pi.forEach(qf)}function ci(e,t){e.blockedOn===t&&(e.blockedOn=null,qc||(qc=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,t0)))}function Di(e){function t(s){return ci(s,e)}if(0<Ma.length){ci(Ma[0],e);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pn!==null&&ci(Pn,e),Dn!==null&&ci(Dn,e),$n!==null&&ci($n,e),Ri.forEach(t),Pi.forEach(t),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)rv(n),n.blockedOn===null&&Tn.shift()}var vs=hn.ReactCurrentBatchConfig,yo=!0;function n0(e,t,n,r){var s=re,i=vs.transition;vs.transition=null;try{re=1,qu(e,t,n,r)}finally{re=s,vs.transition=i}}function r0(e,t,n,r){var s=re,i=vs.transition;vs.transition=null;try{re=4,qu(e,t,n,r)}finally{re=s,vs.transition=i}}function qu(e,t,n,r){if(yo){var s=Gc(e,t,n,r);if(s===null)lc(e,t,r,wo,n),Kf(e,r);else if(e0(s,e,t,n,r))r.stopPropagation();else if(Kf(e,r),t&4&&-1<Zw.indexOf(e)){for(;s!==null;){var i=na(s);if(i!==null&&Zm(i),i=Gc(e,t,n,r),i===null&&lc(e,t,r,wo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else lc(e,t,r,null,n)}}var wo=null;function Gc(e,t,n,r){if(wo=null,e=Hu(r),e=ur(e),e!==null)if(t=jr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Wm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wo=e,null}function sv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vw()){case Vu:return 1;case Jm:return 4;case vo:case Ww:return 16;case Qm:return 536870912;default:return 16}default:return 16}}var An=null,Gu=null,ro=null;function iv(){if(ro)return ro;var e,t=Gu,n=t.length,r,s="value"in An?An.value:An.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return ro=s.slice(e,1<r?1-r:void 0)}function so(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ba(){return!0}function Gf(){return!1}function ft(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ba:Gf,this.isPropagationStopped=Gf,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ba)},persist:function(){},isPersistent:Ba}),t}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=ft(Cs),ta=ke({},Cs,{view:0,detail:0}),s0=ft(ta),Zl,ec,ui,Fo=ke({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ui&&(ui&&e.type==="mousemove"?(Zl=e.screenX-ui.screenX,ec=e.screenY-ui.screenY):ec=Zl=0,ui=e),Zl)},movementY:function(e){return"movementY"in e?e.movementY:ec}}),Jf=ft(Fo),i0=ke({},Fo,{dataTransfer:0}),a0=ft(i0),o0=ke({},ta,{relatedTarget:0}),tc=ft(o0),l0=ke({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),c0=ft(l0),u0=ke({},Cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),d0=ft(u0),h0=ke({},Cs,{data:0}),Qf=ft(h0),f0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},m0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=m0[e])?!!t[e]:!1}function Qu(){return v0}var g0=ke({},ta,{key:function(e){if(e.key){var t=f0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=so(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?p0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(e){return e.type==="keypress"?so(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?so(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),y0=ft(g0),w0=ke({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=ft(w0),x0=ke({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),k0=ft(x0),j0=ke({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_0=ft(j0),S0=ke({},Fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b0=ft(S0),N0=[9,13,27,32],Yu=ln&&"CompositionEvent"in window,ki=null;ln&&"documentMode"in document&&(ki=document.documentMode);var E0=ln&&"TextEvent"in window&&!ki,av=ln&&(!Yu||ki&&8<ki&&11>=ki),Xf=" ",Zf=!1;function ov(e,t){switch(e){case"keyup":return N0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function C0(e,t){switch(e){case"compositionend":return lv(t);case"keypress":return t.which!==32?null:(Zf=!0,Xf);case"textInput":return e=t.data,e===Xf&&Zf?null:e;default:return null}}function T0(e,t){if(ns)return e==="compositionend"||!Yu&&ov(e,t)?(e=iv(),ro=Gu=An=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return av&&t.locale!=="ko"?null:t.data;default:return null}}var I0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!I0[e.type]:t==="textarea"}function cv(e,t,n,r){Bm(r),t=xo(t,"onChange"),0<t.length&&(n=new Ju("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ji=null,$i=null;function O0(e){xv(e,0)}function Ho(e){var t=is(e);if(Rm(t))return e}function A0(e,t){if(e==="change")return t}var uv=!1;if(ln){var nc;if(ln){var rc="oninput"in document;if(!rc){var tp=document.createElement("div");tp.setAttribute("oninput","return;"),rc=typeof tp.oninput=="function"}nc=rc}else nc=!1;uv=nc&&(!document.documentMode||9<document.documentMode)}function np(){ji&&(ji.detachEvent("onpropertychange",dv),$i=ji=null)}function dv(e){if(e.propertyName==="value"&&Ho($i)){var t=[];cv(t,$i,e,Hu(e)),Vm(O0,t)}}function R0(e,t,n){e==="focusin"?(np(),ji=t,$i=n,ji.attachEvent("onpropertychange",dv)):e==="focusout"&&np()}function P0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ho($i)}function D0(e,t){if(e==="click")return Ho(t)}function $0(e,t){if(e==="input"||e==="change")return Ho(t)}function L0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:L0;function Li(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ic.call(t,s)||!Ut(e[s],t[s]))return!1}return!0}function rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sp(e,t){var n=rp(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rp(n)}}function hv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fv(){for(var e=window,t=fo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=fo(e.document)}return t}function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U0(e){var t=fv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hv(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=sp(n,i);var l=sp(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M0=ln&&"documentMode"in document&&11>=document.documentMode,rs=null,Jc=null,_i=null,Qc=!1;function ip(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qc||rs==null||rs!==fo(r)||(r=rs,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_i&&Li(_i,r)||(_i=r,r=xo(Jc,"onSelect"),0<r.length&&(t=new Ju("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rs)))}function za(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ss={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},sc={},pv={};ln&&(pv=document.createElement("div").style,"AnimationEvent"in window||(delete ss.animationend.animation,delete ss.animationiteration.animation,delete ss.animationstart.animation),"TransitionEvent"in window||delete ss.transitionend.transition);function Vo(e){if(sc[e])return sc[e];if(!ss[e])return e;var t=ss[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pv)return sc[e]=t[n];return e}var mv=Vo("animationend"),vv=Vo("animationiteration"),gv=Vo("animationstart"),yv=Vo("transitionend"),wv=new Map,ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(e,t){wv.set(e,t),kr(t,[e])}for(var ic=0;ic<ap.length;ic++){var ac=ap[ic],B0=ac.toLowerCase(),z0=ac[0].toUpperCase()+ac.slice(1);Vn(B0,"on"+z0)}Vn(mv,"onAnimationEnd");Vn(vv,"onAnimationIteration");Vn(gv,"onAnimationStart");Vn("dblclick","onDoubleClick");Vn("focusin","onFocus");Vn("focusout","onBlur");Vn(yv,"onTransitionEnd");xs("onMouseEnter",["mouseout","mouseover"]);xs("onMouseLeave",["mouseout","mouseover"]);xs("onPointerEnter",["pointerout","pointerover"]);xs("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F0=new Set("cancel close invalid load scroll toggle".split(" ").concat(gi));function op(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Bw(r,t,void 0,e),e.currentTarget=null}function xv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],u=c.instance,h=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;op(s,c,h),i=u}else for(l=0;l<r.length;l++){if(c=r[l],u=c.instance,h=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;op(s,c,h),i=u}}}if(mo)throw e=Wc,mo=!1,Wc=null,e}function fe(e,t){var n=t[tu];n===void 0&&(n=t[tu]=new Set);var r=e+"__bubble";n.has(r)||(kv(t,e,2,!1),n.add(r))}function oc(e,t,n){var r=0;t&&(r|=4),kv(n,e,r,t)}var Fa="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Fa]){e[Fa]=!0,Cm.forEach(function(n){n!=="selectionchange"&&(F0.has(n)||oc(n,!1,e),oc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fa]||(t[Fa]=!0,oc("selectionchange",!1,t))}}function kv(e,t,n,r){switch(sv(t)){case 1:var s=n0;break;case 4:s=r0;break;default:s=qu}n=s.bind(null,t,n,e),s=void 0,!Vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function lc(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;c!==null;){if(l=ur(c),l===null)return;if(u=l.tag,u===5||u===6){r=i=l;continue e}c=c.parentNode}}r=r.return}Vm(function(){var h=i,p=Hu(n),x=[];e:{var g=wv.get(e);if(g!==void 0){var j=Ju,v=e;switch(e){case"keypress":if(so(n)===0)break e;case"keydown":case"keyup":j=y0;break;case"focusin":v="focus",j=tc;break;case"focusout":v="blur",j=tc;break;case"beforeblur":case"afterblur":j=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=a0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=k0;break;case mv:case vv:case gv:j=c0;break;case yv:j=_0;break;case"scroll":j=s0;break;case"wheel":j=b0;break;case"copy":case"cut":case"paste":j=d0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Yf}var b=(t&4)!==0,O=!b&&e==="scroll",w=b?g!==null?g+"Capture":null:g;b=[];for(var m=h,y;m!==null;){y=m;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,w!==null&&(N=Ai(m,w),N!=null&&b.push(Mi(m,N,y)))),O)break;m=m.return}0<b.length&&(g=new j(g,v,null,n,p),x.push({event:g,listeners:b}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",g&&n!==Fc&&(v=n.relatedTarget||n.fromElement)&&(ur(v)||v[cn]))break e;if((j||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,j?(v=n.relatedTarget||n.toElement,j=h,v=v?ur(v):null,v!==null&&(O=jr(v),v!==O||v.tag!==5&&v.tag!==6)&&(v=null)):(j=null,v=h),j!==v)){if(b=Jf,N="onMouseLeave",w="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=Yf,N="onPointerLeave",w="onPointerEnter",m="pointer"),O=j==null?g:is(j),y=v==null?g:is(v),g=new b(N,m+"leave",j,n,p),g.target=O,g.relatedTarget=y,N=null,ur(p)===h&&(b=new b(w,m+"enter",v,n,p),b.target=y,b.relatedTarget=O,N=b),O=N,j&&v)t:{for(b=j,w=v,m=0,y=b;y;y=Vr(y))m++;for(y=0,N=w;N;N=Vr(N))y++;for(;0<m-y;)b=Vr(b),m--;for(;0<y-m;)w=Vr(w),y--;for(;m--;){if(b===w||w!==null&&b===w.alternate)break t;b=Vr(b),w=Vr(w)}b=null}else b=null;j!==null&&lp(x,g,j,b,!1),v!==null&&O!==null&&lp(x,O,v,b,!0)}}e:{if(g=h?is(h):window,j=g.nodeName&&g.nodeName.toLowerCase(),j==="select"||j==="input"&&g.type==="file")var A=A0;else if(ep(g))if(uv)A=$0;else{A=P0;var T=R0}else(j=g.nodeName)&&j.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(A=D0);if(A&&(A=A(e,h))){cv(x,A,n,p);break e}T&&T(e,g,h),e==="focusout"&&(T=g._wrapperState)&&T.controlled&&g.type==="number"&&Lc(g,"number",g.value)}switch(T=h?is(h):window,e){case"focusin":(ep(T)||T.contentEditable==="true")&&(rs=T,Jc=h,_i=null);break;case"focusout":_i=Jc=rs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,ip(x,n,p);break;case"selectionchange":if(M0)break;case"keydown":case"keyup":ip(x,n,p)}var R;if(Yu)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ns?ov(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(av&&n.locale!=="ko"&&(ns||U!=="onCompositionStart"?U==="onCompositionEnd"&&ns&&(R=iv()):(An=p,Gu="value"in An?An.value:An.textContent,ns=!0)),T=xo(h,U),0<T.length&&(U=new Qf(U,e,null,n,p),x.push({event:U,listeners:T}),R?U.data=R:(R=lv(n),R!==null&&(U.data=R)))),(R=E0?C0(e,n):T0(e,n))&&(h=xo(h,"onBeforeInput"),0<h.length&&(p=new Qf("onBeforeInput","beforeinput",null,n,p),x.push({event:p,listeners:h}),p.data=R))}xv(x,t)})}function Mi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ai(e,n),i!=null&&r.unshift(Mi(e,i,s)),i=Ai(e,t),i!=null&&r.push(Mi(e,i,s))),e=e.return}return r}function Vr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lp(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var c=n,u=c.alternate,h=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&h!==null&&(c=h,s?(u=Ai(n,i),u!=null&&l.unshift(Mi(n,u,c))):s||(u=Ai(n,i),u!=null&&l.push(Mi(n,u,c)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var H0=/\r\n?/g,V0=/\u0000|\uFFFD/g;function cp(e){return(typeof e=="string"?e:""+e).replace(H0,`
`).replace(V0,"")}function Ha(e,t,n){if(t=cp(t),cp(e)!==t&&n)throw Error(I(425))}function ko(){}var Yc=null,Xc=null;function Zc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var eu=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,up=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof up<"u"?function(e){return up.resolve(null).then(e).catch(q0)}:eu;function q0(e){setTimeout(function(){throw e})}function cc(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Di(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Di(t)}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ts,Bi="__reactProps$"+Ts,cn="__reactContainer$"+Ts,tu="__reactEvents$"+Ts,G0="__reactListeners$"+Ts,J0="__reactHandles$"+Ts;function ur(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cn]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dp(e);e!==null;){if(n=e[qt])return n;e=dp(e)}return t}e=n,n=e.parentNode}return null}function na(e){return e=e[qt]||e[cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Wo(e){return e[Bi]||null}var nu=[],as=-1;function Wn(e){return{current:e}}function pe(e){0>as||(e.current=nu[as],nu[as]=null,as--)}function de(e,t){as++,nu[as]=e.current,e.current=t}var Hn={},We=Wn(Hn),Ze=Wn(!1),vr=Hn;function ks(e,t){var n=e.type.contextTypes;if(!n)return Hn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function et(e){return e=e.childContextTypes,e!=null}function jo(){pe(Ze),pe(We)}function hp(e,t,n){if(We.current!==Hn)throw Error(I(168));de(We,t),de(Ze,n)}function jv(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(I(108,Rw(e)||"Unknown",s));return ke({},n,r)}function _o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,vr=We.current,de(We,e),de(Ze,Ze.current),!0}function fp(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=jv(e,t,vr),r.__reactInternalMemoizedMergedChildContext=e,pe(Ze),pe(We),de(We,e)):pe(Ze),de(Ze,n)}var rn=null,Ko=!1,uc=!1;function _v(e){rn===null?rn=[e]:rn.push(e)}function Q0(e){Ko=!0,_v(e)}function Kn(){if(!uc&&rn!==null){uc=!0;var e=0,t=re;try{var n=rn;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,Ko=!1}catch(s){throw rn!==null&&(rn=rn.slice(e+1)),Gm(Vu,Kn),s}finally{re=t,uc=!1}}return null}var os=[],ls=0,So=null,bo=0,yt=[],wt=0,gr=null,sn=1,an="";function ir(e,t){os[ls++]=bo,os[ls++]=So,So=e,bo=t}function Sv(e,t,n){yt[wt++]=sn,yt[wt++]=an,yt[wt++]=gr,gr=e;var r=sn;e=an;var s=32-$t(r)-1;r&=~(1<<s),n+=1;var i=32-$t(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,sn=1<<32-$t(t)+s|n<<s|r,an=i+e}else sn=1<<i|n<<s|r,an=e}function Zu(e){e.return!==null&&(ir(e,1),Sv(e,1,0))}function ed(e){for(;e===So;)So=os[--ls],os[ls]=null,bo=os[--ls],os[ls]=null;for(;e===gr;)gr=yt[--wt],yt[wt]=null,an=yt[--wt],yt[wt]=null,sn=yt[--wt],yt[wt]=null}var ut=null,ct=null,ve=!1,Dt=null;function bv(e,t){var n=xt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ut=e,ct=Ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ut=e,ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=gr!==null?{id:sn,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ut=e,ct=null,!0):!1;default:return!1}}function ru(e){return(e.mode&1)!==0&&(e.flags&128)===0}function su(e){if(ve){var t=ct;if(t){var n=t;if(!pp(e,t)){if(ru(e))throw Error(I(418));t=Ln(n.nextSibling);var r=ut;t&&pp(e,t)?bv(r,n):(e.flags=e.flags&-4097|2,ve=!1,ut=e)}}else{if(ru(e))throw Error(I(418));e.flags=e.flags&-4097|2,ve=!1,ut=e}}}function mp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ut=e}function Va(e){if(e!==ut)return!1;if(!ve)return mp(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zc(e.type,e.memoizedProps)),t&&(t=ct)){if(ru(e))throw Nv(),Error(I(418));for(;t;)bv(e,t),t=Ln(t.nextSibling)}if(mp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ct=Ln(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ct=null}}else ct=ut?Ln(e.stateNode.nextSibling):null;return!0}function Nv(){for(var e=ct;e;)e=Ln(e.nextSibling)}function js(){ct=ut=null,ve=!1}function td(e){Dt===null?Dt=[e]:Dt.push(e)}var Y0=hn.ReactCurrentBatchConfig;function di(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var c=s.refs;l===null?delete c[i]:c[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vp(e){var t=e._init;return t(e._payload)}function Ev(e){function t(w,m){if(e){var y=w.deletions;y===null?(w.deletions=[m],w.flags|=16):y.push(m)}}function n(w,m){if(!e)return null;for(;m!==null;)t(w,m),m=m.sibling;return null}function r(w,m){for(w=new Map;m!==null;)m.key!==null?w.set(m.key,m):w.set(m.index,m),m=m.sibling;return w}function s(w,m){return w=zn(w,m),w.index=0,w.sibling=null,w}function i(w,m,y){return w.index=y,e?(y=w.alternate,y!==null?(y=y.index,y<m?(w.flags|=2,m):y):(w.flags|=2,m)):(w.flags|=1048576,m)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function c(w,m,y,N){return m===null||m.tag!==6?(m=gc(y,w.mode,N),m.return=w,m):(m=s(m,y),m.return=w,m)}function u(w,m,y,N){var A=y.type;return A===ts?p(w,m,y.props.children,N,y.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&vp(A)===m.type)?(N=s(m,y.props),N.ref=di(w,m,y),N.return=w,N):(N=ho(y.type,y.key,y.props,null,w.mode,N),N.ref=di(w,m,y),N.return=w,N)}function h(w,m,y,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=yc(y,w.mode,N),m.return=w,m):(m=s(m,y.children||[]),m.return=w,m)}function p(w,m,y,N,A){return m===null||m.tag!==7?(m=mr(y,w.mode,N,A),m.return=w,m):(m=s(m,y),m.return=w,m)}function x(w,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=gc(""+m,w.mode,y),m.return=w,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Pa:return y=ho(m.type,m.key,m.props,null,w.mode,y),y.ref=di(w,null,m),y.return=w,y;case es:return m=yc(m,w.mode,y),m.return=w,m;case Nn:var N=m._init;return x(w,N(m._payload),y)}if(mi(m)||ai(m))return m=mr(m,w.mode,y,null),m.return=w,m;Wa(w,m)}return null}function g(w,m,y,N){var A=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return A!==null?null:c(w,m,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pa:return y.key===A?u(w,m,y,N):null;case es:return y.key===A?h(w,m,y,N):null;case Nn:return A=y._init,g(w,m,A(y._payload),N)}if(mi(y)||ai(y))return A!==null?null:p(w,m,y,N,null);Wa(w,y)}return null}function j(w,m,y,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(y)||null,c(m,w,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Pa:return w=w.get(N.key===null?y:N.key)||null,u(m,w,N,A);case es:return w=w.get(N.key===null?y:N.key)||null,h(m,w,N,A);case Nn:var T=N._init;return j(w,m,y,T(N._payload),A)}if(mi(N)||ai(N))return w=w.get(y)||null,p(m,w,N,A,null);Wa(m,N)}return null}function v(w,m,y,N){for(var A=null,T=null,R=m,U=m=0,Q=null;R!==null&&U<y.length;U++){R.index>U?(Q=R,R=null):Q=R.sibling;var q=g(w,R,y[U],N);if(q===null){R===null&&(R=Q);break}e&&R&&q.alternate===null&&t(w,R),m=i(q,m,U),T===null?A=q:T.sibling=q,T=q,R=Q}if(U===y.length)return n(w,R),ve&&ir(w,U),A;if(R===null){for(;U<y.length;U++)R=x(w,y[U],N),R!==null&&(m=i(R,m,U),T===null?A=R:T.sibling=R,T=R);return ve&&ir(w,U),A}for(R=r(w,R);U<y.length;U++)Q=j(R,w,U,y[U],N),Q!==null&&(e&&Q.alternate!==null&&R.delete(Q.key===null?U:Q.key),m=i(Q,m,U),T===null?A=Q:T.sibling=Q,T=Q);return e&&R.forEach(function(me){return t(w,me)}),ve&&ir(w,U),A}function b(w,m,y,N){var A=ai(y);if(typeof A!="function")throw Error(I(150));if(y=A.call(y),y==null)throw Error(I(151));for(var T=A=null,R=m,U=m=0,Q=null,q=y.next();R!==null&&!q.done;U++,q=y.next()){R.index>U?(Q=R,R=null):Q=R.sibling;var me=g(w,R,q.value,N);if(me===null){R===null&&(R=Q);break}e&&R&&me.alternate===null&&t(w,R),m=i(me,m,U),T===null?A=me:T.sibling=me,T=me,R=Q}if(q.done)return n(w,R),ve&&ir(w,U),A;if(R===null){for(;!q.done;U++,q=y.next())q=x(w,q.value,N),q!==null&&(m=i(q,m,U),T===null?A=q:T.sibling=q,T=q);return ve&&ir(w,U),A}for(R=r(w,R);!q.done;U++,q=y.next())q=j(R,w,U,q.value,N),q!==null&&(e&&q.alternate!==null&&R.delete(q.key===null?U:q.key),m=i(q,m,U),T===null?A=q:T.sibling=q,T=q);return e&&R.forEach(function(qn){return t(w,qn)}),ve&&ir(w,U),A}function O(w,m,y,N){if(typeof y=="object"&&y!==null&&y.type===ts&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Pa:e:{for(var A=y.key,T=m;T!==null;){if(T.key===A){if(A=y.type,A===ts){if(T.tag===7){n(w,T.sibling),m=s(T,y.props.children),m.return=w,w=m;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&vp(A)===T.type){n(w,T.sibling),m=s(T,y.props),m.ref=di(w,T,y),m.return=w,w=m;break e}n(w,T);break}else t(w,T);T=T.sibling}y.type===ts?(m=mr(y.props.children,w.mode,N,y.key),m.return=w,w=m):(N=ho(y.type,y.key,y.props,null,w.mode,N),N.ref=di(w,m,y),N.return=w,w=N)}return l(w);case es:e:{for(T=y.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(w,m.sibling),m=s(m,y.children||[]),m.return=w,w=m;break e}else{n(w,m);break}else t(w,m);m=m.sibling}m=yc(y,w.mode,N),m.return=w,w=m}return l(w);case Nn:return T=y._init,O(w,m,T(y._payload),N)}if(mi(y))return v(w,m,y,N);if(ai(y))return b(w,m,y,N);Wa(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(w,m.sibling),m=s(m,y),m.return=w,w=m):(n(w,m),m=gc(y,w.mode,N),m.return=w,w=m),l(w)):n(w,m)}return O}var _s=Ev(!0),Cv=Ev(!1),No=Wn(null),Eo=null,cs=null,nd=null;function rd(){nd=cs=Eo=null}function sd(e){var t=No.current;pe(No),e._currentValue=t}function iu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function gs(e,t){Eo=e,nd=cs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(nd!==e)if(e={context:e,memoizedValue:t,next:null},cs===null){if(Eo===null)throw Error(I(308));cs=e,Eo.dependencies={lanes:0,firstContext:e}}else cs=cs.next=e;return t}var dr=null;function id(e){dr===null?dr=[e]:dr.push(e)}function Tv(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,id(t)):(n.next=s.next,s.next=n),t.interleaved=n,un(e,r)}function un(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var En=!1;function ad(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Un(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,un(e,n)}return s=r.interleaved,s===null?(t.next=t,id(r)):(t.next=s.next,s.next=t),r.interleaved=t,un(e,n)}function io(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wu(e,n)}}function gp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Co(e,t,n,r){var s=e.updateQueue;En=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,h=u.next;u.next=null,l===null?i=h:l.next=h,l=u;var p=e.alternate;p!==null&&(p=p.updateQueue,c=p.lastBaseUpdate,c!==l&&(c===null?p.firstBaseUpdate=h:c.next=h,p.lastBaseUpdate=u))}if(i!==null){var x=s.baseState;l=0,p=h=u=null,c=i;do{var g=c.lane,j=c.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=e,b=c;switch(g=t,j=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){x=v.call(j,x,g);break e}x=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,g=typeof v=="function"?v.call(j,x,g):v,g==null)break e;x=ke({},x,g);break e;case 2:En=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else j={eventTime:j,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},p===null?(h=p=j,u=x):p=p.next=j,l|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=x),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);wr|=l,e.lanes=l,e.memoizedState=x}}function yp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var ra={},Jt=Wn(ra),zi=Wn(ra),Fi=Wn(ra);function hr(e){if(e===ra)throw Error(I(174));return e}function od(e,t){switch(de(Fi,t),de(zi,e),de(Jt,ra),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mc(t,e)}pe(Jt),de(Jt,t)}function Ss(){pe(Jt),pe(zi),pe(Fi)}function Ov(e){hr(Fi.current);var t=hr(Jt.current),n=Mc(t,e.type);t!==n&&(de(zi,e),de(Jt,n))}function ld(e){zi.current===e&&(pe(Jt),pe(zi))}var we=Wn(0);function To(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dc=[];function cd(){for(var e=0;e<dc.length;e++)dc[e]._workInProgressVersionPrimary=null;dc.length=0}var ao=hn.ReactCurrentDispatcher,hc=hn.ReactCurrentBatchConfig,yr=0,xe=null,Ie=null,Re=null,Io=!1,Si=!1,Hi=0,X0=0;function Fe(){throw Error(I(321))}function ud(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function dd(e,t,n,r,s,i){if(yr=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=e===null||e.memoizedState===null?nx:rx,e=n(r,s),Si){i=0;do{if(Si=!1,Hi=0,25<=i)throw Error(I(301));i+=1,Re=Ie=null,t.updateQueue=null,ao.current=sx,e=n(r,s)}while(Si)}if(ao.current=Oo,t=Ie!==null&&Ie.next!==null,yr=0,Re=Ie=xe=null,Io=!1,t)throw Error(I(300));return e}function hd(){var e=Hi!==0;return Hi=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?xe.memoizedState=Re=e:Re=Re.next=e,Re}function _t(){if(Ie===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Re===null?xe.memoizedState:Re.next;if(t!==null)Re=t,Ie=e;else{if(e===null)throw Error(I(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Re===null?xe.memoizedState=Re=e:Re=Re.next=e}return Re}function Vi(e,t){return typeof t=="function"?t(e):t}function fc(e){var t=_t(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=Ie,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=l=null,u=null,h=i;do{var p=h.lane;if((yr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var x={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(c=u=x,l=r):u=u.next=x,xe.lanes|=p,wr|=p}h=h.next}while(h!==null&&h!==i);u===null?l=r:u.next=c,Ut(r,t.memoizedState)||(Xe=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,xe.lanes|=i,wr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function pc(e){var t=_t(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);Ut(i,t.memoizedState)||(Xe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Av(){}function Rv(e,t){var n=xe,r=_t(),s=t(),i=!Ut(r.memoizedState,s);if(i&&(r.memoizedState=s,Xe=!0),r=r.queue,fd($v.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Wi(9,Dv.bind(null,n,r,s,t),void 0,null),Pe===null)throw Error(I(349));yr&30||Pv(n,t,s)}return s}function Pv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Dv(e,t,n,r){t.value=n,t.getSnapshot=r,Lv(t)&&Uv(e)}function $v(e,t,n){return n(function(){Lv(t)&&Uv(e)})}function Lv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ut(e,n)}catch{return!0}}function Uv(e){var t=un(e,1);t!==null&&Lt(t,e,1,-1)}function wp(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:e},t.queue=e,e=e.dispatch=tx.bind(null,xe,e),[t.memoizedState,e]}function Wi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xe.updateQueue,t===null?(t={lastEffect:null,stores:null},xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Mv(){return _t().memoizedState}function oo(e,t,n,r){var s=Kt();xe.flags|=e,s.memoizedState=Wi(1|t,n,void 0,r===void 0?null:r)}function qo(e,t,n,r){var s=_t();r=r===void 0?null:r;var i=void 0;if(Ie!==null){var l=Ie.memoizedState;if(i=l.destroy,r!==null&&ud(r,l.deps)){s.memoizedState=Wi(t,n,i,r);return}}xe.flags|=e,s.memoizedState=Wi(1|t,n,i,r)}function xp(e,t){return oo(8390656,8,e,t)}function fd(e,t){return qo(2048,8,e,t)}function Bv(e,t){return qo(4,2,e,t)}function zv(e,t){return qo(4,4,e,t)}function Fv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hv(e,t,n){return n=n!=null?n.concat([e]):null,qo(4,4,Fv.bind(null,t,e),n)}function pd(){}function Vv(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ud(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wv(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ud(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kv(e,t,n){return yr&21?(Ut(n,t)||(n=Ym(),xe.lanes|=n,wr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=n)}function Z0(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=hc.transition;hc.transition={};try{e(!1),t()}finally{re=n,hc.transition=r}}function qv(){return _t().memoizedState}function ex(e,t,n){var r=Bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gv(e))Jv(t,n);else if(n=Tv(e,t,n,r),n!==null){var s=qe();Lt(n,e,r,s),Qv(n,t,r)}}function tx(e,t,n){var r=Bn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gv(e))Jv(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,c=i(l,n);if(s.hasEagerState=!0,s.eagerState=c,Ut(c,l)){var u=t.interleaved;u===null?(s.next=s,id(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Tv(e,t,s,r),n!==null&&(s=qe(),Lt(n,e,r,s),Qv(n,t,r))}}function Gv(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Jv(e,t){Si=Io=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qv(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wu(e,n)}}var Oo={readContext:jt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},nx={readContext:jt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:xp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oo(4194308,4,Fv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ex.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:wp,useDebugValue:pd,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=wp(!1),t=e[0];return e=Z0.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xe,s=Kt();if(ve){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Pe===null)throw Error(I(349));yr&30||Pv(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,xp($v.bind(null,r,i,e),[e]),r.flags|=2048,Wi(9,Dv.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Kt(),t=Pe.identifierPrefix;if(ve){var n=an,r=sn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=X0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rx={readContext:jt,useCallback:Vv,useContext:jt,useEffect:fd,useImperativeHandle:Hv,useInsertionEffect:Bv,useLayoutEffect:zv,useMemo:Wv,useReducer:fc,useRef:Mv,useState:function(){return fc(Vi)},useDebugValue:pd,useDeferredValue:function(e){var t=_t();return Kv(t,Ie.memoizedState,e)},useTransition:function(){var e=fc(Vi)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Av,useSyncExternalStore:Rv,useId:qv,unstable_isNewReconciler:!1},sx={readContext:jt,useCallback:Vv,useContext:jt,useEffect:fd,useImperativeHandle:Hv,useInsertionEffect:Bv,useLayoutEffect:zv,useMemo:Wv,useReducer:pc,useRef:Mv,useState:function(){return pc(Vi)},useDebugValue:pd,useDeferredValue:function(e){var t=_t();return Ie===null?t.memoizedState=e:Kv(t,Ie.memoizedState,e)},useTransition:function(){var e=pc(Vi)[0],t=_t().memoizedState;return[e,t]},useMutableSource:Av,useSyncExternalStore:Rv,useId:qv,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function au(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Go={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qe(),s=Bn(e),i=on(r,s);i.payload=t,n!=null&&(i.callback=n),t=Un(e,i,s),t!==null&&(Lt(t,e,s,r),io(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qe(),s=Bn(e),i=on(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Un(e,i,s),t!==null&&(Lt(t,e,s,r),io(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),r=Bn(e),s=on(n,r);s.tag=2,t!=null&&(s.callback=t),t=Un(e,s,r),t!==null&&(Lt(t,e,r,n),io(t,e,r))}};function kp(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Li(n,r)||!Li(s,i):!0}function Yv(e,t,n){var r=!1,s=Hn,i=t.contextType;return typeof i=="object"&&i!==null?i=jt(i):(s=et(t)?vr:We.current,r=t.contextTypes,i=(r=r!=null)?ks(e,s):Hn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Go,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function jp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Go.enqueueReplaceState(t,t.state,null)}function ou(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ad(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=jt(i):(i=et(t)?vr:We.current,s.context=ks(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(au(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Go.enqueueReplaceState(s,s.state,null),Co(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function bs(e,t){try{var n="",r=t;do n+=Aw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function mc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ix=typeof WeakMap=="function"?WeakMap:Map;function Xv(e,t,n){n=on(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ro||(Ro=!0,yu=r),lu(e,t)},n}function Zv(e,t,n){n=on(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){lu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lu(e,t),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function _p(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ix;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=wx.bind(null,e,t,n),t.then(e,e))}function Sp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bp(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=on(-1,1),t.tag=2,Un(n,t,1))),n.lanes|=1),e)}var ax=hn.ReactCurrentOwner,Xe=!1;function Ke(e,t,n,r){t.child=e===null?Cv(t,null,n,r):_s(t,e.child,n,r)}function Np(e,t,n,r,s){n=n.render;var i=t.ref;return gs(t,s),r=dd(e,t,n,r,i,s),n=hd(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(ve&&n&&Zu(t),t.flags|=1,Ke(e,t,r,s),t.child)}function Ep(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!jd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,eg(e,t,i,r,s)):(e=ho(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Li,n(l,r)&&e.ref===t.ref)return dn(e,t,s)}return t.flags|=1,e=zn(i,r),e.ref=t.ref,e.return=t,t.child=e}function eg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Li(i,r)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,dn(e,t,s)}return cu(e,t,n,r,s)}function tg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(ds,at),at|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(ds,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,de(ds,at),at|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,de(ds,at),at|=r;return Ke(e,t,s,n),t.child}function ng(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cu(e,t,n,r,s){var i=et(n)?vr:We.current;return i=ks(t,i),gs(t,s),n=dd(e,t,n,r,i,s),r=hd(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,dn(e,t,s)):(ve&&r&&Zu(t),t.flags|=1,Ke(e,t,n,s),t.child)}function Cp(e,t,n,r,s){if(et(n)){var i=!0;_o(t)}else i=!1;if(gs(t,s),t.stateNode===null)lo(e,t),Yv(t,n,r),ou(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=jt(h):(h=et(n)?vr:We.current,h=ks(t,h));var p=n.getDerivedStateFromProps,x=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";x||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||u!==h)&&jp(t,l,r,h),En=!1;var g=t.memoizedState;l.state=g,Co(t,r,l,s),u=t.memoizedState,c!==r||g!==u||Ze.current||En?(typeof p=="function"&&(au(t,n,p,r),u=t.memoizedState),(c=En||kp(t,n,c,r,g,u,h))?(x||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),l.props=r,l.state=u,l.context=h,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Iv(e,t),c=t.memoizedProps,h=t.type===t.elementType?c:Ot(t.type,c),l.props=h,x=t.pendingProps,g=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=jt(u):(u=et(n)?vr:We.current,u=ks(t,u));var j=n.getDerivedStateFromProps;(p=typeof j=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==x||g!==u)&&jp(t,l,r,u),En=!1,g=t.memoizedState,l.state=g,Co(t,r,l,s);var v=t.memoizedState;c!==x||g!==v||Ze.current||En?(typeof j=="function"&&(au(t,n,j,r),v=t.memoizedState),(h=En||kp(t,n,h,r,g,v,u)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,v,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,v,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),l.props=r,l.state=v,l.context=u,r=h):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return uu(e,t,n,r,i,s)}function uu(e,t,n,r,s,i){ng(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&fp(t,n,!1),dn(e,t,i);r=t.stateNode,ax.current=t;var c=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=_s(t,e.child,null,i),t.child=_s(t,null,c,i)):Ke(e,t,c,i),t.memoizedState=r.state,s&&fp(t,n,!0),t.child}function rg(e){var t=e.stateNode;t.pendingContext?hp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hp(e,t.context,!1),od(e,t.containerInfo)}function Tp(e,t,n,r,s){return js(),td(s),t.flags|=256,Ke(e,t,n,r),t.child}var du={dehydrated:null,treeContext:null,retryLane:0};function hu(e){return{baseLanes:e,cachePool:null,transitions:null}}function sg(e,t,n){var r=t.pendingProps,s=we.current,i=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),de(we,s&1),e===null)return su(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Yo(l,r,0,null),e=mr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=hu(n),t.memoizedState=du,e):md(t,l));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return ox(e,t,l,r,c,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=zn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=zn(c,i):(i=mr(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?hu(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=du,r}return i=e.child,e=i.sibling,r=zn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function md(e,t){return t=Yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ka(e,t,n,r){return r!==null&&td(r),_s(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ox(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=mc(Error(I(422))),Ka(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Yo({mode:"visible",children:r.children},s,0,null),i=mr(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&_s(t,e.child,null,l),t.child.memoizedState=hu(l),t.memoizedState=du,i);if(!(t.mode&1))return Ka(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(I(419)),r=mc(i,r,void 0),Ka(e,t,l,r)}if(c=(l&e.childLanes)!==0,Xe||c){if(r=Pe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,un(e,s),Lt(r,e,s,-1))}return kd(),r=mc(Error(I(421))),Ka(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ct=Ln(s.nextSibling),ut=t,ve=!0,Dt=null,e!==null&&(yt[wt++]=sn,yt[wt++]=an,yt[wt++]=gr,sn=e.id,an=e.overflow,gr=t),t=md(t,r.children),t.flags|=4096,t)}function Ip(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),iu(e.return,t,n)}function vc(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ig(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ke(e,t,r.children,n),r=we.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ip(e,n,t);else if(e.tag===19)Ip(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(de(we,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&To(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),vc(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&To(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}vc(t,!0,n,null,i);break;case"together":vc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lx(e,t,n){switch(t.tag){case 3:rg(t),js();break;case 5:Ov(t);break;case 1:et(t.type)&&_o(t);break;case 4:od(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;de(No,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(de(we,we.current&1),t.flags|=128,null):n&t.child.childLanes?sg(e,t,n):(de(we,we.current&1),e=dn(e,t,n),e!==null?e.sibling:null);de(we,we.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ig(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),de(we,we.current),r)break;return null;case 22:case 23:return t.lanes=0,tg(e,t,n)}return dn(e,t,n)}var ag,fu,og,lg;ag=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fu=function(){};og=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,hr(Jt.current);var i=null;switch(n){case"input":s=Dc(e,s),r=Dc(e,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Uc(e,s),r=Uc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ko)}Bc(n,r);var l;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var c=s[h];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ii.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(c=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(u!=null||c!=null))if(h==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ii.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&fe("scroll",e),i||c===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};lg=function(e,t,n,r){n!==r&&(t.flags|=4)};function hi(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cx(e,t,n){var r=t.pendingProps;switch(ed(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return et(t.type)&&jo(),He(t),null;case 3:return r=t.stateNode,Ss(),pe(Ze),pe(We),cd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(ku(Dt),Dt=null))),fu(e,t),He(t),null;case 5:ld(t);var s=hr(Fi.current);if(n=t.type,e!==null&&t.stateNode!=null)og(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return He(t),null}if(e=hr(Jt.current),Va(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[qt]=t,r[Bi]=i,e=(t.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(s=0;s<gi.length;s++)fe(gi[s],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Mf(r,i),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},fe("invalid",r);break;case"textarea":zf(r,i),fe("invalid",r)}Bc(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var c=i[l];l==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,e),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,c,e),s=["children",""+c]):Ii.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&fe("scroll",r)}switch(n){case"input":Da(r),Bf(r,i,!0);break;case"textarea":Da(r),Ff(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ko)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$m(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[qt]=t,e[Bi]=r,ag(e,t,!1,!1),t.stateNode=e;e:{switch(l=zc(n,r),n){case"dialog":fe("cancel",e),fe("close",e),s=r;break;case"iframe":case"object":case"embed":fe("load",e),s=r;break;case"video":case"audio":for(s=0;s<gi.length;s++)fe(gi[s],e);s=r;break;case"source":fe("error",e),s=r;break;case"img":case"image":case"link":fe("error",e),fe("load",e),s=r;break;case"details":fe("toggle",e),s=r;break;case"input":Mf(e,r),s=Dc(e,r),fe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),fe("invalid",e);break;case"textarea":zf(e,r),s=Uc(e,r),fe("invalid",e);break;default:s=r}Bc(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Mm(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Lm(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Oi(e,u):typeof u=="number"&&Oi(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ii.hasOwnProperty(i)?u!=null&&i==="onScroll"&&fe("scroll",e):u!=null&&Mu(e,i,u,l))}switch(n){case"input":Da(e),Bf(e,r,!1);break;case"textarea":Da(e),Ff(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?fs(e,!!r.multiple,i,!1):r.defaultValue!=null&&fs(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ko)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return He(t),null;case 6:if(e&&t.stateNode!=null)lg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=hr(Fi.current),hr(Jt.current),Va(t)){if(r=t.stateNode,n=t.memoizedProps,r[qt]=t,(i=r.nodeValue!==n)&&(e=ut,e!==null))switch(e.tag){case 3:Ha(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ha(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=t,t.stateNode=r}return He(t),null;case 13:if(pe(we),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&ct!==null&&t.mode&1&&!(t.flags&128))Nv(),js(),t.flags|=98560,i=!1;else if(i=Va(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(I(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[qt]=t}else js(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;He(t),i=!1}else Dt!==null&&(ku(Dt),Dt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Oe===0&&(Oe=3):kd())),t.updateQueue!==null&&(t.flags|=4),He(t),null);case 4:return Ss(),fu(e,t),e===null&&Ui(t.stateNode.containerInfo),He(t),null;case 10:return sd(t.type._context),He(t),null;case 17:return et(t.type)&&jo(),He(t),null;case 19:if(pe(we),i=t.memoizedState,i===null)return He(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)hi(i,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=To(e),l!==null){for(t.flags|=128,hi(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return de(we,we.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>Ns&&(t.flags|=128,r=!0,hi(i,!1),t.lanes=4194304)}else{if(!r)if(e=To(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ve)return He(t),null}else 2*Se()-i.renderingStartTime>Ns&&n!==1073741824&&(t.flags|=128,r=!0,hi(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=we.current,de(we,r?n&1|2:n&1),t):(He(t),null);case 22:case 23:return xd(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?at&1073741824&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function ux(e,t){switch(ed(t),t.tag){case 1:return et(t.type)&&jo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ss(),pe(Ze),pe(We),cd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ld(t),null;case 13:if(pe(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(we),null;case 4:return Ss(),null;case 10:return sd(t.type._context),null;case 22:case 23:return xd(),null;case 24:return null;default:return null}}var qa=!1,Ve=!1,dx=typeof WeakSet=="function"?WeakSet:Set,L=null;function us(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function pu(e,t,n){try{n()}catch(r){_e(e,t,r)}}var Op=!1;function hx(e,t){if(Yc=yo,e=fv(),Xu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,c=-1,u=-1,h=0,p=0,x=e,g=null;t:for(;;){for(var j;x!==n||s!==0&&x.nodeType!==3||(c=l+s),x!==i||r!==0&&x.nodeType!==3||(u=l+r),x.nodeType===3&&(l+=x.nodeValue.length),(j=x.firstChild)!==null;)g=x,x=j;for(;;){if(x===e)break t;if(g===n&&++h===s&&(c=l),g===i&&++p===r&&(u=l),(j=x.nextSibling)!==null)break;x=g,g=x.parentNode}x=j}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xc={focusedElem:e,selectionRange:n},yo=!1,L=t;L!==null;)if(t=L,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,L=e;else for(;L!==null;){t=L;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,O=v.memoizedState,w=t.stateNode,m=w.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ot(t.type,b),O);w.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(N){_e(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,L=e;break}L=t.return}return v=Op,Op=!1,v}function bi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&pu(t,n,i)}s=s.next}while(s!==r)}}function Jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function mu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cg(e){var t=e.alternate;t!==null&&(e.alternate=null,cg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[Bi],delete t[tu],delete t[G0],delete t[J0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ug(e){return e.tag===5||e.tag===3||e.tag===4}function Ap(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ug(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function vu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ko));else if(r!==4&&(e=e.child,e!==null))for(vu(e,t,n),e=e.sibling;e!==null;)vu(e,t,n),e=e.sibling}function gu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(gu(e,t,n),e=e.sibling;e!==null;)gu(e,t,n),e=e.sibling}var Ue=null,Rt=!1;function Sn(e,t,n){for(n=n.child;n!==null;)dg(e,t,n),n=n.sibling}function dg(e,t,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(zo,n)}catch{}switch(n.tag){case 5:Ve||us(n,t);case 6:var r=Ue,s=Rt;Ue=null,Sn(e,t,n),Ue=r,Rt=s,Ue!==null&&(Rt?(e=Ue,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Rt?(e=Ue,n=n.stateNode,e.nodeType===8?cc(e.parentNode,n):e.nodeType===1&&cc(e,n),Di(e)):cc(Ue,n.stateNode));break;case 4:r=Ue,s=Rt,Ue=n.stateNode.containerInfo,Rt=!0,Sn(e,t,n),Ue=r,Rt=s;break;case 0:case 11:case 14:case 15:if(!Ve&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&pu(n,t,l),s=s.next}while(s!==r)}Sn(e,t,n);break;case 1:if(!Ve&&(us(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){_e(n,t,c)}Sn(e,t,n);break;case 21:Sn(e,t,n);break;case 22:n.mode&1?(Ve=(r=Ve)||n.memoizedState!==null,Sn(e,t,n),Ve=r):Sn(e,t,n);break;default:Sn(e,t,n)}}function Rp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dx),t.forEach(function(r){var s=kx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Tt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Ue=c.stateNode,Rt=!1;break e;case 3:Ue=c.stateNode.containerInfo,Rt=!0;break e;case 4:Ue=c.stateNode.containerInfo,Rt=!0;break e}c=c.return}if(Ue===null)throw Error(I(160));dg(i,l,s),Ue=null,Rt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){_e(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hg(t,e),t=t.sibling}function hg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Tt(t,e),Wt(e),r&4){try{bi(3,e,e.return),Jo(3,e)}catch(b){_e(e,e.return,b)}try{bi(5,e,e.return)}catch(b){_e(e,e.return,b)}}break;case 1:Tt(t,e),Wt(e),r&512&&n!==null&&us(n,n.return);break;case 5:if(Tt(t,e),Wt(e),r&512&&n!==null&&us(n,n.return),e.flags&32){var s=e.stateNode;try{Oi(s,"")}catch(b){_e(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Pm(s,i),zc(c,l);var h=zc(c,i);for(l=0;l<u.length;l+=2){var p=u[l],x=u[l+1];p==="style"?Mm(s,x):p==="dangerouslySetInnerHTML"?Lm(s,x):p==="children"?Oi(s,x):Mu(s,p,x,h)}switch(c){case"input":$c(s,i);break;case"textarea":Dm(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var j=i.value;j!=null?fs(s,!!i.multiple,j,!1):g!==!!i.multiple&&(i.defaultValue!=null?fs(s,!!i.multiple,i.defaultValue,!0):fs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Bi]=i}catch(b){_e(e,e.return,b)}}break;case 6:if(Tt(t,e),Wt(e),r&4){if(e.stateNode===null)throw Error(I(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){_e(e,e.return,b)}}break;case 3:if(Tt(t,e),Wt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Di(t.containerInfo)}catch(b){_e(e,e.return,b)}break;case 4:Tt(t,e),Wt(e);break;case 13:Tt(t,e),Wt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yd=Se())),r&4&&Rp(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Ve=(h=Ve)||p,Tt(t,e),Ve=h):Tt(t,e),Wt(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!p&&e.mode&1)for(L=e,p=e.child;p!==null;){for(x=L=p;L!==null;){switch(g=L,j=g.child,g.tag){case 0:case 11:case 14:case 15:bi(4,g,g.return);break;case 1:us(g,g.return);var v=g.stateNode;if(typeof v.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){_e(r,n,b)}}break;case 5:us(g,g.return);break;case 22:if(g.memoizedState!==null){Dp(x);continue}}j!==null?(j.return=g,L=j):Dp(x)}p=p.sibling}e:for(p=null,x=e;;){if(x.tag===5){if(p===null){p=x;try{s=x.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=x.stateNode,u=x.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Um("display",l))}catch(b){_e(e,e.return,b)}}}else if(x.tag===6){if(p===null)try{x.stateNode.nodeValue=h?"":x.memoizedProps}catch(b){_e(e,e.return,b)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;p===x&&(p=null),x=x.return}p===x&&(p=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Tt(t,e),Wt(e),r&4&&Rp(e);break;case 21:break;default:Tt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ug(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oi(s,""),r.flags&=-33);var i=Ap(e);gu(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,c=Ap(e);vu(e,c,l);break;default:throw Error(I(161))}}catch(u){_e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fx(e,t,n){L=e,fg(e)}function fg(e,t,n){for(var r=(e.mode&1)!==0;L!==null;){var s=L,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||qa;if(!l){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Ve;c=qa;var h=Ve;if(qa=l,(Ve=u)&&!h)for(L=s;L!==null;)l=L,u=l.child,l.tag===22&&l.memoizedState!==null?$p(s):u!==null?(u.return=l,L=u):$p(s);for(;i!==null;)L=i,fg(i),i=i.sibling;L=s,qa=c,Ve=h}Pp(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,L=i):Pp(e)}}function Pp(e){for(;L!==null;){var t=L;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||Jo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ve)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&yp(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yp(t,l,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var x=p.dehydrated;x!==null&&Di(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ve||t.flags&512&&mu(t)}catch(g){_e(t,t.return,g)}}if(t===e){L=null;break}if(n=t.sibling,n!==null){n.return=t.return,L=n;break}L=t.return}}function Dp(e){for(;L!==null;){var t=L;if(t===e){L=null;break}var n=t.sibling;if(n!==null){n.return=t.return,L=n;break}L=t.return}}function $p(e){for(;L!==null;){var t=L;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jo(4,t)}catch(u){_e(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){_e(t,s,u)}}var i=t.return;try{mu(t)}catch(u){_e(t,i,u)}break;case 5:var l=t.return;try{mu(t)}catch(u){_e(t,l,u)}}}catch(u){_e(t,t.return,u)}if(t===e){L=null;break}var c=t.sibling;if(c!==null){c.return=t.return,L=c;break}L=t.return}}var px=Math.ceil,Ao=hn.ReactCurrentDispatcher,vd=hn.ReactCurrentOwner,kt=hn.ReactCurrentBatchConfig,Y=0,Pe=null,Ce=null,Me=0,at=0,ds=Wn(0),Oe=0,Ki=null,wr=0,Qo=0,gd=0,Ni=null,Ye=null,yd=0,Ns=1/0,tn=null,Ro=!1,yu=null,Mn=null,Ga=!1,Rn=null,Po=0,Ei=0,wu=null,co=-1,uo=0;function qe(){return Y&6?Se():co!==-1?co:co=Se()}function Bn(e){return e.mode&1?Y&2&&Me!==0?Me&-Me:Y0.transition!==null?(uo===0&&(uo=Ym()),uo):(e=re,e!==0||(e=window.event,e=e===void 0?16:sv(e.type)),e):1}function Lt(e,t,n,r){if(50<Ei)throw Ei=0,wu=null,Error(I(185));ea(e,n,r),(!(Y&2)||e!==Pe)&&(e===Pe&&(!(Y&2)&&(Qo|=n),Oe===4&&In(e,Me)),tt(e,r),n===1&&Y===0&&!(t.mode&1)&&(Ns=Se()+500,Ko&&Kn()))}function tt(e,t){var n=e.callbackNode;Yw(e,t);var r=go(e,e===Pe?Me:0);if(r===0)n!==null&&Wf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Wf(n),t===1)e.tag===0?Q0(Lp.bind(null,e)):_v(Lp.bind(null,e)),K0(function(){!(Y&6)&&Kn()}),n=null;else{switch(Xm(r)){case 1:n=Vu;break;case 4:n=Jm;break;case 16:n=vo;break;case 536870912:n=Qm;break;default:n=vo}n=kg(n,pg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function pg(e,t){if(co=-1,uo=0,Y&6)throw Error(I(327));var n=e.callbackNode;if(ys()&&e.callbackNode!==n)return null;var r=go(e,e===Pe?Me:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Do(e,r);else{t=r;var s=Y;Y|=2;var i=vg();(Pe!==e||Me!==t)&&(tn=null,Ns=Se()+500,pr(e,t));do try{gx();break}catch(c){mg(e,c)}while(!0);rd(),Ao.current=i,Y=s,Ce!==null?t=0:(Pe=null,Me=0,t=Oe)}if(t!==0){if(t===2&&(s=Kc(e),s!==0&&(r=s,t=xu(e,s))),t===1)throw n=Ki,pr(e,0),In(e,r),tt(e,Se()),n;if(t===6)In(e,r);else{if(s=e.current.alternate,!(r&30)&&!mx(s)&&(t=Do(e,r),t===2&&(i=Kc(e),i!==0&&(r=i,t=xu(e,i))),t===1))throw n=Ki,pr(e,0),In(e,r),tt(e,Se()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:ar(e,Ye,tn);break;case 3:if(In(e,r),(r&130023424)===r&&(t=yd+500-Se(),10<t)){if(go(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=eu(ar.bind(null,e,Ye,tn),t);break}ar(e,Ye,tn);break;case 4:if(In(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-$t(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*px(r/1960))-r,10<r){e.timeoutHandle=eu(ar.bind(null,e,Ye,tn),r);break}ar(e,Ye,tn);break;case 5:ar(e,Ye,tn);break;default:throw Error(I(329))}}}return tt(e,Se()),e.callbackNode===n?pg.bind(null,e):null}function xu(e,t){var n=Ni;return e.current.memoizedState.isDehydrated&&(pr(e,t).flags|=256),e=Do(e,t),e!==2&&(t=Ye,Ye=n,t!==null&&ku(t)),e}function ku(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function mx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ut(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t){for(t&=~gd,t&=~Qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$t(t),r=1<<n;e[n]=-1,t&=~r}}function Lp(e){if(Y&6)throw Error(I(327));ys();var t=go(e,0);if(!(t&1))return tt(e,Se()),null;var n=Do(e,t);if(e.tag!==0&&n===2){var r=Kc(e);r!==0&&(t=r,n=xu(e,r))}if(n===1)throw n=Ki,pr(e,0),In(e,t),tt(e,Se()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,Ye,tn),tt(e,Se()),null}function wd(e,t){var n=Y;Y|=1;try{return e(t)}finally{Y=n,Y===0&&(Ns=Se()+500,Ko&&Kn())}}function xr(e){Rn!==null&&Rn.tag===0&&!(Y&6)&&ys();var t=Y;Y|=1;var n=kt.transition,r=re;try{if(kt.transition=null,re=1,e)return e()}finally{re=r,kt.transition=n,Y=t,!(Y&6)&&Kn()}}function xd(){at=ds.current,pe(ds)}function pr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,W0(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(ed(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&jo();break;case 3:Ss(),pe(Ze),pe(We),cd();break;case 5:ld(r);break;case 4:Ss();break;case 13:pe(we);break;case 19:pe(we);break;case 10:sd(r.type._context);break;case 22:case 23:xd()}n=n.return}if(Pe=e,Ce=e=zn(e.current,null),Me=at=t,Oe=0,Ki=null,gd=Qo=wr=0,Ye=Ni=null,dr!==null){for(t=0;t<dr.length;t++)if(n=dr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}dr=null}return e}function mg(e,t){do{var n=Ce;try{if(rd(),ao.current=Oo,Io){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Io=!1}if(yr=0,Re=Ie=xe=null,Si=!1,Hi=0,vd.current=null,n===null||n.return===null){Oe=1,Ki=t,Ce=null;break}e:{var i=e,l=n.return,c=n,u=t;if(t=Me,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=c,x=p.tag;if(!(p.mode&1)&&(x===0||x===11||x===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var j=Sp(l);if(j!==null){j.flags&=-257,bp(j,l,c,i,t),j.mode&1&&_p(i,h,t),t=j,u=h;var v=t.updateQueue;if(v===null){var b=new Set;b.add(u),t.updateQueue=b}else v.add(u);break e}else{if(!(t&1)){_p(i,h,t),kd();break e}u=Error(I(426))}}else if(ve&&c.mode&1){var O=Sp(l);if(O!==null){!(O.flags&65536)&&(O.flags|=256),bp(O,l,c,i,t),td(bs(u,c));break e}}i=u=bs(u,c),Oe!==4&&(Oe=2),Ni===null?Ni=[i]:Ni.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=Xv(i,u,t);gp(i,w);break e;case 1:c=u;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Mn===null||!Mn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Zv(i,c,t);gp(i,N);break e}}i=i.return}while(i!==null)}yg(n)}catch(A){t=A,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function vg(){var e=Ao.current;return Ao.current=Oo,e===null?Oo:e}function kd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Pe===null||!(wr&268435455)&&!(Qo&268435455)||In(Pe,Me)}function Do(e,t){var n=Y;Y|=2;var r=vg();(Pe!==e||Me!==t)&&(tn=null,pr(e,t));do try{vx();break}catch(s){mg(e,s)}while(!0);if(rd(),Y=n,Ao.current=r,Ce!==null)throw Error(I(261));return Pe=null,Me=0,Oe}function vx(){for(;Ce!==null;)gg(Ce)}function gx(){for(;Ce!==null&&!Fw();)gg(Ce)}function gg(e){var t=xg(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?yg(e):Ce=t,vd.current=null}function yg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ux(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ce=null;return}}else if(n=cx(n,t,at),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Oe===0&&(Oe=5)}function ar(e,t,n){var r=re,s=kt.transition;try{kt.transition=null,re=1,yx(e,t,n,r)}finally{kt.transition=s,re=r}return null}function yx(e,t,n,r){do ys();while(Rn!==null);if(Y&6)throw Error(I(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Xw(e,i),e===Pe&&(Ce=Pe=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,kg(vo,function(){return ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kt.transition,kt.transition=null;var l=re;re=1;var c=Y;Y|=4,vd.current=null,hx(e,n),hg(n,e),U0(Xc),yo=!!Yc,Xc=Yc=null,e.current=n,fx(n),Hw(),Y=c,re=l,kt.transition=i}else e.current=n;if(Ga&&(Ga=!1,Rn=e,Po=s),i=e.pendingLanes,i===0&&(Mn=null),Kw(n.stateNode),tt(e,Se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ro)throw Ro=!1,e=yu,yu=null,e;return Po&1&&e.tag!==0&&ys(),i=e.pendingLanes,i&1?e===wu?Ei++:(Ei=0,wu=e):Ei=0,Kn(),null}function ys(){if(Rn!==null){var e=Xm(Po),t=kt.transition,n=re;try{if(kt.transition=null,re=16>e?16:e,Rn===null)var r=!1;else{if(e=Rn,Rn=null,Po=0,Y&6)throw Error(I(331));var s=Y;for(Y|=4,L=e.current;L!==null;){var i=L,l=i.child;if(L.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var h=c[u];for(L=h;L!==null;){var p=L;switch(p.tag){case 0:case 11:case 15:bi(8,p,i)}var x=p.child;if(x!==null)x.return=p,L=x;else for(;L!==null;){p=L;var g=p.sibling,j=p.return;if(cg(p),p===h){L=null;break}if(g!==null){g.return=j,L=g;break}L=j}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var O=b.sibling;b.sibling=null,b=O}while(b!==null)}}L=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,L=l;else e:for(;L!==null;){if(i=L,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bi(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,L=w;break e}L=i.return}}var m=e.current;for(L=m;L!==null;){l=L;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,L=y;else e:for(l=m;L!==null;){if(c=L,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Jo(9,c)}}catch(A){_e(c,c.return,A)}if(c===l){L=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,L=N;break e}L=c.return}}if(Y=s,Kn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(zo,e)}catch{}r=!0}return r}finally{re=n,kt.transition=t}}return!1}function Up(e,t,n){t=bs(n,t),t=Xv(e,t,1),e=Un(e,t,1),t=qe(),e!==null&&(ea(e,1,t),tt(e,t))}function _e(e,t,n){if(e.tag===3)Up(e,e,n);else for(;t!==null;){if(t.tag===3){Up(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){e=bs(n,e),e=Zv(t,e,1),t=Un(t,e,1),e=qe(),t!==null&&(ea(t,1,e),tt(t,e));break}}t=t.return}}function wx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(Me&n)===n&&(Oe===4||Oe===3&&(Me&130023424)===Me&&500>Se()-yd?pr(e,0):gd|=n),tt(e,t)}function wg(e,t){t===0&&(e.mode&1?(t=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):t=1);var n=qe();e=un(e,t),e!==null&&(ea(e,t,n),tt(e,n))}function xx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wg(e,n)}function kx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),wg(e,n)}var xg;xg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Xe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Xe=!1,lx(e,t,n);Xe=!!(e.flags&131072)}else Xe=!1,ve&&t.flags&1048576&&Sv(t,bo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;lo(e,t),e=t.pendingProps;var s=ks(t,We.current);gs(t,n),s=dd(null,t,r,e,s,n);var i=hd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(r)?(i=!0,_o(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ad(t),s.updater=Go,t.stateNode=s,s._reactInternals=t,ou(t,r,e,n),t=uu(null,t,r,!0,i,n)):(t.tag=0,ve&&i&&Zu(t),Ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(lo(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=_x(r),e=Ot(r,e),s){case 0:t=cu(null,t,r,e,n);break e;case 1:t=Cp(null,t,r,e,n);break e;case 11:t=Np(null,t,r,e,n);break e;case 14:t=Ep(null,t,r,Ot(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),cu(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Cp(e,t,r,s,n);case 3:e:{if(rg(t),e===null)throw Error(I(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Iv(e,t),Co(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=bs(Error(I(423)),t),t=Tp(e,t,r,n,s);break e}else if(r!==s){s=bs(Error(I(424)),t),t=Tp(e,t,r,n,s);break e}else for(ct=Ln(t.stateNode.containerInfo.firstChild),ut=t,ve=!0,Dt=null,n=Cv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(js(),r===s){t=dn(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return Ov(t),e===null&&su(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,Zc(r,s)?l=null:i!==null&&Zc(r,i)&&(t.flags|=32),ng(e,t),Ke(e,t,l,n),t.child;case 6:return e===null&&su(t),null;case 13:return sg(e,t,n);case 4:return od(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=_s(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Np(e,t,r,s,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,de(No,r._currentValue),r._currentValue=l,i!==null)if(Ut(i.value,l)){if(i.children===s.children&&!Ze.current){t=dn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){l=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=on(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),iu(i.return,n,t),c.lanes|=n;break}u=u.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(I(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),iu(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,gs(t,n),s=jt(s),r=r(s),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,s=Ot(r,t.pendingProps),s=Ot(r.type,s),Ep(e,t,r,s,n);case 15:return eg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),lo(e,t),t.tag=1,et(r)?(e=!0,_o(t)):e=!1,gs(t,n),Yv(t,r,s),ou(t,r,s,n),uu(null,t,r,!0,e,n);case 19:return ig(e,t,n);case 22:return tg(e,t,n)}throw Error(I(156,t.tag))};function kg(e,t){return Gm(e,t)}function jx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,n,r){return new jx(e,t,n,r)}function jd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _x(e){if(typeof e=="function")return jd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zu)return 11;if(e===Fu)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=xt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ho(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")jd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ts:return mr(n.children,s,i,t);case Bu:l=8,s|=8;break;case Oc:return e=xt(12,n,t,s|2),e.elementType=Oc,e.lanes=i,e;case Ac:return e=xt(13,n,t,s),e.elementType=Ac,e.lanes=i,e;case Rc:return e=xt(19,n,t,s),e.elementType=Rc,e.lanes=i,e;case Om:return Yo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tm:l=10;break e;case Im:l=9;break e;case zu:l=11;break e;case Fu:l=14;break e;case Nn:l=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=xt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function mr(e,t,n,r){return e=xt(7,e,r,t),e.lanes=n,e}function Yo(e,t,n,r){return e=xt(22,e,r,t),e.elementType=Om,e.lanes=n,e.stateNode={isHidden:!1},e}function gc(e,t,n){return e=xt(6,e,null,t),e.lanes=n,e}function yc(e,t,n){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _d(e,t,n,r,s,i,l,c,u){return e=new Sx(e,t,n,c,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ad(i),e}function bx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jg(e){if(!e)return Hn;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(et(n))return jv(e,n,t)}return t}function _g(e,t,n,r,s,i,l,c,u){return e=_d(n,r,!0,e,s,i,l,c,u),e.context=jg(null),n=e.current,r=qe(),s=Bn(n),i=on(r,s),i.callback=t??null,Un(n,i,s),e.current.lanes=s,ea(e,s,r),tt(e,r),e}function Xo(e,t,n,r){var s=t.current,i=qe(),l=Bn(s);return n=jg(n),t.context===null?t.context=n:t.pendingContext=n,t=on(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Un(s,t,l),e!==null&&(Lt(e,s,l,i),io(e,s,l)),l}function $o(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Sd(e,t){Mp(e,t),(e=e.alternate)&&Mp(e,t)}function Nx(){return null}var Sg=typeof reportError=="function"?reportError:function(e){console.error(e)};function bd(e){this._internalRoot=e}Zo.prototype.render=bd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Xo(e,t,null,null)};Zo.prototype.unmount=bd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){Xo(null,e,null,null)}),t[cn]=null}};function Zo(e){this._internalRoot=e}Zo.prototype.unstable_scheduleHydration=function(e){if(e){var t=tv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tn.length&&t!==0&&t<Tn[n].priority;n++);Tn.splice(n,0,e),n===0&&rv(e)}};function Nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bp(){}function Ex(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=$o(l);i.call(h)}}var l=_g(t,r,e,0,null,!1,!1,"",Bp);return e._reactRootContainer=l,e[cn]=l.current,Ui(e.nodeType===8?e.parentNode:e),xr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var h=$o(u);c.call(h)}}var u=_d(e,0,!1,null,null,!1,!1,"",Bp);return e._reactRootContainer=u,e[cn]=u.current,Ui(e.nodeType===8?e.parentNode:e),xr(function(){Xo(t,u,n,r)}),u}function tl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var c=s;s=function(){var u=$o(l);c.call(u)}}Xo(t,l,e,s)}else l=Ex(n,t,e,s,r);return $o(l)}Zm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vi(t.pendingLanes);n!==0&&(Wu(t,n|1),tt(t,Se()),!(Y&6)&&(Ns=Se()+500,Kn()))}break;case 13:xr(function(){var r=un(e,1);if(r!==null){var s=qe();Lt(r,e,1,s)}}),Sd(e,1)}};Ku=function(e){if(e.tag===13){var t=un(e,134217728);if(t!==null){var n=qe();Lt(t,e,134217728,n)}Sd(e,134217728)}};ev=function(e){if(e.tag===13){var t=Bn(e),n=un(e,t);if(n!==null){var r=qe();Lt(n,e,t,r)}Sd(e,t)}};tv=function(){return re};nv=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};Hc=function(e,t,n){switch(t){case"input":if($c(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Wo(r);if(!s)throw Error(I(90));Rm(r),$c(r,s)}}}break;case"textarea":Dm(e,n);break;case"select":t=n.value,t!=null&&fs(e,!!n.multiple,t,!1)}};Fm=wd;Hm=xr;var Cx={usingClientEntryPoint:!1,Events:[na,is,Wo,Bm,zm,wd]},fi={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:fi.bundleType,version:fi.version,rendererPackageName:fi.rendererPackageName,rendererConfig:fi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Km(e),e===null?null:e.stateNode},findFiberByHostInstance:fi.findFiberByHostInstance||Nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{zo=Ja.inject(Tx),Gt=Ja}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cx;ht.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(t))throw Error(I(200));return bx(e,t,null,n)};ht.createRoot=function(e,t){if(!Nd(e))throw Error(I(299));var n=!1,r="",s=Sg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_d(e,1,!1,null,null,n,!1,r,s),e[cn]=t.current,Ui(e.nodeType===8?e.parentNode:e),new bd(t)};ht.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Km(t),e=e===null?null:e.stateNode,e};ht.flushSync=function(e){return xr(e)};ht.hydrate=function(e,t,n){if(!el(t))throw Error(I(200));return tl(null,e,t,!0,n)};ht.hydrateRoot=function(e,t,n){if(!Nd(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=Sg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=_g(t,null,e,1,n??null,s,!1,i,l),e[cn]=t.current,Ui(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zo(t)};ht.render=function(e,t,n){if(!el(t))throw Error(I(200));return tl(null,e,t,!1,n)};ht.unmountComponentAtNode=function(e){if(!el(e))throw Error(I(40));return e._reactRootContainer?(xr(function(){tl(null,null,e,!1,function(){e._reactRootContainer=null,e[cn]=null})}),!0):!1};ht.unstable_batchedUpdates=wd;ht.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!el(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return tl(e,t,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function bg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bg)}catch(e){console.error(e)}}bg(),bm.exports=ht;var Ix=bm.exports,zp=Ix;Tc.createRoot=zp.createRoot,Tc.hydrateRoot=zp.hydrateRoot;var gt;(function(e){e.BACKLOG="BACKLOG",e.TODO="TODO",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.BLOCKED="BLOCKED",e.ARCHIVED="ARCHIVED"})(gt||(gt={}));var Fp;(function(e){e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e.CRITICAL="CRITICAL"})(Fp||(Fp={}));var Hp;(function(e){e.TASK_CREATE="TASK_CREATE",e.TASK_UPDATE="TASK_UPDATE",e.TASK_DELETE="TASK_DELETE",e.POLICY_EVALUATE="POLICY_EVALUATE",e.ACCESS_DENIED="ACCESS_DENIED"})(Hp||(Hp={}));var Vp;(function(e){e.USER="USER",e.SERVICE="SERVICE",e.INTEGRATION="INTEGRATION"})(Vp||(Vp={}));function nl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Ox(e,t,n,r){function s(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function c(p){try{h(r.next(p))}catch(x){l(x)}}function u(p){try{h(r.throw(p))}catch(x){l(x)}}function h(p){p.done?i(p.value):s(p.value).then(c,u)}h((r=r.apply(e,t||[])).next())})}const Ax=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Ed extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Rx extends Ed{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Wp extends Ed{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Kp extends Ed{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ju;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ju||(ju={}));class Px{constructor(t,{headers:n={},customFetch:r,region:s=ju.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Ax(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ox(this,arguments,void 0,function*(n,r={}){var s;let i,l;try{const{headers:c,method:u,body:h,signal:p,timeout:x}=r;let g={},{region:j}=r;j||(j=this.region);const v=new URL(`${this.url}/${n}`);j&&j!=="any"&&(g["x-region"]=j,v.searchParams.set("forceFunctionRegion",j));let b;h&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",b=h):typeof h=="string"?(g["Content-Type"]="text/plain",b=h):typeof FormData<"u"&&h instanceof FormData?b=h:(g["Content-Type"]="application/json",b=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?b=JSON.stringify(h):b=h;let O=p;x&&(l=new AbortController,i=setTimeout(()=>l.abort(),x),p?(O=l.signal,p.addEventListener("abort",()=>l.abort())):O=l.signal);const w=yield this.fetch(v.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),c),body:b,signal:O}).catch(A=>{throw new Rx(A)}),m=w.headers.get("x-relay-error");if(m&&m==="true")throw new Wp(w);if(!w.ok)throw new Kp(w);let y=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield w.json():y==="application/octet-stream"||y==="application/pdf"?N=yield w.blob():y==="text/event-stream"?N=w:y==="multipart/form-data"?N=yield w.formData():N=yield w.text(),{data:N,error:null,response:w}}catch(c){return{data:null,error:c,response:c instanceof Kp||c instanceof Wp?c.context:void 0}}finally{i&&clearTimeout(i)}})}}var Dx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},$x=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let l=null,c=null,u=null,h=i.status,p=i.statusText;if(i.ok){var x,g;if(n.method!=="HEAD"){var j;const w=await i.text();w===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((j=n.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?c=w:c=JSON.parse(w))}const b=(x=n.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),O=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");b&&O&&O.length>1&&(u=parseInt(O[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,u=null,h=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var v;const b=await i.text();try{l=JSON.parse(b),Array.isArray(l)&&i.status===404&&(c=[],l=null,h=200,p="OK")}catch{i.status===404&&b===""?(h=204,p="No Content"):l={message:b}}if(l&&n.isMaybeSingle&&(!(l==null||(v=l.details)===null||v===void 0)&&v.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new Dx(l)}return{error:l,data:c,count:u,status:h,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var l;let c="";const u=i==null?void 0:i.cause;if(u){var h,p,x,g;const v=(h=u==null?void 0:u.message)!==null&&h!==void 0?h:"",b=(p=u==null?void 0:u.code)!==null&&p!==void 0?p:"";c=`${(x=i==null?void 0:i.name)!==null&&x!==void 0?x:"FetchError"}: ${i==null?void 0:i.message}`,c+=`

Caused by: ${(g=u==null?void 0:u.name)!==null&&g!==void 0?g:"Error"}: ${v}`,b&&(c+=` (${b})`),u!=null&&u.stack&&(c+=`
${u.stack}`)}else{var j;c=(j=i==null?void 0:i.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},Lx=class extends $x{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const qp=new RegExp("[,()]");var Yr=class extends Lx{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&qp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&qp.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},Ux=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(h=>/\s/.test(h)&&!i?"":(h==='"'&&(i=!i),h)).join(""),{url:c,headers:u}=this.cloneRequestState();return c.searchParams.set("select",l),r&&u.append("Prefer",`count=${r}`),new Yr({method:s,url:c,headers:u,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:l}=this.cloneRequestState();if(t&&l.append("Prefer",`count=${t}`),n||l.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);i.searchParams.set("columns",u.join(","))}}return new Yr({method:s,url:i,headers:l,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const l="POST",{url:c,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&c.searchParams.set("on_conflict",t),r&&u.append("Prefer",`count=${r}`),s||u.append("Prefer","missing=default"),Array.isArray(e)){const h=e.reduce((p,x)=>p.concat(Object.keys(x)),[]);if(h.length>0){const p=[...new Set(h)].map(x=>`"${x}"`);c.searchParams.set("columns",p.join(","))}}return new Yr({method:l,url:c,headers:u,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Yr({method:r,url:s,headers:i,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new Yr({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Mx=class Ng{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Ux(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ng(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){var l;let c;const u=new URL(`${this.url}/rpc/${t}`);let h;const p=j=>j!==null&&typeof j=="object"&&(!Array.isArray(j)||j.some(p)),x=r&&Object.values(n).some(p);x?(c="POST",h=n):r||s?(c=r?"HEAD":"GET",Object.entries(n).filter(([j,v])=>v!==void 0).map(([j,v])=>[j,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([j,v])=>{u.searchParams.append(j,v)})):(c="POST",h=n);const g=new Headers(this.headers);return x?g.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&g.set("Prefer",`count=${i}`),new Yr({method:c,url:u,headers:g,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class Bx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const zx="2.91.0",Fx=`realtime-js/${zx}`,Hx="1.0.0",Eg="2.0.0",Gp=Eg,_u=1e4,Vx=1e3,Wx=100;var Cn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Cn||(Cn={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var Pt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pt||(Pt={}));var Su;(function(e){e.websocket="websocket"})(Su||(Su={}));var lr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(lr||(lr={}));class Kx{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,r){var s,i;const l=t.topic,c=(s=t.ref)!==null&&s!==void 0?s:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(p).length===0?"":JSON.stringify(p);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+c.length+l.length+h.length+x.length,j=new ArrayBuffer(this.HEADER_LENGTH+g);let v=new DataView(j),b=0;v.setUint8(b++,this.KINDS.userBroadcastPush),v.setUint8(b++,u.length),v.setUint8(b++,c.length),v.setUint8(b++,l.length),v.setUint8(b++,h.length),v.setUint8(b++,x.length),v.setUint8(b++,n),Array.from(u,w=>v.setUint8(b++,w.charCodeAt(0))),Array.from(c,w=>v.setUint8(b++,w.charCodeAt(0))),Array.from(l,w=>v.setUint8(b++,w.charCodeAt(0))),Array.from(h,w=>v.setUint8(b++,w.charCodeAt(0))),Array.from(x,w=>v.setUint8(b++,w.charCodeAt(0)));var O=new Uint8Array(j.byteLength+r.byteLength);return O.set(new Uint8Array(j),0),O.set(new Uint8Array(r),j.byteLength),O.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,i,l,c,u]=r;return n({join_ref:s,ref:i,topic:l,event:c,payload:u})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3),c=n.getUint8(4);let u=this.HEADER_LENGTH+4;const h=r.decode(t.slice(u,u+s));u=u+s;const p=r.decode(t.slice(u,u+i));u=u+i;const x=r.decode(t.slice(u,u+l));u=u+l;const g=t.slice(u,t.byteLength),j=c===this.JSON_ENCODING?JSON.parse(r.decode(g)):g,v={type:this.BROADCAST_EVENT,event:p,payload:j};return l>0&&(v.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Cg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ue||(ue={}));const Jp=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=qx(l,e,t,s),i),{}):{}},qx=(e,t,n,r)=>{const s=t.find(c=>c.name===e),i=s==null?void 0:s.type,l=n[e];return i&&!r.includes(i)?Tg(i,l):bu(l)},Tg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Yx(t,n)}switch(e){case ue.bool:return Gx(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return Jx(t);case ue.json:case ue.jsonb:return Qx(t);case ue.timestamp:return Xx(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return bu(t);default:return bu(t)}},bu=e=>e,Gx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Jx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Qx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Yx=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const l=e.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(c=>Tg(t,c))}return e},Xx=e=>typeof e=="string"?e.replace(" ","T"):e,Ig=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class wc{constructor(t,n,r={},s=_u){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Qp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Qp||(Qp={}));class Ci{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ci.syncState(this.state,s,i,l),this.pendingDiffs.forEach(u=>{this.state=Ci.syncDiff(this.state,u,i,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ci.syncDiff(this.state,s,i,l),c())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),l=this.transformState(n),c={},u={};return this.map(i,(h,p)=>{l[h]||(u[h]=p)}),this.map(l,(h,p)=>{const x=i[h];if(x){const g=p.map(O=>O.presence_ref),j=x.map(O=>O.presence_ref),v=p.filter(O=>j.indexOf(O.presence_ref)<0),b=x.filter(O=>g.indexOf(O.presence_ref)<0);v.length>0&&(c[h]=v),b.length>0&&(u[h]=b)}else c[h]=p}),this.syncDiff(i,{joins:c,leaves:u},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(c,u)=>{var h;const p=(h=t[c])!==null&&h!==void 0?h:[];if(t[c]=this.cloneDeep(u),p.length>0){const x=t[c].map(j=>j.presence_ref),g=p.filter(j=>x.indexOf(j.presence_ref)<0);t[c].unshift(...g)}r(c,p,u)}),this.map(l,(c,u)=>{let h=t[c];if(!h)return;const p=u.map(x=>x.presence_ref);h=h.filter(x=>p.indexOf(x.presence_ref)<0),t[c]=h,s(c,h,u),h.length===0&&delete t[c]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Yp||(Yp={}));var Ti;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ti||(Ti={}));var nn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(nn||(nn={}));class hs{constructor(t,n={config:{}},r){var s,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wc(this,Pt.join,this.params,this.timeout),this.rejoinTimer=new Cg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pt.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ci(this),this.broadcastEndpointURL=Ig(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:l,presence:c,private:u}}=this.params,h=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(j=>j.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[Ti.PRESENCE]&&this.bindings[Ti.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,x={},g={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:p}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(j=>t==null?void 0:t(nn.CHANNEL_ERROR,j)),this._onClose(()=>t==null?void 0:t(nn.CLOSED)),this.updateJoinPayload(Object.assign({config:g},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:j})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){t==null||t(nn.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,O=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,w=[];for(let m=0;m<O;m++){const y=b[m],{filter:{event:N,schema:A,table:T,filter:R}}=y,U=j&&j[m];if(U&&U.event===N&&hs.isFilterValueEqual(U.schema,A)&&hs.isFilterValueEqual(U.table,T)&&hs.isFilterValueEqual(U.filter,R))w.push(Object.assign(Object.assign({},y),{id:U.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(nn.SUBSCRIBED);return}}).receive("error",j=>{this.state=Te.errored,t==null||t(nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Te.joined&&t===Ti.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let u=c.statusText;try{const h=await c.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,c,u;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new wc(this,Pt.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),l}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wc(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Wx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const l=t.toLocaleLowerCase(),{close:c,error:u,leave:h,join:p}=Pt;if(r&&[c,u,h,p].indexOf(l)>=0&&r!==this._joinRef())return;let g=this._onMessage(l,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(j=>{var v,b,O;return((v=j.filter)===null||v===void 0?void 0:v.event)==="*"||((O=(b=j.filter)===null||b===void 0?void 0:b.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===l}).map(j=>j.callback(g,r)):(i=this.bindings[l])===null||i===void 0||i.filter(j=>{var v,b,O,w,m,y,N,A;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in j){const T=j.id,R=(v=j.filter)===null||v===void 0?void 0:v.event;return T&&((b=n.ids)===null||b===void 0?void 0:b.includes(T))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))&&(!(!((w=j.filter)===null||w===void 0)&&w.table)||j.filter.table===((m=n.data)===null||m===void 0?void 0:m.table))}else{const T=(N=(y=j==null?void 0:j.filter)===null||y===void 0?void 0:y.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return T==="*"||T===((A=n==null?void 0:n.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===l}).map(j=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:b,table:O,commit_timestamp:w,type:m,errors:y}=v;g=Object.assign(Object.assign({},{schema:b,table:O,commit_timestamp:w,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(v))}j.callback(g,r)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&hs.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pt.close,{},t)}_onError(t){this._on(Pt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Jp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Jp(t.columns,t.old_record)),n}}const xc=()=>{},Qa={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Zx=[1e3,2e3,5e3,1e4],ek=1e4,tk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nk{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=Qa.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xc,this.ref=0,this.reconnectTimer=null,this.vsn=Gp,this.logger=xc,this.conn=null,this.sendBuffer=[],this.serializer=new Kx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Su.websocket}`,this.httpEndpoint=Ig(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return lr.Connecting;case Cn.open:return lr.Open;case Cn.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new hs(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,l=()=>{this.encode(t,c=>{var u;(u=this.conn)===null||u===void 0||u.send(c)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Vx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qa.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:l}=n,c=l?`(${l})`:"",u=i.status||"";this.log("receive",`${u} ${r} ${s} ${c}`.trim(),i),this.channels.filter(h=>h._isMember(r)).forEach(h=>h._trigger(s,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Cn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cn.open||this.conn.readyState===Cn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([tk],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:Fx};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Pt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Cg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qa.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,i,l,c,u,h,p,x,g,j;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:_u,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qa.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:xc,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:Gp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:v=>Zx[v-1]||ek,this.vsn){case Hx:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(v,b)=>b(JSON.stringify(v)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:(v,b)=>b(JSON.parse(v));break;case Eg:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(j=t==null?void 0:t.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var qi=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function rk(e,t,n){const r=new URL(t,e);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function sk(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ik(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:l}){const c=rk(e.baseUrl,r,s),u=await sk(e.auth),h=await t(c,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...u,...l},body:i?JSON.stringify(i):void 0}),p=await h.text(),x=(h.headers.get("content-type")||"").includes("application/json"),g=x&&p?JSON.parse(p):p;if(!h.ok){const j=x?g:void 0,v=j==null?void 0:j.error;throw new qi((v==null?void 0:v.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:j})}return{status:h.status,headers:h.headers,data:g}}}}function Ya(e){return e.join("")}var ak=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Ya(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ya(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ya(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ya(e.namespace)}`}),!0}catch(t){if(t instanceof qi&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof qi&&n.status===409)return;throw n}}};function Wr(e){return e.join("")}var ok=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof qi&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof qi&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},lk=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ik({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new ak(this.client,t),this.tableOps=new ok(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},rl=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ye(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var ck=class extends rl{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Nu=class extends rl{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Cd=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),uk=()=>Response,Eu=e=>{if(Array.isArray(e))return e.map(n=>Eu(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Eu(r)}),t},dk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hk=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Gi(e){"@babel/helpers - typeof";return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi(e)}function fk(e,t){if(Gi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pk(e){var t=fk(e,"string");return Gi(t)=="symbol"?t:t+""}function mk(e,t,n){return(t=pk(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xp(Object(n),!0).forEach(function(r){mk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const kc=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},vk=async(e,t,n)=>{e instanceof await uk()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(r==null?void 0:r.statusCode)||s+"";t(new ck(kc(r),s,i))}).catch(r=>{t(new Nu(kc(r),r))}):t(new Nu(kc(e),e))},gk=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(dk(r)?(s.headers=F({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),F(F({},s),n))};async function sa(e,t,n,r,s,i){return new Promise((l,c)=>{e(n,gk(t,r,s,i)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>l(u)).catch(u=>vk(u,c,r))})}async function Ji(e,t,n,r){return sa(e,"GET",t,n,r)}async function At(e,t,n,r,s){return sa(e,"POST",t,r,s,n)}async function Cu(e,t,n,r,s){return sa(e,"PUT",t,r,s,n)}async function yk(e,t,n,r){return sa(e,"HEAD",t,F(F({},n),{},{noResolveJson:!0}),r)}async function Td(e,t,n,r,s){return sa(e,"DELETE",t,r,s,n)}var wk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}}};let Og;Og=Symbol.toStringTag;var xk=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Og]="BlobDownloadBuilder",this.promise=null}asStream(){return new wk(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ye(t))return{data:null,error:t};throw t}}};const kk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var jk=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Cd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let i;const l=F(F({},Zp),r);let c=F(F({},s.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const u=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),u&&i.append("metadata",s.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),u&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(u))):(i=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,u&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(c=F(F({},c),r.headers));const h=s._removeEmptyFolders(t),p=s._getFinalPath(h),x=await(e=="PUT"?Cu:At)(s.fetch,`${s.url}/object/${p}`,i,F({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:x.Id,fullPath:x.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(ye(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const i=s._removeEmptyFolders(e),l=s._getFinalPath(i),c=new URL(s.url+`/object/upload/sign/${l}`);c.searchParams.set("token",t);try{let u;const h=F({upsert:Zp.upsert},r),p=F(F({},s.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",h.cacheControl)):(u=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{data:{path:i,fullPath:(await Cu(s.fetch,c.toString(),u,{headers:p})).Key},error:null}}catch(u){if(s.shouldThrowOnError)throw u;if(ye(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=F({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=await At(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+i.url),c=l.searchParams.get("token");if(!c)throw new rl("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await At(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await At(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),i=await At(r.fetch,`${r.url}/object/sign/${s}`,F({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${r.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await At(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>F(F({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",i=this._getFinalPath(e),l=()=>Ji(this.fetch,`${this.url}/${n}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new xk(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Eu(await Ji(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await yk(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ye(r)&&r instanceof Nu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${c}`)}}}async remove(e){var t=this;try{return{data:await Td(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=F(F(F({},kk),t),{},{prefix:e||""});return{data:await At(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(ye(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=F({},e);return{data:await At(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ag="2.91.0",Rg={"X-Client-Info":`storage-js/${Ag}`};var _k=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=F(F({},Rg),t),this.fetch=Cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Ji(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ji(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await At(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Cu(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ye(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await At(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Td(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Sk=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Rg),t),this.fetch=Cd(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await At(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ji(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Td(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ye(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!hk(e))throw new rl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new lk({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const l=s[i];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(s,c),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}};const Id={"X-Client-Info":`storage-js/${Ag}`,"Content-Type":"application/json"};var Pg=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function ot(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var jc=class extends Pg{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},bk=class extends Pg{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Od=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Nk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},em=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ek=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||r+"";t(new jc(em(i),r,l))}).catch(()=>{const i=r+"";t(new jc(s.statusText||`HTTP ${r} error`,r,i))});else{const i=r+"";t(new jc(s.statusText||`HTTP ${r} error`,r,i))}}else t(new bk(em(e),e))},Ck=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(Nk(r)?(s.headers=F({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,F(F({},s),n)):s};async function Tk(e,t,n,r,s,i){return new Promise((l,c)=>{e(n,Ck(t,r,s,i)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const h=u.headers.get("content-type");return!h||!h.includes("application/json")?{}:u.json()}).then(u=>l(u)).catch(u=>Ek(u,c,r))})}async function lt(e,t,n,r,s){return Tk(e,"POST",t,r,s,n)}var Ik=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Id),t),this.fetch=Od(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await lt(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await lt(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ot(r))return{data:null,error:r};throw r}}},Ok=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Id),t),this.fetch=Od(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await lt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await lt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await lt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},Ak=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=F(F({},Id),t),this.fetch=Od(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await lt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await lt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}}},Rk=class extends Ak{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Pk(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},Pk=class extends Ik{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new Dk(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Dk=class extends Ok{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,F(F({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},$k=class extends _k{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new jk(this.url,this.headers,e,this.fetch)}get vectors(){return new Rk(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Sk(this.url+"/iceberg",this.headers,this.fetch)}};const Dg="2.91.0",Xr=30*1e3,Tu=3,_c=Tu*Xr,Lk="http://localhost:9999",Uk="supabase.auth.token",Mk={"X-Client-Info":`gotrue-js/${Dg}`},Iu="X-Supabase-Api-Version",$g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bk=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zk=10*60*1e3;class Qi extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function B(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Fk extends Qi{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Hk(e){return B(e)&&e.name==="AuthApiError"}class cr extends Qi{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class fn extends Qi{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class it extends fn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Vk(e){return B(e)&&e.name==="AuthSessionMissingError"}class Kr extends fn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xa extends fn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Za extends fn{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Wk(e){return B(e)&&e.name==="AuthImplicitGrantRedirectError"}class tm extends fn{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kk extends fn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ou extends fn{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Sc(e){return B(e)&&e.name==="AuthRetryableFetchError"}class nm extends fn{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Au extends fn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rm=` 	
\r=`.split(""),qk=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rm.length;t+=1)e[rm[t].charCodeAt(0)]=-2;for(let t=0;t<Lo.length;t+=1)e[Lo[t].charCodeAt(0)]=t;return e})();function sm(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Lo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Lo[r]),t.queuedBits-=6}}function Lg(e,t,n){const r=qk[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function im(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{Qk(l,r,n)};for(let l=0;l<e.length;l+=1)Lg(e.charCodeAt(l),s,i);return t.join("")}function Gk(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Jk(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Gk(r,t)}}function Qk(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ws(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Lg(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Yk(e){const t=[];return Jk(e,n=>t.push(n)),new Uint8Array(t)}function fr(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>sm(s,n,r)),sm(null,n,r),t.join("")}function Xk(e){return Math.round(Date.now()/1e3)+e}function Zk(){return Symbol("auth-callback")}const Le=()=>typeof window<"u"&&typeof document<"u",rr={tested:!1,writable:!1},Ug=()=>{if(!Le())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rr.tested)return rr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),rr.tested=!0,rr.writable=!0}catch{rr.tested=!0,rr.writable=!1}return rr.writable};function ej(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Mg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},sr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$e=async(e,t)=>{await e.removeItem(t)};class sl{constructor(){this.promise=new sl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}sl.promiseConstructor=Promise;function bc(e){const t=e.split(".");if(t.length!==3)throw new Au("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Bk.test(t[r]))throw new Au("JWT not in base64url format");return{header:JSON.parse(im(t[0])),payload:JSON.parse(im(t[1])),signature:ws(t[2]),raw:{header:t[0],payload:t[1]}}}async function nj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function rj(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){r(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function sj(e){return("0"+e.toString(16)).substr(-2)}function ij(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,sj).join("")}async function aj(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function oj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await aj(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qr(e,t,n=!1){const r=ij();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Zr(e,`${t}-code-verifier`,s);const i=await oj(r);return[i,r===i?"plain":"s256"]}const lj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cj(e){const t=e.headers.get(Iu);if(!t||!t.match(lj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function uj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Gr(e){if(!hj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Nc(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fj(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function am(e){return JSON.parse(JSON.stringify(e))}const or=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pj=[502,503,504];async function om(e){var t;if(!tj(e))throw new Ou(or(e),0);if(pj.includes(e.status))throw new Ou(or(e),e.status);let n;try{n=await e.json()}catch(i){throw new cr(or(i),i)}let r;const s=cj(e);if(s&&s.getTime()>=$g["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nm(or(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new it}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new nm(or(n),e.status,n.weak_password.reasons);throw new Fk(or(n),e.status||500,r)}const mj=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function z(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Iu]||(i[Iu]=$g["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",u=await vj(e,t,n+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function vj(e,t,n,r,s,i){const l=mj(t,r,s,i);let c;try{c=await e(n,Object.assign({},l))}catch(u){throw console.error(u),new Ou(or(u),0)}if(c.ok||await om(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(u){await om(u)}}function It(e){var t;let n=null;wj(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Xk(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function lm(e){const t=It(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function On(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function gj(e){return{data:e,error:null}}function yj(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,l=nl(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},u=Object.assign({},l);return{data:{properties:c,user:u},error:null}}function cm(e){return e}function wj(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ec=["global","local","others"];class xj{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Mg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Ec[0]){if(Ec.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ec.join(", ")}`);try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:On})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=nl(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:yj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(B(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:On})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},p=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cm});if(p.error)throw p.error;const x=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,j=(u=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return j.length>0&&(j.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(v.split(";")[1].split("=")[1]);h[`${O}Page`]=b}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},x),h),error:null}}catch(h){if(B(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Gr(t);try{return await z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:On})}catch(n){if(B(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Gr(t);try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:On})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Gr(t);try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:On})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Gr(t.userId);try{const{data:n,error:r}=await z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Gr(t.userId),Gr(t.id);try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,i,l,c,u;try{const h={nextPage:null,lastPage:0,total:0},p=await z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cm});if(p.error)throw p.error;const x=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,j=(u=(c=p.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&u!==void 0?u:[];return j.length>0&&(j.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(v.split(";")[1].split("=")[1]);h[`${O}Page`]=b}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},x),h),error:null}}catch(h){if(B(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(B(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(B(n))return{data:null,error:n};throw n}}}function um(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Jr={debug:!!(globalThis&&Ug()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class kj extends Bg{}async function jj(e,t,n){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new kj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function _j(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Sj(e){return parseInt(e,16)}function bj(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Nj(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:c,requestId:u,resources:h,scheme:p,uri:x,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const j=zg(e.address),v=p?`${p}://${r}`:r,b=e.statement?`${e.statement}
`:"",O=`${v} wants you to sign in with your Ethereum account:
${j}

${b}`;let w=`URI: ${x}
Version: ${g}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(w+=`
Expiration Time: ${s.toISOString()}`),c&&(w+=`
Not Before: ${c.toISOString()}`),u&&(w+=`
Request ID: ${u}`),h){let m=`
Resources:`;for(const y of h){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}w+=m}return`${O}
${w}`}class Ee extends Error{constructor({message:t,code:n,cause:r,name:s}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Uo extends Ee{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Ej({error:e,options:t}){var n,r,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ee({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ee({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ee({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ee({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ee({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Ee({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ee({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Fg(l)){if(i.rp.id!==l)return new Ee({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ee({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Cj({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ee({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ee({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Fg(r)){if(n.rpId!==r)return new Ee({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ee({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ee({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ee({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Tj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Ij=new Tj;function Oj(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=nl(e,["challenge","user","excludeCredentials"]),i=ws(t).buffer,l=Object.assign(Object.assign({},n),{id:ws(n.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:i,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const h=r[u];c.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:ws(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return c}function Aj(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=nl(e,["challenge","allowCredentials"]),s=ws(t).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];i.allowCredentials[l]=Object.assign(Object.assign({},c),{id:ws(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return i}function Rj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:fr(new Uint8Array(e.response.attestationObject)),clientDataJSON:fr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Pj(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:fr(new Uint8Array(s.authenticatorData)),clientDataJSON:fr(new Uint8Array(s.clientDataJSON)),signature:fr(new Uint8Array(s.signature)),userHandle:s.userHandle?fr(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Fg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function dm(){var e,t;return!!(Le()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Dj(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uo("Browser returned unexpected credential type",t)}:{data:null,error:new Uo("Empty credential response",t)}}catch(t){return{data:null,error:Ej({error:t,options:e})}}}async function $j(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uo("Browser returned unexpected credential type",t)}:{data:null,error:new Uo("Empty credential response",t)}}catch(t){return{data:null,error:Cj({error:t,options:e})}}}const Lj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Uj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mo(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))r[i]=l;else if(n(l))r[i]=l;else if(t(l)){const c=r[i];t(c)?r[i]=Mo(c,l):r[i]=Mo(l)}else r[i]=l}return r}function Mj(e,t){return Mo(Lj,e,t||{})}function Bj(e,t){return Mo(Uj,e,t||{})}class zj{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},i){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:c};const u=s??Ij.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${r}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=Mj(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:p,error:x}=await Dj({publicKey:h,signal:u});return p?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:x}}case"request":{const h=Bj(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:p,error:x}=await $j(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:u}));return p?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:x}}}}catch(l){return B(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Qi("rpId is required for WebAuthn authentication")};try{if(!dm())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!l)return{data:null,error:c};const{webauthn:u}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(l){return B(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Qi("rpId is required for WebAuthn registration")};try{if(!dm())return{data:null,error:new cr("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var x;return(x=p.data)===null||x===void 0?void 0:x.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:c};const{data:u,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return u?this._verify({factorId:l.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(l){return B(l)?{data:null,error:l}:{data:null,error:new cr("Unexpected error in register",l)}}}}_j();const Fj={url:Lk,storageKey:Uk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Mk,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function hm(e,t,n){return await n()}const Qr={};class Yi{get jwks(){var t,n;return(n=(t=Qr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Qr[this.storageKey]=Object.assign(Object.assign({},Qr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Qr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Qr[this.storageKey]=Object.assign(Object.assign({},Qr[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Fj),t);if(this.storageKey=i.storageKey,this.instanceID=(n=Yi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Yi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Le()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new xj({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Mg(i.fetch),this.lock=i.lock||hm,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Le()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=jj:this.lock=hm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Ug()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=um(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=um(this.memoryStorage)),Le()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Dg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Le()&&(n=ej(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Le()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Wk(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return B(n)?this._returnResult({error:n}):this._returnResult({error:new cr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:It}),{data:l,error:c}=i;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:p,password:x,options:g}=t;let j=null,v=null;this.flowType==="pkce"&&([j,v]=await qr(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:p,password:x,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:j,code_challenge_method:v},xform:It})}else if("phone"in t){const{phone:p,password:x,options:g}=t;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:x,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:It})}else throw new Xa("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c||!l)return await $e(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:l,options:c}=t;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lm})}else if("phone"in t){const{phone:i,password:l,options:c}=t;n=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lm})}else throw new Xa("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Kr;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,i,l,c,u,h,p,x,g;let j,v;if("message"in t)j=t.message,v=t.signature;else{const{chain:b,wallet:O,statement:w,options:m}=t;let y;if(Le())if(typeof O=="object")y=O;else{const Q=window;if("ethereum"in Q&&typeof Q.ethereum=="object"&&"request"in Q.ethereum&&typeof Q.ethereum.request=="function")y=Q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=O}const N=new URL((n=m==null?void 0:m.url)!==null&&n!==void 0?n:window.location.href),A=await y.request({method:"eth_requestAccounts"}).then(Q=>Q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=zg(A[0]);let R=(r=m==null?void 0:m.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!R){const Q=await y.request({method:"eth_chainId"});R=Sj(Q)}const U={domain:N.host,address:T,statement:w,uri:N.href,version:"1",chainId:R,nonce:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=m==null?void 0:m.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=m==null?void 0:m.signInWithEthereum)===null||p===void 0?void 0:p.resources};j=Nj(U),v=await y.request({method:"personal_sign",params:[bj(j),T]})}try{const{data:b,error:O}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:v},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:It});if(O)throw O;if(!b||!b.session||!b.user){const w=new Kr;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:O})}catch(b){if(B(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var n,r,s,i,l,c,u,h,p,x,g,j;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:O,wallet:w,statement:m,options:y}=t;let N;if(Le())if(typeof w=="object")N=w;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))N=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=w}const A=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const T=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let R;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")R=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)R=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)v=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),b=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${A.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((h=y==null?void 0:y.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((x=(p=y==null?void 0:y.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||x===void 0)&&x.length?["Resources",...y.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const T=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=T}}try{const{data:O,error:w}=await z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:fr(b)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(j=t.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:It});if(w)throw w;if(!O||!O.session||!O.user){const m=new Kr;return this._returnResult({data:{user:null,session:null},error:m})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:w})}catch(O){if(B(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(t){const n=await sr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Kk;const{data:i,error:l}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:It});if(await $e(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const c=new Kr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return i.session&&(await this._saveSession(i.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",i.session)},0)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:l}=t,c=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:It}),{data:u,error:h}=c;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const p=new Kr;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,i,l;try{if("email"in t){const{email:c,options:u}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await qr(this.storage,this.storageKey));const{error:x}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:c,options:u}=t,{data:h,error:p}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(l=u==null?void 0:u.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Xa("You must provide either an email or phone number.")}catch(c){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:It});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,i,l;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await qr(this.storage,this.storageKey));const h=await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:gj});return!((i=h.data)===null||i===void 0)&&i.url&&Le()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(c){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new it;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(B(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:l}=await z(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:l,error:c}=await z(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new Xa("You must provide either an email or phone number and a type")}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<_c:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const l=await sr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Nc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=fj(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:On}):await this._useSession(async n=>{var r,s,i;const{data:l,error:c}=n;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new it}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:On})})}catch(n){if(B(n))return Vk(n)&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new it;const l=s.session;let c=null,u=null;this.flowType==="pkce"&&t.email!=null&&([c,u]=await qr(this.storage,this.storageKey));const{data:h,error:p}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:On});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new it;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:l}=bc(t.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:c,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(B(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:l,error:c}=n;if(c)throw c;t=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new it;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Le())throw new Za("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Za(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Za("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new tm("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:c,expires_at:u,token_type:h}=t;if(!i||!c||!l||!h)throw new Za("No session defined in URL");const p=Math.round(Date.now()/1e3),x=parseInt(c);let g=p+x;u&&(g=parseInt(u));const j=g-p;j*1e3<=Xr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${x}s`);const v=g-x;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,p);const{data:b,error:O}=await this._getUser(i);if(O)throw O;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:x,expires_at:g,refresh_token:l,token_type:h,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:w,redirectType:t.type},error:null})}catch(r){if(B(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await sr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,t);if(c&&!(Hk(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=Zk(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await qr(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var l,c,u,h,p;const{data:x,error:g}=i;if(g)throw g;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",j,{headers:this.headers,jwt:(p=(h=x.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Le()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(B(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:l,provider:c,token:u,access_token:h,nonce:p}=t,x=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:u,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:It}),{data:g,error:j}=x;return j?this._returnResult({data:{user:null,session:null},error:j}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Kr}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:j}))}catch(s){if(await $e(this.storage,`${this.storageKey}-code-verifier`),B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)throw l;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rj(async s=>(s>0&&await nj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:It})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Sc(i)&&Date.now()+l-r<Xr})}catch(r){if(this._debug(n,"error",r),B(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Le()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await sr(this.storage,this.storageKey);if(s&&this.userStorage){let l=await sr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Zr(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Nc()}else if(s&&!s.user&&!s.user){const l=await sr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await $e(this.storage,this.storageKey+"-user"),await Zr(this.storage,this.storageKey,s)):s.user=Nc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<_c;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${_c}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Sc(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new it;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sl;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new it;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={data:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(s,"error",i),B(i)){const l={data:null,error:i};return Sc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,n)}catch(u){i.push(u)}});if(await Promise.all(l),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await $e(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=am(s);await Zr(this.storage,this.storageKey,i)}else{const s=am(n);await Zr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await $e(this.storage,this.storageKey),await $e(this.storage,this.storageKey+"-code-verifier"),await $e(this.storage,this.storageKey+"-user"),this.userStorage&&await $e(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Le()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Xr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Xr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Xr}ms, refresh threshold is ${Tu} ticks`),s<=Tu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Bg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Le()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,l]=await qr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:l}=n;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:h}=await z(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Rj(t.webauthn.credential_response):Pj(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:u}=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Oj(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Aj(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=bc(r.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await z(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new it})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new it});const l=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Le()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new it});const l=await z(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Le()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new it})})}catch(t){if(B(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new it})})}catch(n){if(B(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(c=>c.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===t),r&&this.jwks_cached_at+zk>s)return r;const{data:i,error:l}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(c=>c.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:j,error:v}=await this.getSession();if(v||!j.session)return this._returnResult({data:null,error:v});r=j.session.access_token}const{header:s,payload:i,signature:l,raw:{header:c,payload:u}}=bc(r);n!=null&&n.allowExpired||uj(i.exp);const h=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:j}=await this.getUser(r);if(j)throw j;return{data:{claims:i,header:s,signature:l},error:null}}const p=dj(s.alg),x=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,x,l,Yk(`${c}.${u}`)))throw new Au("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}}Yi.nextInstanceID={};const Hj=Yi,Vj="2.91.0";let yi="";typeof Deno<"u"?yi="deno":typeof document<"u"?yi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yi="react-native":yi="node";const Wj={"X-Client-Info":`supabase-js-${yi}/${Vj}`},Kj={headers:Wj},qj={schema:"public"},Gj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jj={};function Xi(e){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(e)}function Qj(e,t){if(Xi(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yj(e){var t=Qj(e,"string");return Xi(t)=="symbol"?t:t+""}function Xj(e,t,n){return(t=Yj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fm(Object(n),!0).forEach(function(r){Xj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fm(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Zj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),e_=()=>Headers,t_=(e,t,n)=>{const r=Zj(n),s=e_();return async(i,l)=>{var c;const u=(c=await t())!==null&&c!==void 0?c:e;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),r(i,je(je({},l),{},{headers:h}))}};function n_(e){return e.endsWith("/")?e:e+"/"}function r_(e,t){var n,r;const{db:s,auth:i,realtime:l,global:c}=e,{db:u,auth:h,realtime:p,global:x}=t,g={db:je(je({},u),s),auth:je(je({},h),i),realtime:je(je({},p),l),storage:{},global:je(je(je({},x),c),{},{headers:je(je({},(n=x==null?void 0:x.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function s_(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n_(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var i_=class extends Hj{constructor(e){super(e)}},a_=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const i=s_(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,c={db:qj,realtime:Jj,auth:je(je({},Gj),{},{storageKey:l}),global:Kj},u=r_(n??{},c);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=u.auth)!==null&&h!==void 0?h:{},this.headers,u.global.fetch)}this.fetch=t_(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(je({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new Mx(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new $k(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Px(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:l,lock:c,debug:u,throwOnError:h},p,x){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i_({url:this.authUrl.href,headers:je(je({},g),p),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:c,debug:u,throwOnError:h,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new nk(this.realtimeUrl.href,je(je({},e),{},{params:je(je({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const o_=(e,t,n)=>new a_(e,t,n);function l_(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}l_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const c_="https://mvewgciqyhjcnxkfpawb.supabase.co",u_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im12ZXdnY2lxeWhqY254a2ZwYXdiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjM2MDQsImV4cCI6MjA4NDQ5OTYwNH0.TIHQZdtG9pfK19kaPjGTKDumxT5KKTsdGGVuhWPn7zU",bn=o_(c_,u_),ee="http://localhost:4000",d_=()=>{var ef,tf,nf,rf,sf,af,of,lf,cf,uf,df,hf,ff,pf,mf,vf,gf,yf,wf,xf,kf,jf,_f,Sf,bf,Nf,Ef,Cf,Tf;const[e,t]=S.useState("dashboard"),[n,r]=S.useState(null),[s,i]=S.useState("comments");S.useEffect(()=>{e==="list"&&t("table")},[e]);const[l,c]=S.useState(null),[u,h]=S.useState(null),[p,x]=S.useState([]),[g,j]=S.useState([]),[v,b]=S.useState(()=>{try{return localStorage.getItem("kanbax-active-tenant")}catch{return null}}),[O,w]=S.useState(!1),[m,y]=S.useState(""),[N,A]=S.useState(""),[T,R]=S.useState("MEMBER"),[U,Q]=S.useState([]),[q,me]=S.useState(null),[qn,pn]=S.useState(!1),[Is,il]=S.useState(!1),[Os,As]=S.useState(!1),[$,V]=S.useState(!1),[W,ge]=S.useState({}),[se,mn]=S.useState("login"),[pt,Rs]=S.useState(""),[St,_r]=S.useState(""),[Ad,ia]=S.useState(null),[Rd,Ps]=S.useState(null),[Hg,Pd]=S.useState(!1),[C,oe]=S.useState(null),[Dd,$d]=S.useState(!1),[Ld,al]=S.useState(null),[Qe,Ds]=S.useState({name:"",title:"",priority:"MEDIUM",status:"BACKLOG"}),[aa,Gn]=S.useState(null),[ol,vn]=S.useState([]),[$s,Ud]=S.useState(null),[Md,Sr]=S.useState({}),[Bd,zd]=S.useState({}),[h_,Fd]=S.useState(!1),[br,Hd]=S.useState(null),[Vg,Vd]=S.useState(!1),oa=S.useRef(!1);S.useRef(null);const Nr=S.useRef(null),Er=S.useRef(null),Wd=S.useRef(0),[Wg,ll]=S.useState(!1),[Kg,Jn]=S.useState(!1),[qg,Kd]=S.useState(!1),[Ls,Gg]=S.useState(()=>{try{return localStorage.getItem("kanbax-sidebar-collapsed")==="true"}catch{return!1}}),[be,qd]=S.useState([]),[gn,la]=S.useState(null),[Cr,cl]=S.useState([]),[ca,Gd]=S.useState({}),[Jg,ul]=S.useState(!1),[Qg,dl]=S.useState(!1),[le,ua]=S.useState(null),[da,Qn]=S.useState([]),[Jd,Qd]=S.useState(!1),[Yd,hl]=S.useState(null),[Tr,bt]=S.useState(null),[Us,f_]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-pinned")||"[]")}catch{return[]}}),[Xd,Zd]=S.useState([]),[Ms,Yg]=S.useState(()=>{try{return JSON.parse(localStorage.getItem("kanbax-okr-recent")||"[]")}catch{return[]}}),[Mt,eh]=S.useState(null),[Bs,fl]=S.useState(0),[Xg,pl]=S.useState(!1),[Zg,ha]=S.useState(!1),[ey,zs]=S.useState(!1),[Ir,Fs]=S.useState(null),[ty,fa]=S.useState(!1),[ml,pa]=S.useState(null),[Bt,Or]=S.useState({title:"",startValue:"0",targetValue:"100",status:"ACTIVE"}),[Nt,mt]=S.useState({title:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[Ar,Rr]=S.useState({title:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"}),[p_,m_]=S.useState({}),[vl,th]=S.useState(""),[Pr,ny]=S.useState("ALL"),[gl,ry]=S.useState(!1),[nh,rh]=S.useState(!1),[yl,ma]=S.useState(!1),[nt,Yn]=S.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[sh,Dr]=S.useState([]),[Hs,$r]=S.useState([]),[ih,Lr]=S.useState(""),[ne,ah]=S.useState(null),[Vs,Ur]=S.useState(null),[va,wl]=S.useState(null),[Mr,xl]=S.useState([]),[sy,oh]=S.useState(gt.BACKLOG),[kl,lh]=S.useState(""),[jl,Qt]=S.useState(!1),[_l,yn]=S.useState(null),[Sl,ga]=S.useState(!1),[Ws,ya]=S.useState(null),[rt,Ks]=S.useState({title:"",description:"",priority:"MEDIUM",dueDate:""}),[Z,ch]=S.useState(null),[Xn,wa]=S.useState(null),[iy,uh]=S.useState(null),[qs,ay]=S.useState(null),[xa,bl]=S.useState(null),[Br,Nl]=S.useState([]),[oy,dh]=S.useState([]),[ka,Zn]=S.useState([]),[ly,Gs]=S.useState([]),[cy,ja]=S.useState([]),[Js,Qs]=S.useState([]),[hh,Ys]=S.useState(""),[fh,El]=S.useState(""),[er,wn]=S.useState([]),[Cl,xn]=S.useState(""),[_a,Tl]=S.useState(null),[zt,tr]=S.useState([]),[Xs,kn]=S.useState(""),Il=S.useRef(null),Ol=S.useRef(null),[ph,Al]=S.useState(!0),[mh,Rl]=S.useState(null),te=(o=!0,d)=>{const f={"Content-Type":"application/json"};l!=null&&l.access_token&&(f.Authorization=`Bearer ${l.access_token}`);const k=o?d??v??"":"";return o&&k&&(f["x-tenant-id"]=k),u!=null&&u.id&&(f["x-user-id"]=u.id),f};S.useEffect(()=>{bn.auth.getSession().then(({data:d})=>c(d.session));const{data:{subscription:o}}=bn.auth.onAuthStateChange((d,f)=>{c(f)});return()=>o.unsubscribe()},[]),S.useEffect(()=>{const o=()=>{const f=_h(window.location.pathname);eh(f),f&&t("okr")};o();const d=()=>o();return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[]),S.useEffect(()=>{e!=="okr"&&window.location.pathname.startsWith("/okr")&&window.history.replaceState({},"","/")},[e]);const Ft=async()=>{var o;try{if(Al(!0),!l||!v){qd([]),la(null),Rl(null),Al(!1);return}const d=await fetch(`${ee}/boards`,{headers:te()});if(!d.ok)throw new Error("Failed to fetch boards");const f=await d.json();cl(f),v&&Gd(X=>({...X,[v]:f}));const k=(()=>{try{return localStorage.getItem(`kanbax-active-board:${v}`)}catch{return null}})(),E=((o=f[0])==null?void 0:o.id)||null,_=k&&f.some(X=>X.id===k)?k:E;if(ua(_),_)try{localStorage.setItem(`kanbax-active-board:${v}`,_)}catch{}const D=await fetch(`${ee}/tasks?boardId=${encodeURIComponent(_||"")}`,{headers:te()});if(!D.ok)throw new Error("Failed to fetch tasks");const H=await D.json();qd(H),v&&zd(X=>({...X,[v]:H})),la(f.find(X=>X.id===_)||f[0]||null);const P=H.flatMap(X=>(X.kinds||[]).map(De=>De.trim())).filter(X=>X.length>0),J=(()=>{try{const X=localStorage.getItem("kanbax-kind-history");return X?JSON.parse(X):[]}catch{return[]}})(),Ae=Array.from(new Set([...J,...P])).sort((X,De)=>X.localeCompare(De));ja(Ae);try{localStorage.setItem("kanbax-kind-history",JSON.stringify(Ae))}catch{}Rl(null)}catch(d){Rl(d.message)}finally{Al(!1)}},zr=o=>{const d=typeof o=="string"?o:(o==null?void 0:o.error)||(o==null?void 0:o.message)||"Unknown error",f=d.toLowerCase();return f.includes("permission")?{code:"permission",safeReason:"Blocked by permission."}:f.includes("policy")||f.includes("denied")?{code:"policy",safeReason:"Blocked by policy."}:{code:"unknown",safeReason:d}},Pl=async()=>{if(!l||!v){Qn([]),hl(null),bt(null);return}try{Qd(!0);const o=le==="all"?Hr(v):le||"default-board",d=await fetch(`${ee}/okrs?boardId=${encodeURIComponent(o)}`,{headers:te()});if(!d.ok){const k=await d.json();throw new Error(k.error||"Failed to load OKRs")}const f=await d.json();Qn(f||[]),hl(null),bt(null)}catch(o){hl(o.message),bt(zr(o))}finally{Qd(!1)}},vh=async(o,d)=>{if(v)try{const f={title:o.title.trim(),ownerId:o.ownerId||null,startDate:o.startDate||null,endDate:o.endDate||null,status:o.status||"ACTIVE",boardId:le==="all"?Hr(v):le||"default-board"};if(!f.title){alert("Objective title is required");return}const k=!!Ir,E=await fetch(k?`${ee}/okrs/objectives/${Ir}`:`${ee}/okrs/objectives`,{method:k?"PATCH":"POST",headers:te(),body:JSON.stringify(f)});if(!E.ok){const D=await E.json();throw new Error(D.error||`Failed to ${k?"update":"create"} objective`)}const _=await E.json();Qn(D=>k?D.map(H=>H.id===_.id?_:H):[_,...D]),bt(null),d&&d()}catch(f){alert(f.message),bt(zr(f))}},uy=async()=>{await vh(Ar,()=>{Rr({title:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},dy=async()=>{if(!v)return;const o=prompt("Board name");if(o)try{const d=await fetch(`${ee}/boards`,{method:"POST",headers:te(),body:JSON.stringify({name:o.trim()})});if(!d.ok){const k=await d.json();throw new Error(k.error||"Failed to create board")}const f=await d.json();cl(k=>k.concat(f)),ua(f.id),la(f);try{localStorage.setItem(`kanbax-active-board:${v}`,f.id)}catch{}Ft()}catch(d){alert(d.message)}},hy=o=>{if(o){ua(o);try{localStorage.setItem(`kanbax-active-board:${v}`,o)}catch{}Ft()}},gh=async o=>{if(o&&!ca[o])try{const d=await fetch(`${ee}/boards`,{headers:te(!0,o)});if(!d.ok)return;const f=await d.json();Gd(k=>({...k,[o]:f}))}catch{}},yh=async()=>{await vh(Nt,()=>{zs(!1),Fs(null),mt({title:"",ownerId:"",startDate:"",endDate:"",status:"ACTIVE"})})},fy=o=>{Fs(o.id),mt({title:o.title,ownerId:o.ownerId||"",startDate:jh(o.startDate),endDate:jh(o.endDate),status:o.status||"ACTIVE"}),ha(!0)},py=async o=>{if(confirm("Delete this objective and its key results?"))try{const d=await fetch(`${ee}/okrs/objectives/${o}`,{method:"DELETE",headers:te()});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to delete objective")}Qn(f=>f.filter(k=>k.id!==o)),nr("/okr")}catch(d){alert(d.message),bt(zr(d))}},my=async(o,d)=>{if(confirm("Delete this key result?"))try{const f=await fetch(`${ee}/okrs/key-results/${o}`,{method:"DELETE",headers:te()});if(!f.ok){const k=await f.json();throw new Error(k.error||"Failed to delete key result")}Qn(k=>k.map(E=>E.id===d?{...E,keyResults:E.keyResults.filter(_=>_.id!==o)}:E))}catch(f){alert(f.message),bt(zr(f))}},vy=async()=>{if(!(!v||!le)&&confirm("Delete this board and all its data? This cannot be undone."))try{const o=await fetch(`${ee}/boards/${le}`,{method:"DELETE",headers:te()});if(!o.ok){const k=await o.json();throw new Error(k.error||"Failed to delete board")}const d=Cr.filter(k=>k.id!==le);cl(d);const f=d[0]||null;ua((f==null?void 0:f.id)||null),la(f),pl(!1);try{f!=null&&f.id?localStorage.setItem(`kanbax-active-board:${v}`,f.id):localStorage.removeItem(`kanbax-active-board:${v}`)}catch{}Ft()}catch(o){alert(o.message)}},gy=o=>{pa(o),Or({title:"",startValue:"0",targetValue:"100",status:"ACTIVE"}),fa(!0)},yy=async()=>{if(ml){if(!Bt.title.trim()){alert("Key result title is required");return}try{const o=await fetch(`${ee}/okrs/objectives/${ml}/key-results`,{method:"POST",headers:te(),body:JSON.stringify({title:Bt.title.trim(),startValue:Number(Bt.startValue),targetValue:Number(Bt.targetValue),currentValue:Number(Bt.startValue),status:Bt.status||"ACTIVE"})});if(!o.ok){const f=await o.json();throw new Error(f.error||"Failed to create key result")}const d=await o.json();Qn(f=>f.map(k=>k.id===ml?{...k,keyResults:[...k.keyResults,d],progress:k.keyResults.length?(k.keyResults.reduce((E,_)=>E+_.progress,0)+d.progress)/(k.keyResults.length+1):d.progress}:k)),fa(!1),pa(null),Or({title:"",startValue:"0",targetValue:"100",status:"ACTIVE"}),bt(null)}catch(o){alert(o.message),bt(zr(o))}}},wy=async(o,d,f)=>{try{const k=await fetch(`${ee}/okrs/key-results/${o}`,{method:"PATCH",headers:te(),body:JSON.stringify(f)});if(!k.ok){const _=await k.json();throw new Error(_.error||"Failed to update key result")}const E=await k.json();Qn(_=>_.map(D=>{if(D.id!==d)return D;const H=D.keyResults.map(J=>J.id===o?{...J,...E}:J),P=H.length?H.reduce((J,Ae)=>J+Ae.progress,0)/H.length:0;return{...D,keyResults:H,progress:P}})),bt(null)}catch(k){alert(k.message),bt(zr(k))}},xy=o=>{var f;const d=((f=o==null?void 0:o.toUpperCase)==null?void 0:f.call(o))||"ON_TRACK";return d==="AT_RISK"?"AT_RISK":d==="OFF_TRACK"?"OFF_TRACK":"ON_TRACK"},ky=o=>{if(o.length===0)return 0;const d=o.reduce((f,k)=>f+k.progress,0);return Math.round(d/o.length)},Yt=S.useMemo(()=>da.map(o=>{const d=(o.keyResults||[]).map(_=>({id:_.id,objectiveId:_.objectiveId,title:_.title,metricType:"NUMERIC",startValue:_.startValue,targetValue:_.targetValue,currentValue:_.currentValue,status:xy(_.status),progress:Math.round(_.progress??0),lastUpdatedAt:_.updatedAt||_.createdAt})),f=ky(d),k=o.sourceType;return{id:o.id,title:o.title,ownerId:o.ownerId??null,startDate:o.startDate??null,endDate:o.endDate??null,status:o.status,confidence:typeof o.confidence=="number"?o.confidence:0,progress:f,keyResults:d,readOnly:!!(k&&k!=="MANUAL")}}),[da]),jy=S.useMemo(()=>{try{return localStorage.getItem("kanbax-okr-legacy")==="1"}catch{return!1}},[]),Sa=o=>{nr(`/okr/objective/${o}`),Yg(d=>[o,...d.filter(k=>k!==o)].slice(0,8))},K=S.useMemo(()=>Yt.find(o=>o.id===(Mt==null?void 0:Mt.objectiveId)),[Yt,Mt]),Ht=(Mt==null?void 0:Mt.screen)||"library";S.useEffect(()=>{Ht==="review"&&fl(0)},[Ht,Mt==null?void 0:Mt.objectiveId]),S.useMemo(()=>{const o=Us.map(k=>Yt.find(E=>E.id===k)).filter(Boolean),d=Ms.map(k=>Yt.find(E=>E.id===k)).filter(Boolean),f=Yt.filter(k=>!Us.includes(k.id)&&!Ms.includes(k.id)).sort((k,E)=>E.progress-k.progress).slice(0,5);return{pinned:o,recent:d,suggested:f}},[Us,Ms,Yt]);const Fr=S.useMemo(()=>K?[{title:"Relevance check",content:"Is this objective still aligned with the current quarter?"},{title:"KR validity check",content:"Do the metrics still represent success?"},{title:"Update KR values",content:K.readOnly?a.jsx("div",{className:"okr-empty",children:"This objective is read-only due to its source."}):a.jsx("div",{className:"okr-review-kr",children:K.keyResults.map(o=>a.jsxs("label",{children:[o.title,a.jsx("input",{type:"number",defaultValue:o.currentValue,onBlur:d=>wy(o.id,K.id,{currentValue:Number(d.target.value)})})]},o.id))})},{title:"Review summary",content:`Progress ${K.progress}%  ${K.keyResults.length} key results`}]:[],[K]);S.useEffect(()=>{l&&v&&Ft()},[l,v]),S.useEffect(()=>{try{localStorage.setItem("kanbax-okr-pinned",JSON.stringify(Us))}catch{}},[Us]),S.useEffect(()=>{try{localStorage.setItem("kanbax-okr-recent",JSON.stringify(Ms))}catch{}},[Ms]),S.useEffect(()=>{e==="okr"&&Pl()},[e,l,v,le]),S.useEffect(()=>{try{localStorage.setItem("kanbax-sidebar-collapsed",String(Ls))}catch{}},[Ls]);const Dl=async()=>{var o,d,f,k,E;if(l!=null&&l.access_token){pn(!1);try{const _=await fetch(`${ee}/me`,{headers:te(!1)});if(!_.ok)throw new Error("Failed to load profile");const D=await _.json();h(D.user),x(D.memberships||[]),j(D.invites||[]);const H=new Set((D.invites||[]).map(he=>String(he.id))),P=(D.invites||[]).filter(he=>!Ml.current.has(he.id));Ml.current.size>0&&P.length>0&&P.forEach(he=>{var ae,si,ii;const st=ze((ae=he.tenant)==null?void 0:ae.name)||he.tenantId,ie=((si=he.invitedBy)==null?void 0:si.name)||((ii=he.invitedBy)==null?void 0:ii.email)||he.invitedByUserId||"Someone";vn(Aa=>[{id:`invite-${he.id}`,message:`${ie} invited you to ${st}`,huddleName:st,timestamp:new Date(he.createdAt||Date.now()).toISOString(),read:!1,tenantId:he.tenantId},...Aa])}),Ml.current=H;const J=(d=(o=D.user)==null?void 0:o.preferences)==null?void 0:d.defaultHuddleId,Ae=v&&((f=D.memberships)==null?void 0:f.some(he=>he.tenantId===v)),X=(k=D.memberships)==null?void 0:k.find(he=>he.tenantId===J),De=(E=D.memberships)==null?void 0:E[0];!Ae&&(X!=null&&X.tenantId||De!=null&&De.tenantId)&&Zt((X==null?void 0:X.tenantId)||(De==null?void 0:De.tenantId))}catch(_){Ps(_.message)}finally{pn(!0)}}};S.useEffect(()=>{Dl()},[l]),S.useEffect(()=>{u&&C===null&&oe(Sh(u))},[u,C]),S.useEffect(()=>{O&&v&&ni(v)},[O,v]),S.useEffect(()=>{v&&ri(v)},[v]),S.useEffect(()=>{ne&&ri(ne)},[ne]),S.useEffect(()=>{Z&&ri(Z)},[Z]),S.useEffect(()=>{if(!ne)return;gh(ne);const o=Ct(ne);if(o.length===0)return;const d=new Set(o.map(f=>f.userId));va&&!d.has(va)&&wl(null),Mr.length>0&&xl(Mr.filter(f=>d.has(f)))},[ne,W]),S.useEffect(()=>{if(!ne)return;const o=Zs(ne);o.length!==0&&(!Vs||!o.some(d=>d.id===Vs))&&Ur(o[0].id)},[ne,Vs,ca,Cr]),S.useEffect(()=>{if(!Z)return;gh(Z);const o=Ct(Z);if(o.length===0)return;const d=new Set(o.map(f=>f.userId));xa&&!d.has(xa)&&bl(null),Br.length>0&&Nl(Br.filter(f=>d.has(f)))},[Z,W]),S.useEffect(()=>{if(!Z)return;const o=Zs(Z);!o||o.length===0||(!Xn||!o.some(d=>d.id===Xn))&&wa(o[0].id)},[Z,ca,Xn]),S.useEffect(()=>{yl&&Il.current&&(Il.current.innerHTML=nt.description||"")},[yl]),S.useEffect(()=>{Sl&&Ol.current&&(Ol.current.innerHTML=rt.description||"")},[Sl]);const M=_l?be.find(o=>o.id===_l)??null:null,wh=M?be.filter(o=>(o.linkedTaskIds||[]).includes(M.id)):[],xh=new Map(be.map(o=>[o.id,o])),ba=String((u==null?void 0:u.email)||((ef=l==null?void 0:l.user)==null?void 0:ef.email)||"U"),_y=ba.charAt(0).toUpperCase()||"U",kh=(C==null?void 0:C.avatarUrl)||(u==null?void 0:u.avatarUrl)||"",jh=o=>o?new Date(o).toISOString().slice(0,10):"",Ne=Cr.find(o=>o.id===le)||gn,Zs=o=>((o?ca[o]||(o===v?Cr:[]):Cr)||[]).filter(f=>f.id!=="all"),Hr=o=>{var f;const d=Zs(o);return o===v&&le&&le!=="all"&&d.some(k=>k.id===le)?le:((f=d[0])==null?void 0:f.id)||"default-board"},Sy=()=>{var d;Yn({title:"",description:"",priority:(C==null?void 0:C.defaultPriority)||"MEDIUM",dueDate:""}),oh((C==null?void 0:C.defaultStatus)||gt.BACKLOG),Dr([]),$r([]),Lr("");const o=v||((d=ce[0])==null?void 0:d.tenantId)||null;ah(o),Ur(Hr(o)),wl((u==null?void 0:u.id)||null),xl([]),lh(""),ma(!0)},ze=o=>o?o.toLowerCase()==="personal"?"Private Huddle":o:"Huddle",by=o=>{let d=0;for(let f=0;f<o.length;f+=1)d=(d<<5)-d+o.charCodeAt(f),d|=0;return Math.abs(d)},Et=(o,d)=>{const f=`${o||""}:${d||""}`,k=by(f)%360;return{solid:`hsl(${k} 70% 60%)`,soft:`hsla(${k}, 70%, 60%, 0.16)`,border:`hsla(${k}, 70%, 60%, 0.35)`,text:`hsl(${k} 70% 75%)`}},Na=(o,d)=>{var k,E;if(!o||!d)return"Unassigned";const f=(W[o]||[]).find(_=>_.userId===d);return((k=f==null?void 0:f.user)==null?void 0:k.name)||((E=f==null?void 0:f.user)==null?void 0:E.email)||d},$l=(o,d)=>{var k,E,_;if(!o||!d)return{label:"Unassigned",avatarUrl:""};const f=(W[o]||[]).find(D=>D.userId===d);return{label:((k=f==null?void 0:f.user)==null?void 0:k.name)||((E=f==null?void 0:f.user)==null?void 0:E.email)||d,avatarUrl:((_=f==null?void 0:f.user)==null?void 0:_.avatarUrl)||""}},ei=o=>{var f,k;if(!o)return!1;const d=p.find(E=>E.tenantId===o);return((k=(f=d==null?void 0:d.tenant)==null?void 0:f.name)==null?void 0:k.toLowerCase())==="personal"},Ct=o=>{var k,E;if(!o)return[];const d=W[o]||[];if(!ei(o))return d;const f=d.find(_=>_.userId===_n);return f?[f]:_n?[{userId:_n,role:"owner",user:{name:(u==null?void 0:u.name)||(u==null?void 0:u.email)||((k=l==null?void 0:l.user)==null?void 0:k.email)||"You",email:(u==null?void 0:u.email)||((E=l==null?void 0:l.user)==null?void 0:E.email)||"",avatarUrl:(u==null?void 0:u.avatarUrl)||""}}]:[]},_h=o=>{if(!o.startsWith("/okr"))return null;const d=o.split("/").filter(Boolean);return d.length===1||d[1]==="objectives"?{screen:"library"}:d[1]==="objective"&&d[2]?{screen:"objective",objectiveId:d[2]}:d[1]==="review"&&d[2]?{screen:"review",objectiveId:d[2]}:{screen:"library"}},nr=o=>{window.history.pushState({},"",o),t("okr"),eh(_h(o))},Sh=o=>{var f,k,E,_,D,H,P,J,Ae,X,De,he,st,ie,ae,si,ii,Aa,If,Of,Af;const d=(o==null?void 0:o.preferences)||{};return{name:(o==null?void 0:o.name)||"",avatarUrl:(o==null?void 0:o.avatarUrl)||"",timezone:d.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone||"",locale:d.locale||navigator.language||"en",profileVisibility:d.profileVisibility||"huddle",defaultHuddleId:d.defaultHuddleId||v||"",defaultPriority:d.defaultPriority||"MEDIUM",defaultStatus:d.defaultStatus||"BACKLOG",notifications:{email:{assigned:((k=(f=d.notifications)==null?void 0:f.email)==null?void 0:k.assigned)??!0,mentions:((_=(E=d.notifications)==null?void 0:E.email)==null?void 0:_.mentions)??!0,due:((H=(D=d.notifications)==null?void 0:D.email)==null?void 0:H.due)??!0,invites:((J=(P=d.notifications)==null?void 0:P.email)==null?void 0:J.invites)??!0},inApp:{assigned:((X=(Ae=d.notifications)==null?void 0:Ae.inApp)==null?void 0:X.assigned)??!0,mentions:((he=(De=d.notifications)==null?void 0:De.inApp)==null?void 0:he.mentions)??!0,due:((ie=(st=d.notifications)==null?void 0:st.inApp)==null?void 0:ie.due)??!0,invites:((si=(ae=d.notifications)==null?void 0:ae.inApp)==null?void 0:si.invites)??!0}},workingHours:{start:((ii=d.workingHours)==null?void 0:ii.start)||"09:00",end:((Aa=d.workingHours)==null?void 0:Aa.end)||"17:00",days:((If=d.workingHours)==null?void 0:If.days)||["Mon","Tue","Wed","Thu","Fri"]},reminders:{dueSoonHours:((Of=d.reminders)==null?void 0:Of.dueSoonHours)??24,dailySummaryTime:((Af=d.reminders)==null?void 0:Af.dailySummaryTime)||"09:00"},taskTemplates:d.taskTemplates||[]}},Ll=o=>{var E,_;const d=o.trim().split(/\s+/),f=((E=d[0])==null?void 0:E[0])||"",k=d.length>1&&((_=d[d.length-1])==null?void 0:_[0])||"";return(f+k).toUpperCase()||"U"},jn=(o,d,f="")=>a.jsx("div",{className:`avatar-stack ${f}`.trim(),children:d.map(k=>{const{label:E,avatarUrl:_}=$l(o,k);return a.jsx("span",{className:"avatar avatar-tooltip","data-label":E,"aria-label":E,title:E,children:_?a.jsx("img",{src:_,alt:E}):Ll(E)},k)})}),bh=o=>{var d,f;return((f=(d=o==null?void 0:o.tenant)==null?void 0:d.name)==null?void 0:f.toLowerCase())==="personal"},{displayMemberships:ce,activeMembership:Xt,activeHuddleName:Ea,isPersonalActive:Nh,hasSharedHuddles:Ny,activeHuddleAccent:v_}=S.useMemo(()=>{var _,D,H,P;const o=p.filter(bh),d=p.filter(J=>!bh(J)),f=o.find(J=>J.tenantId===v)||o[0],k=f?[f,...d]:d,E=p.find(J=>J.tenantId===v)||f;return{displayMemberships:k,activeMembership:E,activeHuddleName:ze((_=E==null?void 0:E.tenant)==null?void 0:_.name),isPersonalActive:((H=(D=E==null?void 0:E.tenant)==null?void 0:D.name)==null?void 0:H.toLowerCase())==="personal",hasSharedHuddles:d.length>0,activeHuddleAccent:Et(v,(P=E==null?void 0:E.tenant)==null?void 0:P.name)}},[p,v]),Eh=(Xt==null?void 0:Xt.role)==="OWNER"||(Xt==null?void 0:Xt.role)==="ADMIN",Ca=S.useMemo(()=>{if(e==="settings")return[{label:"Settings"}];const d=[{label:Ea||"Huddle",onClick:()=>t("dashboard")}];return e==="okr"?(d.push({label:"OKRs",onClick:()=>nr("/okr")}),Ht==="objective"&&K&&d.push({label:K.title,onClick:()=>Sa(K.id)}),Ht==="review"&&K&&d.push({label:"Review"}),d):(e==="dashboard"&&d.push({label:"Dashboard",onClick:()=>t("dashboard")}),e==="table"&&d.push({label:Ne!=null&&Ne.name?`Table  ${Ne.name}`:"Table",onClick:()=>t("table")}),e==="list"&&d.push({label:Ne!=null&&Ne.name?`Table  ${Ne.name}`:"Table",onClick:()=>t("table")}),e==="archived"&&d.push({label:"Archived",onClick:()=>t("archived")}),e==="kanban"&&d.push({label:(Ne==null?void 0:Ne.name)||"Board",onClick:()=>t("kanban")}),d)},[e,Ea,Ht,K,Ne==null?void 0:Ne.name]),Ul=S.useRef({}),Ch=S.useRef(new Set),Ml=S.useRef(new Set),_n=(u==null?void 0:u.id)||"",Th=((u==null?void 0:u.email)||"").toLowerCase(),Ta=ol.filter(o=>!o.read).length,Ey=o=>{vn(d=>d.map(f=>f.id===o.id?{...f,read:!0}:f)),!(!o.taskId||!o.tenantId)&&(o.tenantId!==v&&Zt(o.tenantId),yn(o.taskId),Qt(!0),ll(!1))};S.useEffect(()=>{M!=null&&M.tenantId&&ri(M.tenantId)},[M==null?void 0:M.tenantId]),S.useEffect(()=>{jl&&i("comments")},[jl,_l]),S.useEffect(()=>{Array.from(new Set(be.map(d=>d.tenantId).filter(Boolean))).forEach(d=>ri(d))},[be]);const vt=o=>{if(o==="createLink"){const d=prompt("Link URL");d&&document.execCommand(o,!1,d);return}document.execCommand(o,!1)},ti=o=>o.replace(/<[^>]+>/g,""),Ih=o=>{o.preventDefault();const d=o.clipboardData.getData("text/plain");if(document.queryCommandSupported("insertText")){document.execCommand("insertText",!1,d);return}const f=window.getSelection();!f||f.rangeCount===0||(f.deleteFromDocument(),f.getRangeAt(0).insertNode(document.createTextNode(d)),f.collapseToEnd())},Zt=o=>{b(o);try{localStorage.setItem("kanbax-active-tenant",o)}catch{}},Cy=async o=>{o.preventDefault(),Pd(!0),Ps(null),ia(null);try{if(se==="magic"){const{error:f}=await bn.auth.signInWithOtp({email:pt,options:{emailRedirectTo:window.location.origin}});if(f)throw f;ia("Check your email for the magic link.");return}if(se==="signup"){const{error:f}=await bn.auth.signUp({email:pt,password:St,options:{emailRedirectTo:window.location.origin}});if(f)throw f;ia("Account created. Check your email to confirm.");return}const{error:d}=await bn.auth.signInWithPassword({email:pt,password:St});if(d)throw d}catch(d){Ps(d.message||"Authentication failed")}finally{Pd(!1)}},Oh=async o=>{Ps(null),ia(null);const{error:d}=await bn.auth.signInWithOAuth({provider:o,options:{redirectTo:window.location.origin}});d&&Ps(d.message)},Ia=async()=>{await bn.auth.signOut(),h(null),x([]),j([]),b(null);try{localStorage.removeItem("kanbax-active-tenant")}catch{}},Ah=async o=>{o.preventDefault(),me(null);try{const d=await fetch(`${ee}/teams`,{method:"POST",headers:te(!1),body:JSON.stringify({name:m})});if(!d.ok){const k=await d.json();throw new Error(k.error||"Failed to create huddle")}const f=await d.json();y(""),x(k=>k.concat({...f.membership,tenant:f.tenant})),Zt(f.tenant.id)}catch(d){me(d.message)}},ni=async o=>{try{const d=await fetch(`${ee}/teams/${o}/members`,{headers:te(!0)});if(!d.ok)throw new Error("Failed to load members");const f=await d.json();Q(f)}catch(d){me(d.message)}},Ty=async o=>{if(o.preventDefault(),!!v){me(null);try{const d=await fetch(`${ee}/teams/${v}/invites`,{method:"POST",headers:te(!0),body:JSON.stringify({email:N,role:T})});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to invite member")}A(""),await ni(v)}catch(d){me(d.message)}}},ri=async o=>{if(!(!o||W[o]||!(l!=null&&l.access_token)))try{const d=await fetch(`${ee}/teams/${o}/members`,{headers:te(!1)});if(!d.ok)throw new Error("Failed to load members");const f=await d.json();ge(k=>({...k,[o]:f}))}catch(d){me(d.message)}},Rh=async(o,d)=>{me(null);try{const f=await fetch(`${ee}/invites/${o.id}/${d}`,{method:"POST",headers:te(!1)});if(!f.ok){const k=await f.json();throw new Error(k.error||"Failed to update invite")}d==="accept"&&o.tenantId&&Zt(o.tenantId),await Dl(),d==="accept"&&V(!1)}catch(f){me(f.message)}},Iy=async()=>{if(C){$d(!0),al(null);try{const o=await fetch(`${ee}/me`,{method:"PATCH",headers:te(!1),body:JSON.stringify({name:C.name,avatarUrl:C.avatarUrl,preferences:{timezone:C.timezone,locale:C.locale,profileVisibility:C.profileVisibility,defaultHuddleId:C.defaultHuddleId||null,defaultPriority:C.defaultPriority,defaultStatus:C.defaultStatus,notifications:C.notifications,workingHours:C.workingHours,reminders:C.reminders,taskTemplates:C.taskTemplates}})});if(!o.ok){const f=await o.json();throw new Error(f.error||"Failed to save settings")}const d=await o.json();h(d.user),oe(Sh(d.user)),Gn("Settings saved")}catch(o){Gn(o.message)}finally{$d(!1)}}},Oy=async()=>{if(!(u!=null&&u.email))return;al(null);const{error:o}=await bn.auth.resetPasswordForEmail(u.email,{redirectTo:window.location.origin});if(o){Gn(o.message);return}Gn("Password reset email sent.")},Ay=async o=>{if(!o||o.length===0||!C)return;const d=o[0],f=new FileReader;f.onload=()=>{oe({...C,avatarUrl:String(f.result||"")})},f.readAsDataURL(d)},Ph=(o,d,f="text/plain")=>{const k=new Blob([d],{type:f}),E=URL.createObjectURL(k),_=document.createElement("a");_.href=E,_.download=o,_.click(),URL.revokeObjectURL(E)},Ry=()=>{const o=JSON.stringify(be,null,2);Ph("kanbax-tasks.json",o,"application/json")},Py=()=>{const d=[["id","title","status","priority","dueDate","ownerId","assignees","huddleId"],...be.map(f=>[f.id,f.title.replace(/"/g,'""'),f.status,f.priority,f.dueDate?new Date(f.dueDate).toISOString():"",f.ownerId||"",(f.assignees||[]).join("|"),f.tenantId])].map(f=>f.map(k=>`"${k}"`).join(",")).join(`
`);Ph("kanbax-tasks.csv",d,"text/csv")},Dy=async o=>{al(null);try{const d=await fetch(`${ee}/teams/${o}/leave`,{method:"POST",headers:te(!1)});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to leave huddle")}await Dl(),v===o&&Zt(""),Gn("Left huddle")}catch(d){Gn(d.message)}};S.useEffect(()=>{if(!aa)return;const o=setTimeout(()=>Gn(null),3e3);return()=>clearTimeout(o)},[aa]);const $y=o=>o.toLowerCase(),Ly=(o,d,f)=>{const k=Ul.current,E={...k};if(!Ch.current.has(o)){f.forEach(_=>{E[`${o}:${_.id}`]={status:_.status,ownerId:_.ownerId||null,assignees:_.assignees||[],updatedAt:_.updatedAt,commentIds:_.comments.map(D=>D.id)}}),Ch.current.add(o),Ul.current=E;return}f.forEach(_=>{const D=`${o}:${_.id}`,H=k[D],P=_.activityLog&&_.activityLog.length>0?[..._.activityLog].sort((ie,ae)=>new Date(ae.timestamp).getTime()-new Date(ie.timestamp).getTime())[0]:null,J=(P==null?void 0:P.actorId)===_n;if(!H){J||vn(ie=>[{id:`task-new-${D}`,message:`New task created: ${_.title}`,huddleName:d,timestamp:new Date(_.createdAt).toISOString(),read:!1,taskId:_.id,tenantId:o},...ie]),E[D]={status:_.status,ownerId:_.ownerId||null,assignees:_.assignees||[],updatedAt:_.updatedAt,commentIds:_.comments.map(ie=>ie.id)};return}H.status!==_.status&&!J&&vn(ie=>[{id:`task-status-${D}-${_.updatedAt}`,message:`Status changed: ${_.title}  ${_.status}`,huddleName:d,timestamp:new Date(_.updatedAt).toISOString(),read:!1,taskId:_.id,tenantId:o},...ie]),H.ownerId!==_.ownerId&&_.ownerId&&!(_.ownerId===_n)&&!J&&vn(ae=>[{id:`task-owner-${D}-${_.updatedAt}`,message:`Owner changed: ${_.title}`,huddleName:d,timestamp:new Date(_.updatedAt).toISOString(),read:!1,taskId:_.id,tenantId:o},...ae]);const Ae=new Set(H.assignees||[]);new Set(_.assignees||[]);const X=_.assignees.filter(ie=>!Ae.has(ie));if(X.length>0){const ie=_n&&X.includes(_n);J||vn(ae=>[{id:`task-assignees-${D}-${_.updatedAt}`,message:ie?`You were added to ${_.title}`:`Assignees updated: ${_.title}`,huddleName:d,timestamp:new Date(_.updatedAt).toISOString(),read:!1,taskId:_.id,tenantId:o},...ae])}const De=new Set(H.commentIds||[]),he=_.comments.filter(ie=>!De.has(ie.id)),st=he.some(ie=>ie.createdBy!==_n);if(he.length>0&&st){const ie=he.some(ae=>Th&&$y(ae.text).includes(`@${Th}`));J||vn(ae=>[{id:`task-comment-${D}-${_.updatedAt}`,message:ie?`You were mentioned in ${_.title}`:`New comment on ${_.title}`,huddleName:d,timestamp:new Date(_.updatedAt).toISOString(),read:!1,taskId:_.id,tenantId:o},...ae])}E[D]={status:_.status,ownerId:_.ownerId||null,assignees:_.assignees||[],updatedAt:_.updatedAt,commentIds:_.comments.map(ie=>ie.id)}}),Ul.current=E};S.useEffect(()=>{if(!(l!=null&&l.access_token)||ce.length===0)return;let o=!1;const d=async()=>{var f;if(!oa.current){oa.current=!0;for(const k of ce){const E=k.tenantId,_=ze((f=k.tenant)==null?void 0:f.name);try{const D=await fetch(`${ee}/tasks`,{headers:te(!0,E)});if(!D.ok)continue;const H=await D.json();o||(zd(P=>({...P,[E]:H})),Ly(E,_,H))}catch{}}oa.current=!1}};return d(),Er.current&&clearInterval(Er.current),Er.current=window.setInterval(d,3e4),()=>{o=!0,oa.current=!1,Er.current&&(clearInterval(Er.current),Er.current=null)}},[l==null?void 0:l.access_token,ce]);const Uy=async(o,d)=>{if(v){me(null);try{const f=await fetch(`${ee}/teams/${v}/members/${o}`,{method:"PATCH",headers:te(!0),body:JSON.stringify({role:d})});if(!f.ok){const k=await f.json();throw new Error(k.error||"Failed to update role")}await ni(v)}catch(f){me(f.message)}}},My=async o=>{if(v){me(null);try{const d=await fetch(`${ee}/teams/${v}/members/${o}`,{method:"DELETE",headers:te(!0)});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to remove member")}await ni(v)}catch(d){me(d.message)}}},Dh=vl.trim().toLowerCase(),$h=o=>gl&&!o.isFavorite||Pr!=="ALL"&&o.priority!==Pr?!1:Dh?[o.title,ti(o.description||""),o.kinds.join(" ")].join(" ").toLowerCase().includes(Dh):!0,Lh=be.filter($h),Bl=e==="archived"?Lh.filter(o=>o.status===gt.ARCHIVED):Lh.filter(o=>o.status!==gt.ARCHIVED),Uh=new Set(be.flatMap(o=>o.linkedTaskIds)),Vt=vl.trim().toLowerCase(),By=Vt?Object.entries(Bd).flatMap(([o,d])=>(d||[]).map(f=>({...f,tenantId:f.tenantId||o}))):[],zl=Vt?By.filter(o=>[o.title,ti(o.description||""),o.kinds.join(" ")].join(" ").toLowerCase().includes(Vt)):[],Fl=Vt?ce.filter(o=>{var f;return(ze((f=o.tenant)==null?void 0:f.name)||o.tenantId).toLowerCase().includes(Vt)}):[],Hl=Vt&&(gn!=null&&gn.columns)?gn.columns.filter(o=>String(o.status).toLowerCase().includes(Vt)):[],Mh=ce.length>0&&ce.every(o=>!!Bd[o.tenantId]),Oa=(o,d,f)=>`${o||"unknown"}:${d||"unknown"}:${f}`,Vl=(o,d,f)=>{if(!(!o||!d))try{localStorage.setItem(`kanbax-task-order:${o}:${d}`,JSON.stringify(f))}catch{}},Wl=(o,d)=>{o==="task"&&(d.tenantId&&d.tenantId!==v?(Ud({taskId:d.id,tenantId:d.tenantId}),Zt(d.tenantId)):(yn(d.id),Qt(!0))),o==="huddle"&&(Zt(d.tenantId),t("kanban")),o==="column"&&t("kanban"),th("")};S.useEffect(()=>{!$s||$s.tenantId!==v||!be.some(d=>d.id===$s.taskId)||(yn($s.taskId),Qt(!0),Ud(null))},[$s,v,be]),S.useEffect(()=>{if(!Vt){Fd(!1);return}Fd(!1)},[Vt,l,ce]),S.useEffect(()=>{if(!(!v||!le))try{const o=localStorage.getItem(`kanbax-task-order:${v}:${le}`);if(o){const d=JSON.parse(o);Sr(d)}else Sr({})}catch{Sr({})}},[v,le]),S.useEffect(()=>{if(!v||be.length===0)return;const o={...Md};Array.from(new Set(be.map(f=>f.status))).forEach(f=>{const k=Oa(v,le,f),E=o[k]||[],_=be.filter(P=>P.status===f).map(P=>P.id),D=E.filter(P=>_.includes(P)),H=_.filter(P=>!D.includes(P));o[k]=D.concat(H)}),Sr(o),Vl(v,le,o)},[v,le,be]),be.filter(o=>o.status!==gt.ARCHIVED);const zy=async o=>{o.preventDefault();try{const d=Vs||Hr(ne),f=await fetch(`${ee}/commands/task/create`,{method:"POST",headers:te(!0,ne),body:JSON.stringify({title:nt.title,description:nt.description,kinds:Hs,status:sy,priority:nt.priority,dueDate:nt.dueDate||void 0,attachments:sh,ownerId:va??(u==null?void 0:u.id)??void 0,assignees:Mr,boardId:d,source:{type:"MANUAL",createdBy:"admin-user-1"}})});if(!f.ok){const k=await f.json();throw new Error(k.error||"Failed to create task")}ma(!1),Yn({title:"",description:"",priority:"MEDIUM",dueDate:""}),Dr([]),$r([]),Lr(""),Ur(null),Hs.length>0&&ja(k=>{const E=new Set(k);Hs.forEach(D=>E.add(D));const _=Array.from(E).sort((D,H)=>D.localeCompare(H));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(_))}catch{}return _}),Ft()}catch(d){alert(d.message)}},Bh=async(o,d)=>{try{const f=await fetch(`${ee}/commands/task/update-status`,{method:"POST",headers:te(),body:JSON.stringify({taskId:o,newStatus:d})});if(!f.ok){const k=await f.json();throw new Error(k.error||"Failed to update status")}Ft()}catch(f){alert(f.message)}},Fy=async o=>{const d=o.status===gt.ARCHIVED?gt.BACKLOG:gt.ARCHIVED;await Bh(o.id,d)},Hy=async o=>{if(confirm("Are you sure you want to delete this task?"))try{const d=await fetch(`${ee}/commands/task/delete`,{method:"POST",headers:te(),body:JSON.stringify({taskId:o})});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to delete task")}Qt(!1),yn(null),Ft()}catch(d){alert(d.message)}},Kl=o=>{yn(o.id),wn(o.checklist||[]),El(""),xn(""),tr(o.linkedTaskIds||[]),kn(""),Qt(!0)},Vy=o=>{Vg||Date.now()-Wd.current<200||Kl(o)},zh=o=>{if(o.sourceType!=="MANUAL")return;ya(o.id),ay(o.tenantId),ch(o.tenantId),wa(o.boardId||Hr(o.tenantId)),uh(o.boardId||Hr(o.tenantId)),bl(o.ownerId??null),Nl(o.assignees??[]);const d=o.dueDate?new Date(o.dueDate).toISOString().split("T")[0]:"";Ks({title:o.title,description:o.description||"",priority:o.priority,dueDate:d}),Qs(o.kinds||[]),Ys(""),wn(o.checklist||[]),xn(""),tr(o.linkedTaskIds||[]),kn(""),o.kinds&&o.kinds.length>0&&ja(f=>{const k=new Set(f);o.kinds.forEach(_=>{_.trim().length>0&&k.add(_)});const E=Array.from(k).sort((_,D)=>_.localeCompare(D));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(E))}catch{}return E}),dh(o.attachments||[]),Zn([]),Gs([]),ga(!0)},Wy=async o=>{if(!o||o.length===0)return;const d=Array.from(o).map(f=>new Promise((k,E)=>{const _=new FileReader;_.onload=()=>k({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:f.name,size:f.size,type:f.type||"application/octet-stream",dataUrl:String(_.result||""),uploadedAt:new Date}),_.onerror=()=>E(new Error("Failed to read file")),_.readAsDataURL(f)}));try{const f=await Promise.all(d);Dr(k=>k.concat(f))}catch(f){alert(f.message||"Failed to attach file")}},Ky=o=>{Dr(d=>d.filter(f=>f.id!==o))},Fh=(o,d)=>{const f=o.trim();return f?(d(k=>k.some(_=>_.toLowerCase()===f.toLowerCase())?k:[...k,f]),!0):!1},Hh=()=>{Fh(ih,$r)&&Lr("")},Vh=()=>{Fh(hh,Qs)&&Ys("")},Wh=(o,d)=>{(o.key==="Enter"||o.key===",")&&(o.preventDefault(),d==="new"?Hh():Vh())},Kh=(o,d)=>{d(f=>f.filter(k=>k!==o))},en=async o=>{if(!M)return;const d=await fetch(`${ee}/commands/task/update-details`,{method:"POST",headers:te(!0,M.tenantId),body:JSON.stringify({taskId:M.id,title:M.title,description:M.description,...o})});if(!d.ok){const f=await d.json();throw new Error(f.error||"Failed to update task")}await Ft()},qy=async()=>{const o=fh.trim();if(!(!o||!M))try{await en({commentText:o}),El("")}catch(d){alert(d.message)}},qh=async()=>{const o=Cl.trim();if(!o||!M)return;const d=[...er,{id:Math.random().toString(36).substring(2,15),text:o,done:!1}];wn(d),xn("");try{await en({checklist:d})}catch(f){alert(f.message)}},Gh=async o=>{const d=er.map(f=>f.id===o?{...f,done:!f.done}:f);wn(d);try{await en({checklist:d})}catch(f){alert(f.message)}},Jh=async o=>{const d=er.filter(f=>f.id!==o);wn(d);try{await en({checklist:d})}catch(f){alert(f.message)}},Qh=async()=>{if(!Xs||!M)return;const o=zt.includes(Xs)?zt:[...zt,Xs];tr(o),kn("");try{await en({linkedTaskIds:o})}catch(d){alert(d.message)}},Yh=async o=>{const d=zt.filter(f=>f!==o);tr(d);try{await en({linkedTaskIds:d})}catch(f){alert(f.message)}},Gy=async o=>{try{await fetch(`${ee}/commands/task/update-details`,{method:"POST",headers:te(!0,o.tenantId),body:JSON.stringify({taskId:o.id,title:o.title,description:o.description,isFavorite:!o.isFavorite})}),Ft()}catch(d){alert(d.message)}},Xh=async o=>{if(!o||o.length===0)return;const d=Array.from(o).map(f=>new Promise((k,E)=>{const _=new FileReader;_.onload=()=>k({id:crypto.randomUUID?crypto.randomUUID():Math.random().toString(36).slice(2),name:f.name,size:f.size,type:f.type||"application/octet-stream",dataUrl:String(_.result||""),uploadedAt:new Date}),_.onerror=()=>E(new Error("Failed to read file")),_.readAsDataURL(f)}));try{const f=await Promise.all(d);Zn(k=>k.concat(f))}catch(f){alert(f.message||"Failed to attach file")}},Jy=o=>{Zn(d=>d.filter(f=>f.id!==o)),dh(d=>(d.some(k=>k.id===o)&&Gs(k=>k.concat(o)),d.filter(k=>k.id!==o)))},Qy=async o=>{if(o.preventDefault(),!!Ws)try{const d=await fetch(`${ee}/commands/task/update-details`,{method:"POST",headers:te(!0,qs),body:JSON.stringify({taskId:Ws,title:rt.title,description:rt.description,kinds:Js,priority:rt.priority,dueDate:rt.dueDate?rt.dueDate:null,ownerId:xa||null,assignees:Br,attachmentsToAdd:ka,attachmentsToRemove:ly})});if(!d.ok){const k=await d.json();throw new Error(k.error||"Failed to update task")}if(Z&&qs&&Z!==qs){const k=await fetch(`${ee}/commands/task/assign-huddle`,{method:"POST",headers:te(!0,qs),body:JSON.stringify({taskId:Ws,targetTenantId:Z})});if(!k.ok){const E=await k.json();throw new Error(E.error||"Failed to move task to huddle")}}const f=Z||qs;if(Xn&&f&&Xn!==iy){const k=await fetch(`${ee}/commands/task/assign-board`,{method:"POST",headers:te(!0,f),body:JSON.stringify({taskId:Ws,boardId:Xn})});if(!k.ok){const E=await k.json();throw new Error(E.error||"Failed to move task to board")}}ga(!1),ya(null),wa(null),uh(null),Qt(!1),yn(null),Zn([]),Gs([]),wn([]),xn(""),tr([]),kn(""),Js.length>0&&ja(k=>{const E=new Set(k);Js.forEach(D=>E.add(D));const _=Array.from(E).sort((D,H)=>D.localeCompare(H));try{localStorage.setItem("kanbax-kind-history",JSON.stringify(_))}catch{}return _}),Ft()}catch(d){alert(d.message)}},Yy=(o,d)=>{Wd.current=Date.now(),o.dataTransfer.setData("text/plain",d),o.dataTransfer.effectAllowed="move",Hd(d),Vd(!0)},Xy=o=>{document.querySelectorAll(".task-card.drag-over-card").forEach(d=>{d.classList.remove("drag-over-card")}),Hd(null),Nr.current=null,setTimeout(()=>Vd(!1),200)},Zy=o=>{o.preventDefault(),o.dataTransfer.dropEffect="move",o.currentTarget.classList.add("drag-over"),o.target===o.currentTarget&&(Nr.current=null)},ew=o=>{o.currentTarget.classList.remove("drag-over")},tw=(o,d)=>{o.preventDefault(),o.currentTarget.classList.remove("drag-over");const f=o.dataTransfer.getData("text/plain")||br||"";if(!f||!v)return;const k=be.find(H=>H.id===f),E=k==null?void 0:k.status,_=Oa(v,le,d),D=Nr.current;if(Nr.current=null,E&&E!==d&&Bh(f,d),D!=null&&D.startsWith(`${d}:`)){const H=D.split(":")[1]||null;H&&Zh(v,le,d,f,H);return}Sr(H=>{const P={...H},J=(P[_]||[]).filter(Ae=>Ae!==f);return P[_]=J.concat(f),Vl(v,le,P),P})},Zh=(o,d,f,k,E)=>{const _=Oa(o,d,f);Sr(D=>{const H={...D},P=(H[_]||[]).filter(J=>J!==k);if(E){const J=P.indexOf(E);J===-1?P.push(k):P.splice(J,0,k)}else P.push(k);return H[_]=P,Vl(o,d,H),H})},nw=(o,d,f)=>{if(o.preventDefault(),o.dataTransfer.dropEffect="move",!br||br===f||!v)return;const k=be.find(_=>_.id===br);if(!k||k.status!==d)return;const E=`${d}:${f}`;Nr.current!==E&&(Nr.current=E,Zh(v,le,d,br,f),o.currentTarget.classList.add("drag-over-card"))},rw=o=>{const d=o.currentTarget,f=o.relatedTarget;d.contains(f)||o.currentTarget.classList.remove("drag-over-card")};return l?qn?p.length===0&&!Is?a.jsx("div",{className:"auth-screen",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Create your first huddle"}),a.jsx("p",{children:"Set up a shared space and invite teammates."})]}),a.jsxs("form",{className:"auth-form",onSubmit:Ah,children:[a.jsxs("label",{children:["Huddle name",a.jsx("input",{type:"text",value:m,onChange:o=>y(o.target.value),placeholder:"Design Squad",required:!0})]}),a.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create huddle"}),q&&a.jsx("div",{className:"auth-error",children:q})]}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>il(!0),children:"Continue with private huddle"}),a.jsx("button",{className:"btn btn-ghost",onClick:Ia,children:"Sign out"})]})}):!v&&p.length>0&&!Is?a.jsx("div",{className:"auth-screen",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Select a huddle"}),a.jsx("p",{children:"Choose a space to continue."})]}),a.jsx("div",{className:"auth-form",children:a.jsxs("label",{children:["Huddle",a.jsxs("select",{value:v||"",onChange:o=>Zt(o.target.value),children:[a.jsx("option",{value:"",disabled:!0,children:"Select huddle"}),ce.map(o=>{var d;return a.jsx("option",{value:o.tenantId,children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId},o.id)})]})]})}),a.jsx("button",{className:"btn btn-ghost",onClick:Ia,children:"Sign out"})]})}):a.jsxs("div",{className:`dashboard${Ls?" sidebar-collapsed":""}`,children:[a.jsx("datalist",{id:"kind-suggestions",children:cy.map(o=>a.jsx("option",{value:o},o))}),a.jsx("header",{className:"topbar",children:a.jsxs("div",{className:"topbar-inner",children:[a.jsxs("div",{className:"topbar-search",tabIndex:-1,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7"}),a.jsx("path",{d:"M20 20l-3.5-3.5"})]}),a.jsx("input",{type:"search",placeholder:"Search tasks, boards, huddles...",value:vl,onChange:o=>th(o.target.value)})]}),Vt&&a.jsxs("div",{className:"topbar-search-panel",children:[!Mh&&a.jsx("div",{className:"empty-state",children:"Indexing huddles..."}),Mh&&Fl.length===0&&zl.length===0&&Hl.length===0&&a.jsx("div",{className:"empty-state",children:"No results."}),Fl.length>0&&a.jsxs("div",{className:"search-section",children:[a.jsx("div",{className:"search-title",children:"Huddles"}),Fl.map(o=>{var d,f;return a.jsxs("button",{className:"search-item",onClick:()=>Wl("huddle",o),children:[a.jsx("span",{className:"huddle-item-dot",style:{background:Et(o.tenantId,(d=o.tenant)==null?void 0:d.name).solid}}),ze((f=o.tenant)==null?void 0:f.name)||o.tenantId]},o.id)})]}),zl.length>0&&a.jsxs("div",{className:"search-section",children:[a.jsx("div",{className:"search-title",children:"Tasks"}),zl.slice(0,6).map(o=>a.jsx("button",{className:"search-item",onClick:()=>Wl("task",o),children:o.title},o.id))]}),Hl.length>0&&a.jsxs("div",{className:"search-section",children:[a.jsx("div",{className:"search-title",children:"Board columns"}),Hl.map(o=>a.jsx("button",{className:"search-item",onClick:()=>Wl("column",o),children:o.status},o.status))]})]}),a.jsxs("div",{className:"topbar-actions",children:[a.jsxs("button",{className:"notif-button",onClick:()=>ll(o=>!o),"aria-label":"Notifications",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"}),a.jsx("path",{d:"M10 21a2 2 0 0 0 4 0"})]}),Ta>0&&a.jsx("span",{className:"notif-badge",children:Ta})]}),a.jsxs("div",{className:"user-menu",children:[a.jsx("button",{className:"user-menu-button",onClick:()=>Jn(o=>!o),"aria-label":"User menu",children:kh?a.jsx("img",{src:kh,alt:"User avatar"}):a.jsx("span",{children:Ll(ba)})}),Kg&&a.jsxs("div",{className:"user-menu-dropdown",children:[a.jsxs("div",{className:"user-menu-header",children:[a.jsx("div",{className:"user-menu-name",children:(C==null?void 0:C.name)||ba}),a.jsx("div",{className:"user-menu-email",children:ba})]}),a.jsx("button",{className:"user-menu-item",onClick:()=>{t("dashboard"),Jn(!1)},children:"Dashboard"}),a.jsx("button",{className:"user-menu-item",onClick:()=>{t("kanban"),Jn(!1)},children:"Board"}),a.jsx("button",{className:"user-menu-item",onClick:()=>{nr("/okr"),Jn(!1)},children:"OKRs"}),a.jsxs("button",{className:"user-menu-item",onClick:()=>{ll(!0),Jn(!1)},children:["Notifications ",Ta>0?`(${Ta})`:""]}),a.jsx("button",{className:"user-menu-item",onClick:()=>{t("settings"),Jn(!1)},children:"Settings"}),a.jsx("button",{className:"user-menu-item danger",onClick:()=>{Jn(!1),Ia()},children:"Sign out"})]})]})]})]})}),a.jsxs("aside",{className:"sidebar",children:[a.jsx("div",{className:"sidebar-header",children:a.jsxs("div",{className:"sidebar-brand",children:[a.jsx("img",{className:"sidebar-logo",src:"/sqirch_logo.svg",alt:"sqirch"}),a.jsx("img",{className:"sidebar-logo-mark",src:"/sqirch_mark.svg",alt:"","aria-hidden":"true"})]})}),a.jsxs("div",{className:"sidebar-content",children:[a.jsxs("div",{className:"sidebar-huddle",children:[a.jsxs("button",{className:"sidebar-nav-item sidebar-huddle-toggle",onClick:()=>Kd(o=>!o),"data-tooltip":"Huddles","aria-label":"Select huddle",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8","aria-hidden":"true",children:[a.jsx("circle",{cx:"8",cy:"8",r:"3.2"}),a.jsx("circle",{cx:"16",cy:"8",r:"3.2"}),a.jsx("path",{d:"M3.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"}),a.jsx("path",{d:"M11.5 19c0-2.8 2.7-5 4.5-5h0c1.9 0 4.5 2.2 4.5 5"})]}),a.jsx("span",{className:"sidebar-huddle-initial",children:ze(((nf=(tf=ce.find(o=>o.tenantId===v))==null?void 0:tf.tenant)==null?void 0:nf.name)||"H").charAt(0)}),a.jsx("span",{className:"sidebar-huddle-label",children:ze((sf=(rf=ce.find(o=>o.tenantId===v))==null?void 0:rf.tenant)==null?void 0:sf.name)||"Huddle"})]}),qg&&a.jsx("div",{className:"sidebar-huddle-menu",children:ce.map(o=>{var f,k;const d=o.tenantId===v;return a.jsxs("button",{className:`sidebar-huddle-item ${d?"active":""}`,onClick:()=>{Zt(o.tenantId),Kd(!1)},children:[a.jsx("span",{className:"huddle-item-dot",style:{background:Et(o.tenantId,(f=o.tenant)==null?void 0:f.name).solid}}),a.jsx("span",{className:"sidebar-huddle-name",children:ze((k=o.tenant)==null?void 0:k.name)||o.tenantId})]},o.id)})})]}),a.jsx("div",{className:"sidebar-team",children:a.jsxs("div",{className:"sidebar-nav",children:[a.jsxs("button",{className:`sidebar-nav-item ${e==="kanban"?"active":""}`,onClick:()=>t("kanban"),"data-tooltip":"Board",children:[a.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[a.jsx("rect",{x:"3.5",y:"4",width:"7",height:"16",rx:"2"}),a.jsx("rect",{x:"13.5",y:"4",width:"7",height:"9",rx:"2"}),a.jsx("path",{d:"M13.5 16h7"})]})}),a.jsx("span",{className:"sidebar-nav-label",children:"Board"})]}),a.jsxs("button",{className:`sidebar-nav-item ${e==="okr"?"active":""}`,onClick:()=>nr("/okr"),"data-tooltip":"OKRs",children:[a.jsx("span",{className:"sidebar-nav-icon","aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.6",children:[a.jsx("path",{d:"M4 19V5"}),a.jsx("path",{d:"M9 19V9"}),a.jsx("path",{d:"M14 19V7"}),a.jsx("path",{d:"M19 19V12"})]})}),a.jsx("span",{className:"sidebar-nav-label",children:"OKRs"})]})]})}),a.jsx("div",{className:"sidebar-footer",children:a.jsx("button",{className:"sidebar-toggle",onClick:()=>Gg(o=>!o),"aria-label":Ls?"Expand sidebar":"Collapse sidebar",title:Ls?"Expand sidebar":"Collapse sidebar",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M6 12h12"}),a.jsx("path",{d:"M12 6l6 6-6 6"})]})})})]})]}),a.jsxs("main",{className:"main-content",children:[ph&&a.jsx("div",{className:"loading-strip",children:"Syncing huddle"}),Nh&&!Ny&&!Os&&a.jsxs("div",{className:"huddle-cta",children:[a.jsxs("div",{children:[a.jsx("div",{className:"huddle-cta-title",children:"Share work with a huddle"}),a.jsx("div",{className:"huddle-cta-text",children:"Create a shared huddle for your team while keeping your private tasks separate."})]}),a.jsxs("div",{className:"huddle-cta-actions",children:[a.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>w(!0),children:"Create shared huddle"}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>As(!0),children:"Dismiss"})]})]}),g.length>0&&a.jsxs("div",{className:"invite-banner",children:[a.jsxs("div",{children:[a.jsx("div",{className:"invite-title",children:"Huddle invitations"}),a.jsxs("div",{className:"invite-text",children:["You have ",g.length," pending invitation",g.length>1?"s":"","."]})]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>V(!0),children:"View invites"})]}),!v&&a.jsxs("div",{className:"team-warning",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"No huddle selected."})," Create or join a huddle to start managing tasks."]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>w(!0),children:"Create huddle"})]}),a.jsxs("div",{className:"page-heading",children:[a.jsxs("div",{className:"page-heading-row",children:[a.jsx("h1",{children:e==="settings"?"Settings":e==="okr"?"OKRs":(Ne==null?void 0:Ne.name)||Ea||"Board"}),(e==="kanban"||e==="table")&&a.jsx("button",{className:"icon-action create",disabled:!v,onClick:Sy,"data-tooltip":"Task erstellen","aria-label":"Task erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"page-breadcrumbs",children:Ca.map((o,d)=>a.jsxs("span",{className:"page-breadcrumb-item",children:[o.onClick?a.jsx("button",{type:"button",className:"page-breadcrumb-link",onClick:o.onClick,children:o.label}):a.jsx("span",{children:o.label}),d<Ca.length-1&&a.jsx("span",{className:"page-breadcrumb-sep",children:"/"}),d===Ca.length-1&&e==="okr"&&a.jsxs("span",{className:"board-switch-inline",children:[a.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>dl(f=>!f),children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})}),Qg&&a.jsxs("div",{className:"board-switch-menu",children:[a.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{dl(!1),zs(!0)},children:"+ Objective erstellen"}),Yt.map(f=>a.jsx("button",{type:"button",className:`board-switch-item ${f.id===(K==null?void 0:K.id)?"active":""}`,onClick:()=>{dl(!1),Sa(f.id)},children:f.title},f.id))]})]}),d===Ca.length-1&&(e==="kanban"||e==="table")&&a.jsxs("span",{className:"board-switch-inline",children:[a.jsx("button",{type:"button",className:"board-switch-trigger-icon",onClick:()=>ul(f=>!f),children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})}),Jg&&a.jsxs("div",{className:"board-switch-menu",children:[a.jsx("button",{type:"button",className:"board-switch-item create",onClick:()=>{ul(!1),dy()},children:"+ Board erstellen"}),Cr.map(f=>a.jsx("button",{type:"button",className:`board-switch-item ${f.id===le?"active":""}`,onClick:()=>{ul(!1),hy(f.id)},children:f.name},f.id))]})]})]},`${o.label}-${d}`))})]}),ph?a.jsxs("div",{className:"content-loader",children:[a.jsx("div",{className:"content-loader-title",children:"Loading huddle"}),a.jsx("div",{className:"content-loader-text",children:"Fetching tasks and status."})]}):e==="settings"?a.jsx("div",{className:"settings-panel",children:C?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{className:"btn btn-primary btn-compact",onClick:Iy,disabled:Dd,children:Dd?"Saving...":"Save settings"}),Ld&&a.jsx("div",{className:"settings-message",children:Ld})]}),a.jsxs("div",{className:"settings-grid",children:[a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Profile"}),a.jsxs("div",{className:"settings-avatar",children:[C.avatarUrl?a.jsx("img",{src:C.avatarUrl,alt:"Avatar preview"}):a.jsx("div",{className:"settings-avatar-placeholder",children:Ll(C.name||(u==null?void 0:u.email)||"U")}),a.jsxs("label",{className:"settings-upload",children:["Upload avatar",a.jsx("input",{type:"file",accept:"image/*",onChange:o=>Ay(o.target.files)})]})]}),a.jsxs("label",{children:["Name",a.jsx("input",{type:"text",value:C.name,onChange:o=>oe({...C,name:o.target.value})})]}),a.jsxs("label",{children:["Avatar URL",a.jsx("input",{type:"text",value:C.avatarUrl,onChange:o=>oe({...C,avatarUrl:o.target.value})})]}),a.jsxs("label",{children:["Email",a.jsx("input",{type:"text",value:(u==null?void 0:u.email)||"",readOnly:!0})]}),a.jsxs("label",{children:["Profile visibility",a.jsxs("select",{value:C.profileVisibility,onChange:o=>oe({...C,profileVisibility:o.target.value}),children:[a.jsx("option",{value:"huddle",children:"Visible to huddles"}),a.jsx("option",{value:"private",children:"Private"})]})]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Localization"}),a.jsxs("label",{children:["Timezone",a.jsx("input",{type:"text",value:C.timezone,onChange:o=>oe({...C,timezone:o.target.value})})]}),a.jsxs("label",{children:["Locale",a.jsx("input",{type:"text",value:C.locale,onChange:o=>oe({...C,locale:o.target.value})})]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Defaults"}),a.jsxs("label",{children:["Default huddle",a.jsx("select",{value:C.defaultHuddleId||"",onChange:o=>oe({...C,defaultHuddleId:o.target.value}),children:ce.map(o=>{var d;return a.jsx("option",{value:o.tenantId,children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId},o.id)})})]}),a.jsxs("label",{children:["Default priority",a.jsxs("select",{value:C.defaultPriority,onChange:o=>oe({...C,defaultPriority:o.target.value}),children:[a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"}),a.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),a.jsxs("label",{children:["Default status",a.jsxs("select",{value:C.defaultStatus,onChange:o=>oe({...C,defaultStatus:o.target.value}),children:[a.jsx("option",{value:"BACKLOG",children:"Backlog"}),a.jsx("option",{value:"TODO",children:"Todo"}),a.jsx("option",{value:"IN_PROGRESS",children:"In progress"}),a.jsx("option",{value:"DONE",children:"Done"})]})]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Notifications"}),a.jsx("div",{className:"settings-subtitle",children:"Email"}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.email.assigned,onChange:o=>oe({...C,notifications:{...C.notifications,email:{...C.notifications.email,assigned:o.target.checked}}})}),"Task assigned"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.email.mentions,onChange:o=>oe({...C,notifications:{...C.notifications,email:{...C.notifications.email,mentions:o.target.checked}}})}),"Mentions"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.email.due,onChange:o=>oe({...C,notifications:{...C.notifications,email:{...C.notifications.email,due:o.target.checked}}})}),"Due date reminders"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.email.invites,onChange:o=>oe({...C,notifications:{...C.notifications,email:{...C.notifications.email,invites:o.target.checked}}})}),"Huddle invites"]}),a.jsx("div",{className:"settings-subtitle",children:"In-app"}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.inApp.assigned,onChange:o=>oe({...C,notifications:{...C.notifications,inApp:{...C.notifications.inApp,assigned:o.target.checked}}})}),"Task assigned"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.inApp.mentions,onChange:o=>oe({...C,notifications:{...C.notifications,inApp:{...C.notifications.inApp,mentions:o.target.checked}}})}),"Mentions"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.inApp.due,onChange:o=>oe({...C,notifications:{...C.notifications,inApp:{...C.notifications.inApp,due:o.target.checked}}})}),"Due date reminders"]}),a.jsxs("label",{className:"settings-toggle",children:[a.jsx("input",{type:"checkbox",checked:C.notifications.inApp.invites,onChange:o=>oe({...C,notifications:{...C.notifications,inApp:{...C.notifications.inApp,invites:o.target.checked}}})}),"Huddle invites"]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Working hours"}),a.jsxs("label",{children:["Start",a.jsx("input",{type:"time",value:C.workingHours.start,onChange:o=>oe({...C,workingHours:{...C.workingHours,start:o.target.value}})})]}),a.jsxs("label",{children:["End",a.jsx("input",{type:"time",value:C.workingHours.end,onChange:o=>oe({...C,workingHours:{...C.workingHours,end:o.target.value}})})]}),a.jsx("div",{className:"settings-subtitle",children:"Days"}),a.jsx("div",{className:"settings-days",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(o=>a.jsxs("label",{className:"settings-day",children:[a.jsx("input",{type:"checkbox",checked:C.workingHours.days.includes(o),onChange:d=>{const f=d.target.checked?C.workingHours.days.concat(o):C.workingHours.days.filter(k=>k!==o);oe({...C,workingHours:{...C.workingHours,days:f}})}}),o]},o))})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Reminders"}),a.jsxs("label",{children:["Due soon (hours)",a.jsx("input",{type:"number",min:1,value:C.reminders.dueSoonHours,onChange:o=>oe({...C,reminders:{...C.reminders,dueSoonHours:Number(o.target.value)}})})]}),a.jsxs("label",{children:["Daily summary",a.jsx("input",{type:"time",value:C.reminders.dailySummaryTime,onChange:o=>oe({...C,reminders:{...C.reminders,dailySummaryTime:o.target.value}})})]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Task templates"}),a.jsxs("div",{className:"template-form",children:[a.jsx("input",{type:"text",placeholder:"Template name",value:Qe.name,onChange:o=>Ds({...Qe,name:o.target.value})}),a.jsx("input",{type:"text",placeholder:"Title",value:Qe.title,onChange:o=>Ds({...Qe,title:o.target.value})}),a.jsxs("select",{value:Qe.priority,onChange:o=>Ds({...Qe,priority:o.target.value}),children:[a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"}),a.jsx("option",{value:"CRITICAL",children:"Critical"})]}),a.jsxs("select",{value:Qe.status,onChange:o=>Ds({...Qe,status:o.target.value}),children:[a.jsx("option",{value:"BACKLOG",children:"Backlog"}),a.jsx("option",{value:"TODO",children:"Todo"}),a.jsx("option",{value:"IN_PROGRESS",children:"In progress"}),a.jsx("option",{value:"DONE",children:"Done"})]}),a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>{if(!Qe.name.trim()||!Qe.title.trim())return;const o={id:Math.random().toString(36).slice(2),name:Qe.name.trim(),title:Qe.title.trim(),priority:Qe.priority,status:Qe.status};oe({...C,taskTemplates:C.taskTemplates.concat(o)}),Ds({name:"",title:"",priority:"MEDIUM",status:"BACKLOG"})},children:"Add template"})]}),a.jsxs("div",{className:"template-list",children:[C.taskTemplates.map(o=>a.jsxs("div",{className:"template-row",children:[a.jsxs("div",{children:[a.jsx("div",{className:"member-name",children:o.name}),a.jsx("div",{className:"member-meta",children:o.title})]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>{oe({...C,taskTemplates:C.taskTemplates.filter(d=>d.id!==o.id)})},children:"Remove"})]},o.id)),C.taskTemplates.length===0&&a.jsx("div",{className:"empty-state",children:"No templates yet."})]})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Huddles"}),a.jsx("div",{className:"template-list",children:ce.map(o=>{var d,f;return a.jsxs("div",{className:"template-row",children:[a.jsxs("div",{children:[a.jsx("div",{className:"member-name",children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId}),a.jsxs("div",{className:"member-meta",children:["Role: ",o.role]})]}),((f=o.tenant)==null?void 0:f.name)!=="Personal"&&a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Dy(o.tenantId),children:"Leave"})]},o.id)})})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Security & Sessions"}),a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Oy,children:"Send password reset email"}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Ia,children:"Sign out"})]}),a.jsxs("section",{className:"settings-card",children:[a.jsx("div",{className:"settings-title",children:"Export"}),a.jsxs("div",{className:"settings-actions",children:[a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Ry,children:"Export JSON"}),a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Py,children:"Export CSV"})]})]})]})]}):a.jsx("div",{className:"empty-state",children:"Loading settings..."})}):e==="okr"?jy?a.jsxs("div",{className:"okr-panel",children:[a.jsxs("div",{className:"okr-create",children:[a.jsx("div",{className:"okr-card-title",children:"Create objective"}),a.jsxs("div",{className:"okr-grid",children:[a.jsxs("label",{children:["Title",a.jsx("input",{type:"text",value:Ar.title,onChange:o=>Rr(d=>({...d,title:o.target.value})),placeholder:"Ship a new onboarding"})]}),a.jsxs("label",{children:["Owner",a.jsxs("select",{value:Ar.ownerId,onChange:o=>Rr(d=>({...d,ownerId:o.target.value})),children:[a.jsx("option",{value:"",children:"Unassigned"}),Ct(v).map(o=>{var d,f;return a.jsx("option",{value:o.userId,children:((d=o.user)==null?void 0:d.name)||((f=o.user)==null?void 0:f.email)||o.userId},o.userId)})]})]}),a.jsxs("label",{children:["Start date",a.jsx("input",{type:"date",value:Ar.startDate,onChange:o=>Rr(d=>({...d,startDate:o.target.value}))})]}),a.jsxs("label",{children:["End date",a.jsx("input",{type:"date",value:Ar.endDate,onChange:o=>Rr(d=>({...d,endDate:o.target.value}))})]}),a.jsxs("label",{children:["Status",a.jsxs("select",{value:Ar.status,onChange:o=>Rr(d=>({...d,status:o.target.value})),children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"AT_RISK",children:"At risk"}),a.jsx("option",{value:"PAUSED",children:"Paused"}),a.jsx("option",{value:"DONE",children:"Done"})]})]})]}),a.jsxs("div",{className:"okr-actions",children:[a.jsx("button",{className:"icon-action create",onClick:uy,"data-tooltip":"Objective erstellen","aria-label":"Objective erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:Pl,children:"Refresh"})]})]}),Yd&&a.jsxs("div",{className:"okr-error",children:["Error: ",Yd]}),Jd?a.jsx("div",{className:"empty-state",children:"Loading OKRs..."}):a.jsxs("div",{className:"okr-list",children:[da.length===0&&a.jsx("div",{className:"empty-state",children:"No objectives yet."}),da.map(o=>{const d=o.ownerId?Na(v,o.ownerId):"Unassigned",f=Xd.includes(o.id);return a.jsxs("div",{className:"okr-card",onClick:()=>nr(`/okr/objective/${o.id}`),children:[a.jsxs("div",{className:"okr-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"okr-title",children:o.title}),a.jsxs("div",{className:"okr-meta",children:[a.jsx("span",{children:o.status}),a.jsxs("span",{className:"okr-owner-badge",children:["Owner: ",d]}),o.startDate&&a.jsx("span",{children:new Date(o.startDate).toLocaleDateString()}),o.endDate&&a.jsx("span",{children:new Date(o.endDate).toLocaleDateString()})]})]}),a.jsxs("div",{className:"okr-progress",children:[a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(o.progress)}%`}})}),a.jsxs("div",{className:"okr-progress-label",children:[Math.round(o.progress),"%"]})]}),a.jsx("button",{className:`okr-chevron ${f?"expanded":""}`,type:"button",onClick:k=>{k.stopPropagation(),Zd(E=>E.includes(o.id)?E.filter(_=>_!==o.id):[...E,o.id])},"aria-expanded":f,"aria-label":f?"Hide key results":"Show key results",children:a.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"4 8 10 14 16 8"})})})]}),f&&a.jsx("div",{className:"okr-keyresults-expanded",children:o.keyResults.length===0?a.jsx("div",{className:"okr-empty",children:"No key results yet."}):o.keyResults.map(k=>a.jsxs("div",{className:"okr-kr-expanded",children:[a.jsxs("div",{className:"okr-kr-expanded-header",children:[a.jsx("div",{className:"okr-kr-title",children:k.title}),a.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(k.updatedAt||k.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"okr-kr-progress",children:[a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(k.progress)}%`}})}),a.jsxs("div",{className:"okr-progress-label",children:[Math.round(k.progress),"%"]})]})]},k.id))})]},o.id)})]})]}):a.jsxs("div",{className:"okr-shell",children:[Tr&&a.jsxs("div",{className:"okr-notice",children:[a.jsx("div",{className:"okr-notice-title",children:Tr.code==="permission"?"Blocked by permission":Tr.code==="policy"?"Blocked by policy":"Request blocked"}),a.jsx("div",{className:"okr-notice-text",children:Tr.safeReason}),Tr.correlationId&&a.jsxs("div",{className:"okr-notice-meta",children:["Ref: ",Tr.correlationId]})]}),Jd&&a.jsx("div",{className:"okr-loading",children:"Syncing OKRs"}),Ht==="objective"&&K&&a.jsx("div",{className:"okr-focus",children:a.jsxs("div",{className:"okr-focus-main",children:[a.jsxs("div",{className:"okr-focus-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"okr-focus-title",children:K.title}),a.jsxs("div",{className:"okr-focus-meta",children:[a.jsx("span",{children:K.status}),a.jsxs("span",{children:["Owner: ",K.ownerId?Na(v,K.ownerId):"Unassigned"]}),K.startDate&&a.jsx("span",{children:new Date(K.startDate).toLocaleDateString()})," ",K.endDate&&a.jsx("span",{children:new Date(K.endDate).toLocaleDateString()})]})]}),a.jsx("div",{className:"okr-focus-actions",children:(K.ownerId===(u==null?void 0:u.id)||Eh)&&a.jsx("button",{className:"icon-action settings",onClick:()=>fy(K),"data-tooltip":"Einstellungen zum Objective","aria-label":"Einstellungen zum Objective",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),a.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})})]}),a.jsxs("div",{className:"okr-focus-progress",children:[a.jsx("div",{className:"okr-progress-label",children:"Progress"}),a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${K.progress}%`}})}),a.jsxs("div",{className:"okr-progress-foot",children:[K.progress,"% of ",K.keyResults.length," key results"]})]}),a.jsxs("div",{className:"okr-focus-section",children:[a.jsx("div",{className:"okr-section-title",children:"Key results"}),a.jsxs("div",{className:"okr-kr-list",children:[K.keyResults.length===0&&a.jsx("div",{className:"okr-empty",children:"No key results yet."}),K.keyResults.map(o=>a.jsxs("div",{className:"okr-kr-card",children:[a.jsxs("div",{children:[a.jsx("div",{className:"okr-kr-title",children:o.title}),a.jsxs("div",{className:"okr-kr-meta",children:[a.jsx("span",{children:o.status.replace("_"," ")}),a.jsxs("span",{children:[o.currentValue," / ",o.targetValue]}),a.jsxs("span",{children:["Updated ",new Date(o.lastUpdatedAt).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"okr-kr-progress",children:[a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${o.progress}%`}})}),a.jsxs("div",{className:"okr-progress-foot",children:[o.progress,"%"]})]})]},o.id))]}),!K.readOnly&&a.jsx("div",{className:"okr-kr-panel-trigger",children:a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>gy(K.id),children:"KR erstellen"})}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>nr(`/okr/review/${K.id}`),children:"Start strategic review"})]})]})}),Ht==="objective"&&!K&&a.jsx("div",{className:"okr-empty",children:"Select an objective from Pulse to focus."}),Ht==="review"&&K&&a.jsxs("div",{className:"okr-review",children:[a.jsxs("div",{className:"okr-review-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"okr-review-title",children:"Strategic review"}),a.jsx("div",{className:"okr-review-subtitle",children:"6-minute guided check-in"})]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Sa(K.id),children:"Back to focus"})]}),Fr.length>0&&a.jsxs("div",{className:"okr-review-steps",children:[a.jsxs("div",{className:"okr-review-step",children:[a.jsx("div",{className:"okr-step-title",children:(af=Fr[Bs])==null?void 0:af.title}),a.jsx("div",{className:"okr-step-text",children:(of=Fr[Bs])==null?void 0:of.content})]}),a.jsxs("div",{className:"okr-review-nav",children:[a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>fl(o=>Math.max(o-1,0)),disabled:Bs===0,children:"Back"}),a.jsxs("div",{className:"okr-review-progress",children:["Step ",Bs+1," / ",Fr.length]}),a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>fl(o=>Math.min(o+1,Fr.length-1)),disabled:Bs===Fr.length-1,children:"Next"})]})]})]}),Ht==="review"&&!K&&a.jsx("div",{className:"okr-empty",children:"Select an objective to start a review."}),Ht==="library"&&a.jsxs("div",{className:"okr-pulse",children:[a.jsxs("div",{className:"okr-pulse-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"okr-pulse-title",children:"Objectives"}),a.jsx("div",{className:"okr-pulse-subtitle",children:"Create objectives and track key results."})]}),a.jsxs("div",{className:"okr-pulse-actions",children:[a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:Pl,children:"Refresh"}),a.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>zs(!0),children:"New objective"})]})]}),a.jsx("div",{className:"okr-pulse-grid",children:a.jsxs("div",{className:"okr-pulse-section okr-pulse-objectives",children:[a.jsx("div",{className:"okr-section-title",children:"Objectives"}),Yt.length===0?a.jsx("div",{className:"okr-empty",children:"No objectives yet."}):a.jsx("div",{className:"task-list",children:Yt.map(o=>{const d=Xd.includes(o.id),f=o.ownerId?Na(v,o.ownerId):"Unassigned";return a.jsxs("div",{className:`okr-objective-item ${d?"expanded":""}`,children:[a.jsxs("div",{className:"task-row okr-objective-row",onClick:()=>Sa(o.id),children:[a.jsxs("div",{className:"task-row-main",children:[a.jsx("div",{className:"task-row-title",children:a.jsx("span",{className:"okr-objective-title-text",children:o.title})}),a.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${Math.round(o.progress)}%`}})}),a.jsxs("div",{className:"okr-progress-foot",children:[Math.round(o.progress),"%"]})]}),a.jsxs("div",{className:"task-row-meta",children:[a.jsx("span",{className:"badge task-kind-badge",children:o.status}),a.jsxs("span",{className:"badge task-kind-badge",children:["Owner: ",f]})]})]}),a.jsx("div",{className:"task-row-side",children:a.jsx("button",{className:`okr-chevron ${d?"expanded":""}`,type:"button",onClick:k=>{k.stopPropagation(),Zd(E=>E.includes(o.id)?E.filter(_=>_!==o.id):[...E,o.id])},"aria-expanded":d,"aria-label":d?"Hide key results":"Show key results",children:a.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"4 8 10 14 16 8"})})})})]}),d&&a.jsx("div",{className:"okr-kr-inline",children:o.keyResults.length===0?a.jsx("div",{className:"okr-empty",children:"No key results yet."}):o.keyResults.map(k=>a.jsx("div",{className:"okr-kr-inline-row",children:a.jsxs("div",{className:"okr-kr-expanded-header",children:[a.jsxs("div",{className:"okr-kr-expanded-main",children:[a.jsx("div",{className:"okr-kr-title",children:k.title}),a.jsxs("div",{className:"okr-kr-progress okr-progress-inline",children:[a.jsx("div",{className:"okr-progress-bar",children:a.jsx("div",{className:"okr-progress-fill",style:{width:`${k.progress}%`}})}),a.jsxs("div",{className:"okr-progress-foot",children:[Math.round(k.progress),"%"]})]})]}),a.jsxs("div",{className:"okr-kr-date",children:["Updated ",new Date(k.lastUpdatedAt).toLocaleDateString()]})]})},k.id))})]},o.id)})})]})})]}),ey&&a.jsx("div",{className:"objective-overlay",children:a.jsxs("div",{className:"objective-panel",children:[a.jsxs("div",{className:"objective-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"objective-title",children:Ir?"Edit objective":"Objective composer"}),a.jsx("div",{className:"objective-subtitle",children:"Create the objective details."})]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>zs(!1),children:"Close"})]}),a.jsxs("div",{className:"objective-body",children:[a.jsxs("label",{children:["Objective title",a.jsx("input",{type:"text",value:Nt.title,onChange:o=>mt(d=>({...d,title:o.target.value})),placeholder:"Deliver a calmer onboarding experience"})]}),a.jsxs("label",{children:["Owner",a.jsxs("select",{value:Nt.ownerId,onChange:o=>mt(d=>({...d,ownerId:o.target.value})),children:[a.jsx("option",{value:"",children:"Unassigned"}),Ct(v).map(o=>{var d,f;return a.jsx("option",{value:o.userId,children:((d=o.user)==null?void 0:d.name)||((f=o.user)==null?void 0:f.email)||o.userId},o.userId)})]})]}),a.jsxs("div",{className:"objective-row",children:[a.jsxs("label",{children:["Start date",a.jsx("input",{type:"date",value:Nt.startDate,onChange:o=>mt(d=>({...d,startDate:o.target.value}))})]}),a.jsxs("label",{children:["End date",a.jsx("input",{type:"date",value:Nt.endDate,onChange:o=>mt(d=>({...d,endDate:o.target.value}))})]})]}),a.jsx("div",{className:"objective-row",children:a.jsxs("label",{children:["Status",a.jsxs("select",{value:Nt.status,onChange:o=>mt(d=>({...d,status:o.target.value})),children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"AT_RISK",children:"At risk"}),a.jsx("option",{value:"PAUSED",children:"Paused"}),a.jsx("option",{value:"DONE",children:"Done"})]})]})})]}),a.jsxs("div",{className:"objective-actions",children:[a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:yh,children:Ir?"Save changes":"Create objective"}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>zs(!1),children:"Cancel"})]})]})})]}):e==="dashboard"?a.jsx("div",{className:"dashboard-panel",children:a.jsx("div",{className:"empty-state",children:"Dashboard view coming soon."})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"filter-bar",children:[a.jsxs("div",{className:"view-switch",role:"tablist","aria-label":"View switcher",style:{"--active-index":e==="kanban"?0:1},children:[a.jsx("button",{className:`view-pill ${e==="kanban"?"active":""}`,onClick:()=>t("kanban"),role:"tab","aria-selected":e==="kanban",children:"Board"}),a.jsx("button",{className:`view-pill ${e==="table"?"active":""}`,onClick:()=>t("table"),role:"tab","aria-selected":e==="table",children:"Table"})]}),a.jsxs("div",{className:"filter-actions",children:[Eh&&a.jsx(a.Fragment,{children:a.jsx("button",{className:"icon-action settings",onClick:()=>pl(!0),"data-tooltip":"Einstellungen zum Board","aria-label":"Einstellungen zum Board",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3.5"}),a.jsx("path",{d:"M19 12a7 7 0 0 0-.1-1l2-1.5-2-3.5-2.3.7a7 7 0 0 0-1.6-1l-.3-2.4H9.3l-.3 2.4a7 7 0 0 0-1.6 1l-2.3-.7-2 3.5 2 1.5a7 7 0 0 0 0 2l-2 1.5 2 3.5 2.3-.7a7 7 0 0 0 1.6 1l.3 2.4h5.4l.3-2.4a7 7 0 0 0 1.6-1l2.3.7 2-3.5-2-1.5a7 7 0 0 0 .1-1z"})]})})}),a.jsxs("div",{className:"filter-dropdown",children:[a.jsx("button",{type:"button",className:"filter-select",onClick:()=>rh(o=>!o),"aria-haspopup":"listbox","aria-expanded":nh,children:Pr==="ALL"?"All priorities":Pr}),nh&&a.jsx("div",{className:"filter-options",role:"listbox",children:["ALL","LOW","MEDIUM","HIGH","CRITICAL"].map(o=>a.jsx("button",{type:"button",className:`filter-option ${Pr===o?"active":""} filter-option-${o.toLowerCase()}`,onClick:()=>{ny(o),rh(!1)},role:"option","aria-selected":Pr===o,children:o==="ALL"?"All priorities":o},o))})]}),a.jsxs("label",{className:`filter-checkbox filter-favorites ${gl?"active":""}`,title:"Favorites only",children:[a.jsx("input",{type:"checkbox",checked:gl,onChange:o=>ry(o.target.checked)}),a.jsx("span",{className:"filter-favorites-icon","aria-hidden":"true",children:""})]})]})]}),mh&&a.jsxs("div",{style:{color:"#f87171",marginBottom:"1rem"},children:["Error: ",mh]}),e==="kanban"?a.jsx("div",{className:"kanban-board",children:gn==null?void 0:gn.columns.map(o=>{const d=o.tasks.filter($h),f=Oa(v,le,o.status),k=Md[f]||[],E=new Map(d.map(P=>[P.id,P])),_=k.map(P=>E.get(P)).filter(Boolean),D=d.filter(P=>!k.includes(P.id)),H=_.concat(D);return a.jsxs("div",{className:"kanban-column",onDragOver:Zy,onDragLeave:ew,onDrop:P=>tw(P,o.status),children:[a.jsxs("div",{className:"column-header",children:[a.jsx("span",{children:o.status}),a.jsx("span",{children:H.length})]}),a.jsx("div",{className:"column-content",children:H.map(P=>{const J=P.checklist.filter(ae=>ae.done).length,Ae=P.checklist.length,X=P.linkedTaskIds.length,De=Ae>0&&J===Ae,he=Uh.has(P.id),st=P.sourceType?P.sourceType==="MANUAL":!0,ie={cursor:st?"grab":"default",userSelect:"none",WebkitUserDrag:st?"element":"auto",pointerEvents:"auto"};return a.jsx(Cc.Fragment,{children:a.jsx("div",{className:`task-card${st?" task-card-draggable":""}${br===P.id?" dragging":""}`,style:ie,draggable:st,onDragStart:ae=>st?Yy(ae,P.id):ae.preventDefault(),onDragEnd:Xy,onDragOver:ae=>nw(ae,o.status,P.id),onDragLeave:rw,onClick:()=>Vy(P),children:a.jsxs("div",{className:"task-card-content",children:[a.jsxs("div",{className:"task-card-topbar",children:[a.jsxs("div",{className:"task-card-due",children:[a.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M5 4v16"}),a.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),a.jsx("span",{children:P.dueDate?new Date(P.dueDate).toLocaleDateString():""})]}),a.jsx("div",{className:`priority-bubble priority-${P.priority.toLowerCase()}`,children:a.jsx("span",{className:`priority-line tooltip-target ${P.priority==="CRITICAL"?"priority-line-critical":""}`,"aria-hidden":"true","data-tooltip":`Priority: ${P.priority}`})})]}),a.jsxs("div",{className:"task-card-header",children:[a.jsxs("div",{className:"task-title-row",children:[he&&a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[a.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),a.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),P.title]}),P.isFavorite&&a.jsx("span",{className:"favorite-badge",title:"Favorite",children:""})]}),P.description&&a.jsx("div",{className:"task-card-description",children:ti(P.description)}),a.jsx("hr",{className:"card-divider"}),a.jsxs("div",{className:"task-card-footer",children:[a.jsx("div",{className:"task-card-kinds",children:P.kinds.map(ae=>a.jsx("span",{className:"badge task-kind-badge",children:ae},ae))}),a.jsxs("div",{className:"task-card-people",children:[P.ownerId&&jn(P.tenantId,[P.ownerId]),P.assignees.length>0&&jn(P.tenantId,P.assignees.filter(ae=>ae!==P.ownerId))]}),a.jsxs("div",{className:"task-card-icons",children:[Ae>0&&a.jsxs("span",{className:De?"icon-badge checklist-complete":"icon-badge",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),a.jsx("path",{d:"M18 17l2 2 4-4"})]}),J,"/",Ae]}),P.comments.length>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:a.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),P.comments.length]}),X>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),a.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),X]}),P.attachments.length>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:a.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),P.attachments.length]})]})]})]})})},P.id)})})]},o.status)})}):e==="archived"?a.jsx("div",{className:"kanban-board",children:a.jsxs("div",{className:"kanban-column",children:[a.jsxs("div",{className:"column-header",children:[a.jsx("span",{children:"ARCHIVED"}),a.jsx("span",{children:Bl.length})]}),a.jsx("div",{className:"column-content",children:Bl.map(o=>{const d=o.checklist.filter(_=>_.done).length,f=o.checklist.length,k=o.linkedTaskIds.length,E=Uh.has(o.id);return a.jsxs("div",{className:"task-card",onClick:()=>Kl(o),children:[a.jsxs("div",{className:"task-card-topbar",children:[a.jsxs("div",{className:"task-card-due",children:[a.jsx("span",{className:"task-card-due-icon","aria-hidden":"true",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M5 4v16"}),a.jsx("path",{d:"M5 4h11l-2 4 2 4H5"})]})}),a.jsx("span",{children:o.dueDate?new Date(o.dueDate).toLocaleDateString():""})]}),a.jsx("div",{className:`priority-bubble priority-${o.priority.toLowerCase()}`,children:a.jsx("span",{className:`priority-line tooltip-target ${o.priority==="CRITICAL"?"priority-line-critical":""}`,"aria-hidden":"true","data-tooltip":`Priority: ${o.priority}`})})]}),a.jsxs("div",{className:"task-card-header",children:[a.jsxs("div",{className:"task-title-row",children:[E&&a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"linked-icon",children:[a.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),a.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),o.title]}),o.isFavorite&&a.jsx("span",{className:"favorite-badge",title:"Favorite",children:""})]}),o.description&&a.jsx("div",{className:"task-card-description",children:ti(o.description)}),a.jsx("hr",{className:"card-divider"}),a.jsxs("div",{className:"task-card-footer",children:[a.jsx("div",{className:"task-card-kinds",children:o.kinds.map(_=>a.jsx("span",{className:"badge task-kind-badge",children:_},_))}),a.jsxs("div",{className:"task-card-people",children:[o.ownerId&&jn(o.tenantId,[o.ownerId]),o.assignees.length>0&&jn(o.tenantId,o.assignees.filter(_=>_!==o.ownerId))]}),a.jsxs("div",{className:"task-card-icons",children:[f>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"}),a.jsx("path",{d:"M18 17l2 2 4-4"})]}),d,"/",f]}),o.comments.length>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:a.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),o.comments.length]}),k>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),a.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),k]}),o.attachments.length>0&&a.jsxs("span",{className:"icon-badge",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:a.jsx("path",{d:"M21.5 12.5l-7.8 7.8a5 5 0 0 1-7.1-7.1l8.5-8.5a3.5 3.5 0 1 1 5 5l-8.6 8.6a2 2 0 0 1-2.8-2.8l7.9-7.9"})}),o.attachments.length]})]})]})]},o.id)})})]})}):e==="table"?a.jsx("div",{className:"task-table-wrap",children:a.jsxs("table",{className:"task-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Title"}),a.jsx("th",{children:"People"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Art"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Due"}),a.jsx("th",{children:"Source"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Bl.map(o=>a.jsxs(Cc.Fragment,{children:[a.jsxs("tr",{onClick:()=>Kl(o),children:[a.jsx("td",{children:o.title}),a.jsx("td",{children:a.jsxs("div",{className:"task-card-people",children:[o.ownerId&&jn(o.tenantId,[o.ownerId]),o.assignees.length>0&&jn(o.tenantId,o.assignees.filter(d=>d!==o.ownerId))]})}),a.jsx("td",{children:o.status}),a.jsx("td",{children:o.kinds.length>0?o.kinds.join(", "):""}),a.jsx("td",{children:a.jsx("span",{className:`badge badge-priority-${o.priority.toLowerCase()}`,children:o.priority})}),a.jsx("td",{children:o.dueDate?new Date(o.dueDate).toLocaleDateString():""}),a.jsx("td",{children:o.sourceIndicator}),a.jsx("td",{children:a.jsxs("div",{className:"table-actions",children:[o.sourceType==="MANUAL"&&a.jsx("button",{className:"icon-action settings",onClick:d=>{d.stopPropagation(),zh(o)},"data-tooltip":"Task bearbeiten","aria-label":"Task bearbeiten",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}),a.jsx("button",{className:"icon-action",onClick:d=>{d.stopPropagation(),r(f=>f===o.id?null:o.id)},"data-tooltip":"Details ausklappen","aria-label":"Details ausklappen",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})})]})})]}),n===o.id&&a.jsx("tr",{className:"task-table-details",children:a.jsx("td",{colSpan:8,children:a.jsxs("div",{className:"table-details-grid",children:[a.jsxs("div",{className:"table-details-span",children:[a.jsx("div",{className:"table-details-label",children:"Description"}),a.jsx("div",{className:"table-details-text",children:o.description?ti(o.description):""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"table-details-label",children:"Members"}),a.jsx("div",{className:"table-details-text",children:o.assignees.length>0?o.assignees.map(d=>Na(o.tenantId,d)).join(", "):""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"table-details-label",children:"Checklist"}),a.jsx("div",{className:"table-details-text",children:o.checklist.length>0?`${o.checklist.filter(d=>d.done).length}/${o.checklist.length} done`:""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"table-details-label",children:"Linked tasks"}),a.jsx("div",{className:"table-details-text",children:o.linkedTaskIds.length>0?o.linkedTaskIds.length:""})]}),a.jsxs("div",{children:[a.jsx("div",{className:"table-details-label",children:"Attachments"}),a.jsx("div",{className:"table-details-text",children:o.attachments.length>0?o.attachments.length:""})]})]})})})]},o.id))})]})}):a.jsx("div",{className:"empty-state",children:"No tasks to display."})]}),aa&&a.jsx("div",{className:"toast",children:aa}),Wg&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-header",children:[a.jsx("div",{children:"Notifications"}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>vn(o=>o.map(d=>({...d,read:!0}))),children:"Mark all read"})]}),a.jsxs("div",{className:"notif-list",children:[ol.length===0&&a.jsx("div",{className:"empty-state",children:"No notifications yet."}),ol.map(o=>a.jsxs("div",{className:`notif-item ${o.read?"read":""} ${o.taskId?"clickable":""}`,onClick:()=>o.taskId&&Ey(o),children:[a.jsx("div",{className:"notif-title",children:o.message}),a.jsxs("div",{className:"notif-meta",children:[o.huddleName,"  ",new Date(o.timestamp).toLocaleString()]})]},o.id))]})]})]}),Xg&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content settings-modal",children:[a.jsxs("div",{className:"panel-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"panel-title",children:"Board settings"}),a.jsx("div",{className:"panel-subtitle",children:"Manage this huddle board"})]}),a.jsx("button",{className:"panel-close",onClick:()=>pl(!1),"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"panel-body",children:[a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Board"}),a.jsx("div",{className:"member-name",children:(Ne==null?void 0:Ne.name)||le||"Board"}),a.jsxs("div",{className:"member-meta",children:["Role: ",(Xt==null?void 0:Xt.role)||"Member"]})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Danger zone"}),a.jsx("div",{className:"panel-text",children:"Delete this board and all tasks, objectives, and key results."}),a.jsx("button",{className:"icon-action delete",onClick:vy,"data-tooltip":"Board lschen","aria-label":"Board lschen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M6 6l12 12"}),a.jsx("path",{d:"M18 6L6 18"})]})})]})]})]})}),ty&&a.jsx("div",{className:"objective-overlay",children:a.jsxs("div",{className:"objective-panel",children:[a.jsxs("div",{className:"objective-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"objective-title",children:"Key result composer"}),a.jsx("div",{className:"objective-subtitle",children:"Define the metric and target."})]}),a.jsx("button",{className:"panel-close",onClick:()=>{fa(!1),pa(null)},"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"objective-body",children:[a.jsxs("label",{children:["Title",a.jsx("input",{type:"text",placeholder:"e.g. Improve activation rate",value:Bt.title,onChange:o=>Or(d=>({...d,title:o.target.value}))})]}),a.jsxs("div",{className:"objective-row",children:[a.jsxs("label",{children:["Start",a.jsx("input",{type:"number",placeholder:"0",value:Bt.startValue,onChange:o=>Or(d=>({...d,startValue:o.target.value}))})]}),a.jsxs("label",{children:["Target",a.jsx("input",{type:"number",placeholder:"100",value:Bt.targetValue,onChange:o=>Or(d=>({...d,targetValue:o.target.value}))})]})]}),a.jsxs("label",{children:["Status",a.jsxs("select",{value:Bt.status,onChange:o=>Or(d=>({...d,status:o.target.value})),children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"AT_RISK",children:"At risk"}),a.jsx("option",{value:"PAUSED",children:"Paused"}),a.jsx("option",{value:"DONE",children:"Done"})]})]})]}),a.jsxs("div",{className:"objective-actions",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>{fa(!1),pa(null)},children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",onClick:yy,children:"Create key result"})]})]})}),Zg&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content settings-modal",children:[a.jsxs("div",{className:"panel-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"panel-title",children:"Objective settings"}),a.jsx("div",{className:"panel-subtitle",children:"Edit or delete this objective"})]}),a.jsx("button",{className:"panel-close",onClick:()=>{ha(!1),Fs(null)},"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"panel-body",children:[a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Details"}),a.jsxs("div",{className:"okr-grid",children:[a.jsxs("label",{children:["Title",a.jsx("input",{type:"text",value:Nt.title,onChange:o=>mt(d=>({...d,title:o.target.value}))})]}),a.jsxs("label",{children:["Owner",a.jsxs("select",{value:Nt.ownerId,onChange:o=>mt(d=>({...d,ownerId:o.target.value})),children:[a.jsx("option",{value:"",children:"Unassigned"}),Ct(v).map(o=>{var d,f;return a.jsx("option",{value:o.userId,children:((d=o.user)==null?void 0:d.name)||((f=o.user)==null?void 0:f.email)||o.userId},o.userId)})]})]}),a.jsxs("label",{children:["Start date",a.jsx("input",{type:"date",value:Nt.startDate,onChange:o=>mt(d=>({...d,startDate:o.target.value}))})]}),a.jsxs("label",{children:["End date",a.jsx("input",{type:"date",value:Nt.endDate,onChange:o=>mt(d=>({...d,endDate:o.target.value}))})]}),a.jsxs("label",{children:["Status",a.jsxs("select",{value:Nt.status,onChange:o=>mt(d=>({...d,status:o.target.value})),children:[a.jsx("option",{value:"ACTIVE",children:"Active"}),a.jsx("option",{value:"AT_RISK",children:"At risk"}),a.jsx("option",{value:"PAUSED",children:"Paused"}),a.jsx("option",{value:"DONE",children:"Done"})]})]})]}),a.jsx("div",{className:"okr-actions",children:a.jsx("button",{className:"btn btn-secondary btn-compact",onClick:()=>{yh(),ha(!1),Fs(null)},children:"Save changes"})})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Key results"}),(lf=K==null?void 0:K.keyResults)!=null&&lf.length?a.jsx("div",{className:"template-list",children:K.keyResults.map(o=>a.jsxs("div",{className:"template-row",children:[a.jsxs("div",{children:[a.jsx("div",{className:"member-name",children:o.title}),a.jsxs("div",{className:"member-meta",children:[o.currentValue," / ",o.targetValue]})]}),a.jsx("button",{className:"icon-action delete",onClick:()=>my(o.id,K.id),"data-tooltip":"KR lschen","aria-label":"KR lschen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M6 6l12 12"}),a.jsx("path",{d:"M18 6L6 18"})]})})]},o.id))}):a.jsx("div",{className:"empty-state",children:"No key results yet."})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Danger zone"}),a.jsx("div",{className:"panel-text",children:"Delete this objective and its key results."}),Ir&&a.jsx("button",{className:"icon-action delete",onClick:()=>{py(Ir),ha(!1),Fs(null)},"data-tooltip":"Objective lschen","aria-label":"Objective lschen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M6 6l12 12"}),a.jsx("path",{d:"M18 6L6 18"})]})})]})]})]})}),O&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content team-modal",children:[a.jsxs("div",{className:"panel-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"panel-title",children:"Huddle settings"}),a.jsx("div",{className:"panel-subtitle",children:"Manage huddles and members"})]}),a.jsx("button",{className:"panel-close",onClick:()=>w(!1),"aria-label":"Close",children:""})]}),a.jsxs("div",{className:"panel-body",children:[a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Active huddle"}),a.jsxs("div",{className:"team-active-row",children:[a.jsx("div",{className:"team-name",children:Ea||v}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>v&&ni(v),children:"Refresh members"})]})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Create a new huddle"}),a.jsxs("form",{className:"inline-form",onSubmit:Ah,children:[a.jsx("input",{type:"text",placeholder:"Huddle name",value:m,onChange:o=>y(o.target.value),required:!0}),a.jsx("button",{className:"btn btn-primary",type:"submit",children:"Create"})]})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Invite to huddle"}),Nh?a.jsx("div",{className:"empty-state",children:"Private huddles are personal and cannot have members."}):a.jsxs("form",{className:"inline-form",onSubmit:Ty,children:[a.jsx("input",{type:"email",placeholder:"email@company.com",value:N,onChange:o=>A(o.target.value),required:!0}),a.jsxs("select",{value:T,onChange:o=>R(o.target.value),children:[a.jsx("option",{value:"MEMBER",children:"Member"}),a.jsx("option",{value:"ADMIN",children:"Admin"})]}),a.jsx("button",{className:"btn btn-primary",type:"submit",children:"Invite"})]})]}),a.jsxs("div",{className:"panel-section",children:[a.jsx("div",{className:"section-title",children:"Huddle members"}),a.jsxs("div",{className:"member-list",children:[U.map(o=>{var f,k,E;const d=o.userId===(u==null?void 0:u.id);return a.jsxs("div",{className:"member-row",children:[a.jsxs("div",{children:[a.jsx("div",{className:"member-name",children:((f=o.user)==null?void 0:f.name)||((k=o.user)==null?void 0:k.email)}),a.jsx("div",{className:"member-meta",children:(E=o.user)==null?void 0:E.email})]}),a.jsxs("div",{className:"member-actions",children:[a.jsxs("select",{value:o.role,onChange:_=>Uy(o.id,_.target.value),disabled:d,children:[a.jsx("option",{value:"MEMBER",children:"Member"}),a.jsx("option",{value:"ADMIN",children:"Admin"})]}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>My(o.id),disabled:d,children:"Remove"})]})]},o.id)}),U.length===0&&a.jsx("div",{className:"empty-state",children:"No members yet."})]})]}),q&&a.jsx("div",{className:"auth-error",children:q})]})]})}),$&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content team-modal",children:[a.jsxs("div",{className:"panel-header",children:[a.jsxs("div",{children:[a.jsx("div",{className:"panel-title",children:"Huddle invites"}),a.jsx("div",{className:"panel-subtitle",children:"Accept or decline invitations"})]}),a.jsx("button",{className:"panel-close",onClick:()=>V(!1),"aria-label":"Close",children:""})]}),a.jsx("div",{className:"panel-body",children:g.length>0?a.jsx("div",{className:"invite-list",children:g.map(o=>{var d,f,k;return a.jsxs("div",{className:"invite-row",children:[a.jsxs("div",{children:[a.jsx("div",{className:"member-name",children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId}),a.jsxs("div",{className:"member-meta",children:["Invited by ",((f=o.invitedBy)==null?void 0:f.name)||((k=o.invitedBy)==null?void 0:k.email)||o.invitedByUserId,"  ",new Date(o.createdAt).toLocaleString()]})]}),a.jsxs("div",{className:"invite-actions",children:[a.jsx("button",{className:"btn btn-primary btn-compact",onClick:()=>Rh(o,"accept"),children:"Accept"}),a.jsx("button",{className:"btn btn-ghost btn-compact",onClick:()=>Rh(o,"decline"),children:"Decline"})]})]},o.id)})}):a.jsx("div",{className:"empty-state",children:"No pending invites."})})]})}),yl&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[a.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[a.jsxs("div",{className:"modal-header-row",children:[a.jsx("h2",{style:{marginBottom:0},children:"Create New Task"}),a.jsx("button",{className:"panel-close",onClick:()=>{ma(!1),Dr([]),$r([]),Lr(""),Ur(null)},"aria-label":"Close",children:""})]}),ne&&a.jsxs("div",{className:"huddle-inline",children:[a.jsx("span",{children:"Creating in"}),a.jsxs("span",{className:"huddle-chip",style:{background:Et(ne,(uf=(cf=ce.find(o=>o.tenantId===ne))==null?void 0:cf.tenant)==null?void 0:uf.name).soft,borderColor:Et(ne,(hf=(df=ce.find(o=>o.tenantId===ne))==null?void 0:df.tenant)==null?void 0:hf.name).border,color:Et(ne,(pf=(ff=ce.find(o=>o.tenantId===ne))==null?void 0:ff.tenant)==null?void 0:pf.name).text},children:[a.jsx("span",{className:"huddle-dot",style:{background:Et(ne,(vf=(mf=ce.find(o=>o.tenantId===ne))==null?void 0:mf.tenant)==null?void 0:vf.name).solid}}),ze((yf=(gf=ce.find(o=>o.tenantId===ne))==null?void 0:gf.tenant)==null?void 0:yf.name)]})]})]}),a.jsxs("form",{onSubmit:zy,children:[a.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Title"}),a.jsx("input",{type:"text",required:!0,value:nt.title,onChange:o=>Yn({...nt,title:o.target.value}),placeholder:"What needs to be done?"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Huddle"}),a.jsx("select",{value:ne||"",onChange:o=>ah(o.target.value),children:ce.map(o=>{var d;return a.jsx("option",{value:o.tenantId,children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId},o.id)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Board"}),a.jsx("select",{value:Vs||"",onChange:o=>Ur(o.target.value),children:Zs(ne).map(o=>a.jsx("option",{value:o.id,children:o.name},o.id))})]}),!ei(ne)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Owner"}),a.jsxs("select",{value:va||"",onChange:o=>wl(o.target.value||null),children:[a.jsx("option",{value:"",children:"Unassigned"}),Ct(ne).map(o=>{var d,f;return a.jsx("option",{value:o.userId,children:((d=o.user)==null?void 0:d.name)||((f=o.user)==null?void 0:f.email)||o.userId},o.userId)})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Template"}),a.jsxs("div",{className:"template-picker",children:[a.jsxs("select",{value:kl,onChange:o=>lh(o.target.value),children:[a.jsx("option",{value:"",children:"Choose template"}),(wf=C==null?void 0:C.taskTemplates)==null?void 0:wf.map(o=>a.jsx("option",{value:o.id,children:o.name},o.id))]}),a.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:()=>{var d;const o=(d=C==null?void 0:C.taskTemplates)==null?void 0:d.find(f=>f.id===kl);o&&(Yn({...nt,title:o.title,priority:o.priority}),oh(o.status))},disabled:!kl,children:"Apply"})]})]}),!ei(ne)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Members"}),a.jsxs("div",{className:"assignee-grid",children:[Ct(ne).map(o=>{var f,k;const d=Mr.includes(o.userId);return a.jsxs("label",{className:"assignee-chip",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:E=>{const _=E.target.checked?Mr.concat(o.userId):Mr.filter(D=>D!==o.userId);xl(_)}}),a.jsx("span",{children:((f=o.user)==null?void 0:f.name)||((k=o.user)==null?void 0:k.email)||o.userId})]},o.userId)}),Ct(ne).length===0&&a.jsx("div",{className:"empty-state",children:"No members in this huddle yet."})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description"}),a.jsxs("div",{className:"rich-editor",children:[a.jsxs("div",{className:"rich-toolbar",children:[a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("bold"),children:"B"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("italic"),children:"I"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("underline"),children:"U"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("insertUnorderedList"),children:" List"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("insertOrderedList"),children:"1. List"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("createLink"),children:"Link"})]}),a.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:Il,onInput:o=>Yn({...nt,description:o.currentTarget.innerHTML}),onPaste:Ih,"data-placeholder":"Optional details..."})]})]})]}),a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Art"}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",value:ih,onChange:o=>Lr(o.target.value),onKeyDown:o=>Wh(o,"new"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Hh,children:"Add"})]}),Hs.length>0&&a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Hs.map(o=>a.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[o,a.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>Kh(o,$r),children:""})]},o))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Priority"}),a.jsxs("select",{value:nt.priority,onChange:o=>Yn({...nt,priority:o.target.value}),children:[a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"}),a.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Deadline"}),a.jsx("input",{type:"date",value:nt.dueDate,onChange:o=>Yn({...nt,dueDate:o.target.value})})]})]}),a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Files"}),a.jsx("input",{type:"file",multiple:!0,onChange:o=>Wy(o.target.files)}),a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:sh.map(o=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:o.name}),a.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>Ky(o.id),children:"Remove"})]},o.id))})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Checklist"}),a.jsxs("div",{className:"checklist-input-row",children:[a.jsx("input",{className:"checklist-input",type:"text",value:Cl,onChange:o=>xn(o.target.value),placeholder:"Add checklist item"}),a.jsx("button",{type:"button",className:"icon-action create",onClick:qh,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"checklist-list",children:er.length>0?er.map(o=>a.jsxs("label",{className:"checklist-item",children:[a.jsx("input",{type:"checkbox",checked:o.done,onChange:()=>Gh(o.id)}),a.jsx("span",{className:o.done?"checklist-text checklist-done":"checklist-text",children:o.text}),a.jsx("button",{type:"button",className:"delete-btn",onClick:()=>Jh(o.id),children:"Remove"})]},o.id)):a.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),a.jsxs("div",{className:"link-row",children:[a.jsxs("select",{className:"link-select",value:Xs,onChange:o=>kn(o.target.value),children:[a.jsx("option",{value:"",children:"Select task to link"}),be.filter(o=>o.id!==Ws&&!zt.includes(o.id)).map(o=>a.jsx("option",{value:o.id,children:o.title},o.id))]}),a.jsx("button",{type:"button",className:"icon-action create",onClick:Qh,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"link-list",children:zt.length>0?zt.map(o=>{var d;return a.jsxs("div",{className:"link-chip",children:[a.jsx("span",{className:"link-title",children:((d=xh.get(o))==null?void 0:d.title)??o}),a.jsx("button",{type:"button",className:"link-remove",onClick:()=>Yh(o),children:""})]},o)}):a.jsx("div",{className:"link-empty",children:"No linked tasks."})})]})]}),a.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{ma(!1),Dr([]),$r([]),Lr(""),Ur(null)},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Speichern"})]})})]})]})}),jl&&M&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[a.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[a.jsxs("div",{className:"detail-header-top",children:[a.jsxs("div",{className:"detail-meta",children:["Created ",new Date(M.createdAt).toLocaleDateString()]}),a.jsxs("div",{className:"detail-actions",children:[a.jsx("button",{className:"panel-close",onClick:()=>{Qt(!1),yn(null)},"aria-label":"Close",children:""}),a.jsx("button",{className:M.isFavorite?"icon-btn favorite-icon active":"icon-btn favorite-icon",onClick:()=>Gy(M),title:M.isFavorite?"Unfavorite":"Favorite","aria-label":M.isFavorite?"Unfavorite task":"Favorite task",children:M.isFavorite?"":""}),M.sourceType==="MANUAL"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"icon-btn",onClick:()=>Fy(M),title:M.status===gt.ARCHIVED?"Restore":"Archive","aria-label":M.status===gt.ARCHIVED?"Restore task":"Archive task",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M3 7h18"}),a.jsx("path",{d:"M5 7l1 13h12l1-13"}),a.jsx("path",{d:"M9 11h6"})]})}),a.jsx("button",{className:"icon-btn",onClick:()=>{Qt(!1),zh(M)},title:"Edit","aria-label":"Edit task",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})})]})]})]}),a.jsx("div",{className:"detail-title",children:M.title}),a.jsxs("div",{className:"detail-chips",children:[M.kinds.map(o=>a.jsx("span",{className:"chip chip-muted",children:o},o)),a.jsx("span",{className:`chip chip-priority priority-${M.priority.toLowerCase()}`,children:M.priority})]})]}),a.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Overview"}),a.jsxs("div",{className:"detail-rows",children:[a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]}),"Status"]}),a.jsx("span",{className:"detail-value",children:M.status})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2"}),a.jsx("path",{d:"M8 3v4M16 3v4M3 11h18"})]}),"Due date"]}),a.jsx("span",{className:"detail-value",children:M.dueDate?new Date(M.dueDate).toLocaleDateString():""})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("path",{d:"M20 21a8 8 0 0 0-16 0"}),a.jsx("circle",{cx:"12",cy:"8",r:"4"})]}),"Owner"]}),a.jsx("span",{className:"detail-value",children:M.ownerId?jn(M.tenantId,[M.ownerId],"avatar-stack-lg"):""})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("circle",{cx:"9",cy:"8",r:"3"}),a.jsx("circle",{cx:"17",cy:"9",r:"2.5"}),a.jsx("path",{d:"M3 21a6 6 0 0 1 12 0"}),a.jsx("path",{d:"M14.5 21a4.5 4.5 0 0 1 7.5 0"})]}),"Assignees"]}),a.jsx("span",{className:"detail-value",children:M.assignees.length>0?jn(M.tenantId,M.assignees,"avatar-stack-lg"):""})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:a.jsx("path",{d:"M20 12l-8 8-8-8 8-8 8 8z"})}),"Labels"]}),a.jsx("span",{className:"detail-value detail-value-wrap",children:M.kinds.length>0?M.kinds.map(o=>a.jsx("span",{className:"chip chip-muted",children:o},o)):""})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("path",{d:"M10 14a5 5 0 0 1 0-7l2-2a5 5 0 1 1 7 7l-1 1"}),a.jsx("path",{d:"M14 10a5 5 0 0 1 0 7l-2 2a5 5 0 1 1-7-7l1-1"})]}),"Linked in"]}),a.jsx("span",{className:"detail-value",children:wh.length>0?wh.map(o=>o.title).join(", "):""})]}),a.jsxs("div",{className:"detail-row",children:[a.jsxs("span",{className:"detail-label",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.8",className:"detail-icon",children:[a.jsx("path",{d:"M4 7h16"}),a.jsx("path",{d:"M4 12h10"}),a.jsx("path",{d:"M4 17h13"})]}),"All board"]}),a.jsx("span",{className:"detail-value",children:a.jsxs("span",{className:"detail-toggle-row",children:[a.jsx("button",{type:"button",className:`detail-toggle ${M.excludeFromAll?"":"active"}`,onClick:()=>en({excludeFromAll:!M.excludeFromAll}),disabled:M.sourceType!=="MANUAL","aria-label":"Show in All board",children:a.jsx("span",{className:"detail-toggle-knob"})}),a.jsx("span",{className:"detail-toggle-text",children:M.excludeFromAll?"Hidden":"Shown"})]})})]})]})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Description"}),a.jsx("div",{className:"detail-description-box",children:a.jsx("div",{className:"detail-description rich-display",dir:"ltr",dangerouslySetInnerHTML:{__html:M.description||"No description provided."}})})]}),a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Linked tasks"}),a.jsxs("div",{className:"link-row",children:[a.jsxs("select",{className:"link-select",value:Xs,onChange:o=>kn(o.target.value),children:[a.jsx("option",{value:"",children:"Select task to link"}),be.filter(o=>o.id!==M.id&&!zt.includes(o.id)).map(o=>a.jsx("option",{value:o.id,children:o.title},o.id))]}),a.jsx("button",{type:"button",className:"icon-action create",onClick:Qh,"data-tooltip":"Link erstellen","aria-label":"Link erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"link-list",children:zt.length>0?zt.map(o=>{var d;return a.jsxs("div",{className:"link-chip",children:[a.jsx("span",{className:"link-title",children:((d=xh.get(o))==null?void 0:d.title)??o}),a.jsx("button",{type:"button",className:"link-remove",onClick:()=>Yh(o),children:""})]},o)}):a.jsx("div",{className:"link-empty",children:"No linked tasks."})})]}),a.jsxs("div",{className:"checklist-panel",children:[a.jsx("div",{className:"section-title",children:"Checklist"}),a.jsxs("div",{className:"checklist-input-row",children:[a.jsx("input",{className:"checklist-input",type:"text",value:Cl,onChange:o=>xn(o.target.value),placeholder:"Add checklist item"}),a.jsx("button",{type:"button",className:"icon-action create",onClick:qh,"data-tooltip":"Checklist erstellen","aria-label":"Checklist erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"checklist-list",children:er.length>0?er.map(o=>a.jsxs("label",{className:"checklist-item",children:[a.jsx("input",{type:"checkbox",checked:o.done,onChange:()=>Gh(o.id)}),a.jsx("span",{className:o.done?"checklist-text checklist-done":"checklist-text",children:o.text}),a.jsx("button",{type:"button",className:"delete-btn",onClick:()=>Jh(o.id),children:"Remove"})]},o.id)):a.jsx("div",{className:"checklist-empty",children:"No checklist items."})})]}),a.jsxs("div",{className:"detail-tabs",style:{"--active-index":s==="comments"?0:s==="attachments"?1:2},children:[a.jsx("button",{className:`detail-tab ${s==="comments"?"active":""}`,onClick:()=>i("comments"),children:"Comments"}),a.jsx("button",{className:`detail-tab ${s==="attachments"?"active":""}`,onClick:()=>i("attachments"),children:"Attachments"}),a.jsx("button",{className:`detail-tab ${s==="activity"?"active":""}`,onClick:()=>i("activity"),children:"Activity"})]}),s==="comments"&&a.jsxs("div",{className:"comments-panel",children:[a.jsx("div",{className:"section-title",children:"Comments"}),a.jsxs("div",{className:"comment-input-row",children:[a.jsx("div",{className:"comment-avatar",children:_y}),a.jsx("input",{className:"comment-input",type:"text",value:fh,onChange:o=>El(o.target.value),placeholder:"Write a comment"}),a.jsx("button",{type:"button",className:"icon-action create",onClick:qy,"data-tooltip":"Kommentar erstellen","aria-label":"Kommentar erstellen",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",children:[a.jsx("path",{d:"M12 5v14"}),a.jsx("path",{d:"M5 12h14"})]})})]}),a.jsx("div",{className:"comment-list",children:M.comments&&M.comments.length>0?M.comments.map(o=>{const d=$l(M.tenantId,o.createdBy);return a.jsxs("div",{className:"comment-card",children:[d.avatarUrl?a.jsx("img",{className:"comment-avatar comment-avatar-small",src:d.avatarUrl,alt:d.label}):a.jsx("div",{className:"comment-avatar comment-avatar-small",children:d.label.charAt(0).toUpperCase()||"U"}),a.jsxs("div",{className:"comment-body",children:[a.jsxs("div",{className:"comment-meta",children:[a.jsx("span",{className:"comment-author",children:d.label}),a.jsx("span",{className:"comment-time",children:new Date(o.createdAt).toLocaleString()})]}),a.jsx("div",{className:"comment-text",children:o.text})]})]},o.id)}):a.jsx("div",{className:"comment-empty",children:"No comments yet."})})]}),s==="attachments"&&a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Attachments"}),a.jsxs("div",{className:"link-row",children:[a.jsx("input",{className:"link-select",type:"file",multiple:!0,onChange:o=>Xh(o.target.files)}),a.jsx("button",{type:"button",className:"btn btn-secondary btn-compact",onClick:async()=>{if(!(!M||ka.length===0))try{await en({attachmentsToAdd:ka}),Zn([])}catch(o){alert(o.message)}},children:"Upload"})]}),a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:M.attachments&&M.attachments.length>0?M.attachments.map(o=>a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsx("a",{href:o.dataUrl,download:o.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),a.jsx("button",{type:"button",className:"delete-btn",onClick:()=>en({attachmentsToRemove:[o.id]}),children:"Remove"})]})]}),o.type.startsWith("image/")&&a.jsx("img",{src:o.dataUrl,alt:o.name,style:{width:"160px",height:"110px",objectFit:"cover",borderRadius:"0.5rem",border:"1px solid var(--border-color)"},className:"attachment-thumb",onClick:()=>Tl({src:o.dataUrl,name:o.name})})]},o.id)):a.jsx("div",{style:{color:"var(--text-secondary)"},children:"No attachments."})})]}),s==="activity"&&a.jsxs("div",{className:"detail-section",children:[a.jsx("div",{className:"detail-section-title",children:"Activity"}),a.jsx("div",{className:"activity-list",children:M.activityLog&&M.activityLog.length>0?[...M.activityLog].sort((o,d)=>new Date(d.timestamp).getTime()-new Date(o.timestamp).getTime()).map(o=>{const d=$l(M.tenantId,o.actorId);return a.jsxs("div",{className:"activity-item",children:[d.avatarUrl?a.jsx("img",{className:"comment-avatar comment-avatar-small",src:d.avatarUrl,alt:d.label}):a.jsx("div",{className:"comment-avatar comment-avatar-small",children:d.label.charAt(0).toUpperCase()||"U"}),a.jsxs("div",{className:"activity-body",children:[a.jsx("div",{className:"activity-text",children:o.message}),a.jsxs("div",{className:"activity-meta",children:[d.label,"  ",new Date(o.timestamp).toLocaleString()]})]})]},o.id)}):a.jsx("div",{className:"activity-empty",children:"No activity yet."})})]})]}),a.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[M.sourceType==="MANUAL"&&a.jsx("button",{className:"btn btn-secondary btn-delete",onClick:()=>Hy(M.id),children:"Lschen"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>{Qt(!1),yn(null)},children:"Speichern"})]})})]})}),_a&&a.jsx("div",{className:"image-overlay",onClick:()=>Tl(null),children:a.jsxs("div",{className:"image-overlay-content",onClick:o=>o.stopPropagation(),children:[a.jsx("button",{className:"image-overlay-close",onClick:()=>Tl(null),children:""}),a.jsx("img",{src:_a.src,alt:_a.name}),a.jsx("div",{className:"image-overlay-caption",children:_a.name})]})}),Sl&&a.jsx("div",{className:"modal-overlay",children:a.jsxs("div",{className:"modal-content",style:{maxWidth:"720px",height:"100vh",overflowY:"auto",padding:0},children:[a.jsxs("div",{style:{position:"sticky",top:0,background:"var(--bg-secondary)",padding:"1.25rem 1.5rem 0.75rem",zIndex:1,borderBottom:"1px solid var(--border-color)"},children:[a.jsxs("div",{className:"modal-header-row",children:[a.jsx("h2",{style:{marginBottom:0},children:"Edit Task"}),a.jsx("button",{className:"panel-close",onClick:()=>{ga(!1),ya(null),Zn([]),Gs([]),Qs([]),Ys(""),wn([]),xn(""),tr([]),kn("")},"aria-label":"Close",children:""})]}),Z&&a.jsxs("div",{className:"huddle-inline",children:[a.jsx("span",{children:"Editing in"}),a.jsxs("span",{className:"huddle-chip",style:{background:Et(Z,(kf=(xf=ce.find(o=>o.tenantId===Z))==null?void 0:xf.tenant)==null?void 0:kf.name).soft,borderColor:Et(Z,(_f=(jf=ce.find(o=>o.tenantId===Z))==null?void 0:jf.tenant)==null?void 0:_f.name).border,color:Et(Z,(bf=(Sf=ce.find(o=>o.tenantId===Z))==null?void 0:Sf.tenant)==null?void 0:bf.name).text},children:[a.jsx("span",{className:"huddle-dot",style:{background:Et(Z,(Ef=(Nf=ce.find(o=>o.tenantId===Z))==null?void 0:Nf.tenant)==null?void 0:Ef.name).solid}}),ze((Tf=(Cf=ce.find(o=>o.tenantId===Z))==null?void 0:Cf.tenant)==null?void 0:Tf.name)]})]})]}),a.jsxs("form",{onSubmit:Qy,children:[a.jsxs("div",{style:{padding:"1rem 1.5rem 0.5rem"},children:[a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Basics"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Title"}),a.jsx("input",{type:"text",required:!0,value:rt.title,onChange:o=>Ks({...rt,title:o.target.value}),placeholder:"What needs to be done?"})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Huddle"}),a.jsx("select",{value:Z||"",onChange:o=>ch(o.target.value),children:ce.map(o=>{var d;return a.jsx("option",{value:o.tenantId,children:ze((d=o.tenant)==null?void 0:d.name)||o.tenantId},o.id)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Board"}),a.jsx("select",{value:Xn||"",onChange:o=>wa(o.target.value),children:Zs(Z||v).map(o=>a.jsx("option",{value:o.id,children:o.name},o.id))})]}),!ei(Z)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Owner"}),a.jsxs("select",{value:xa||"",onChange:o=>bl(o.target.value||null),children:[a.jsx("option",{value:"",children:"Unassigned"}),Ct(Z).map(o=>{var d,f;return a.jsx("option",{value:o.userId,children:((d=o.user)==null?void 0:d.name)||((f=o.user)==null?void 0:f.email)||o.userId},o.userId)})]})]}),!ei(Z)&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Members"}),a.jsxs("div",{className:"assignee-grid",children:[Ct(Z).map(o=>{var f,k;const d=Br.includes(o.userId);return a.jsxs("label",{className:"assignee-chip",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:E=>{const _=E.target.checked?Br.concat(o.userId):Br.filter(D=>D!==o.userId);Nl(_)}}),a.jsx("span",{children:((f=o.user)==null?void 0:f.name)||((k=o.user)==null?void 0:k.email)||o.userId})]},o.userId)}),Ct(Z).length===0&&a.jsx("div",{className:"empty-state",children:"No members in this huddle yet."})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Description"}),a.jsxs("div",{className:"rich-editor",children:[a.jsxs("div",{className:"rich-toolbar",children:[a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("bold"),children:"B"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("italic"),children:"I"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("underline"),children:"U"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("insertUnorderedList"),children:" List"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("insertOrderedList"),children:"1. List"}),a.jsx("button",{type:"button",className:"rich-button",onMouseDown:o=>o.preventDefault(),onClick:()=>vt("createLink"),children:"Link"})]}),a.jsx("div",{className:"rich-content",contentEditable:!0,dir:"ltr",ref:Ol,onInput:o=>Ks({...rt,description:o.currentTarget.innerHTML}),onPaste:Ih,"data-placeholder":"Optional details..."})]})]})]}),a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Classification"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Art"}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("input",{type:"text",value:hh,onChange:o=>Ys(o.target.value),onKeyDown:o=>Wh(o,"edit"),placeholder:"z.B. Bug, Feature, Idee",list:"kind-suggestions"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Vh,children:"Add"})]}),Js.length>0&&a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Js.map(o=>a.jsxs("span",{style:{border:"1px solid var(--border-color)",borderRadius:"9999px",padding:"0.2rem 0.6rem",fontSize:"0.75rem"},children:[o,a.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1,marginLeft:"0.4rem"},onClick:()=>Kh(o,Qs),children:""})]},o))})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Priority"}),a.jsxs("select",{value:rt.priority,onChange:o=>Ks({...rt,priority:o.target.value}),children:[a.jsx("option",{value:"LOW",children:"Low"}),a.jsx("option",{value:"MEDIUM",children:"Medium"}),a.jsx("option",{value:"HIGH",children:"High"}),a.jsx("option",{value:"CRITICAL",children:"Critical"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Deadline"}),a.jsx("input",{type:"date",value:rt.dueDate,onChange:o=>Ks({...rt,dueDate:o.target.value})})]})]}),a.jsxs("div",{style:{border:"1px solid var(--border-color)",borderRadius:"0.75rem",padding:"1rem"},children:[a.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:"0.75rem"},children:"Attachments"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Files"}),a.jsx("input",{type:"file",multiple:!0,onChange:o=>Xh(o.target.files)}),a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[...oy,...ka].map(o=>a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:o.name}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsx("a",{href:o.dataUrl,download:o.name,style:{fontSize:"0.85rem",color:"var(--accent-primary)"},children:"Download"}),a.jsx("button",{type:"button",className:"delete-btn",style:{opacity:1},onClick:()=>Jy(o.id),children:"Remove"})]})]},o.id))})]})]})]}),a.jsx("div",{style:{position:"sticky",bottom:0,background:"var(--bg-secondary)",padding:"0.75rem 1.5rem 1.25rem",borderTop:"1px solid var(--border-color)",marginTop:"2rem"},children:a.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{ga(!1),ya(null),Zn([]),Gs([]),Qs([]),Ys(""),wn([]),xn(""),tr([]),kn("")},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})})]})]})})]}):a.jsx("div",{style:{padding:"2rem"},children:"Loading your workspace..."}):a.jsx("div",{className:"auth-screen",children:a.jsxs("div",{className:"auth-card",children:[a.jsxs("div",{className:"auth-header",children:[a.jsx("h1",{children:"Kanbax"}),a.jsx("p",{children:"Sign in to manage your boards, huddles, and tasks."})]}),a.jsxs("div",{className:"auth-tabs",children:[a.jsx("button",{className:se==="login"?"auth-tab active":"auth-tab",onClick:()=>mn("login"),children:"Login"}),a.jsx("button",{className:se==="signup"?"auth-tab active":"auth-tab",onClick:()=>mn("signup"),children:"Sign up"}),a.jsx("button",{className:se==="magic"?"auth-tab active":"auth-tab",onClick:()=>mn("magic"),children:"Magic link"})]}),a.jsxs("form",{className:"auth-form",onSubmit:Cy,children:[a.jsxs("label",{children:["Email",a.jsx("input",{type:"email",value:pt,onChange:o=>Rs(o.target.value),placeholder:"you@company.com",required:!0})]}),se!=="magic"&&a.jsxs("label",{children:["Password",a.jsx("input",{type:"password",value:St,onChange:o=>_r(o.target.value),placeholder:"",required:!0})]}),a.jsx("button",{className:"btn btn-primary",type:"submit",disabled:Hg,children:se==="signup"?"Create account":se==="magic"?"Send magic link":"Sign in"}),Ad&&a.jsx("div",{className:"auth-message",children:Ad}),Rd&&a.jsx("div",{className:"auth-error",children:Rd})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"or"})}),a.jsxs("div",{className:"auth-oauth",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>Oh("google"),children:"Continue with Google"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>Oh("github"),children:"Continue with GitHub"})]})]})})};Tc.createRoot(document.getElementById("root")).render(a.jsx(Cc.StrictMode,{children:a.jsx(d_,{})}));
